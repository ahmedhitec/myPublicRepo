!function(e,t,i,o,n,a){"use strict";function r(e){return a.getMessage("APEXIR_"+e)}function l(e){var t=r(e),i=[t].concat(Array.prototype.slice.call(arguments,1));return a.formatNoEscape.apply(this,i)}function s(e){return"#"+t.escapeCSS(e)}var c="a-IRR",_="REPORT",h="PIVOT",u="action",d={BUTTON:{CANCEL:r("CANCEL"),DELETE:r("DELETE"),APPLY:r("APPLY"),SEND:r("SEND")},DIALOG_TITLE:{SELECT_COLUMNS:r("SELECT_COLUMNS"),FILTER:r("FILTER"),HIGHLIGHT:r("HIGHLIGHT"),SORT:r("SORT"),CONTROL_BREAK:r("CONTROL_BREAK"),COMPUTATION:r("COMPUTE"),AGGREGATE:r("AGGREGATE"),CHART:r("CHART"),GROUP_BY:r("GROUP_BY"),GROUP_BY_SORT:r("GROUP_BY_SORT"),PIVOT:r("PIVOT"),PIVOT_SORT:r("PIVOT_SORT"),FLASHBACK:r("FLASHBACK"),SAVE_REPORT:r("SAVE_REPORT"),RENAME_REPORT:r("RENAME_REPORT"),DELETE_REPORT:r("DELETE_REPORT"),SAVE_DEFAULT_REPORT:r("SAVE_DEFAULT_REPORT"),RENAME_DEFAULT_REPORT:r("RENAME_DEFAULT_REPORT"),DELETE_DEFAULT_REPORT:r("DELETE_DEFAULT_REPORT"),RESET:r("RESET"),DOWNLOAD:r("DOWNLOAD"),SUBSCRIPTION:r("SUBSCRIPTION")}};e.widget("apex.wsInteractiveReport",{version:"18.1",widgetEventPrefix:"wsinteractivereport",suppressUpdate:!1,ajaxBusy:!1,lastFunction:null,idPrefix:null,currentAction:null,currentControl:null,currentColumnId:null,lastColumnId:null,computationId:null,reportId:null,worksheetId:null,region$:null,dialogDrop$:null,tempReturnElement$:null,viewMode:_,options:{regionId:null,ajaxIdentifier:null,toolbar:!0,searchField:!0,columnSearch:!0,rowsPerPageSelect:!1,reportsSelect:!0,actionsMenu:!0,reportViewMode:_,selectColumns:!0,filter:!0,rowsPerPage:!0,currentRowsPerPage:50,maxRowsPerPage:null,maxRowCount:null,sort:!0,controlBreak:!0,highlight:!0,compute:!0,aggregate:!0,chart:!0,groupBy:!0,pivot:!0,flashback:!0,saveReport:!0,saveDefaultReport:!1,reset:!0,help:!0,helpLink:"",download:!0,subscription:!0,pagination:!0,detailLink:!1,isControlPanelCollapsed:!1,fixedHeader:"PAGE",fixedHeaderMaxHeight:null,pageItems:null,actionsMenuStructure:"IG",beforeRefresh:null,afterRefresh:null},_create:function(){var t=this.options.regionId,i=this,o=e(s(t),apex.gPageContext$),n=e(s(t+"_ir"),apex.gPageContext$);0===o.length&&(o=n.wrap('<div id="'+t+'"></div>')),this.idPrefix=this.options.regionId,this.reportId=this._getElement("report_id").val(),this.worksheetId=this._getElement("worksheet_id").val(),this.viewMode=this._getElement("view_mode").val(),this.region$=o,this.dialogDrop$=this._getElement("dialog_js"),this._getElement("worksheet_region").addClass(c),this._initOnCreate(),this._on(this.region$,{apexrefresh:function(e){this._search(),e.stopPropagation()}}),apex.region.create(t,{type:"InteractiveReport",refresh:function(){i.refresh()},widget:function(){return i.element}})},_destroy:function(){this._getElement("worksheet_region").removeClass(c),apex.region.destroy(this.options.regionId)},_setOption:function(e,t){this._super(e,t)},_action:function(t,i){var o=e.extend({widgetMod:"ACTION",widgetAction:t},i);this.currentAction=t,this._get(o)},_aggregateClear:function(e){this._action("DELETE_AGGREGATE",{id:e})},_aggregateControl:function(){var t=this._getDialogElement("aggregate_by").val(),i=-1!==e.inArray(t,["COUNT","COUNT_DISTINCT"]);this._getDialogElement("all_columns_container").toggle(i),this._getDialogElement("number_columns_container").toggle(!i)},_aggregateSave:function(){var t,i=this._getDialogElement("aggregate_by").val(),o=this._getDialogElement("aggregation").val();t=-1!==e.inArray(i,["COUNT","COUNT_DISTINCT"])?this._getDialogElement("all_columns").val():this._getDialogElement("number_columns").val(),this._action("SAVE_AGGREGATE",{id:o,value:i,x05:t})},_chartClear:function(){this.options.reportViewMode=_,this._action("DELETE_CHART")},_chartControl:function(){e("td.a-IRR-chart-attr-not-for-pie",this._getElement("dialog_js")).toggle(!this._getDialogElement("chart_type_2").prop("checked"))},_chartSave:function(){this.suppressUpdate=!0,this._action("SAVE_CHART",{f01:this._utilGetFormElValues([this._getId("chart_type"),this._getId("chart_label"),this._getId("chart_value"),this._getId("aggregate_by"),this._getId("label_axis_title"),this._getId("value_axis_title"),this._getId("sort"),this._getId("orientation")])})},_chartView:function(){this._action("VIEW_CHART")},_columnOrder:function(e){var t;"ASC"===e||"DESC"===e?this._action("COLUMN_ORDER",{f01:this.lastColumnId,f02:e}):(t=this._utilGetFormElAttributes(),this._action("SORT",{f01:t.ids,f02:t.values}))},_columnDisplay:function(){var e=[];this._getDialogElement("shuttle_right").find("option").each((function(){e.push(this.value)})),this._action("SET_COLUMNS",{f01:e})},_columnHelp:function(){this._controlsGet("INFO",this.currentColumnId)},_columnHide:function(e){var t;t=e||this.currentColumnId,this._action("HIDE",{id:t})},_columnSearchShow:function(e){var t,i=[],o=[],n=this,a=JSON.parse(e).row;for(t=0;t<a.length;t++)"0"===a[t].C?(i.push({type:u,label:a[t].D,value:a[t].R,action:function(){n._getElement("column_search_root").removeClass("is-active"),n._getElement("column_search_current_column").val(""),n._getElement("search_field").attr({title:"Search",placeholder:""})}}),i.push({type:"separator"})):o.push({label:a[t].D,value:a[t].R});i.push({type:"radioGroup",get:function(){return n._getElement("column_search_current_column").val()},set:function(e){var i,o,a=this.choices;for(t=0;t<a.length;t++)if(a[t].value===e){i=l("SEARCH_COLUMN",a[t].label),o=a[t].value,n._getElement("column_search_root").addClass("is-active"),n._getElement("column_search_current_column").val(o),n._getElement("search_field").attr({title:i,placeholder:i});break}},choices:o}),this.searchMenu.items=i,this.searchMenuCallback(),this.searchMenuCallback=null,this.searchMenu=null},_computationClear:function(){this._action("DELETE_COMPUTATION",{id:this._getDialogElement("comp_id").val()})},_computationSave:function(){$f_get_emptys([this._getId("column_heading"),this._getId("computation_expr")],"error","")||(this.suppressUpdate=!0,this._action("SAVE_COMPUTATION",{id:this._getDialogElement("comp_id").val(),value:this._getDialogElement("column_heading").val(),x06:this._getDialogElement("format_mask").val(),x07:this._getDialogElement("computation_expr").val()}))},_computationShow:function(e){var t;t=e||this.computationId,this._controlsGet("SHOW_COMPUTATION",t),this.computationId=null},_controlBreakOn:function(e){e&&(this.currentColumnId=e),this._action("BREAK",{id:this.currentColumnId})},_controlBreakSave:function(){var e,t=[];for(e=1;e<7;e++)t.push(this._getId("column")+"_0"+e),t.push(this._getId("enable")+"_0"+e);this._action("SAVE_BREAK",{f01:t,f02:this._utilGetFormElValues(t)})},_controlBreakToggle:function(e,t){this._action("BREAK_TOGGLE",{id:e,value:t})},_controlsFormatMask:function(t){this.suppressUpdate=!0,this.tempReturnElement$=e(s(t)),this._controlsGet("FORMAT_MASK_LOV")},_controlsGet:function(e,t){this._dialogReset(),this.currentAction="CONTROL",this.currentControl=e,t&&(this.currentColumnId=t),this._get({widgetMod:"CONTROL",widgetAction:e,id:t})},_controlsNarrow:function(t){this.suppressUpdate=!0,this.tempReturnElement$=e(s(t)),this._controlsGet("NARROW",this._getDialogElement("column_name").val())},_controlsRow:function(e){this._controlsGet("SHOW_DETAIL",e)},_dialogCheck:function(t,i){var o=".a-IRR-sortWidget",n=this._dialogReset;t&&(o=t),i&&(n=i),this._on(this.document,{click:function(t){e(t.target).closest(o).length||n.call(this)}})},_dialogColorPicker:function(t){var i=this;e(t).each((function(){var t=e(this).ColorPicker({eventName:"xxx",onSubmit:function(t,i,o,n){e(n).val("#"+i.toUpperCase()).trigger("change").ColorPickerHide()},onBeforeShow:function(){e(this).ColorPickerSetColor(this.value)},onShow:function(t){return e(t).fadeIn("fast"),!1},onHide:function(t){return e(t).fadeOut("fast"),!1}}).ColorPickerHide();i._on(t,{keyup:function(e){t.ColorPickerSetColor(e.target.value)},blur:function(){t.ColorPickerHide()},change:function(t){var i=t.target;i.value=i.value.toUpperCase(),e(s(i.id+"_preview")).css("background",i.value)}}),i._on(s(this.id+"_picker"),{click:function(e){t.ColorPickerShow(),e.preventDefault()}}),e(s(this.id+"_preview")).css("background",this.value)}))},_dialogComp:function(e,t){var i=!isNaN(t)||"."===t;html_ReturnToTextSelection(t+"",e,i)},_dialogCurrentOperator:function(){var t=this._getDialogElement("column_name"),i=e(t.find("option")[t.prop("selectedIndex")]).attr("class");return this._getDialogElement(i+"_OPT")},_dialogColumnCheck:function(){var t=this._dialogCurrentOperator();e(t).siblings().hide().end().show(),this._dialogOperatorCheck(t)},_dialogOpen:function(e){var t,i,o,n,a,r=this;function l(e,t,i,o,n){var l,s;l=i||d.BUTTON.APPLY,o&&(s="ui-button--hot"),a.push({text:l,class:s,click:function(){e?t.call(r,e):t.call(r),n&&r._getElement("dialog_js").dialog("close")}})}switch(a=[{text:d.BUTTON.CANCEL,click:function(){r._getElement("dialog_js").dialog("close")}}],r.currentControl){case"SHOW_COLUMN":i=d.DIALOG_TITLE.SELECT_COLUMNS,l(null,r._columnDisplay,null,!0,!0);break;case"SHOW_FILTER":i=d.DIALOG_TITLE.FILTER,(o=r._getDialogElement("filter_id").val())&&l(o,r._filterDelete,d.BUTTON.DELETE,!1,!0),l(o,r._filterSave,null,!0,!1);break;case"SHOW_HIGHLIGHT":i=d.DIALOG_TITLE.HIGHLIGHT,(o=r._getDialogElement("highlight_id").val())&&l(o,r._highlightClear,d.BUTTON.DELETE,!1,!0),l(o,r._highlightSave,null,!0,!1);break;case"SHOW_ORDERING":i=d.DIALOG_TITLE.SORT,l(this,r._columnOrder,null,!0,!0);break;case"SHOW_CTRL_BREAK":i=d.DIALOG_TITLE.CONTROL_BREAK,l(null,r._controlBreakSave,null,!0,!0);break;case"SHOW_COMPUTATION":i=d.DIALOG_TITLE.COMPUTATION,(o=r._getDialogElement("comp_id").val())&&l(null,r._computationClear,d.BUTTON.DELETE,!1,!0),l(null,r._computationSave,null,!0,!1);break;case"SHOW_AGGREGATE":i=d.DIALOG_TITLE.AGGREGATE,(o=r._getDialogElement("aggregation").val())&&l(o,r._aggregateClear,d.BUTTON.DELETE,!1,!0),l(null,r._aggregateSave,null,!0,!0);break;case"SHOW_CHART":i=d.DIALOG_TITLE.CHART,(o=r._getDialogElement("chart_type_hidden").val())&&l(null,r._chartClear,d.BUTTON.DELETE,!1,!0),l(null,r._chartSave,null,!0,!1);break;case"SHOW_GROUP_BY":i=d.DIALOG_TITLE.GROUP_BY,(o=r._getDialogElement("group_by_id").val())&&l(null,r._groupByRemove,d.BUTTON.DELETE,!1,!0),l(null,r._groupBySave,null,!0,!1);break;case"SHOW_GROUP_BY_SORT":i=d.DIALOG_TITLE.GROUP_BY_SORT,l(this,r._groupBySort,null,!0,!0);break;case"SHOW_PIVOT":i=d.DIALOG_TITLE.PIVOT,(o=r._getDialogElement("pivot_id").val())&&l(null,r._pivotRemove,d.BUTTON.DELETE,!1,!0),l(null,r._pivotSave,null,!0,!1);break;case"SHOW_PIVOT_SORT":i=d.DIALOG_TITLE.PIVOT_SORT,l(this,r._pivotSort,null,!0,!0);break;case"SHOW_FLASHBACK":i=d.DIALOG_TITLE.FLASHBACK,(o=r._getDialogElement("flashback_time").val())&&l(null,r._flashbackClear,d.BUTTON.DELETE,!1,!0),l(null,r._flashbackSave,null,!0,!1);break;case"SAVE_REPORT":i=d.DIALOG_TITLE.SAVE_REPORT,l(null,r._save,null,!0,!1);break;case"SHOW_RENAME":i=d.DIALOG_TITLE.RENAME_REPORT,l(r.reportId,r._save,null,!0,!1);break;case"SHOW_DELETE":i=d.DIALOG_TITLE.DELETE_REPORT,l(null,r._remove,null,!0,!0);break;case"SHOW_SAVE_DEFAULT":i=d.DIALOG_TITLE.SAVE_DEFAULT_REPORT,l(null,r._saveDefault,null,!0,!1);break;case"SHOW_RENAME_DEFAULT":i=d.DIALOG_TITLE.RENAME_DEFAULT_REPORT,l("RENAME_DEFAULT",r._saveDefault,null,!0,!1);break;case"SHOW_DELETE_DEFAULT":i=d.DIALOG_TITLE.DELETE_DEFAULT_REPORT,l("DELETE_DEFAULT",r._remove,null,!0,!0);break;case"SHOW_RESET":i=d.DIALOG_TITLE.RESET,l(null,r._reset,null,!0,!0);break;case"SHOW_DOWNLOAD":i=d.DIALOG_TITLE.DOWNLOAD;break;case"SHOW_NOTIFY":i=d.DIALOG_TITLE.SUBSCRIPTION,o=r._getDialogElement("notify_id").val(),n=r._getDialogElement("email_not_configured").text(),o&&l(null,r._notifyClear,d.BUTTON.DELETE,!1,!0),n||l(null,r._notifySave,null,!0,!1)}t=this._getElement("dialog_js").dialog({modal:!0,dialogClass:"a-IRR-dialog",width:"auto",height:"auto",minWidth:"360",title:i,buttons:a,position:{my:"left+10 top+10",at:"left top",of:this._getElement("content")},close:function(){r._off(t),t.dialog("destroy")}}),e&&e.call()},_dialogColumnHandlers:function(){this._on(this._getDialogElement("column_name"),{change:function(){this._dialogColumnCheck()}}),this._on(this._getElement("dialog_js"),{"change select.a-IRR-operator":function(t){this._dialogOperatorCheck(e(t.target))},"click button.a-Button--menu":function(t){var i=e(t.currentTarget).data("picker-for");this._controlsNarrow(i)}})},_dialogOperatorCheck:function(t){var i,o=[],n=t.val(),a=t.data("column-type"),r=["is in the last","is not in the last","is in the next","is not in the next"];o[0]=$x(this._getId("expression")).parentNode,o[1]=$x(this._getId("expression2")).parentNode,o[2]=$x(this._getId("expression3")).parentNode,o[3]=$x(this._getId("between_from")).parentNode,o[4]=$x(this._getId("between_to")).parentNode,$x_Show_Hide(this._getId("expression_icon_link"),o),"is null"===n||"is not null"===n?this._getDialogElement("expression_label").hide():(this._getDialogElement("expression_label").show(),"DATE"===a&&-1===e.inArray(n,r)?($x_Show(o[3]),i=this._getDialogElement("column_name").find(":selected").data("format-mask"),this._setDateFieldFormatMask(this._getDialogElement("between_from"),i),"between"===n&&($x_Show(o[4]),this._setDateFieldFormatMask(this._getDialogElement("between_to"),i))):($x_Show(o[0]),"between"===n&&$x_Show(o[1]),e.inArray(n,r)>-1&&$x_Show_Hide(o[2],this._getId("expression_icon_link"))))},_dialogReset:function(){this.suppressUpdate||(this.currentColumnId=null,this.computationId=null,this._off(this.document,"click"))},_dialogUtilExpType:function(){var e={};return e.col=$x(this._getId("column_name")),e.col_type=e.col.options[e.col.selectedIndex].className,e.col_opt=$x(this._getId(e.col_type+"_OPT")),e.col_opt_val=$v(e.col_opt),"DATE"===e.col_type&&"is in the last"!==e.col_opt_val&&"is not in the last"!==e.col_opt_val&&"is in the next"!==e.col_opt_val&&"is not in the next"!==e.col_opt_val?e.form_items=[this._getId("between_from"),this._getId("between_to")]:e.form_items=[this._getId("expression"),this._getId("expression2")],e},_dialogValidate:function(){var e=[],t=this._dialogUtilExpType();switch(!0){case"between"===t.col_opt_val:e=[t.form_items[0],t.form_items[1]];break;case"is null"===t.col_opt_val||"is not null"===t.col_opt_val:e=[];break;case"is in the last"===t.col_opt_val||"is not in the last"===t.col_opt_val||"is in the next"===t.col_opt_val||"is not in the next"===t.col_opt_val:e=[t.form_items[0],this._getId("expression3")];break;default:e=[t.form_items[0]]}return!$f_get_emptys(e,"error","")&&t},_emailSend:function(){var e,t=[this._getId("email_to")];$f_get_emptys(t,"error","")||(e=[this._getId("email_to"),this._getId("email_cc"),this._getId("email_bcc"),this._getId("email_subject"),this._getId("email_body")],this._action("SEND_EMAIL",{f01:e,f02:this._utilGetFormElValues(e)}),this._getElement("dialog_js").dialog("close"))},_emailShow:function(){var e,t=this,i=this._getElement("dialog_js"),o=this._getDialogElement("email"),n=this._getDialogElement("email_button");o.show(),n.show(),n.is(":visible")&&(e=[{text:d.BUTTON.CANCEL,click:function(){i.dialog("close")}},{text:d.BUTTON.SEND,class:"ui-button--hot",click:function(){t._emailSend()}}],i.dialog("option","buttons",e))},_filterDelete:function(e){this._action("FILTER_DELETE",{id:e})},_filterSave:function(e){var t,i,o="ADD",n=this._getId("filter_type");if(e?(this.currentColumnId=e,o="UPDATE"):e=this._getDialogElement("column_name").val(),"COLUMN"===$v(n)){if(!(t=this._dialogValidate()))return;i=[n,t.col.id,t.col_opt.id,t.form_items[0],t.form_items[1],this._getId("expression3")]}else i=[n,this._getId("filter_expr"),this._getId("filter_name")];this.suppressUpdate=!0,this._action("FILTER",{widgetActionMod:o,f01:this._utilGetFormElValues(i),id:e})},_flashbackSave:function(){this.suppressUpdate=!0,this._action("FLASHBACK_SET",{value:this._getDialogElement("flashback_time").val()})},_filterToggle:function(e,t){this._action("FILTER_TOGGLE",{id:e,value:t})},_flashbackClear:function(){this._action("FLASHBACK_CLEAR")},_flashbackToggle:function(){this._action("FLASHBACK_TOGGLE")},_functionControl:function(t){var i,o,n;t&&(o=(i=t.id).substr(i.length-2),n=-1!==e.inArray(e(t).val(),["SUM","AVG","MAX","MIN","MEDIAN","RATIO_TO_REPORT_SUM"]),this._getDialogElement("number_columns_container_"+o).toggle(n),this._getDialogElement("all_columns_container_"+o).toggle(!n))},_get:function(t){var i,n,a=this,r=!1;"INFO"!==t.widgetAction&&this._sortWidgetHide(),t.widgetMod&&!this.suppressUpdate&&(-1!==e.inArray(t.widgetMod,["ACTION","PULL"])||"CONTROL"===t.widgetMod&&t.widgetAction&&"SHOW_DETAIL"===t.widgetAction)&&(r=!0),delete(i=e.extend({p_widget_name:"worksheet",p_widget_mod:t.widgetMod,p_widget_action:t.widgetAction,p_widget_action_mod:t.widgetActionMod,p_widget_num_return:a.options.currentRowsPerPage,x01:a.worksheetId,x02:a.reportId,x03:t.id,x04:t.value,pageItems:this.options.pageItems},t)).widgetMod,delete i.widgetAction,delete i.widgetActionMod,delete i.id,delete i.value,"RESET"!==i.p_widget_action&&"REPORT_CHANGED"!==i.p_widget_action||delete i.p_widget_num_return,i.p_widget_action_mod||delete i.p_widget_action_mod,n={dataType:"html",refreshObject:r?this.region$:null,loadingIndicator:a._getElement("worksheet_region"),loadingIndicatorPosition:"centered",success:function(t){var i,o,n,r,l,s;if("CONTROL"===a.currentAction){if("SORT_WIDGET"===a.currentControl)a._sortWidgetShow(t);else if("INFO"===a.currentControl)a._helpWidgetShow(t);else if("NARROW"===a.currentControl)i=a._inlinePicker("NARROW",t);else if("FORMAT_MASK_LOV"===a.currentControl)i=a._inlinePicker("FORMAT_MASK_LOV",t);else if("SEARCH_COLUMN"===a.currentControl)a._columnSearchShow(t);else if("SHOW_DETAIL"===a.currentControl)a._singleRowViewShow(t);else{switch(a.currentControl){case"SHOW_FILTER":n=function(){a._dialogColumnCheck(),a._dialogColumnHandlers(),a._on(a._getDialogElement("filter_type"),{"click input":function(e){var t="COLUMN"===e.target.value;a._getDialogElement("column_filter").toggle(t),a._getDialogElement("row_filter").toggle(!t)}}),a._on(a._getDialogElement("filter_expr_clear"),{click:function(e){a._getDialogElement("filter_expr").val(""),e.preventDefault()}}),a._on(a._getDialogElement("row_filter_columns"),{"click tr.a-IRR-row-filter-column":function(t){var i=e(t.currentTarget).data("column-id");a._dialogComp(a._getId("filter_expr"),i),t.preventDefault()}}),a._on(a._getDialogElement("row_filter_operators"),{"click tr.a-IRR-row-filter-operator":function(t){var i=e(t.currentTarget).data("operator");a._dialogComp(a._getId("filter_expr"),i),t.preventDefault()}})};break;case"SHOW_HIGHLIGHT":n=function(){a._dialogColumnCheck(),a._dialogColumnHandlers(),a._dialogColorPicker(a._getIdSelector("bg_color")+","+a._getIdSelector("font_color"))};break;case"SHOW_CHART":n=function(){a._chartControl(),a._on(a._getDialogElement("chart_type"),{"click input":function(){a._chartControl()}})};break;case"SHOW_COMPUTATION":n=function(){a._on(a._getDialogElement("comp_id"),{change:function(t){a._computationShow(e(t.currentTarget).val())}}),a._on(a._getDialogElement("format_mask_picker"),{click:function(e){a._controlsFormatMask(a._getId("format_mask")),e.preventDefault()}}),a._on(a._getDialogElement("computation_expr_clear"),{click:function(e){a._getDialogElement("computation_expr").val(""),e.preventDefault()}}),a._on(a._getDialogElement("computation_columns"),{"click tr.a-IRR-computation-column":function(t){var i=e(t.currentTarget).data("column-id");a._dialogComp(a._getId("computation_expr"),i),t.preventDefault()}}),a._on(a._getDialogElement("computation_keypad"),{"click td.a-IRR-key":function(t){var i=e(t.currentTarget).data("key");a._dialogComp(a._getId("computation_expr"),i),t.preventDefault()}}),a._on(a._getDialogElement("computation_functions"),{"click tr.a-IRR-computation-function":function(t){var i=e(t.currentTarget).data("function");a._dialogComp(a._getId("computation_expr"),i),t.preventDefault()}})};break;case"SHOW_COLUMN":n=function(){if(a.g_Shuttlep_v01=null,!e)var e=[];e[2]=$x(a._getId("shuttle_left")),e[1]=$x(a._getId("shuttle_right")),window.g_Shuttlep_v01=new dhtml_ShuttleObject(e[2],e[1])};break;case"SAVE_REPORT":n=function(){a._on(a._getDialogElement("save_option"),{change:function(e){a._controlsGet(e.target.value)}})};break;case"SHOW_SAVE_DEFAULT":case"SHOW_RENAME_DEFAULT":n=function(){a._on(a._getDialogElement("default_type"),{"click input":function(e){this._saveDefaultTypeCheck(e.target.value)}}),a._saveDefaultTypeCheck($v(a._getId("default_type")))};break;case"SHOW_AGGREGATE":n=function(){a._on(a._getDialogElement("aggregation"),{change:function(t){this._controlsGet("SHOW_AGGREGATE",e(t.currentTarget).val())}}),a._on(a._getDialogElement("aggregate_by"),{change:function(){this._aggregateControl()}})};break;case"SHOW_DOWNLOAD":n=function(){a._on(a._getDialogElement("download_EMAIL"),{click:function(e){a._emailShow(),e.preventDefault()}})};break;case"SHOW_GROUP_BY":n=function(){a._on(a._getDialogElement("add_column"),{click:function(e){this._utilAddMoreColumn(this._groupByMaxValue,"a-IRR-group-by-column"),e.preventDefault()}}),a._on(a._getDialogElement("group_by_functions"),{"change select.a-IRR-function":function(e){this._functionControl(e.target)},"click a.a-IRR-format-mask-picker":function(t){a._controlsFormatMask(e(t.currentTarget).data("picker-for")),t.preventDefault()}}),a._on(a._getDialogElement("add_function"),{click:function(e){this._utilAddMoreFunction(this._groupByMaxValue),e.preventDefault()}})};break;case"SHOW_PIVOT":n=function(){a._on(a._getDialogElement("add_pivot_column"),{click:function(e){this._utilAddMoreColumn(this._pivotMaxValue,"a-IRR-pivot-column"),e.preventDefault()}}),a._on(a._getDialogElement("add_row_column"),{click:function(e){this._utilAddMoreColumn(this._pivotMaxValue,"a-IRR-row-column"),e.preventDefault()}}),a._on(a._getDialogElement("pivot_functions"),{"change select.a-IRR-function":function(e){this._functionControl(e.target)},"click a.a-IRR-format-mask-picker":function(t){a._controlsFormatMask(e(t.currentTarget).data("picker-for")),t.preventDefault()}}),a._on(a._getDialogElement("add_function"),{click:function(e){this._utilAddMoreFunction(this._pivotMaxValue),e.preventDefault()}})}}a._getElement("dialog_js").html(t),a._dialogOpen(n)}void 0===i&&(i=e(":input:visible",a._getElement("dialog_js"))),i.length>0&&i[0].focus()}else a.suppressUpdate?(o=["SAVE_NOTIFY","SAVE_COMPUTATION","FLASHBACK_SET","SAVE_HIGHLIGHT","FILTER","GROUP_BY_SAVE","SAVE_PIVOT","SAVE_CHART"],e.inArray(a.currentAction,o)>-1&&(a.lastFunction=function(){a._validAction(t)}),a.ajaxBusy=!1,a.suppressUpdate=!1,a.currentAction=null):((r=e($u_js_temp_drop())).html(t),l=r.find(a._getIdSelector("toolbar_controls")),s=r.find(a._getIdSelector("content")),a._getElement("toolbar_controls",a.element).replaceWith(l),a._getElement("content",a.element).replaceWith(s),a.options.currentRowsPerPage=1*a._getElement("row_select").val(),a.viewMode=a._getElement("view_mode").val(),a._initToolbar(),a._initControlPanel(),a.currentAction=null,a.currentControl=null,a.reportId=a._getElement("report_id").val(),a._singleRowViewHide(),a._getElement("full_view").show(),r.remove(),a._initFixedHeader(!0),e(":focus").length||(i=a.currentElementId?e("#"+a.currentElementId):a.element.find(":focusable")).length>0&&i[0].focus())},complete:function(){a.lastFunction&&(a.lastFunction(),a.lastFunction=!1),a.ajaxBusy=!1,"SEARCH_COLUMN"===a.currentControl&&a.searchMenuCallback&&(a.searchMenuCallback(!1),a.searchMenuCallback=null,a.searchMenu=null)}},o.plugin(this.options.ajaxIdentifier,i,n)||(this.ajaxBusy=!1)},_getId:function(e){return this.idPrefix+"_"+e},_getIdSelector:function(e){return s(this._getId(e))},_getElement:function(t,i){var o;return o=i||("dialog_js"===t||/^sort_widget.*$/.test(t)?apex.gPageContext$:this.element),e(this._getIdSelector(t),o)},_getDialogElement:function(e){return this._getElement(e,this._getElement("dialog_js"))},_groupByMaxValue:8,_groupByRemove:function(){this._action("GROUP_BY_REMOVE")},_groupBySave:function(){var e=this._utilGetFormElAttributes();this.suppressUpdate=!0,this._action("GROUP_BY_SAVE",{f01:e.ids,f02:e.values})},_groupBySort:function(e){var t,i=this._getDialogElement("group_by_id").val();"ASC"===e||"DESC"===e?(this.lastColumnId=e.id,this._action("GROUP_BY_COLUMN_SORT",{id:i,f01:this.lastColumnId,f02:e})):(t=this._utilGetFormElAttributes(),this._action("GROUP_BY_SORT",{id:i,f01:t.ids,f02:t.values}))},_groupByView:function(){this._action("VIEW_GROUP_BY")},_helpWidgetShow:function(e){this._getElement("sort_widget_help").html(e).show(),this._getElement("sort_widget_action_help").find("button.a-IRR-sortWidget-button").addClass("is-active"),this.lastColumnId=this.currentColumnId,this._dialogCheck(null,this._sortWidgetHide)},_highlightClear:function(e){var t;t=e||$x("HIGHLIGHT_ID").value,this._action("CLEAR_HIGHLIGHT",{id:t})},_highlightSave:function(){var e,t=this._dialogValidate();t&&(this.suppressUpdate=!0,e=this._utilGetFormElAttributes(),this._action("SAVE_HIGHLIGHT",{f01:e.ids,f02:e.values}),t=null)},_highlightToggle:function(e,t){this._action("TOGGLE_HIGHLIGHT",{id:e,value:t})},_initControlPanel:function(){var t=this;this._on(this._getElement("control_panel"),{"click a.a-IRR-controlsLabel":function(i){var o=e(i.currentTarget);switch(o.data("setting")){case"filter":this._controlsGet("SHOW_FILTER",o.data("filter-id"));break;case"report":this._controlsGet("SHOW_RENAME");break;case"report-default":this._controlsGet("SHOW_RENAME_DEFAULT");break;case"highlight":this._controlsGet("SHOW_HIGHLIGHT",o.data("highlight-id"));break;case"break":this._controlsGet("SHOW_CTRL_BREAK");break;case"chart":this._controlsGet("SHOW_CHART");break;case"group_by":this._controlsGet("SHOW_GROUP_BY");break;case"pivot":this._controlsGet("SHOW_PIVOT");break;case"flashback":t._controlsGet("SHOW_FLASHBACK")}i.preventDefault()},"click a.a-IRR-reportSummary-label":function(i){var o=e(i.currentTarget);switch(o.data("setting")){case"filter":this._controlsGet("SHOW_FILTER",o.data("filter-id"));break;case"report":this._controlsGet("SHOW_RENAME");break;case"report-default":this._controlsGet("SHOW_RENAME_DEFAULT");break;case"highlight":this._controlsGet("SHOW_HIGHLIGHT",o.data("highlight-id"));break;case"break":this._controlsGet("SHOW_CTRL_BREAK");break;case"chart":this._controlsGet("SHOW_CHART");break;case"group-by":this._controlsGet("SHOW_GROUP_BY");break;case"pivot":this._controlsGet("SHOW_PIVOT");break;case"flashback":t._controlsGet("SHOW_FLASHBACK");break;default:t._getElement("control_panel").collapsible("expand")}i.preventDefault()},"click input.a-IRR-controlsCheckbox":function(t){var i=e(t.target),o=i.prop("checked")?"Y":"N";switch(i.data("setting")){case"break":this._controlBreakToggle(i.data("break-column"),o);break;case"filter":this._filterToggle(i.data("filter-id"),o);break;case"highlight":this._highlightToggle(i.data("highlight-id"),o);break;case"flashback":this._flashbackToggle()}},"click button.a-IRR-button--remove":function(t){var i=e(t.currentTarget);switch(i.data("setting")){case"break":this._controlBreakOn(i.data("break-column"));break;case"filter":this._filterDelete(i.data("filter-id"));break;case"report":this._controlsGet("SHOW_DELETE");break;case"report-default":this._controlsGet("SHOW_DELETE_DEFAULT");break;case"highlight":this._highlightClear(i.data("highlight-id"));break;case"flashback":this._flashbackClear();break;case"chart":this._chartClear();break;case"group-by":this._groupByRemove();break;case"pivot":this._pivotRemove()}t.preventDefault()}}),this._getElement("control_panel").collapsible({content:"div.a-MediaBlock-content",collapsed:t.options.isControlPanelCollapsed,collapse:function(){t.options.isControlPanelCollapsed||(t.options.isControlPanelCollapsed=!0,t.suppressUpdate=!0,t._action("CONTROL_MIN",{value:"Y"})),t._getElement("control_panel_summary").show()},expand:function(){t.options.isControlPanelCollapsed&&(t.options.isControlPanelCollapsed=!1,t.suppressUpdate=!0,t._action("CONTROL_MIN",{value:"N"})),t._getElement("control_panel_summary").hide()}})},_initFixedHeader:function(t){var i,o=this.options;if(("PAGE"===o.fixedHeader||"REGION"===o.fixedHeader)&&0===e(".a-IRR-header--group",this.element).length){switch(this.viewMode){case _:o.reportViewMode===_&&(i="a-IRR-reportView");break;case"GROUP_BY":i="a-IRR-groupByView"}if(i){if(0===e(this.element).find(".a-IRR-iconViewTable").length)switch(o.fixedHeader){case"PAGE":e("."+i,this.element).setTableHeadersAsFixed(),e(".js-stickyTableHeader",this.element).stickyWidget({toggleWidth:!0,stickToEnd:!0});break;case"REGION":e("."+i,this.element).setTableHeadersAsFixed({maxHeight:o.fixedHeaderMaxHeight})}t&&e(window).trigger("apexwindowresized")}}},_initMenus:function(){var t,i,o=this,a=this.options,l=[1,5,10,15,20,25,50,100,1e3];function s(e,t){for(i=0;i<e.length;i++)if(e[i].id===t)return e[i]}function c(e,t){var i,o=e?1*e:null,n=t?1*t:null;return e&&t?i=o<n?o:n:e?t||(i=o):i=n,i}t="IG"===a.actionsMenuStructure?{items:[{id:"irColumn",type:u,label:r("COLUMNS"),hide:!0,icon:"icon-irr-select-cols",action:function(){o._controlsGet("SHOW_COLUMN","COLUMN")}},{type:"separator"},{id:"irFilter",type:u,label:r("FILTER"),hide:!0,icon:"icon-irr-filter",action:function(){o._controlsGet("SHOW_FILTER")}},{id:"irData",type:"subMenu",label:r("DATA"),hide:!1,icon:"icon-ig-data",menu:{items:[{id:"irOrdering",type:u,label:r("SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet("SHOW_ORDERING")}},{id:"irGroupBySort",type:u,label:r("GROUP_BY_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet("SHOW_GROUP_BY_SORT")}},{id:"irPivotSort",type:u,label:r("PIVOT_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet("SHOW_PIVOT_SORT")}},{id:"irAggregate",type:u,label:r("AGGREGATE"),hide:!0,icon:"icon-irr-aggregate",action:function(){o._controlsGet("SHOW_AGGREGATE")}},{id:"irCompute",type:u,label:r("COMPUTE"),hide:!0,icon:"icon-irr-compute",action:function(){o._computationShow()}},{id:"irFlashback",type:u,label:r("FLASHBACK"),hide:!0,icon:"icon-irr-flashback",action:function(){o._controlsGet("SHOW_FLASHBACK")}}]}},{id:"irFormat",type:"subMenu",label:r("FORMAT"),hide:!1,icon:"icon-irr-format",menu:{items:[{id:"irCtrlBreak",type:u,label:r("CONTROL_BREAK"),hide:!0,icon:"icon-irr-control-break",action:function(){o._controlsGet("SHOW_CTRL_BREAK")}},{id:"irHighlight",type:u,label:r("HIGHLIGHT"),hide:!0,icon:"icon-irr-highlight",action:function(){o._controlsGet("SHOW_HIGHLIGHT")}},{id:"irRowsPerPage",type:"subMenu",label:r("ROWS_PER_PAGE"),hide:!0,icon:"icon-irr-rows",menu:{items:[{type:"radioGroup",set:function(e){o.options.currentRowsPerPage=1*e,o._search("SEARCH")},get:function(){return o.options.currentRowsPerPage},choices:[]}]}}]}},{type:"separator"},{id:"irChart",type:u,label:r("CHART"),hide:!0,icon:"icon-irr-chart",action:function(){o._controlsGet("SHOW_CHART")}},{id:"irGroupBy",type:u,label:r("GROUP_BY"),hide:!0,icon:"icon-irr-group-by",action:function(){o._controlsGet("SHOW_GROUP_BY")}},{id:"irPivot",type:u,label:r("PIVOT"),hide:!0,icon:"icon-irr-pivot",action:function(){o._controlsGet("SHOW_PIVOT")}},{type:"separator"},{id:"irReport",type:"subMenu",label:r("REPORT"),hide:!1,icon:"icon-irr-saved-report",menu:{items:[{id:"irSaveReport",type:u,label:r("SAVE_REPORT"),hide:!0,icon:"icon-ig-save",action:function(){o._controlsGet("SAVE_REPORT")}},{id:"irSaveDefault",type:u,label:r("SAVE_REPORT_DEFAULT"),hide:!0,icon:"icon-ig-save",action:function(){o._controlsGet("SHOW_SAVE_DEFAULT")}},{type:"separator"},{id:"irReset",type:u,label:r("RESET"),hide:!0,icon:"icon-irr-reset",action:function(){o._controlsGet("SHOW_RESET")}}]}},{type:"separator"},{id:"irDownload",type:u,label:r("DOWNLOAD"),hide:!0,icon:"icon-irr-download",action:function(){o._controlsGet("SHOW_DOWNLOAD")}},{id:"irNotify",type:u,label:r("SUBSCRIPTION"),hide:!0,icon:"icon-irr-subscription",action:function(){o._controlsGet("SHOW_NOTIFY")}},{type:"separator"},{id:"irHelp",type:u,label:r("HELP"),hide:!0,icon:"icon-irr-help",action:function(){n.popup.url(o.options.helpLink)}}],beforeOpen:function(t,n){var u,d,g,p=n.menu.items,f=s(p,"irData"),E=f.menu.items,m=s(E,"irOrdering"),R=s(E,"irAggregate"),T=s(E,"irFlashback"),v=s(E,"irCompute"),O=s(E,"irGroupBySort"),I=s(E,"irPivotSort"),A=s(p,"irFormat"),S=A.menu.items,C=s(S,"irCtrlBreak"),w=s(S,"irHighlight"),b=s(S,"irRowsPerPage"),k=s(p,"irReport"),D=k.menu.items;if(o._dialogReset(),o._sortWidgetHide(),s(p,"irColumn").hide=!(a.selectColumns&&o.viewMode===_),s(p,"irFilter").hide=!a.filter,f.hide=!0,o.viewMode===_?(a.sort||a.aggregate||a.flashback||a.compute)&&(f.hide=!1,m.hide=!a.sort,R.hide=!a.aggregate,T.hide=!a.flashback,v.hide=!a.compute,O.hide=!0,I.hide=!0):"GROUP_BY"===o.viewMode?a.groupBy&&(f.hide=!1,m.hide=!0,R.hide=!0,T.hide=!a.flashback,v.hide=!0,O.hide=!1,I.hide=!0):o.viewMode===h?a.pivot&&(f.hide=!1,m.hide=!0,R.hide=!0,T.hide=!a.flashback,v.hide=!0,O.hide=!0,I.hide=!1):"CHART"===o.viewMode&&(f.hide=!1,m.hide=!0,R.hide=!0,T.hide=!a.flashback,v.hide=!0,O.hide=!0,I.hide=!0),A.hide=!0,o.viewMode===_?(a.controlBreak||a.highlight)&&(A.hide=!1,C.hide=!a.controlBreak,w.hide=!a.highlight,b.hide=!a.rowsPerPage):"GROUP_BY"===o.viewMode?a.groupBy&&(A.hide=!1,C.hide=!0,w.hide=!0,b.hide=!a.rowsPerPage):o.viewMode===h?a.pivot&&(A.hide=!1,C.hide=!0,w.hide=!0,b.hide=!a.rowsPerPage):"CHART"===o.viewMode&&(A.hide=!1,C.hide=!0,w.hide=!0,b.hide=!a.rowsPerPage),a.rowsPerPage){for((b=s(S,"irRowsPerPage")).menu.items[0].choices=[],d=b.menu.items[0].choices,g=c(a.maxRowsPerPage,a.maxRowCount),i=0;i<l.length&&(u=l[i],!(g&&u>g));i++)d.push({label:""+u,value:u});a.maxRowsPerPage||d.push({label:r("ALL"),value:1e5})}o.viewMode===_?(a.chart||a.groupBy||a.pivot)&&(s(p,"irChart").hide=!a.chart,s(p,"irGroupBy").hide=!a.groupBy,s(p,"irPivot").hide=!a.pivot):"GROUP_BY"===o.viewMode?a.groupBy&&(s(p,"irChart").hide=!0,s(p,"irGroupBy").hide=!1,s(p,"irPivot").hide=!0):o.viewMode===h?a.pivot&&(s(p,"irChart").hide=!0,s(p,"irGroupBy").hide=!0,s(p,"irPivot").hide=!1):"CHART"===o.viewMode&&(s(p,"irChart").hide=!1,s(p,"irGroupBy").hide=!0,s(p,"irPivot").hide=!0),k.hide=!0,(a.saveReport||a.saveDefaultReport||a.reset)&&(k.hide=!1,s(D,"irSaveReport").hide=!a.saveReport,s(D,"irSaveDefault").hide=!a.saveDefaultReport,s(D,"irReset").hide=!a.reset),s(p,"irDownload").hide=!(a.download&&-1!==e.inArray(o.viewMode,[_,"GROUP_BY",h])),s(p,"irNotify").hide=!(a.subscription&&-1!==e.inArray(o.viewMode,[_,"GROUP_BY",h])),s(p,"irHelp").hide=!a.help}}:{items:[{id:"irColumn",type:u,label:r("SELECT_COLUMNS"),hide:!0,icon:"icon-irr-select-cols",action:function(){o._controlsGet("SHOW_COLUMN","COLUMN")}},{type:"separator"},{id:"irFilter",type:u,label:r("FILTER"),hide:!0,icon:"icon-irr-filter",action:function(){o._controlsGet("SHOW_FILTER")}},{id:"irRowsPerPage",type:"subMenu",label:r("ROWS_PER_PAGE"),hide:!0,icon:"icon-irr-rows",menu:{items:[{type:"radioGroup",set:function(e){o.options.currentRowsPerPage=1*e,o._search("SEARCH")},get:function(){return o.options.currentRowsPerPage},choices:[]}]}},{id:"irFormat",type:"subMenu",label:r("FORMAT"),hide:!1,icon:"icon-irr-format",menu:{items:[{id:"irOrdering",type:u,label:r("SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet("SHOW_ORDERING")}},{id:"irCtrlBreak",type:u,label:r("CONTROL_BREAK"),hide:!0,icon:"icon-irr-control-break",action:function(){o._controlsGet("SHOW_CTRL_BREAK")}},{id:"irHighlight",type:u,label:r("HIGHLIGHT"),hide:!0,icon:"icon-irr-highlight",action:function(){o._controlsGet("SHOW_HIGHLIGHT")}},{id:"irCompute",type:u,label:r("COMPUTE"),hide:!0,icon:"icon-irr-compute",action:function(){o._computationShow()}},{id:"irAggregate",type:u,label:r("AGGREGATE"),hide:!0,icon:"icon-irr-aggregate",action:function(){o._controlsGet("SHOW_AGGREGATE")}},{id:"irChart",type:u,label:r("CHART"),hide:!0,icon:"icon-irr-chart",action:function(){o._controlsGet("SHOW_CHART")}},{id:"irGroupBySort",type:u,label:r("GROUP_BY_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet("SHOW_GROUP_BY_SORT")}},{id:"irGroupBy",type:u,label:r("GROUP_BY"),hide:!0,icon:"icon-irr-group-by",action:function(){o._controlsGet("SHOW_GROUP_BY")}},{id:"irPivotSort",type:u,label:r("PIVOT_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet("SHOW_PIVOT_SORT")}},{id:"irPivot",type:u,label:r("PIVOT"),hide:!0,icon:"icon-irr-pivot",action:function(){o._controlsGet("SHOW_PIVOT")}}]}},{type:"separator"},{id:"irFlashback",type:u,label:r("FLASHBACK"),hide:!0,icon:"icon-irr-flashback",action:function(){o._controlsGet("SHOW_FLASHBACK")}},{type:"separator"},{id:"irSaveReport",type:u,label:r("SAVE_REPORT"),hide:!0,icon:"icon-irr-saved-report",action:function(){o._controlsGet("SAVE_REPORT")}},{id:"irSaveDefault",type:u,label:r("SAVE_REPORT_DEFAULT"),hide:!0,icon:"icon-irr-saved-report",action:function(){o._controlsGet("SHOW_SAVE_DEFAULT")}},{id:"irReset",type:u,label:r("RESET"),hide:!0,icon:"icon-irr-reset",action:function(){o._controlsGet("SHOW_RESET")}},{type:"separator"},{id:"irHelp",type:u,label:r("HELP"),hide:!0,icon:"icon-irr-help",action:function(){n.popup.url(o.options.helpLink)}},{type:"separator"},{id:"irDownload",type:u,label:r("DOWNLOAD"),hide:!0,icon:"icon-irr-download",action:function(){o._controlsGet("SHOW_DOWNLOAD")}},{id:"irNotify",type:u,label:r("SUBSCRIPTION"),hide:!0,icon:"icon-irr-subscription",action:function(){o._controlsGet("SHOW_NOTIFY")}}],beforeOpen:function(t,n){var u,d,g,p,f=n.menu.items,E=s(f,"irFormat"),m=E.menu.items,R=s(m,"irOrdering"),T=s(m,"irCtrlBreak"),v=s(m,"irHighlight"),O=s(m,"irCompute"),I=s(m,"irAggregate"),A=s(m,"irChart"),S=s(m,"irGroupBySort"),C=s(m,"irGroupBy"),w=s(m,"irPivotSort"),b=s(m,"irPivot");if(o._dialogReset(),o._sortWidgetHide(),s(f,"irColumn").hide=!(a.selectColumns&&o.viewMode===_),s(f,"irFilter").hide=!a.filter,s(f,"irRowsPerPage").hide=!a.rowsPerPage,E.hide=!0,o.viewMode===_?(a.sort||a.controlBreak||a.highlight||a.compute||a.aggregate||a.chart||a.groupBy||a.pivot)&&(E.hide=!1,R.hide=!a.sort,T.hide=!a.controlBreak,v.hide=!a.highlight,O.hide=!a.compute,I.hide=!a.aggregate,A.hide=!a.chart,S.hide=!0,C.hide=!a.groupBy,w.hide=!0,b.hide=!a.pivot):"GROUP_BY"===o.viewMode?a.groupBy&&(E.hide=!1,R.hide=!0,T.hide=!0,v.hide=!0,O.hide=!0,I.hide=!0,A.hide=!0,S.hide=!1,C.hide=!1,w.hide=!0,b.hide=!0):o.viewMode===h?a.pivot&&(E.hide=!1,R.hide=!0,T.hide=!0,v.hide=!0,O.hide=!0,I.hide=!0,A.hide=!0,S.hide=!0,C.hide=!0,w.hide=!1,b.hide=!1):"CHART"===o.viewMode&&(E.hide=!1,R.hide=!0,T.hide=!0,v.hide=!0,O.hide=!0,I.hide=!0,A.hide=!1,S.hide=!0,C.hide=!0,w.hide=!0,b.hide=!0),s(f,"irFlashback").hide=!a.flashback,s(f,"irSaveReport").hide=!a.saveReport,s(f,"irSaveDefault").hide=!a.saveDefaultReport,s(f,"irReset").hide=!a.reset,s(f,"irHelp").hide=!a.help,s(f,"irDownload").hide=!(a.download&&-1!==e.inArray(o.viewMode,[_,"GROUP_BY",h])),s(f,"irNotify").hide=!(a.subscription&&-1!==e.inArray(o.viewMode,[_,"GROUP_BY",h])),a.rowsPerPage){for((d=s(f,"irRowsPerPage")).menu.items[0].choices=[],g=d.menu.items[0].choices,p=c(a.maxRowsPerPage,a.maxRowCount),i=0;i<l.length&&(u=l[i],!(p&&u>p));i++)g.push({label:""+u,value:u});a.maxRowsPerPage||g.push({label:r("ALL"),value:1e5})}}},a.toolbar&&a.actionsMenu&&o._getElement("actions_menu").menu(t)},_initOnCreate:function(){function t(t){this.currentElementId=e(t.target).attr("id")}var i=this.options,o=this;i.toolbar&&this._initToolbar(!0),this._initControlPanel(),e(document.body).append(this._getElement("sort_widget")),this._on(this.element,{focusin:t,"click button, input[type=checkbox]":t}),this._on(this.element,{"click a.a-IRR-headerLink":function(t){this.viewMode===_?this._controlsGet("SORT_WIDGET",e(t.currentTarget).data("column")):"GROUP_BY"===this.viewMode?this._controlsGet("SHOW_GROUP_BY_SORT"):this.viewMode===h&&this._controlsGet("SHOW_PIVOT_SORT"),t.preventDefault()}}),this._on(this.element,{"click button.a-IRR-button--pagination":function(t){i.detailLink&&"SHOW_DETAIL"===this.currentControl?this._controlsRow(e(t.currentTarget).data("row-id")):i.pagination&&this._paginate(e(t.currentTarget).data("pagination"))},"click a.a-IRR-pagination-reset":function(e){this._search("SEARCH"),e.preventDefault()}}),i.pagination&&this._on(this.element,{"click a.a-IRR-pagination-reset":function(e){this._search("SEARCH"),e.preventDefault()}}),i.detailLink&&this._on(this.element,{"click a.a-IRR-detail-row":function(t){this._controlsRow(e(t.currentTarget).data("row-id")),t.preventDefault()}}),this._initFixedHeader(),apex.widget.util.onVisibilityChange(this.element[0],(function(e){e&&o.element.find(".js-stickyTableHeader").trigger("forceresize")}))},_initToolbar:function(t){var i=this.options,o=this;i.searchField&&(this._on(this._getElement("search_field"),{keydown:function(t){t.which===e.ui.keyCode.ENTER&&(this._search("SEARCH"),t.preventDefault())}}),this._on(this._getElement("search_button"),{click:function(e){this._search("SEARCH"),e.preventDefault()}}),i.columnSearch&&t&&this._getElement("column_search_drop").menu({asyncFetchMenu:function(e,t){o.searchMenu=e,o.searchMenuCallback=t,o._controlsGet("SEARCH_COLUMN")},afterClose:function(e,t){t.actionTaken&&setTimeout((function(){o._getElement("search_field").focus()}),100)},items:[]})),i.rowsPerPageSelect&&this._on(this._getElement("row_select"),{change:function(e){var t=e.target.value;this._search("SEARCH",t),e.preventDefault()}}),i.reportsSelect&&this._on(this._getElement("saved_reports"),{change:function(e){var t=e.target.value;this._pull("REPORT_CHANGED",t),e.preventDefault()}}),this._on(this._getElement("toolbar_controls"),{"click .a-IRR-button--views":function(t){switch(e(t.currentTarget).data("view")){case"report":this._reportView(_);break;case"icon":this._reportView("ICON");break;case"details":this._reportView("DETAIL");break;case"chart":this._chartView();break;case"group_by":this._groupByView();break;case"pivot":this._pivotView()}}}),i.actionsMenu&&t&&this._initMenus()},_inlinePicker:function(i,o){var n,a,r=t.htmlBuilder(),l=JSON.parse(o),s=e("[data-picker-for="+t.escapeCSS(this.tempReturnElement$.attr("id"))+"]",this._getElement("dialog_js"));for(r.markup("<div").attr("id",this._getId("col_values_drop")).attr("class","a-IRR-col-values-drop").markup(">"),n=0;n<l.row.length;n++)r.markup("<a").attr("href","#").attr("class","a-IRR-col-value").attr("data-return-value",l.row[n].R).markup(">").markup(l.row[n].D).markup("</a>");return r.markup("</div>"),s.after(r.toString()),a=this._getDialogElement("col_values_drop"),"NARROW"===i?this._on(a,{"click a.a-IRR-col-value":function(t){var i,o=e(t.currentTarget).data("returnValue"),n=this._dialogCurrentOperator().val();"in"===n||"not in"===n?((i=this.tempReturnElement$.val())&&(o=i+","+o),this.tempReturnElement$.val(o)):(this.tempReturnElement$.val(o),a.remove(),this.tempReturnElement$.focus()),t.preventDefault()}}):this._on(a,{"click a.a-IRR-col-value":function(t){var i=e(t.currentTarget).data("returnValue");this.tempReturnElement$.val(i),a.remove(),this.tempReturnElement$.focus(),t.preventDefault()}}),this.suppressUpdate=!1,this.currentAction=null,this._on(a,{"keydown a":function(t){var i=a.find("a"),o=i.index(e(t.target)),n=i.length-1;switch(i.attr("tabindex",-1),t.which){case e.ui.keyCode.DOWN:o<n?i.eq(o+1).focus():i.eq(0).focus(),t.preventDefault();break;case e.ui.keyCode.UP:o>0?i.eq(o-1).focus():i.eq(n).focus(),t.preventDefault();break;case e.ui.keyCode.TAB:a.remove(),s.focus(),t.preventDefault();break;case e.ui.keyCode.ESCAPE:a.remove(),s.focus(),t.stopImmediatePropagation()}}}),this._dialogCheck(this._getIdSelector("col_values_drop"),(function(){a.remove()})),a.find("a:first")},_paginate:function(e){this._action("PAGE",{widgetActionMod:e})},_notifyClear:function(){this._action("DELETE_NOTIFY",{id:this._getDialogElement("notify_id").val()})},_notifySave:function(){var e=[this._getId("notify_id"),this._getId("email_address"),this._getId("email_subject"),this._getId("notify_interval"),this._getId("start_date"),this._getId("end_date")];this.suppressUpdate=!0,this._action("SAVE_NOTIFY",{f01:e,f02:this._utilGetFormElValues(e)})},_pivotMaxValue:3,_pivotRemove:function(){this._action("DELETE_PIVOT")},_pivotSave:function(){var e=this._utilGetFormElAttributes();this.suppressUpdate=!0,this._action("SAVE_PIVOT",{f01:e.ids,f02:e.values})},_pivotSort:function(e){var t,i=this._getDialogElement("pivot_id").val();"ASC"===e||"DESC"===e?(this.lastColumnId=e.id,this._action("PIVOT_COLUMN_SORT",{id:i,f01:this.lastColumnId,f02:e})):(t=this._utilGetFormElAttributes(),this._action("PIVOT_SORT",{id:i,f01:t.ids,f02:t.values}))},_pivotView:function(){this._action("VIEW_PIVOT")},_pull:function(t,i,o){var n=e.extend({widgetMod:"PULL",widgetAction:t},o);i&&(this.reportId=i),this.currentAction=t,this._get(n)},_remove:function(e){var t="DELETE";e&&(t=e),this._action(t)},_reportView:function(e){this.options.reportViewMode=e,this._action("VIEW_REPORT",{p_widget_view_mode:this.options.reportViewMode})},_reset:function(){this._action("RESET")},_save:function(e){var t=[],i="SAVE",o=this._getId("report_name");$f_get_emptys([o],"error","")||(e&&(i="RENAME"),t.push(o),t.push(this._getId("public_report")),t.push(this._getId("report_description")),this._action(i,{f01:t,f02:this._utilGetFormElValues(t)}),this._getElement("dialog_js").dialog("close"))},_saveDefault:function(e){var t,i=[],o=[],n="SAVE_DEFAULT",a=this._getId("default_type"),r=$v(a),l=this._getId("report_name");"ALTERNATIVE"===r&&(t=$f_get_emptys([l],"error","")),t||(e&&(n=e),i.push(a),o.push(r),"ALTERNATIVE"===r&&(i.push(l),o.push(this._getDialogElement("report_name").val())),this._action(n,{f01:i,f02:o}),this._getElement("dialog_js").dialog("close"))},_saveDefaultTypeCheck:function(e){var t="ALTERNATIVE"===e;this._getDialogElement("report_name").closest("tr").toggle(t)},_search:function(e,t){var i,o,n=this.options,a=this._getElement("search_field").val();t&&(n.rowsPerPage||n.rowsPerPageSelect)&&(n.currentRowsPerPage=1*t),i={f01:(o=this._utilGetFormElAttributes(this._getId("toolbar_controls"))).ids,f02:o.values},""===a?this._pull(null,this.reportId,i):this._action("QUICK_FILTER",i)},_setDateFieldFormatMask:function(e,t){var i,o,n,a=!1;e.length>0&&t&&(/HH|hh|ii|ss/.test(t)&&(a=!0,i=/HH/.test(t)),o=e.val(),n=e.datepicker("option","dateFormat"),e.datepicker("option","onSelect",null),e.datepicker("option","showTime",a).datepicker("option","showButtonPanel",a).datepicker("option","dateFormat",t),a&&e.datepicker("option","time24h",i),e.val(""),t===n&&e.val(o))},_singleRowViewClear:function(){var e=this._getElement("single_row_view"),t=this._getElement("report_view");return this._off(e),this._off(t),e.html(""),e},_singleRowViewControl:function(){var t=this._getElement("exclude_nulls"),i=this._getElement("show_displayed_only"),o=t.prop("checked"),n=i.prop("checked"),a=e("div.a-IRR-singleRow-row",this.element),r=a.filter(".is-displayed"),l=a.not(".is-displayed"),s=a.filter(".is-null");this.ajaxBusy||(r.show(),l.show(),s.show(),o&&n?(s.hide(),l.hide()):o?s.hide():n&&l.hide(),this.currentAction="CHANGE_DETAIL_OPTION",this.suppressUpdate=!0,this._action("CHANGE_DETAIL_OPTION",{value:o?t.val():"",x05:n?i.val():""}))},_singleRowViewHide:function(){this._singleRowViewClear().hide()},_singleRowViewShow:function(t){var i=this._singleRowViewClear();this._getElement("full_view").hide(),this._getElement("data_panel").val(""),this._getElement("dialog_js").html(""),i.html(t).show(),i.find(":focusable")[0].focus(),this.options.detailLink&&(this._on(this._getElement("report_view"),{click:function(t){this._pull(null,e(t.target).data("report-id"))}}),this._on(i,{"click input.a-IRR-viewOptions-checkbox":function(){this._singleRowViewControl()}}),e(".a-IRR-singleRow-group").collapsible({collapsed:!1}))},_sortWidgetHide:function(){var t,i,o,n=this._getElement("sort_widget");n.is(":visible")&&(t=this._getElement("sort_widget_rows"),i=this._getElement("sort_widget_search_field"),o=e("[data-column="+this.lastColumnId+"]",this.element),n.removeAttr("style").css({position:"absolute",display:"none"}),o.closest(".a-IRR-header").removeClass("is-active"),t.html(""),e("button.a-IRR-sortWidget-button",this.element).removeClass("is-active"),this._off(n),this._off(t),this._off(i))},_sortWidgetSearch:function(e,t){var i=t?"contains":"=",o=[this.currentColumnId,i,e,"",""];this._sortWidgetHide(),this._action("COL_FILTER",{f01:o})},_sortWidgetShow:function(i){function o(e){var t=u.find(":focusable");e||(a=t.first()).data("first",!0),(r=t.last()).data("last",!0)}var n,a,r,l,c,_=JSON.parse(i),h=t.htmlBuilder(),u=this._getElement("sort_widget"),d=this._getElement("sort_widget_help"),g=this._getElement("sort_widget_rows"),p=e("[data-column='"+this.currentColumnId+"']",this.element),f=this._getElement("sort_widget_search"),E=this._getElement("sort_widget_search_field");if(this.computationId=_.dialog.id,d.hide(),e("button.a-IRR-sortWidget-button",u).parent().show(),e.each(_.dialog.hide,(function(t,i){e(s(i),u).hide()})),_.dialog.leadSortDir&&("ASC"===_.dialog.leadSortDir?this._getElement("sort_widget_action_up").find("button.a-IRR-sortWidget-button").addClass("is-active"):"DESC"===_.dialog.leadSortDir&&this._getElement("sort_widget_action_down").find("button.a-IRR-sortWidget-button").addClass("is-active")),_.dialog.uv){for(l=_.dialog.row.length,n=0;n<l;n++)(0===_.dialog.row[n].R||_.dialog.row[n].R)&&(c=0===_.dialog.row[n].D||_.dialog.row[n].D?_.dialog.row[n].D:_.dialog.row[n].R,h.markup("<a").attr("href","#").attr("data-return-value",_.dialog.row[n].R).attr("class","a-IRR-sortWidget-row").markup(">").markup(c).markup("</a>"));g.append(h.toString()),f.show(),E.val("")}else f.hide();u.show().position({my:"left top",at:"left bottom",of:p}),p.closest(".a-IRR-header").addClass("is-active"),this.lastColumnId=this.currentColumnId,this._on(u,{"click button.a-IRR-sortWidget-button":function(t){switch(e(t.currentTarget).data("option")){case"up":this._columnOrder("ASC");break;case"down":this._columnOrder("DESC");break;case"hide":this._columnHide();break;case"break":this._controlBreakOn();break;case"help":this._columnHelp();break;case"computation":this._computationShow()}},keydown:function(t){if(t.which===e.ui.keyCode.ESCAPE&&(this._sortWidgetHide(),t.preventDefault(),p.focus()),t.which===e.ui.keyCode.TAB){var i=!!t.shiftKey;!i&&e(t.target).data("last")&&(t.preventDefault(),a.focus()),i&&e(t.target).data("first")&&(t.preventDefault(),r.focus())}}}),this._on(g,{"click a":function(t){this._sortWidgetSearch(e(t.currentTarget).data("returnValue")),t.preventDefault()}}),this._on(E,{keyup:function(e){r.data("last",!1),$d_Find(this._getId("sort_widget_rows"),e.target.value,"a"),o(!0)},keydown:function(t){t.which===e.ui.keyCode.ENTER&&(this._sortWidgetSearch(e(t.target).val(),!0),t.preventDefault())}}),this._dialogCheck(null,this._sortWidgetHide),o(),a.focus()},_utilGetFormEls:function(t){return e(s(t)+" :input").not("button")},_utilGetFormElAttributes:function(e){var t,i=[],o=[];return t=e||this._getId("dialog_js"),this._utilGetFormEls(t).each((function(e,t){i.push(t.id),o.push($v(t.id))})),{ids:i,values:o}},_utilGetFormElValues:function(e){var t,i=[];for(t=0;t<e.length;t++)i.push($v(e[t]));return i},_utilReplaceAttrText:function(e,t,i,o){var n=e.attr(t).replace(i,o);e.attr(t,n)},_utilAddMoreColumn:function(t,i){var o,n,a,r,l,s,c,_,h=this._getElement("dialog_js");(o=e("select."+i,h).length)<t&&(n=o,a=++o,n<10?(r="0"+n,l="0"+a):(r=n+"",l=a+""),c=(s=e("tr."+i+"-row-"+n,h)).clone(),this._utilReplaceAttrText(c,"class",n,a),e(".a-IRR-column-num",c).text(a),_=e("select."+i,c),this._utilReplaceAttrText(_,"id",new RegExp(r+"$"),l),this._utilReplaceAttrText(_,"title",n,a),c.insertAfter(s)),a===t&&(e("tr."+i+"-add",h).hide(),c.focus())},_utilAddMoreFunction:function(t){var i,o,n,a,r,l,s,c,_,h,u,d,g,p,f=this._getElement("dialog_js");(i=e("select.a-IRR-function",f).length)<t&&(o=i,n=++i,o<10?(a="0"+o,r="0"+n):(a=o+"",r=n+""),s=(l=e("tr.a-IRR-function-row-"+o,f)).clone(),this._utilReplaceAttrText(s,"class",o,n),e("span.a-IRR-function-num",s).text(n),c=e("select.a-IRR-function",s),this._utilReplaceAttrText(c,"title",o,n),this._utilReplaceAttrText(c,"id",new RegExp(a+"$"),r),this._utilReplaceAttrText(e(this._getIdSelector("number_columns_container")+"_"+a,s),"id",new RegExp(a+"$"),r),this._utilReplaceAttrText(e(this._getIdSelector("all_columns_container")+"_"+a,s),"id",new RegExp(a+"$"),r),_=e("select.a-IRR-function-num-col",s),this._utilReplaceAttrText(_,"title",o,n),this._utilReplaceAttrText(_,"id",new RegExp(a+"$"),r),h=e("select.a-IRR-function-col",s),this._utilReplaceAttrText(h,"title",o,n),this._utilReplaceAttrText(h,"id",new RegExp(a+"$"),r),u=e(this._getIdSelector("label")+"_"+a,s),this._utilReplaceAttrText(u,"title",o,n),this._utilReplaceAttrText(u,"id",new RegExp(a+"$"),r),u.val(""),d=e(this._getIdSelector("format_mask")+"_"+a,s),this._utilReplaceAttrText(d,"title",o,n),this._utilReplaceAttrText(d,"id",new RegExp(a+"$"),r),d.val(""),g=e(this._getIdSelector("format_mask_picker")+"_"+a,s),this._utilReplaceAttrText(g,"id",new RegExp(a+"$"),r),this._utilReplaceAttrText(g,"data-picker-for",new RegExp(a+"$"),r),p=e(this._getIdSelector("function_sum")+"_"+a,s),this._utilReplaceAttrText(p,"title",o,n),this._utilReplaceAttrText(p,"id",new RegExp(a+"$"),r),p.prop("checked",!1),s.insertAfter(l)),n===t&&(e("tr.a-IRR-add-function",f).hide(),s.focus())},_validAction:function(e){"true"===e?(this._pull("PULL_TOOLBAR"),this._getElement("dialog_js").dialog("close")):(this._getDialogElement("dialog_msg").html(e),this.options.reportViewMode=_)},refresh:function(){this._pull()}})}(apex.jQuery,apex.util,apex.debug,apex.server,apex.navigation,apex.lang);