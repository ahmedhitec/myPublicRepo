!function(a,t,r,e){"use strict";var n=e.ui.keyCode,i="a-StarRating";a.starRating=function(a,l){var s,o,u,c,d=n.RIGHT,p=n.LEFT,v="#"+a+"_INPUT",f=e(v),m=l.numStars,S=16,g=f.val(),h=f.val(),k=!1,R=!1,y=!0,A="STARS",T=e.extend({numStars:5,iconClass:"fa-star",increment:1,clearTooltip:"Clear Rating",labelText:"#VALUE#",isRequired:!1,showClearButton:!0,showValue:"STARS",readOnlyDisplay:"STARS",readOnly:!1,iconTooltip:""},l);function w(a){var t=a;return"0"===t||0===t||""===t||null===t||!1===t?(t=T.isRequired?"":0,E()):(t=parseFloat(t),isNaN(t)&&(t=0,E()),t<0?(t=0,E()):t>T.numStars&&(R=!0,t=T.numStars)),t}function b(){return!f.prop("disabled")&&!T.readOnly}function E(){T.isRequired||T.readOnly?f.val("").change():f.val(0).change()}function C(){var a,r=t.htmlBuilder();return r.markup("<div ").attr("class","a-StarRating-clear").attr("title",T.clearTooltip).markup(">").markup("<span ").attr("aria-hidden","true").attr("class"," fa fa-times-circle-o").markup(">").markup("</span>").markup("</div>"),(a=e(r.toString())).on("click",(function(a){E(),k=!0})),a}function x(a){var r,e=T.activeColor,n=T.inactiveColor,i=(T.readOnly,t.htmlBuilder());if(e&&(e="color:"+e),n&&(n="color:"+n),i.markup(" <div ").attr("class","a-StarRating-stars").markup("> ").markup("<div ").attr("class","a-StarRating-starsInner").markup(">").markup("<div ").attr("class","a-StarRating-stars-bg").markup(">"),"VALUE"!==A)for(r=0;r<m;r++)i.markup("<span ").attr("class","a-StarRating-star fa "+T.iconClass).optionalAttr("style",n).markup("></span>");"STARS"!==A&&(void 0===a&&(a=0),i.markup("<div ").attr("class","a-StarRating-value").markup(">"+a+"</div>"));var l=isNaN(a*S)?0:a*S;if(i.markup("</div>").markup("<div ").attr("class","a-StarRating-stars-fg").optionalAttr("style","width:"+l+"px;").markup(">"),"VALUE"!==A)for(r=0;r<m;r++)i.markup("<span ").attr("class","a-StarRating-star fa "+T.iconClass).optionalAttr("style",e).markup("></span>");return i.markup("</div>").markup("</div>").markup("</div>"),i.toString()}function V(){var a=w(f.val());k&&(k=!1),a!==g||R||(E(),a=0),g=a,y=!0,R=!1,""===a&&(a=0),s.attr("title",T.labelText.replace(/#VALUE#/,a)),f.closest("."+i).find(".a-StarRating-stars-fg").css("width",a*S+"px"),f.closest("."+i).find(".a-StarRating-value").html(a),f.attr({"aria-valuenow":""+a,"aria-valuetext":T.labelText.replace(/#VALUE#/,""+a),value:f.val()}),f.closest("."+i).find(".a-StarRating-value").text(a);var t=T.labelText;T.iconTooltip.includes("#VALUE#")&&(t=T.iconTooltip),f.parent().tooltip({show:apex.tooltipManager.defaultShowOption(),position:{my:"left top+15",at:"left center",collision:"flipfit"},content:t.replace(/#VALUE#/,a),tooltipClass:"ui-widget-content ui-corner-all ui-widget ui-tooltip"})}"SINGLE_STAR_AND_VALUE"===(A=T.readOnly?T.readOnlyDisplay:T.showValue)?m=1:!0===A?A="STARS_AND_VALUE":!1===A&&(A="STARS"),s=f.addClass("u-vh is-focusable").wrap("<div class='"+i+"'></div>").parent(),o=e("<span style='display: none' class='dummyStar a-StarRating-star fa "+T.iconClass+"'></span>"),s.append(o),S=e(".dummyStar").width(),e(".dummyStar").remove(),S=0===S?16:S,T.showClearButton&&!T.readOnly&&s.append(C()),"VALUE"!==A?s.append(x()):s.append((u=t.htmlBuilder(),c=""===f.val()?0:"",u.markup("<div ").attr("class","a-StarRating-value").markup(">"+c+"</div>"),e(u.toString()))),f.attr({role:"spinbutton","aria-valuenow":"0","aria-valuemax":""+T.numStars}),""!==f.val()||T.isRequired||(f.attr({value:0}),h=f.val(),y=!1),"rtl"===s.css("direction")&&(d=n.LEFT,p=n.RIGHT),s.on("focusin",(function(a){f.closest("."+i).find(".a-StarRating-stars").addClass("is-focused")})).on("focusout",(function(a){f.closest("."+i).find(".a-StarRating-stars").removeClass("is-focused")})).on("keydown",(function(a){var t=null,r=a.which;if(b()){switch(r){case n.HOME:t=0;break;case n.END:t=T.numStars;break;case n.DOWN:case p:t=Math.round(w(f.val()))-T.increment,t=w(t);break;case n.UP:case d:t=Math.round(w(f.val()))+T.increment,t=w(t);break;case n.DELETE:t=""}null!==t&&(f.val(w(t)).change(),V())}})).on("click",(function(a){var t,r=e(a.target).closest(".a-StarRating-star");if(b()){if(0===(t=r.parent().children().index(r)+1)&&!k)return;f.val(t).change(),V(),f.focus()}y&&(e(this).tooltip("disable"),e(this).tooltip("enable").tooltip("open"))})).hover((function(){y&&e(this).tooltip("enable").tooltip("open")})).mouseleave((function(){y&&e(this).tooltip("disable")})),V(),r.create(a,{setValue:function(a){0===a||"0"===a?E():f.val(w(a)),V()},getValue:function(){return""!==f.val()?f.val():0},displayValueFor:function(a){return x(w(a))},isChanged:function(){return h!==f.val()},disable:function(){T.readOnly=!0,e(v).attr("disabled",!0),e("#"+a+" .a-StarRating-clear").remove()},enable:function(){T.showClearButton&&T.readOnly&&s.prepend(C()),e(v).removeAttr("disabled"),T.readOnly=!1},show:function(){e("#"+a).show()},hide:function(){e("#"+a).hide()},reinit:function(a){f.val(a).change(),V()},setFocusTo:function(){return e(v).focus(),f.closest("."+i).find(".a-StarRating-stars").addClass("is-focused"),e(v)}})}}(apex.widget,apex.util,apex.item,apex.jQuery);