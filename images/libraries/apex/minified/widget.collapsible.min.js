!function(e,t,n){"use strict";e.widget("apex.collapsible",{version:"5.0",widgetEventPrefix:"collapsible",baseId:null,heading$:null,controllingElement$:null,content$:null,isContentIdSetByWidget:!1,isHeadingIdSetByWidget:!1,isControllingElementALink:!1,core:null,expandedClass:"is-expanded",collapsedClass:"is-collapsed",options:{heading:"h1,h2,h3,h4,h5,h6",controllingElement:"button,a",content:null,collapsed:!0,doCollapse:!0,universalTheme:!1,expandedClass:null,collapsedClass:null,rememberState:!1},_create:function(){var t,l,i=this,s=n.htmlBuilder(),a=this.options,o=e(".a-Collapsible").length;this.baseId="a_Collapsible"+(o+1)+"_"+this.element.attr("id"),this.element.addClass("a-Collapsible"),a.expandedClass&&(this.expandedClass+=" "+a.expandedClass),a.collapsedClass&&(this.collapsedClass+=" "+a.collapsedClass),this.heading$=this.element.find(a.heading).first(),this.heading$.addClass("a-Collapsible-heading"),this.controllingElement$=this.element.find(a.controllingElement).first(),this.controllingElement$.text()||((l=this.heading$[0].id)||(l=this.baseId+"_heading",this.heading$[0].id=l,this.isHeadingIdSetByWidget=!0),this.controllingElement$.attr("aria-labelledby",l)),a.universalTheme?this.content$=a.content:a.content?this.content$=this.element.find(a.content).first():this.content$=this.heading$.next(),this.content$.addClass("a-Collapsible-content"),(t=this.content$[0].id)||(t=this.baseId+"_content",this.content$[0].id=t,this.isContentIdSetByWidget=!0),this.controllingElement$.attr("aria-controls",t).attr("aria-expanded",!a.collapsed),this.controllingElement$.is("a")&&(this.isControllingElementALink=!0),s.markup("<span").attr("class","a-Icon a-Collapsible-icon").attr("aria-hidden",!0).markup(">").markup("</span>"),this.controllingElement$.prepend(s.toString()),this.isControllingElementALink&&(this.controllingElement$.attr("role","button"),this._on(this.controllingElement$,{keypress:function(t){t.which===e.ui.keyCode.SPACE&&(i.core.toggle(),t.preventDefault())}})),this.core=ToggleCore({key:i.baseId,controllingElement:this.controllingElement$,content:i.element,contentClassExpanded:this.expandedClass,contentClassCollapsed:this.collapsedClass,defaultExpandedPreference:!a.collapsed,useSessionStorage:a.rememberState,onExpand:function(){i.content$.attr("aria-hidden","false"),a.doCollapse&&i.content$.show(),i.controllingElement$.attr("aria-expanded","true"),i._trigger("expand")},onCollapse:function(){i.content$.attr("aria-hidden","true"),a.doCollapse&&i.content$.hide(),i.controllingElement$.attr("aria-expanded","false"),i._trigger("collapse")}}),this.core.initialize()},_destroy:function(){this.element.removeClass("a-Collapsible "+this.collapsedClass+" "+this.expandedClass),this.controllingElement$.removeAttr("aria-expanded").removeAttr("aria-controls"),this._off(this.controllingElement$),this.isContentIdSetByWidget&&this.content$.removeAttr("id"),this.isHeadingIdSetByWidget&&this.heading$.removeAttr("id"),this.heading$.removeClass("a-Collapsible-heading"),this.content$.removeAttr("aria-hidden").removeClass("a-Collapsible-content"),this.options.doCollapse&&this.content$.show()},expand:function(){this.core.expand()},collapse:function(){this.core.collapse()},toggle:function(){this.core.toggle()},getCore:function(){return this.core}}),apex.message&&apex.message.addVisibilityCheck((function(t){e("#"+t).parents(".a-Collapsible").collapsible("expand")})),apex.widget.util.visibilityChange&&e(document.body).on("collapsibleexpand",(function(e){apex.widget.util.visibilityChange(e.target,!0)})).on("collapsiblecollapse",(function(e){apex.widget.util.visibilityChange(e.target,!1)}))}(apex.jQuery,apex.lang,apex.util);