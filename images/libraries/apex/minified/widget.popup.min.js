!function(t){"use strict";var o="u-callout--top",l="u-callout--bottom",e="u-callout--left",s="u-callout--right";t.widget("apex.popup",t.ui.dialog,{version:"20.2",widgetEventPrefix:"popup",options:{parentElement:null,relativePosition:"below",callout:!1,noOverlay:!1},_create:function(){var o=this.options,l=this.element;o.resizable=!1,o.draggable=!1,o.modal=!o.noOverlay,this._super(),this.calloutBefore=s,this.calloutAfter=e,"rtl"===l.css("direction")&&(this.calloutBefore=e,this.calloutAfter=s),"auto"===o.width&&this.uiDialog.css("display","inline-block").hide(),this.uiDialog.addClass("ui-dialog--popup"),this.uiDialog.children(".ui-dialog-titlebar").hide(),this._setPosition(),l.on("popupopen",()=>{o.noOverlay?(setTimeout(()=>{t(window).on("blur.popupTracking",t=>{l.popup("close")}),t("html").on("mousedown.popupTracking",o=>{this._allowInteraction(o)||(l.data("apex-popup").opener=t(o.target),l.popup("close"))})},0),l.one("popupclose",(function(){t(window).off("blur.popupTracking"),t("html").off("mousedown.popupTracking")}))):t(".ui-widget-overlay").click((function(){l.popup("close")})),this._updateCallout()})},_destroy:function(){this.callout$&&this.callout$.remove()},_setPosition:function(){var i,a,p,n=0,u=this.options,r=this.element,c=u.relativePosition;u.callout&&u.parentElement?(this.callout$||(this.callout$=t("<div class='u-callout'></div>"),r.after(this.callout$)),n=parseInt(r.parent().css("margin-top"),10)):this.callout$&&(this.callout$.remove(),this.callout$=null),u.parentElement?(a=t(u.parentElement),"above"===c?(i=l,p={my:"left bottom",at:"left top-"+n,of:a,collision:"fit flipfit"}):"below"===c?(i=o,p={my:"left top",at:"left bottom+"+n,of:a,collision:"fit flipfit"}):"before"===c?(i=s,p={my:"right top",at:"left-"+n+" top",of:a,collision:"flipfit fit"}):"after"===c?(i=e,p={my:"left top",at:"right+"+n+" top",of:a,collision:"flipfit fit"}):"inside"===c&&(i=o,p={my:"left top",at:"left+"+n+" top+"+n,of:a}),this.callout$&&this.callout$.removeClass(o+" "+l+" "+s+" "+e).addClass(i)):p={my:"center",at:"center",of:window},this.options.position=p},_updateCallout:function(){var i,a,p,n,u,r;this.callout$&&(r=this.callout$,n=this.element.offset(),u=t(this.options.parentElement).offset(),r.hasClass(o)?n.top<u.top&&r.removeClass(o).addClass(l):r.hasClass(l)?n.top>u.top&&r.removeClass(l).addClass(o):r.hasClass(this.calloutAfter)?n.left<u.left&&r.removeClass(this.calloutAfter).addClass(this.calloutBefore):r.hasClass(this.calloutBefore)&&n.left>u.left&&r.removeClass(this.calloutBefore).addClass(this.calloutAfter),r.css("left",""),r.css("top",""),r.hasClass(o)||r.hasClass(l)?(i=parseInt(r.css("left"),10),(p=u.left-n.left)>0&&r.css("left",p+i)):(r.hasClass(e)||r.hasClass(s))&&(a=parseInt(r.css("top"),10),(p=u.top-n.top)>0&&r.css("top",p+a)))},_setOption:function(t,o){this.options;if("draggable"===t||"resizable"===t||"modal"===t)throw new Error("Popup "+t+" cannot be set.");this._super(t,o),"parentElement"!==t&&"callout"!==t&&"relativePosition"!==t||this._setPosition()}})}(apex.jQuery);