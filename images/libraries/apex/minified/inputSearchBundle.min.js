/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojeventtarget',["ojs/ojcore"],function(e){"use strict";class t{addEventListener(e,t){this._eventListeners||(this._eventListeners=[]),this._eventListeners.push({type:e.toLowerCase(),listener:t})}removeEventListener(e,t){if(this._eventListeners){let s;for(s=this._eventListeners.length-1;s>=0;s--)this._eventListeners[s].type==e&&this._eventListeners[s].listener==t&&this._eventListeners.splice(s,1)}}dispatchEvent(e){if(this._eventListeners){var t,s=this._eventListeners.slice(0);for(t=0;t<s.length;t++){var i=s[t];if(e&&e.type&&i.type==e.type.toLowerCase()&&!1===i.listener.apply(this,[e]))return!1}}return!0}static applyMixin(e){[t].forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{"constructor"!==s&&(e.prototype[s]=t.prototype[s])})})}}e.EventTargetMixin=t;e.GenericEvent=class{constructor(e,t){this.type=e,this.options=t,null!=t&&(this.detail=t.detail)}}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataprovider',["ojs/ojcore","ojs/ojeventtarget"],function(t){"use strict";var e,r,i=t.GenericEvent;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */!function(t){let e;!function(t){t.$co="$co",t.$eq="$eq",t.$ew="$ew",t.$pr="$pr",t.$gt="$gt",t.$ge="$ge",t.$lt="$lt",t.$le="$le",t.$ne="$ne",t.$regex="$regex",t.$sw="$sw"}(e=t.AttributeOperator||(t.AttributeOperator={}))}(e||(e={})),t.AttributeFilterOperator=e,t.AttributeFilterOperator.AttributeOperator=e.AttributeOperator,function(t){let e;!function(t){t.$and="$and",t.$or="$or"}(e=t.CompoundOperator||(t.CompoundOperator={}))}(r||(r={})),t.CompoundFilterOperator=r,t.CompoundFilterOperator.CompoundOperator=r.CompoundOperator;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class a{constructor(){this._handleMutationAdd=function(e){var r,i;let n=this,s=e[a._BEFOREKEYS],o=e[a._KEYS],l=[];o.forEach(function(t){l.push(t)});let f=e[a._DATA],u=e[a._METADATA],c=e[a._INDEXES];if(l&&l.length>0)if(c)l.forEach(function(t,e){n._items.splice(c[e],0,new n.Item(u[e],f[e]))});else if(s){let o,c,h,p,_,y=Object.assign([],s),d=Object.assign(new Set,e[a._KEYS]),m=Object.assign([],e[a._DATA]),g=Object.assign([],e[a._METADATA]),E=[];for(o=0;o<s.length;o++){if(h=s[o],_=!0,null!=h){for(c=0;c<l.length;c++)if(t.Object.compareValues(l[c],h)){_=!1;break}if(_)for(c=0;c<n._items.length;c++)if(t.Object.compareValues(null===(i=null===(r=n._items[c])||void 0===r?void 0:r.metadata)||void 0===i?void 0:i.key,h)){_=!1;break}}else _=!1;_&&E.push(h)}let b=s.length;for(;b>0;){for(o=0;o<s.length;o++)if(p=s[o],E.indexOf(p)>=0){E.push(p);break}b--}for(o=y.length-1;o>=0;o--)E.indexOf(y[o])>=0&&(delete y[o],d.delete(y[o]),delete m[o],delete g[o]);y.forEach(function(e,r){var i,a;if(null===e)n._items.push(new n.Item(u[r],f[r]));else for(o=0;o<n._items.length;o++)if(t.Object.compareValues(null===(a=null===(i=n._items[o])||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.key,e)){n._items.splice(o,0,new n.Item(u[r],f[r]));break}})}else if(n._fetchParams&&null!=n._fetchParams.sortCriteria){let t=n._fetchParams.sortCriteria;if(t){let e,r,i,a=n._getSortComparator(t),s=[];f.forEach(function(t,o){for(e=0;e<n._items.length;e++)if(r=n._items[e].data,(i=a(t,r))<0){n._items.splice(e,0,new n.Item(u[o],f[o])),s.push(o);break}}),f.forEach(function(t,e){s.indexOf(e)<0&&n._items.push(new n.Item(u[e],f[e]))})}}else f.forEach(function(t,e){n._items.push(new n.Item(u[e],f[e]))})},this._handleMutationRemove=function(e){let r=this,i=e[a._KEYS];if(i&&i.size>0){let e;i.forEach(function(i){for(e=r._items.length-1;e>=0;e--)if(t.Object.compareValues(r._items[e].metadata.key,i)){r._items.splice(e,1);break}})}},this._handleMutationUpdate=function(e){let r=this,i=e[a._KEYS],n=e[a._DATA],s=e[a._METADATA];if(n&&n.length>0){let e,a=0;i.forEach(function(i){for(e=r._items.length-1;e>=0;e--)if(t.Object.compareValues(r._items[e].metadata.key,i)){r._items.splice(e,1,new r.Item(s[a],n[a]));break}a++})}},this.Item=class{constructor(t,e){this.metadata=t,this.data=e,this[a._METADATA]=t,this[a._DATA]=e}},this.FetchByKeysResults=class{constructor(t,e){this.fetchParameters=t,this.results=e,this[a._FETCHPARAMETERS]=t,this[a._RESULTS]=e}},this.FetchByOffsetResults=class{constructor(t,e,r){this.fetchParameters=t,this.results=e,this.done=r,this[a._FETCHPARAMETERS]=t,this[a._RESULTS]=e,this[a._DONE]=r}},this._items=[]}addListResult(t){let e=this,r=[];t.value.data.forEach(function(i,a){r.push(new e.Item(t.value.metadata[a],i))}),this._items=this._items.concat(r),this._done=t.done}getDataList(t,e){this._fetchParams=t;let r=25;null!=t.size&&(r=-1==t.size?this.getSize():t.size);let i=this._items.slice(e,e+r),a=[],n=[];return i.forEach(function(t){a.push(t.data),n.push(t.metadata)}),{fetchParameters:t,data:a,metadata:n}}getDataByKeys(t){let e=this,r=new Map;if(t&&t.keys){let i;t.keys.forEach(function(t){for(i=0;i<e._items.length;i++)if(e._items[i].metadata.key==t){r.set(t,e._items[i]);break}})}return new this.FetchByKeysResults(t,r)}getDataByOffset(t){let e=[];return t&&(e=this._items.slice(t.offset,t.offset+t.size)),new this.FetchByOffsetResults(t,e,!0)}processMutations(t){null!=t.remove&&this._handleMutationRemove(t.remove),null!=t.add&&this._handleMutationAdd(t.add),null!=t.update&&this._handleMutationUpdate(t.update)}reset(){this._items=[],this._done=!1}getSize(){return this._items.length}isDone(){return this._done}_getSortComparator(t){let e=this;return function(r,i){let n,s,o,l,f,u;for(n=0;n<t.length;n++){s=t[n][a._DIRECTION],o=t[n][a._ATTRIBUTE],l=null,f=e._getVal(r,o),u=e._getVal(i,o);let c=0,h="string"==typeof f?f:new String(f).toString(),p="string"==typeof u?u:new String(u).toString();if(0!=(c="ascending"==s?h.localeCompare(p,void 0,{numeric:!0,sensitivity:"base"}):p.localeCompare(h,void 0,{numeric:!0,sensitivity:"base"})))return c}return 0}}_getVal(t,e){if("string"==typeof e){let r=e.indexOf(".");if(r>0){let i=e.substring(0,r),a=e.substring(r+1),n=t[i];if(n)return this._getVal(n,a)}}return"function"==typeof t[e]?t[e]():t[e]}}a._DATA="data",a._METADATA="metadata",a._ITEMS="items",a._BEFOREKEYS="addBeforeKeys",a._KEYS="keys",a._INDEXES="indexes",a._FROM="from",a._OFFSET="offset",a._REFRESH="refresh",a._MUTATE="mutate",a._SIZE="size",a._FETCHPARAMETERS="fetchParameters",a._SORTCRITERIA="sortCriteria",a._DIRECTION="direction",a._ATTRIBUTE="attribute",a._VALUE="value",a._DONE="done",a._RESULTS="results",a._CONTAINSPARAMETERS="containsParameters",a._DEFAULT_SIZE=25,a._CONTAINSKEYS="containsKeys",a._FETCHBYKEYS="fetchByKeys",a._FETCHBYOFFSET="fetchByOffset",a._FETCHFIRST="fetchFirst",a._FETCHATTRIBUTES="attributes",t.DataCache=a;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class n extends i{constructor(t){let e={};e[n._DETAIL]=t,super("mutate",e)}}n._DETAIL="detail",t.DataProviderMutationEvent=n,t.DataProviderMutationEvent=n;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class s extends i{constructor(){super("refresh")}}t.DataProviderRefreshEvent=s,t.DataProviderRefreshEvent=s,
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.DataProvider=function(){};
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class o{fetchByKeys(t){let e=0,r=this.getIterationLimit?this.getIterationLimit():-1,i={size:25},a=new Map,n=this.fetchFirst(i)[Symbol.asyncIterator]();return function t(i,a,n){return a.next().then(function(s){let o=s.value,l=o.data,f=o.metadata,u=f.map(function(t){return t.key}),c=!0;return i.keys.forEach(function(t){n.has(t)||u.map(function(e,r){e==t&&n.set(e,{metadata:f[r],data:l[r]})}),n.has(t)||(c=!1)}),e+=l.length,c||s.done?n:-1!=r&&e>=r?n:t(i,a,n)})}(t,n,a).then(function(e){let r=new Map;return e.forEach(function(t,e){let i=[t];r.set(e,i[0])}),{fetchParameters:t,results:r}})}containsKeys(t){return this.fetchByKeys(t).then(function(e){let r=new Set;return t.keys.forEach(function(t){null!=e.results.get(t)&&r.add(t)}),Promise.resolve({containsParameters:t,results:r})})}getCapability(t){if("fetchByKeys"==t)return{implementation:"iteration"};let e=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;let r=1;for(;this["_ojLastGetCapability"+r];)++r;for(--r;r>0&&!(e=this["_ojLastGetCapability"+r](t));r--);delete this._ojSkipLastCapability}return e}static applyMixin(t){let e=t.prototype.getCapability;if([o].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{"constructor"!==r&&(t.prototype[r]=e.prototype[r])})}),e){let r=1;for(;t.prototype["_ojLastGetCapability"+r];)++r;t.prototype["_ojLastGetCapability"+r]=e}}}t.FetchByKeysMixin=o,t.FetchByKeysMixin.applyMixin=o.applyMixin;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class l{fetchByOffset(t){let e=t&&t.size>0?t.size:25,r=t?t.sortCriteria:null,i=t&&t.offset>0?t.offset:0,a=0,n=this.getIterationLimit?this.getIterationLimit():-1,s=!1,o={};o.size=e,o.sortCriteria=r;let l=new Array,f=this.fetchFirst(o)[Symbol.asyncIterator]();return function t(r,o,l){return o.next().then(function(f){s=f.done;let u=f.value,c=u.data,h=u.metadata,p=c.length;if(i<a+p)for(let t=i<=a?0:i-a;t<p&&l.length!=e;t++)l.push({metadata:h[t],data:c[t]});return a+=p,l.length<e&&!s?-1!=n&&a>=n?l:t(r,o,l):l})}(t,f,l).then(function(e){return{fetchParameters:t,results:e,done:s}})}getCapability(t){if("fetchByOffset"==t)return{implementation:"iteration"};let e=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;let r=1;for(;this["_ojLastGetCapability"+r];)++r;for(--r;r>0&&!(e=this["_ojLastGetCapability"+r](t));r--);delete this._ojSkipLastCapability}return e}static applyMixin(t){let e=t.prototype.getCapability;if([l].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{"constructor"!==r&&(t.prototype[r]=e.prototype[r])})}),e){let r=1;for(;t.prototype["_ojLastGetCapability"+r];)++r;t.prototype["_ojLastGetCapability"+r]=e}}}t.FetchByOffsetMixin=l,t.FetchByOffsetMixin.applyMixin=l.applyMixin;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class f{constructor(t){t=t||{},this._textFilterAttributes=t.filterOptions?t.filterOptions.textFilterAttributes:null;let e=t.filterDef;e&&(e.op?(this.op=e.op,e.value?(this.value=e.value,e.attribute&&(this.attribute=e.attribute)):e.criteria&&(this.criteria=e.criteria)):e.text&&(this.text=e.text))}filter(e,r,i){return t.FilterUtils.satisfy(f._transformFilter(this),e)}static _transformFilter(t){let e;if(t){let r,i=t.op;if(t.text?i="$regex":"$le"===i?i="$lte":"$ge"===i?i="$gte":"$pr"===i&&(i="$exists"),"$and"!=i&&"$or"!=i){r=t.text?new RegExp(t.text.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"i"):t.value,e={};let a=t.attribute;if(a){let t={};"$sw"!==i&&"$ew"!==i&&"$co"!==i||(i="$regex",r=f._fixStringExpr(i,r)),t[i]=r,e[a]=t}else if(t.text){let a={};if(a[i]=r,t._textFilterAttributes){let r=[];t._textFilterAttributes.forEach(function(t){let e={};e[t]=a,r.push(e)}),e.$or=r}else e["*"]=a}else{let t=[];f._transformObjectExpr(r,i,null,t),e.$and=t}}else{let r=[];t.criteria.forEach(function(t){r.push(f._transformFilter(t))}),(e={})[i]=r}}return e}static _transformObjectExpr(t,e,r,i){if(Object.keys(t).length>0)Object.keys(t).forEach(function(a){let n=t[a],s=r?r+"."+a:a;if(n instanceof Object)f._transformObjectExpr(n,e,s,i);else{let t={};"$sw"!==e&&"$ew"!==e&&"$co"!==e||(e="$regex",n=f._fixStringExpr(e,n)),t[e]=n;let r={};r[s]=t,i.push(r)}});else{let a={};a[e]=t;let n={};n[r]=a,i.push(n)}}static _fixStringExpr(t,e){return("string"==typeof e||e instanceof String)&&("$sw"===t?e="^"+e:"$ew"===t&&(e+="$")),e}}t.FilterFactory=class{static getFilter(t){return new f(t)}},
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.FilterUtils=function(){function t(t,e){var r=!1;for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if(r||!i(a))throw new Error("parsing error "+e);t.operator=a,t.right=n,r=!0}}function e(t,e,r){var i;if("$lt"===t)return(r=(i=n(r,e))[0])<(e=i[1]);if("$gt"===t)return(r=(i=n(r,e))[0])>(e=i[1]);if("$lte"===t)return(r=(i=n(r,e))[0])<=(e=i[1]);if("$gte"===t)return(r=(i=n(r,e))[0])>=(e=i[1]);if("$eq"===t)return r===e;if("$ne"===t)return r!==e;if("$regex"===t){if(r){if("string"!=typeof r&&!(r instanceof String))if(r instanceof Object){if("[object Object]"==(r=r.toString()))return!1}else r=new String(r);return null!==r.match(e)}return!1}if("$exists"===t)return e?null!=r:null==r;throw new Error("not a valid expression! "+expTree)}function r(t){return"$and"===t||"$or"===t}function i(t){return"$lt"===t||"$gt"===t||"$lte"===t||"$gte"===t||"$eq"===t||"$ne"===t||"$regex"===t||"$exists"===t}function a(t){return null!=t&&(t instanceof String||"string"==typeof t)}function n(t,e){return a(t)&&null==e?e="":a(e)&&null==t&&(t=""),[t,e]}function s(t,e){for(var r=t.split("."),i=e,a=0;a<r.length;a++)i=i[r[a]];return i}return{satisfy:function(a,n){return!a||function t(a,n){var o=a.operator;if(r(o)){if(!a.left&&a.array instanceof Array){for(var l,f=a.array,u=0;u<f.length;u++){var c=t(f[u],n);if("$or"===o&&!0===c)return!0;if("$and"===o&&!1===c)return!1;l=c}return l}throw new Error("invalid expression tree!"+a)}if(i(o)){var h,p=a.right;if("*"!=a.left)return h=s(a.left,n),e(o,p,h);var _,y=Object.keys(n);for(_=0;_<y.length;_++)if(h=s(y[_],n),e(o,p,h))return!0;return!1}throw new Error("not a valid expression!"+a)}(function e(a){var n,s=[];for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];if(0===o.indexOf("$")){if(r(o)){if(!(l instanceof Array))throw new Error("not a valid expression: "+a);n={operator:o,array:[]};for(var f=0;f<l.length;f++){var u=e(l[f]);n.array.push(u)}}else if(i(o))throw new Error("not a valid expression: "+a)}else if("object"!=typeof l)s.push({left:o,right:l,operator:"$eq"});else{var c={left:o};t(c,l),s.push(c)}}return s.length>1?n={operator:"$and",array:s}:1===s.length&&(n=s[0]),n}(a),n)},getValue:s,assembleObject:function(t,e){var r;if(e){r={};for(var i=0;i<e.length;i++)for(var a=r,n=t,s=e[i].split("."),o=0;o<s.length;o++)n=n[s[o]],!a[s[o]]&&o<s.length-1&&(a[s[o]]={}),o===s.length-1?a[s[o]]=n:a=a[s[o]]}else r=t;return r}}}();
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var u={};return u.FetchByKeysMixin=t.FetchByKeysMixin,u.FetchByOffsetMixin=t.FetchByOffsetMixin,u.FilterFactory=t.FilterFactory,u.DataProviderRefreshEvent=t.DataProviderRefreshEvent,u.DataProviderMutationEvent=t.DataProviderMutationEvent,u.AttributeFilterOperator=t.AttributeFilterOperator,u.CompoundFilterOperator=t.CompoundFilterOperator,u.DataCache=t.DataCache,u});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlistdataproviderview',["ojs/ojcore","jquery","ojs/ojdataprovider","ojs/ojcomponentcore","ojs/ojeventtarget","ojs/ojdataprovider"],function(t,e,s){"use strict";class i{constructor(t,e){this.dataProvider=t,this.options=e,this._noFilterSupport=!1,this.AsyncIterable=class{constructor(t,e){this._parent=t,this._asyncIterator=e,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}},this.AsyncIterator=class{constructor(t,e,s){this._parent=t,this._nextFunc=e,this._params=s}next(){let t=this._nextFunc(this._params);return Promise.resolve(t)}},this.AsyncIteratorYieldResult=class{constructor(t,e){this._parent=t,this.value=e,this[i._VALUE]=e,this[i._DONE]=!1}},this.AsyncIteratorReturnResult=class{constructor(t,e){this._parent=t,this.value=e,this[i._VALUE]=e,this[i._DONE]=!0}},this.FetchListResult=class{constructor(t,e,s,r){this._parent=t,this.fetchParameters=e,this.data=s,this.metadata=r,this[i._FETCHPARAMETERS]=e,this[i._DATA]=s,this[i._METADATA]=r}},this.Item=class{constructor(t,e,s){this._parent=t,this.metadata=e,this.data=s,this[i._METADATA]=e,this[i._DATA]=s}},this.ItemMetadata=class{constructor(t,e){this._parent=t,this.key=e,this[i._KEY]=e}},this.FetchListParameters=class{constructor(t,e,s,r,n,l){this._parent=t,this.params=e,this.size=s,this.sortCriteria=r,this.filterCriterion=n,this.attributes=l;let _=this;e&&Object.keys(e).forEach(function(t){_[t]=e[t]}),this[i._SIZE]=s,r&&(this[i._SORTCRITERIA]=r),n&&(this[i._FILTERCRITERION]=n),l&&(this[i._FETCHATTRIBUTES]=l)}},this.FetchByKeysParameters=class{constructor(t,e,s,r){this._parent=t,this.keys=e,this.params=s,this.attributes=r;let n=this;s&&Object.keys(s).forEach(function(t){n[t]=s[t]}),e&&(this[i._KEYS]=e),r&&(this[i._FETCHATTRIBUTES]=r)}},this.FetchByOffsetParameters=class{constructor(t,e,s,r,n,l,_){this._parent=t,this.offset=e,this.params=s,this.size=r,this.sortCriteria=n,this.filterCriterion=l,this.attributes=_;let a=this;s&&Object.keys(s).forEach(function(t){a[t]=s[t]}),r&&(this[i._SIZE]=r),n&&(this[i._SORTCRITERIA]=n),e&&(this[i._OFFSET]=e),l&&(this[i._FILTERCRITERION]=l),_&&(this[i._FETCHATTRIBUTES]=_)}},this.FetchByKeysResults=class{constructor(t,e,s){this._parent=t,this.fetchParameters=e,this.results=s,this[i._FETCHPARAMETERS]=e,this[i._RESULTS]=s}},this.ContainsKeysResults=class{constructor(t,e,s){this._parent=t,this.containsParameters=e,this.results=s,this[i._CONTAINSPARAMETERS]=e,this[i._RESULTS]=s}},this.FetchByOffsetResults=class{constructor(t,e,s,r){this._parent=t,this.fetchParameters=e,this.results=s,this.done=r,this[i._FETCHPARAMETERS]=e,this[i._RESULTS]=s,this[i._DONE]=r}},this[i._FROM]=null==this.options?null:this.options[i._FROM],this[i._OFFSET]=null==this.options?0:this.options[i._OFFSET]>0?this.options[i._OFFSET]:0,this[i._SORTCRITERIA]=null==this.options?null:this.options[i._SORTCRITERIA],this[i._DATAMAPPING]=null==this.options?null:this.options[i._DATAMAPPING],this[i._FETCHATTRIBUTES]=null==this.options?null:this.options[i._FETCHATTRIBUTES],this[i._FILTERCRITERION]=null==this.options?null:this.options[i._FILTERCRITERION],this._addEventListeners(t),t.getCapability&&!t.getCapability("filter")&&(this._noFilterSupport=!0)}containsKeys(t){let e=this;return this.dataProvider[i._CONTAINSKEYS]?this.dataProvider[i._CONTAINSKEYS](t):this.fetchByKeys(t).then(function(s){let r=new Set;return t[i._KEYS].forEach(function(t){null!=s[i._RESULTS].get(t)&&r.add(t)}),Promise.resolve(new e.ContainsKeysResults(e,t,r))})}fetchByKeys(t){let e=this,s=null!=t?t[i._KEYS]:null,r=null!=t?t[i._FETCHATTRIBUTES]:null;null==r&&(r=this[i._FETCHATTRIBUTES]);let n=new e.FetchByKeysParameters(e,s,t,r);if(this.dataProvider[i._FETCHBYKEYS])return this.dataProvider[i._FETCHBYKEYS](n).then(function(t){let s=t[i._RESULTS],r=new Map;return s.forEach(function(t,s){let i=e._getMappedItems([t]);r.set(s,i[0])}),new e.FetchByKeysResults(e,n,r)});{let s=new this.FetchListParameters(this,null,i._DEFAULT_SIZE,null,null,r),l=new Map,_=this.dataProvider[i._FETCHFIRST](s)[Symbol.asyncIterator]();return this._fetchNextSet(t,_,l).then(function(t){let s=new Map;return t.forEach(function(t,i){let r=e._getMappedItems([t]);s.set(i,r[0])}),new e.FetchByKeysResults(e,n,s)})}}fetchByOffset(t){let e=this,s=null!=t?t[i._OFFSET]:null,r=null!=t?t[i._SIZE]:null,n=null!=t?t[i._FETCHATTRIBUTES]:null;null==n&&(n=this[i._FETCHATTRIBUTES]);let l=null!=t?t[i._SORTCRITERIA]:null;null==l&&(l=this[i._SORTCRITERIA]);let _=this._getMappedSortCriteria(l),a=null!=t?t[i._FILTERCRITERION]:null,h=this._getMappedFilterCriterion(a),E=new e.FetchByOffsetParameters(e,s,t,r,_,h,n);return this.dataProvider[i._FETCHBYOFFSET](E).then(function(t){let s=t[i._RESULTS],r=t[i._DONE],n=new Array;return s.forEach(function(t){let s=e._getMappedItems([t]);n.push(s[0])}),new e.FetchByOffsetResults(e,E,n,r)})}fetchFirst(t){let e={};e[i._ITEMS]=[],e[i._DONE]=!1,e[i._STARTINDEX]=0;let s=null!=t?t[i._SIZE]:null,r=null!=t?t[i._SORTCRITERIA]:null;null==r&&(r=this[i._SORTCRITERIA]);let n=this._getMappedSortCriteria(r),l=null!=t?t[i._FILTERCRITERION]:null;null==l&&(l=this[i._FILTERCRITERION]);let _=this._getMappedFilterCriterion(l),a=null!=t?t[i._FETCHATTRIBUTES]:null;null==a&&(a=this[i._FETCHATTRIBUTES]);let h=this;if(null==h[i._FROM]&&h[i._OFFSET]>0){let r=h[i._OFFSET];return new this.AsyncIterable(this,new this.AsyncIterator(this,function(t){return function(){let e=new h.FetchByOffsetParameters(h,r,null,s,n,_,a);return h.dataProvider[i._FETCHBYOFFSET](e).then(function(e){var n=e.results;r+=n.length;let l=h._getMappedItems(n);h._cacheResult(t,l),t[i._DONE]=e[i._DONE];var _=l.map(function(t){return t[i._DATA]}),a=l.map(function(t){return t[i._METADATA]});let E=e[i._FETCHPARAMETERS],T=null!=E?E[i._SORTCRITERIA]:null,u=null!=E?E[i._FILTERCRITERION]:null,o=h._getUnmappedSortCriteria(T),A=h._getUnmappedFilterCriterion(u),R=new h.FetchByOffsetParameters(h,h[i._OFFSET],null,s,o,A);return t[i._DONE]?Promise.resolve(new h.AsyncIteratorReturnResult(h,new h.FetchListResult(h,R,_,a))):Promise.resolve(new h.AsyncIteratorYieldResult(h,new h.FetchListResult(h,R,_,a)))})}}(e),t))}{let r=new this.FetchListParameters(this,t,s,n,_,a),l=this.dataProvider[i._FETCHFIRST](r)[Symbol.asyncIterator]();return new this.AsyncIterable(this,new this.AsyncIterator(this,function(e,s){return function(){return s.next().then(function(r){let n=r[i._VALUE][i._DATA],l=r[i._VALUE][i._METADATA],a=n.map(function(t,e){return new h.Item(h,l[e],n[e])});h._noFilterSupport&&h._filterResult(_,a);let E=h._getMappedItems(a);h._cacheResult(e,E),e[i._DONE]=r[i._DONE];let T=null!=t?t[i._SIZE]:null,u=(null!=t&&t[i._OFFSET],r[i._VALUE][i._FETCHPARAMETERS]),o=null!=u?u[i._SORTCRITERIA]:null,A=null!=u?u[i._FILTERCRITERION]:null,R=h._getUnmappedSortCriteria(o),c=h._getUnmappedFilterCriterion(A),I=new h.FetchListParameters(h,t,T,R,c);return h._fetchUntilKey(I,h[i._FROM],e,s).then(function(){return h._fetchUntilOffset(I,h[i._OFFSET]+e[i._STARTINDEX],n.length,e,s)})})}}(e,l),t))}}getCapability(t){return this.dataProvider.getCapability(t)}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}_fetchNextSet(e,s,r){let n=this;return s.next().then(function(l){var _=l[i._VALUE],a=_[i._DATA],h=_[i._METADATA],E=h.map(function(t){return t[i._KEY]});let T=!0;return e[i._KEYS].forEach(function(e){r.has(e)||E.map(function(s,i){t.Object.compareValues(s,e)&&r.set(e,new n.Item(n,h[i],a[i]))}),r.has(e)||(T=!1)}),T||l[i._DONE]?r:n._fetchNextSet(e,s,r)})}_fetchUntilKey(e,s,r,n){let l=this;if(null!=s){let e=r[i._ITEMS].filter(function(e){if(t.KeyUtils.equals(e[i._METADATA][i._KEY],s))return!0});if(e.length>0){let t=r[i._ITEMS].indexOf(e[0]);r[i._ITEMS]=r[i._ITEMS].slice(t,r[i._ITEMS].length)}else{if(!r[i._DONE])return n.next().then(function(t){let e=t[i._VALUE][i._DATA],s=t[i._VALUE][i._METADATA],_=e.map(function(t,i){return new l.Item(l,s[i],e[i])}),a=l._getMappedItems(_);return l._cacheResult(r,a),r[i._DONE]=t[i._DONE],l._fetchUntilKey(t[i._FETCHPARAMETERS],a[i._KEYS],r,n)});r[i._ITEMS]=[]}}return Promise.resolve(null)}_fetchUntilOffset(t,e,s,r,n){let l=this,_=null!=t&&t[i._SIZE]>0?t[i._SIZE]:s;e=e>0?e:0;let a=r[i._ITEMS].slice(e,e+_);if(this._noFilterSupport){let e=this._getMappedFilterCriterion(t[i._FILTERCRITERION]);this._filterResult(e,a)}if(a.length<_){if(r[i._DONE]){r[i._STARTINDEX]=r[i._STARTINDEX]+a.length;let e=a.map(function(t){return t[i._DATA]}),s=a.map(function(t){return t[i._METADATA]});return Promise.resolve(new l.AsyncIteratorReturnResult(l,new l.FetchListResult(l,t,e,s)))}return n.next().then(function(s){let _=s[i._VALUE][i._DATA],a=s[i._VALUE][i._METADATA],h=_.map(function(t,e){return new l.Item(l,a[e],_[e])});if(l._noFilterSupport){let e=l._getMappedFilterCriterion(t[i._FILTERCRITERION]);l._filterResult(e,h)}let E=l._getMappedItems(h);return l._cacheResult(r,E),r[i._DONE]=s[i._DONE],l._fetchUntilOffset(s[i._VALUE][i._FETCHPARAMETERS],e,_.length,r,n)})}{r[i._STARTINDEX]=r[i._STARTINDEX]+a.length;let e=a.map(function(t){return t[i._DATA]}),s=a.map(function(t){return t[i._METADATA]});return r[i._DONE]?Promise.resolve(new l.AsyncIteratorReturnResult(l,new l.FetchListResult(l,t,e,s))):Promise.resolve(new l.AsyncIteratorYieldResult(l,new l.FetchListResult(l,t,e,s)))}}_cacheResult(t,e){e.map(function(e){t[i._ITEMS].push(e)})}_filterResult(t,e){if(t){t.filter||(t=s.FilterFactory.getFilter({filterDef:t}));let r=e.length-1;for(;r>=0;)t.filter(e[r][i._DATA])||e.splice(r,1),r--}}_getMappedItems(t){let e=this;if(null!=this[i._DATAMAPPING]){let s=this[i._DATAMAPPING][i._MAPFIELDS];if(null!=s&&null!=t&&t.length>0){let i=new Array;return i=t.map(function(t){return s.bind(e)(t)})}}return t}_getMappedFilterCriterion(t){if(null!=this[i._DATAMAPPING]){let e=this[i._DATAMAPPING][i._MAPFILTERCRITERION];if(null!=e&&null!=t)return e(t)}return t}_getMappedSortCriteria(t){if(null!=this[i._DATAMAPPING]){let e=this[i._DATAMAPPING][i._MAPSORTCRITERIA];if(null!=e&&null!=t&&t.length>0)return e(t)}return t}_getUnmappedSortCriteria(t){if(null!=this[i._DATAMAPPING]){let e=this[i._DATAMAPPING][i._UNMAPSORTCRITERIA];if(null!=e&&null!=t&&t.length>0)return e(t)}return t}_getUnmappedFilterCriterion(t){if(null!=this[i._DATAMAPPING]){let e=this[i._DATAMAPPING][i._UNMAPFILTERCRITERION];if(null!=e&&null!=t)return e(t)}return t}_addEventListeners(t){let e=this;t[i._ADDEVENTLISTENER](i._REFRESH,function(t){e.dispatchEvent(t)}),t[i._ADDEVENTLISTENER](i._MUTATE,function(t){e.dispatchEvent(t)})}}
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
return i._KEY="key",i._KEYS="keys",i._DATA="data",i._STARTINDEX="startIndex",i._SORT="sort",i._SORTCRITERIA="sortCriteria",i._FILTERCRITERION="filterCriterion",i._METADATA="metadata",i._ITEMS="items",i._FROM="from",i._OFFSET="offset",i._REFRESH="refresh",i._MUTATE="mutate",i._SIZE="size",i._FETCHPARAMETERS="fetchParameters",i._VALUE="value",i._DONE="done",i._DATAMAPPING="dataMapping",i._MAPFIELDS="mapFields",i._MAPSORTCRITERIA="mapSortCriteria",i._MAPFILTERCRITERION="mapFilterCriterion",i._UNMAPSORTCRITERIA="unmapSortCriteria",i._UNMAPFILTERCRITERION="unmapFilterCriterion",i._RESULTS="results",i._CONTAINSPARAMETERS="containsParameters",i._DEFAULT_SIZE=25,i._CONTAINSKEYS="containsKeys",i._FETCHBYKEYS="fetchByKeys",i._FETCHBYOFFSET="fetchByOffset",i._FETCHFIRST="fetchFirst",i._ADDEVENTLISTENER="addEventListener",i._FETCHATTRIBUTES="attributes",t.ListDataProviderView=i,t.ListDataProviderView=i,t.EventTargetMixin.applyMixin(i),i});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtreedataproviderview',["ojs/ojcore","jquery","ojs/ojlistdataproviderview","ojs/ojcomponentcore","ojs/ojeventtarget","ojs/ojdataprovider"],function(t,e,i){"use strict";class r{constructor(t,e){this.dataProvider=t,this.options=e,this._listDataProviderView=new i(t,e)}getChildDataProvider(t,e){let i=this.dataProvider.getChildDataProvider(t,e);return i?new r(i,this.options):null}containsKeys(t){return this._listDataProviderView.containsKeys(t)}fetchByKeys(t){return this._listDataProviderView.fetchByKeys(t)}fetchByOffset(t){return this._listDataProviderView.fetchByOffset(t)}fetchFirst(t){return this._listDataProviderView.fetchFirst(t)}getCapability(t){return this._listDataProviderView.getCapability(t)}getTotalSize(){return this._listDataProviderView.getTotalSize()}isEmpty(){return this._listDataProviderView.isEmpty()}addEventListener(t,e){this._listDataProviderView.addEventListener(t,e)}removeEventListener(t,e){this._listDataProviderView.removeEventListener(t,e)}dispatchEvent(t){return this._listDataProviderView.dispatchEvent(t)}}
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
return t.TreeDataProviderView=r,t.TreeDataProviderView=r,r});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojeditablevalue',["ojs/ojcore","jquery","hammerjs","ojs/ojtranslation","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojmessaging","ojs/ojconverterutils","ojs/ojvalidator-required","ojs/ojlogger","ojs/ojlabelledbyutils","ojs/ojvalidation-error","ojs/ojjquery-hammer","ojs/ojpopup","ojs/ojlabel"],function(e,t,i,n,s,a,o,l,r,d,u,h,p){"use strict";e.EditableValueUtils={},e.EditableValueUtils.validationContext={COMPONENT_CREATE:1,CONVERTER_OPTION_CHANGE:2,DISABLED_OPTION_CHANGE:3,READONLY_OPTION_CHANGE:4,REFRESH_METHOD:5,REQUIRED_OPTION_CHANGE:6,RESET_METHOD:7,USER_ACTION:8,VALIDATE_METHOD:9,VALIDATORS_OPTION_CHANGE:10,VALUE_OPTION_CHANGE:11},e.EditableValueUtils.validateMethodOptions={doValueChangeCheck:!1,validationContext:e.EditableValueUtils.validationContext.VALIDATE_METHOD},e.EditableValueUtils.converterOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.CONVERTER_OPTION_CHANGE},e.EditableValueUtils.disabledOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.DISABLED_OPTION_CHANGE},e.EditableValueUtils.requiredOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.REQUIRED_OPTION_CHANGE},e.EditableValueUtils.readOnlyOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.READONLY_OPTION_CHANGE},e.EditableValueUtils.refreshMethodOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.REFRESH_METHOD},e.EditableValueUtils.validatorsOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.VALIDATORS_OPTION_CHANGE};e.EditableValueUtils.VALIDATE_VALUES={VALID:"valid",INVALID:"invalid"},e.EditableValueUtils.getAttributeValue=function(e,t){var i,n={};if(e&&t){var s=e[0];switch(t){case"disabled":i=s.hasAttribute("disabled")?!!s.disabled:void 0;break;case"pattern":i=s.pattern||void 0;break;case"placeholder":i=s.placeholder||void 0;break;case"readonly":i=s.hasAttribute("readonly")?!!s.readOnly:void 0;break;case"required":if(s.hasAttribute("required")){var a=s.required;i=void 0===a||!!a}else i=void 0;break;case"title":i=s.hasAttribute("title")?s.title:void 0;break;case"value":i=e.val()||void 0;break;case"min":case"max":default:i=s.getAttribute(t)||void 0}}return void 0!==i?(n.fromDom=!0,n.value=i):n.fromDom=!1,n},e.EditableValueUtils.initializeOptionsFromDom=function(t,i,n,s){for(var a={},o=0;o<t.length;o++){var l,r,d=t[o],u=d.attribute,h=d.option||u,p=d.coerceDomValue,g=d.validateOption,c=n.element,_=n.options[h];void 0===i[h]&&(_=n.options[h],(r=e.EditableValueUtils.getAttributeValue(c,u)).fromDom&&(l=r.value,p&&("boolean"==typeof p?l=e.EditableValueUtils.coerceDomValueForOption(h,l):"function"==typeof p&&(l=p.call(n,l))),a[h]=l));var y=h in a?a[h]:_;g&&"boolean"==typeof g&&e.EditableValueUtils.validateValueForOption(h,y)}null!=s&&s(a),n.option(a,{_context:{writeback:!0,internalSet:!0}})},e.EditableValueUtils.validateValueForOption=function(e,t){var i=!1;switch(e){case"required":null!==t&&"boolean"!=typeof t&&(i=!0);break;case"readOnly":case"disabled":null!==t&&"boolean"!=typeof t&&(i=!0)}if(i)throw new Error("Option '"+e+"' has invalid value set: "+t)},e.EditableValueUtils.coerceDomValueForOption=function(e,t){var i=t;switch(e){case"required":i=!!t}return i},e.EditableValueUtils.setPickerAttributes=function(e,t){if(e&&t){var i=t.class;if(i)for(var n=i.split(" "),s=0,a=n.length;s<a;++s)e[0].classList.add(n[s]);var o=t.style;if(o){var l=e[0],r=l.getAttribute("style");r?l.setAttribute("style",r+";"+o):l.setAttribute("style",o)}}},e.EditableValueUtils.hasNoLabelFlag=function(e){return e[0].hasAttribute("data-oj-no-labelledby")},e.EditableValueUtils._getOjLabelAriaLabelledBy=function(t,i){var n,s=e.EditableValueUtils._getCustomOjLabelElements(t);if(s){n="";for(var a=0;a<s.length;a++){var o=s[a],l=o.getAttribute("label-id");if(!l){var r=o.querySelector("label");r?l=r.getAttribute("id"):(o.setAttribute("label-id",i),l=i)}n+=l,a+1<s.length&&(n+=" ")}}return n},e.EditableValueUtils._getCustomOjLabelElements=function(e){var t=[];if(e)for(var i=e.split(/\s+/),n=0;n<i.length;n++){var s=i[n],a=document.getElementById(s);a?t.push(a):h.info("Cannot find oj-label with id "+a)}return t},e.EditableValueUtils._initInputIdLabelForConnection=function(e,t,i){t&&(e.setAttribute("id",t+"|input"),i&&this._linkLabelForInputComp(i,e.id)),i&&this._setReadonlyDivLabelledBy(i)},e.EditableValueUtils._labelledByUpdatedForInputComp=function(e,t){e&&(t&&this._linkLabelForInputComp(e,t),this._setReadonlyDivLabelledBy(e)),this._IsRequired()&&this.options.translations.required&&(this._implicitReqValidator=null,this._getImplicitRequiredValidator())},e.EditableValueUtils._linkLabelForInputComp=function(t,i){var n=e.EditableValueUtils._getCustomOjLabelElements(t);n&&e.EditableValueUtils._setDataOjInputIdAttrOnLabel(i,n)},e.EditableValueUtils._setReadonlyDivLabelledBy=function(t){e.Assert.assert(t);let i=this._getReadonlyDiv();i&&i.setAttribute("aria-labelledby",t+"|label")},e.EditableValueUtils._createOrUpdateReadonlyDiv=function(e,t=!0){let i=this._getReadonlyDiv();!i&&t&&(i=this._createReadonlyDiv(e),this.options.labelledBy&&this._setReadonlyDivLabelledBy(this.options.labelledBy),this._setAriaLabelFromLabelHint()),i&&(i.textContent=this._GetDisplayValue())},e.EditableValueUtils._setDataOjInputIdAttrOnLabel=function(e,t){if(t)for(var i=0;i<t.length;i++){t[i].setAttribute("data-oj-input-id",e)}},e.EditableValueUtils.validate=function(){var e;if(e=this._SetValue(this._GetDisplayValue(),null,this._VALIDATE_METHOD_OPTIONS),this._IsCustomElement()){if(e instanceof Promise)return e.then(function(e){return Promise.resolve(e?"valid":"invalid")});e=Promise.resolve(e?"valid":"invalid")}else if(e instanceof Promise)return e.then(function(e){return Promise.resolve(e?"valid":"invalid")});return e},e.EditableValueUtils._refreshRequired=function(e){var t,i,n,s=this._AriaRequiredUnsupported();if(this._refreshTheming("required",e),s||(i=this._GetContentElement(),(n=e)&&i?i[0].setAttribute("aria-required",n):i[0].removeAttribute("aria-required")),!this._IsCustomElement()&&(this.$label||this._createOjLabel(),this.$label&&(this.$label.ojLabel("option","showRequired",e),s))){var a=this._getAriaLabelledByElement(this.element);if(null!==a&&0!==a.length&&(t=a[0].getAttribute("id")),t){let i=t+"_requiredIcon";e?this._describedByUpdated(null,i):this._describedByUpdated(i,null)}}},e.EditableValueUtils._AfterSetOptionRequired=function(t){this._refreshRequired(this._IsRequired()),this._runMixedValidationAfterSetOption(e.EditableValueUtils.requiredOptionOptions)},e.EditableValueUtils._AfterSetOptionValidators=function(){var t;this._ResetAllValidators(),this._hasInvalidMessagesShowing()&&(this._clearComponentMessages(),t=this._GetDisplayValue(),this._SetValue(t,null,e.EditableValueUtils.validatorsOptionOptions))},e.EditableValueUtils._AfterSetOptionAsyncValidators=function(){this._AfterSetOptionValidators()},e.EditableValueUtils._AfterSetOptionConverter=function(){this._converter=null,this._converterChangedCounter+=1;var e=this._GetConverter();if(e instanceof Promise){var t=this;this._setBusyStateAsyncConverterLoading();var i=this._converterChangedCounter;this._loadingConverter(e).then(function(){i===t._converterChangedCounter&&t._ResetConverter(),t._clearBusyStateAsyncConverterLoading()})}else this._ResetConverter()},e.EditableValueUtils._AfterCreateConverterCached=function(){this._HasPlaceholderSet()&&(this._SetPlaceholder(this.options.placeholder),this._customPlaceholderSet=!0),this._initComponentMessaging(this._MESSAGING_CONTENT_UPDATE_TYPE.ALL),this._Refresh("value",this.options.value,!1),this.options.messagesShown.length>0&&this._setMessagesOption("messagesShown",this.options.messagesShown,null,!0)},e.EditableValueUtils._ResetConverter=function(){var t;this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT)),this._hasInvalidMessagesShowing()?(this._clearComponentMessages(),t=this._GetDisplayValue(),this._SetValue(t,null,e.EditableValueUtils.converterOptionOptions)):this._Refresh("converter",this.options.converter,!0)},e.EditableValueUtils._GetNormalizedValidatorsFromOption=function(){var t,i,n,s,a,o,l=!0,r=[];if(n=this.options.validators)for(t=0;t<n.length;t++)"object"==typeof(i=n[t])?(i.validate&&"function"==typeof i.validate||(l=!1),l||(o=i.type)&&"string"==typeof o&&(e.Validation&&e.Validation.validatorFactory?a=e.Validation.validatorFactory(o):h.error('oj.Validation.validatorFactory is not available and it is needed to support the deprecated json format for validators property. Please include the backward compatibility "ojvalidation-base" module.'),a&&((s=e.CollectionUtils.copyInto({},i.options)||{}).converter=s.converter||this._GetConverter(),s.label=s.label||this._getLabelText(),i=a.createValidator(s))),r.push(i)):h.error("Unable to parse the validator provided:"+i);return r},e.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption=function(){var e,t,i,n=[];for(i=this.options.asyncValidators,e=0;e<i.length;e++)"object"==typeof(t=i[e])?t.validate&&"function"==typeof t.validate&&n.push(t):h.error("Unable to parse the validator provided:"+t);return n},e.EditableValueUtils._GetConverter=function(){var e,t,i,n=this;if(!this._converter){if((e=this.options.converter)instanceof Promise?i=e:t=d.getConverterInstance(e),i)return i.then(function(e){return n._converter=e,n._converter||null});this._converter=t}return this._converter||null},e.EditableValueUtils._SetBusyState=function(e){void 0===this._resolveBusyStateAsyncMap&&(this._resolveBusyStateAsyncMap=new Map);var t=this._resolveBusyStateAsyncMap.get(e);if(!t){var i=this.element[0],n=s.getContext(i).getBusyContext(),a="The page is waiting for async validators for displayValue "+e;i&&i.id&&(a+=' for "'+i.id+'" '),a+="to finish.",t=n.addBusyState({description:a}),this._resolveBusyStateAsyncMap.set(e,t)}},e.EditableValueUtils._ClearBusyState=function(e){var t;void 0!==this._resolveBusyStateAsyncMap&&(t=this._resolveBusyStateAsyncMap.get(e))&&(t(),this._resolveBusyStateAsyncMap.delete(e))},e.EditableValueUtils._SetBusyStateAsyncValidatorHint=function(e){void 0===this._resolveBusyStateAsyncValidatorHintMap&&(this._resolveBusyStateAsyncValidatorHintMap=new Map);var t=this._resolveBusyStateAsyncValidatorHintMap.get(e);if(!t){var i=this.element[0],n=s.getContext(i).getBusyContext(),a="The page is waiting for async validator hint for counter "+e;i&&i.id&&(a+=' for "'+i.id+'" '),a+="to finish.",t=n.addBusyState({description:a}),this._resolveBusyStateAsyncValidatorHintMap.set(e,t)}},e.EditableValueUtils._ClearBusyStateAsyncValidatorHint=function(e){var t;void 0!==this._resolveBusyStateAsyncValidatorHintMap&&(t=this._resolveBusyStateAsyncValidatorHintMap.get(e))&&(t(),this._resolveBusyStateAsyncValidatorHintMap.delete(e))},e.EditableValueUtils._SetBusyStateAsyncConverterLoading=function(){if(!this._resolveBusyStateAsyncConverterLoading){var e=this.element[0],t=s.getContext(e).getBusyContext(),i="The page is waiting for async converter loading ";e&&e.id&&(i+='for "'+e.id+'" '),i+="to finish.",this._resolveBusyStateAsyncConverterLoading=t.addBusyState({description:i})}},e.EditableValueUtils._ClearBusyStateAsyncConverterLoading=function(){void 0!==this._resolveBusyStateAsyncConverterLoading&&(this._resolveBusyStateAsyncConverterLoading(),delete this._resolveBusyStateAsyncConverterLoading)},e.EditableValueUtils._getShowLoadingDelay=function(){null==this._defaultOptions&&(this._defaultOptions=a.parseJSONFromFontFamily("oj-form-control-option-defaults"));var e=parseInt(this._defaultOptions.showIndicatorDelay,10);return isNaN(e)?0:e},e.EditableValueUtils._SetInputType=function(t){var i="text",n=e.AgentUtils.getAgentInfo();if(n.os===e.AgentUtils.OS.ANDROID||n.os===e.AgentUtils.OS.IOS||n.os===e.AgentUtils.OS.WINDOWSPHONE)if(t.indexOf(this.options.virtualKeyboard)>=0)i=this.options.virtualKeyboard;else{var s=this._GetConverter();if(s&&s.resolvedOptions){var a=s.resolvedOptions();t.indexOf(a.virtualKeyboardHint)>=0&&(i=a.virtualKeyboardHint)}}null==i?this.element[0].removeAttribute("type"):this.element[0].setAttribute("type",i)},e.EditableValueUtils._createReadonlyDiv=function(e){if(this._UseReadonlyDiv()){var t=document.createElement("div");t.classList.add("oj-text-field-readonly-div");var i=document.createElement("div");return i.classList.add("oj-text-field-readonly"),i.setAttribute("tabindex","0"),i.setAttribute("role","textbox"),i.setAttribute("aria-readonly",!0),t.appendChild(i),e.parentNode.insertBefore(t,e),i}return null},e.EditableValueUtils._getReadonlyDiv=function(){return this.widget()[0].querySelector(".oj-text-field-readonly")};var g=function(e){this.Init(e)};e.Object.createSubclass(g,e.MessagingStrategy,"BaseInsidelLabelStrategy"),g.prototype._GetFormControlLabelStyleClass=function(){return"oj-form-control-label-inside"},g.prototype._CreateLabel=function(){var e=this.GetComponent(),t=this._GetContainer(e);if(!t)return;var i=e.options,n=e._getRootElement(),s=this._GetFormControlLabelStyleClass();n.classList.add(s),this.GenerateIdIfNeeded(n),this._showUserAssistanceNotInline=e._showUserAssistanceNotInline();let a=i.required&&this._showUserAssistanceNotInline;this._createOjLabelElement(n,e,t,i.labelHint,a,i.helpHints,this._showUserAssistanceNotInline)},g.prototype._createOjLabelElement=function(e,t,i,n,s,a,o){var l=document.createElement("oj-label");l.id=g._getLabelId(e),l.setAttribute("data-oj-binding-provider","none"),l.setAttribute("data-oj-internal",""),l.setAttribute("for",e.id);var r=[t._GetDefaultStyleClass(),"label"].join("-");l.classList.add(r),s&&l.setAttribute("show-required",s),o&&a&&(l.help=a);var d=document.createElement("span");d.id=[e.id,"|hint"].join(""),d.innerText=n,l.appendChild(d),this._InsertOjLabel(l,i,t),this._CreateEventHandlers(d,e,l,t)},g.prototype._GetContainer=function(e){return e._GetFormControlContainer()},g.prototype._CreateEventHandlers=function(e,t,i,n){this._labelHintChangedCallback=g._labelHintChangedHandler.bind(this,e),t.addEventListener("labelHintChanged",this._labelHintChangedCallback),this._requiredChangedCallback=g._requiredChangedHandler.bind(this,i,n),t.addEventListener("requiredChanged",this._requiredChangedCallback),this._helpHintsChangedCallback=g._helpHintsChangedHandler.bind(this,i,n),t.addEventListener("helpHintsChanged",this._helpHintsChangedCallback)},g.prototype._DestroyLabel=function(){var e=this.GetComponent(),t=e.options,i=e._getRootElement(),n=this._GetFormControlLabelStyleClass();i.classList.remove(n);var s=g._getLabelId(i),a=document.getElementById(s);a&&(a.for="",a.parentElement.removeChild(a)),t.labelledBy=void 0,this._DeleteEventHandlers(i)},g.prototype._DeleteEventHandlers=function(e){e.removeEventListener("labelHintChanged",this._labelHintChangedCallback),e.removeEventListener("requiredChanged",this._requiredChangedCallback),e.removeEventListener("helpHintsChanged",this._helpHintsChangedCallback),delete this._helpHintsChangedCallback,delete this._labelHintChangedCallback,delete this._requiredChangedCallback},g._getLabelId=function(e){return[e.id,"-labelled-by"].join("")},g._labelHintChangedHandler=function(e,t){e.innerText=t.detail.value},g._requiredChangedHandler=function(e,t,i){null==this._showUserAssistanceNotInline&&(this._showUserAssistanceNotInline=t._showUserAssistanceNotInline()),e.showRequired=i.detail.value&&this._showUserAssistanceNotInline},g._helpHintsChangedHandler=function(e,t,i){this._showUserAssistanceNotInline=t._showUserAssistanceNotInline(),this._showUserAssistanceNotInline&&(e.help=i.detail.value)};var c="invalidShown";e.__registerWidget("oj.editableValue",t.oj.baseComponent,{widgetEventPrefix:"oj",options:{describedBy:null,disabled:!1,displayOptions:{},help:void 0,helpHints:{definition:"",source:""},labelHint:"",labelEdge:void 0,messagesCustom:[],messagesHidden:void 0,messagesShown:void 0,title:"",userAssistanceDensity:"reflow",valid:void 0,value:void 0,animateStart:null,animateEnd:null},getNodeBySubId:function(e){var t;if(!(t=this._super(e))&&!this._IsCustomElement()&&"oj-label-help-icon"===e.subId){var i=this._GetLabelElement();i&&(t=i.parent().find(".oj-label-help-icon"))}return t||null},getSubIdByNode:function(e){var i,n,s,a=null;return null!=e&&null!=(i=t(e).closest("a.oj-label-help-icon"))&&null!=(n=i.closest(".oj-label"))&&(s=n.find("label")[0])&&s===this._GetLabelElement()[0]&&(a={subId:"oj-label-help-icon"}),a},isValid:function(){return void 0===this._valid&&(this._valid=!this._hasInvalidMessages()),this._valid},refresh:function(){this._super(),this._doRefresh()},reset:function(){this._clearAllMessages(),this._runDeferredValidation(this._VALIDATION_CONTEXT.RESET_METHOD),this._refreshComponentDisplayValue(this.options.value,!0)},showMessages:function(){var t,i,n,s=[],a=this.options.messagesHidden,o=a.length>0;for(t=0;t<a.length;t++)(i=a[t])instanceof e.ComponentMessage?(i._forceDisplayToShown(),n=i.clone()):n=new r(i.summary,i.detail,i.severity),s.push(n);o&&(this._clearMessages("messagesHidden"),this._updateMessagesOption("messagesShown",s),this._setValidOption(c,null))},_VALIDATION_MODE:{FULL:1,VALIDATORS_ONLY:2,REQUIRED_VALIDATOR_ONLY:3},_VALIDATION_CONTEXT:e.EditableValueUtils.validationContext,_VALIDATE_METHOD_OPTIONS:e.EditableValueUtils.validateMethodOptions,_InitOptions:function(e,t){this._super(e,t)},_ComponentCreate:function(){var e=this.element,t=this._GetSavedAttributes(e);if(this._super(),this.options.messagesCustom=this.options.messagesCustom||[],this.options.messagesHidden=[],this.options.messagesShown=this.options.messagesCustom.length>0?this._cloneMessagesBeforeSet(this.options.messagesCustom):[],this._SetDisabledDom(e),t&&!this._IsCustomElement()){var i=e[0].tagName.toLowerCase();"input"!==i&&"textarea"!==i||["required","title","pattern"].forEach(function(i){i in t&&e.removeAttr(i)})}},_AfterCreate:function(){var e,t=this;this._super(),this._refreshTheming("disabled",this.options.disabled),this.widget()[0].classList.add("oj-form-control"),this._IsTextFieldComponent()&&(this._IsCustomElement()?this._getRootElement().classList.add("oj-text-field"):this.widget()[0].classList.add("oj-text-field")),this._toggleOjHasNoValueClass(),this.widget().uniqueId(),this._IsCustomElement()?this.options.labelledBy?this._labelledByUpdated(this.options.labelledBy):this._setAriaLabelFromLabelHint():this._createOjLabel(),(e=this.options.describedBy)&&this._describedByUpdated(null,e),this._runDeferredValidation(this._VALIDATION_CONTEXT.COMPONENT_CREATE);var i=this._GetConverter();this._converterChangedCounter=0,i instanceof Promise?(this._setBusyStateAsyncConverterLoading(),this._ResolveLabelEdgeStrategyType(),this._loadingConverter(i).then(function(){t._AfterCreateConverterCached(),t._clearBusyStateAsyncConverterLoading()})):(this._AfterCreateConverterCached(),this._setValidOption(this._determineValidFromMessagesOptions(),null))},_SaveAttributes:function(e){this._IsCustomElement()||this._SaveAllAttributes(e)},_RestoreAttributes:function(e){this._IsCustomElement()||this._RestoreAllAttributes(e)},_AfterSetOption:function(t,i){switch(t){case"disabled":this._AfterSetOptionDisabledReadOnly(t,e.EditableValueUtils.disabledOptionOptions);break;case"displayOptions":this._initComponentMessaging();break;case"labelEdge":this._initComponentMessaging(),this._setAriaLabelFromLabelHint();break;case"labelHint":this._setAriaLabelFromLabelHint();break;case"help":this._IsCustomElement()?this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE)):this._Refresh(t,this.options[t]);break;case"messagesCustom":this._messagesCustomOptionChanged(i),this._setValidOption(this._determineValidFromMessagesOptions(),null);break;case"placeholder":this._SetPlaceholder(this.options.placeholder),this._placeholderOptionChanged(i);break;case"title":this._IsCustomElement()||this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE));break;case"translations":this.refresh();break;case"userAssistanceDensity":this._initComponentMessaging();break;case"value":this._AfterSetOptionValue(t,i)}},_AfterSetOptionDisabledReadOnly:function(e,t){var i=!this.options[e];this._Refresh(e,this.options[e]),i&&this._runMixedValidationAfterSetOption(t)},_AfterSetOptionValue:function(e,t){var i,n=t?t._context:null,s=!1;n&&(s=!!n.originalEvent,i=n.doNotClearMessages||!1),s||(i||this._clearAllMessages(null),this._runDeferredValidation(this._VALIDATION_CONTEXT.VALUE_OPTION_CHANGE)),this._Refresh(e,this.options[e],!0)},_CanSetValue:function(){return!(this.options.disabled||!1)},_destroy:function(){var e,i,n=this._super();if(this._clearAllMessages(null,!0),this.widget().removeUniqueId(),this._getComponentMessaging()._isActive()&&this._getComponentMessaging().deactivate(),this.$label)for(i=this.$label.length,e=0;e<i;e++)this.$label[e]&&null!=o.__GetWidgetConstructor(this.$label[e])&&t(this.$label[e]).ojLabel("destroy");return n},GetFocusElement:function(){return this._GetContentElement()[0]},_setOption:function(e,t,i){var n,s,a,o=!1;switch(e){case"messagesHidden":case"messagesShown":case"rawValue":o=!0;break;case"describedBy":s=this.options.describedBy,a=t,this._describedByUpdated(s,a);break;case"labelledBy":t&&this._labelledByUpdated(t);break;case"readOnly":this._addRemoveOjReadOnlyClassOnLabel(document.getElementById(this.options.labelledBy),t)}return o?(h.error(e+" option cannot be set"),this):(n=this._superApply(arguments),this._AfterSetOption(e,i),n)},_GetContentElement:function(){return this.element},_GetLabelElement:function(){if(this._IsCustomElement())return null;var i;if(this.$label)return this.$label;if(e.EditableValueUtils.hasNoLabelFlag(this.widget()))return null;var n=this._getAriaLabelledByElement(this.element);if(null!==n&&0!==n.length)return n;var s=this.element[0].id;return void 0!==s&&0!==(n=t("label[for='"+s+"']")).length?n:0!==(i=this.element.closest("[aria-labelledby]")).length&&null!==(n=this._getAriaLabelledByElement(i))&&0!==n.length?n:null},_GetElementValue:function(){return this.element.val()},_GetMessagingLauncherElement:function(){return this._GetContentElement()},_GetConverter:function(){return null},_GetImplicitValidators:function(){return this._implicitSyncValidators||(this._implicitSyncValidators={}),this._implicitSyncValidators},_GetDisplayValue:function(e){return this._GetContentElement().val()},_GetNormalizedValidatorsFromOption:function(){return[]},_GetNormalizedAsyncValidatorsFromOption:function(){return[]},_GetAllValidatorsFromValidatorsOptionAndImplicit:function(){var e,t,i,n,s=[];if(!this._allValidators){t=this._GetImplicitValidators(),i=[];var a,o=Object.keys(t),l=o.length;if(l>0){for(e=0;e<l;e++)a=o[e],i.push(t[a]);s=s.concat(i)}(n=this._GetNormalizedValidatorsFromOption()).length>0&&n.forEach(function(e){s.push(e)}),this._allValidators=s}return this._allValidators},_ResetAllValidators:function(){this._allValidators&&(this._allValidators.length=0),this._allValidators=null,this._IsCustomElement()?this._updateValidatorMessagingHint():this._getComponentMessaging().update(this._getValidatorHintsMC())},_GetAriaLabelElement:function(){return this._getRootElement()},_addRemoveOjReadOnlyClassOnLabel:function(e,t){if(e&&void 0!==t){const i="oj-read-only";t?e.classList.add(i):e.classList.remove(i)}},_setAriaLabelFromLabelHint:function(){if(this._IsCustomElement()){var e=this._GetAriaLabelElement(),t=e.getAttribute("aria-label");let i=this._getReadonlyDiv();this.options.labelledBy||!this.options.labelHint||"none"!==this.options.labelEdge||t&&t!==this._ariaLabelFromHint||this._getRootElement().getAttribute("aria-labelledby")?this._ariaLabelFromHint&&this._ariaLabelFromHint===t?(e.removeAttribute("aria-label"),i&&i.removeAttribute("aria-label")):t?i&&i.setAttribute("aria-label",t):i&&i.removeAttribute("aria-label"):(e.setAttribute("aria-label",this.options.labelHint),i&&i.setAttribute("aria-label",this.options.labelHint),this._ariaLabelFromHint=this.options.labelHint)}},_getAllAsyncValidatorsWithHint:function(){var e,t,i=this._GetNormalizedAsyncValidatorsFromOption(),n=[];if(this._IsRequired()&&"hint"in(t=this._getImplicitRequiredValidator())&&n.push(t),i.length>0)for(e=0;e<i.length;e++)"hint"in(t=i[e])&&n.push(t);var s=this._GetAllValidatorsFromValidatorsOptionAndImplicit();if(s.length>0)for(e=0;e<s.length;e++)"hint"in(t=s[e])&&n.push(t);return n},_initAsyncValidatorMessagingHint:function(){var e,t,i=this._getAllAsyncValidatorsWithHint(),n=this;this._asyncValidatorHintCounter=0,i.length>0&&(t=this._getValidatorHintsMC(),e=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(e),this._addAsyncValidatorsHintsMessagingContent(i,t).then(function(){n._clearBusyStateAsyncValidatorHint(e)}))},_getValidatorHintsMC:function(){return this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS)},_updateValidatorMessagingHint:function(){var e,t=this._getAllAsyncValidatorsWithHint(),i=this._getComponentMessaging(),n=this,s=this._getValidatorHintsMC();t.length>0?(this._asyncValidatorHintCounter+=1,e=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(e),this._addAsyncValidatorsHintsMessagingContent(t,s).then(function(){n._clearBusyStateAsyncValidatorHint(e)})):i.update(s)},_addAsyncValidatorsHintsMessagingContent:function(e,t){var i,n=this._asyncValidatorHintCounter,s=this._getComponentMessaging(),a=[],o=this,l=[];for(i=0;i<e.length;i++)l.push(e[i].hint);function r(e){return e.then(function(e){var i,l={};return o._asyncValidatorHintCounter===n?(null!==e&&(a.push(e),l.validatorHint=t.validatorHint.concat(a),s.update(l)),i="resolved"):i="ignore",{v:e,status:i}},function(e){return{e:e,status:"rejected"}})}return new Promise(function(e){Promise.all(l.map(r)).then(function(){e(a)})})},_IsRequired:function(){return!1},_HandleChangeEvent:function(e){var t=this._GetDisplayValue();this._SetValue(t,e)},_SetRawValue:function(e,t){var i={};i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this._CompareOptionValues("rawValue",this.options.rawValue,e)||this.option("rawValue",e,i)},_IsValueEmpty:function(t){return null==t||("string"==typeof t?e.StringUtils.isEmptyOrUndefined(t):"number"==typeof t?isNaN(t):!!Array.isArray(t)&&(0===t.length||1===t.length&&(null===t[0]||void 0===t[0])))},_toggleOjHasNoValueClass:function(e){let t=this._getRootElement();this._IsValueEmpty(e)?t.classList.add("oj-has-no-value"):t.classList.remove("oj-has-no-value")},_Refresh:function(e,t,i){var n,s;switch(e){case"converter":var a=this.options.value;this._refreshComponentDisplayValue(a,i);break;case"disabled":this._refreshTheming("disabled",this.options.disabled);break;case"help":if(!this._IsCustomElement()&&this.$label){n=this.options.help.definition,s=this.options.help.source,this.$label.ojLabel("option","help",{definition:n,source:s});var o=this.$label[0];if(o){let e=o.id;if(e){let t=e+"_helpIcon";null!=s||null!=n?this._describedByUpdated(null,t):this._describedByUpdated(t,null)}}}break;case"value":this._refreshComponentDisplayValue(t,i)}},_NotifyHidden:function(){this._superApply(arguments),this._getComponentMessaging().close()},_NotifyDetached:function(){this._superApply(arguments),this._getComponentMessaging().close()},_ResetComponentState:function(){this.$label&&this.$label.ojLabel("refresh"),this._implicitReqValidator=null,this._converter=null,this._ResetAllValidators()},_SetDisplayValue:function(e){var t=this._GetContentElement();t.val()!==e&&t.val(e)},_SetDisabledDom:function(e){"boolean"==typeof this.options.disabled&&(e[0].disabled=this.options.disabled)},_SetPlaceholder:function(e){var t=this._GetContentElement()[0];t&&(null==e?t.removeAttribute("placeholder"):t.setAttribute("placeholder",e))},_SetPlaceholderOption:function(e){this.options.placeholder=e},_HasPlaceholderSet:function(){return this.options.placeholder},_ClearPlaceholder:function(){this._SetPlaceholderOption(""),this._SetPlaceholder("")},_SetValue:function(e,t,i){var n,s,a,o=!i||"boolean"!=typeof i.doValueChangeCheck||i.doValueChangeCheck,l=this,r=!1;return this._toggleOjHasNoValueClass(e),void 0===e?(h.warn("Attempt to set a value of undefined"),!1):(o&&e===l._getLastDisplayValue()?h.level>h.LEVEL_WARN&&h.info((e.toString,e.toString())):(n=e+"_"+(this._asyncValidatorValidateCounter+1),(s=this._AsyncValidate(e,t,i,n))instanceof Promise?r=s.then(function(e){return a=e,l._afterAsyncValidateUpdateValue(e,t,i)}).then(function(){return l._clearBusyState(n),void 0!==a}):(this._afterAsyncValidateUpdateValue(s,t,i),r=void 0!==s)),r)},_ParseValueShowErrors:function(e,t){var i;this._clearAllMessages(t);try{return this._parseValue(e,t)}catch(e){i=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",i,t),this._setValidOption(c,t)}},_AsyncValidate:function(e,t,i,n){var s,a,o,l=i&&i.validationMode?i.validationMode:this._VALIDATION_MODE.FULL,r=i&&i.validationContext?i.validationContext:this._VALIDATION_CONTEXT.USER_ACTION,d=i&&i.doNotClearMessages||!1;if(void 0!==e){if(this._CanSetValue()){d||this._clearAllMessages(t);try{return this._asyncValidatorValidateCounter+=1,l===this._VALIDATION_MODE.FULL?(this._setLastDisplayValue(e),a=this._parseValue(e,t,!0)):a=e,(o=this._asyncValidateValue(a,t,r))instanceof Promise?(this._setBusyState(n),o.then(function(e){if("valid"===e)return a})):o}catch(e){s=this._processValidationErrors(e,r),this._updateMessagesOption("messagesShown",s,t),this._setValidOption(c,t)}}else h.level>h.LEVEL_WARN&&h.info("Validation skipped and value option not set as component state does not  allow setting value. For example if the component is readonly or disabled.");return o}h.warn("Attempt to set a value of undefined")},_afterAsyncValidateUpdateValue:function(e,t,i){var n,s=!1;return void 0!==e&&(i&&!0===i.doNotClearMessages?this.isValid()||!this._hasInvalidComponentMessagesShowing():this.isValid())&&(i&&i._context&&(n=i._context),this._updateValueOption(e,t,i&&i.validationContext,n,i),s=!0),s},_CompareOptionValues:function(t,i,n){return"value"===t||"rawValue"===t?e.Object.compareValues(i,n):0===t.indexOf("messages")?this._messagesEquals(i,n):this._superApply(arguments)},_GetDefaultStyleClass:function(){return e.Assert.failedInAbstractFunction(),""},_MESSAGING_CONTENT_UPDATE_TYPE:{INIT:1,VALIDITY_STATE:2,CONVERTER_HINT:3,VALIDATOR_HINTS:4,TITLE:5},_OPTION_TO_CSS_MAPPING:{disabled:"oj-disabled",required:"oj-required"},_clearAllMessages:function(e,t){t?(this.options.messagesHidden=[],this.options.messagesShown=[],this.options.messagesCustom=[]):(this._clearMessages("messagesHidden",e),this._clearMessages("messagesShown",e),this._clearMessages("messagesCustom",e))},_clearComponentMessages:function(){var t,i=this.options.messagesShown;t=i.length,this._clearMessages("messagesHidden");for(var n=t-1;n>=0;n--)i[n]instanceof e.ComponentMessage&&i.splice(n,1);i.length!==t&&this._setMessagesOption("messagesShown",i,null,!0)},_setMessagesOption:function(e,t,i,n){var s={},a=0===t.length&&0===this.options[e].length;!n&&a||(s._context={originalEvent:i,writeback:!0,internalSet:!0},"messagesCustom"!==e&&(s._context.readOnly=!0),s.changed=n||!a,this._resetValid(),this.option(e,t,s),this._updateMessagingContent())},_setValidOption:function(e,t){var i={};"pending"===e&&"valid"!==this._determineValidFromMessagesOptions()||e!==this.options.valid&&(i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this.option("valid",e,i))},_clearMessages:function(e,t){this._setMessagesOption(e,[],t)},_cloneMessagesBeforeSet:function(e){var t,i,n,s=[];if(e&&e.length>0)for(t=0;t<e.length;t++)n=e[t],i=new r(n.summary,n.detail,n.severity),i=Object.freeze?Object.freeze(i):i,s.push(i);return s},_createOjLabel:function(){var e,t;this._IsCustomElement()||(this.$label=this._GetLabelElement(),this.$label&&(e=this.options.help.definition,t=this.options.help.source,this.$label.ojLabel({rootAttributes:{class:this._GetDefaultStyleClass()+"-label"},help:{definition:e,source:t}}),this._createDescribedByForLabel()))},_createDescribedByForLabel:function(){var e,t=this.options.help.definition;if(null!=this.options.help.source||null!=t){var i=this.$label[0];i&&(e=i.id),e&&this._describedByUpdated(null,e+"_helpIcon")}},_doRefresh:function(){var t,i=!1;this._ResetComponentState(),this._initComponentMessaging(),this._Refresh("disabled",this.options.disabled),this._hasInvalidMessagesShowing()&&(i=!0),this._clearComponentMessages(),i?(t=this._GetDisplayValue(),this._SetValue(t,null,e.EditableValueUtils.refreshMethodOptions)):(this._IsRequired()&&this._runDeferredValidation(e.EditableValueUtils.refreshMethodOptions.validationContext),this._Refresh("value",this.options.value,!0))},_getLastModelValue:function(){return this._oj_lastModelValue},_getLastDisplayValue:function(){return void 0===this._oj_lastElementValue&&(this._oj_lastElementValue=""),this._oj_lastElementValue},_getAriaLabelledByElement:function(e){if(this._IsCustomElement())return null;var i=e[0].getAttribute("aria-labelledby");return void 0!==i?t("label[id='"+i+"']"):null},_getMessages:function(){var e=[];return this.options.messagesShown&&(e=e.concat(this.options.messagesShown)),this.options.messagesHidden&&(e=e.concat(this.options.messagesHidden)),e},_getLabelText:function(){if(this.$label)return this.$label[0].textContent;var t=e.EditableValueUtils._getCustomOjLabelElements(this.options.labelledBy),i=null;if(t)for(var n=0;n<t.length;n++){n>0&&(i+=" "),i=t[n].textContent}return i},_getValidityState:function(){return this._validityState?this._validityState:(this._validityState=new e.ComponentValidity(this.isValid(),this._getMessages()),this._validityState)},_hasValidityState:function(){return!!this._validityState},_hasInvalidMessages:function(){return!r.isValid(this._getMessages())},_hasInvalidMessagesShowing:function(){return!this.isValid()&&this.options.messagesShown.length>0},_hasInvalidComponentMessagesShowing:function(){for(var t,i,n=this.options.messagesShown,s=0;s<n.length;s++)(i=n[s])instanceof e.ComponentMessage&&i._isMessageAddedByComponent()&&(t=t||[]).push(i);return void 0!==t&&!r.isValid(t)},_initComponentMessaging:function(){var e=this._getComponentMessaging(),t=this._GetMessagingLauncherElement(),i=this._GetContentElement(),n=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.INIT);this._customPlaceholderSet||this._ClearPlaceholder(),e.activate(t,i,n),this._asyncValidatorValidateCounter=0},_messagesCustomOptionChanged:function(t){var i,n,s=t?t._context:null,a=this.options.messagesCustom,o=this.options.messagesShown,l=[];for(i=0;i<o.length;i++)(n=o[i])instanceof e.ComponentMessage&&n._isMessageAddedByComponent()&&l.push(n);for(i=0;i<a.length;i++)l.push(a[i]);this._setMessagesOption("messagesShown",l,s?s.originalEvent:null,t&&t.changed)},_placeholderOptionChanged:function(e){"displayOptions"===this._getResolvedUserAssistance()&&(!(e&&e._context||{}).internalMessagingSet?(this._customPlaceholderSet=!0,this._GetConverter()&&this._initComponentMessaging()):this._customPlaceholderSet=!1)},_setLastModelValue:function(e){this._oj_lastModelValue=e},_setLastDisplayValue:function(e){this._oj_lastElementValue=e},_updateMessagesOption:function(e,t,i){var n,s,a;if("object"==typeof t&&Array.isArray(t))for(a=this.options[e],s=t.length,n=0;n<s;n++)a.push(t[n]);this._setMessagesOption(e,a,i,!0)},_updateMessagingContent:function(){this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE))},_updateValueOption:function(e,t,i,n,s){var a,o,l=n||{};switch(t&&(l.originalEvent=t),i){case this._VALIDATION_CONTEXT.CONVERTER_OPTION_CHANGE:case this._VALIDATION_CONTEXT.DISABLED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.READONLY_OPTION_CHANGE:case this._VALIDATION_CONTEXT.REFRESH_METHOD:case this._VALIDATION_CONTEXT.REQUIRED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.VALIDATE_METHOD:case this._VALIDATION_CONTEXT.VALIDATORS_OPTION_CHANGE:l.writeback=!0,l.doNotClearMessages=!0}if(l.internalSet=!0,s&&s.targetOptions){a={},o=!1;for(var r=0;r<s.targetOptions.length;r++)a[s.targetOptions[r]]=e,o=o||"value"===s.targetOptions[r]}else a={value:e},o=!0;this.option(a,{_context:l}),o&&this._AfterSetOptionValue("value",{_context:l})},_resetValid:function(){this._valid=void 0},_determineValidFromMessagesOptions:function(){var e=this.options.messagesHidden,t=this.options.messagesShown,i="valid";return t&&0!==t.length&&!r.isValid(t)?i=c:e&&0!==e.length&&!r.isValid(e)&&(i="invalidHidden"),i},_formatValue:function(e){var t=e,i=this._GetConverter();return i&&"object"==typeof i&&(i.format&&"function"==typeof i.format?t=i.format(e):h.level>h.LEVEL_WARN&&h.info("converter does not support the format method.")),t},_getComponentMessaging:function(){return this._componentMessaging||(this._componentMessaging=new e.ComponentMessaging(this)),this._componentMessaging},_getHintsFromAllValidatorsWithGetHintFunction:function(e){var t,i,n=[],s="";for(this._IsRequired()&&(i=this._getImplicitRequiredValidator()).getHint&&"function"==typeof i.getHint&&(s=i.getHint())&&n.push(s),t=0;t<e.length;t++)s="","object"==typeof(i=e[t])&&i.getHint&&"function"==typeof i.getHint&&(s=i.getHint())&&n.push(s);return n},_getImplicitRequiredValidator:function(){var e,t={};return null==this._implicitReqValidator&&(e={hint:(t=this.options.translations&&this.options.translations.required||{}).hint||null,label:this._getLabelText(),messageSummary:t.messageSummary||null,messageDetail:t.messageDetail||null},this._implicitReqValidator=new u(e)),this._implicitReqValidator},_getResolvedUserAssistance:function(){let e=a.parseJSONFromFontFamily("oj-form-control-option-defaults");if(e){return"use"===e.useUserAssistanceOptionDefault?this.options.userAssistanceDensity:"displayOptions"}return"displayOptions"},_showUserAssistanceNotInline:function(){let e=this._getResolvedUserAssistance();return"compact"===e||"displayOptions"===e},_getMessagingContent:function(e){var t,i,n={},s="";if((e=e||this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE)!==this._MESSAGING_CONTENT_UPDATE_TYPE.INIT&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE||(n.validityState=this._getMessagingContentValidityState()),e!==this._MESSAGING_CONTENT_UPDATE_TYPE.INIT&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT||((i=this._GetConverter())&&"object"==typeof i&&i.getHint&&"function"==typeof i.getHint&&(s=i.getHint()||""),n.converterHint=s),e===this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS){t=this._GetAllValidatorsFromValidatorsOptionAndImplicit();let e=this._getHintsFromAllValidatorsWithGetHintFunction(t)||[];n.validatorHint=e}if(e===this._MESSAGING_CONTENT_UPDATE_TYPE.INIT||e===this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE){var a;if(this._IsCustomElement()){var o=this.options.help;null!=o&&(a=o.instruction)}else a=this.options.title;n.title=a||""}return n},_getMessagingContentValidityState:function(){let e;return this._hasValidityState()?(e=this._getValidityState()).update(this.isValid(),this._getMessages()):e=this._getValidityState(),e},_messagesEquals:function(e,i){var n,s=-1,a=!0,o=t.extend([],e),l=t.extend([],i);return o.length===l.length&&(o.forEach(function(e){e instanceof r?n=e:(n=new r(e.summary,e.detail,e.severity),n=Object.freeze?Object.freeze(n):n),s=-1,l.forEach(function(e,t){r.getSeverityLevel(n.severity)===r.getSeverityLevel(e.severity)&&n.summary===e.summary&&n.detail===e.detail&&(s=t)}),s>-1?l.splice(s,1):a=!1}),a)},_parseValue:function(e,t,i){var n=this._GetConverter(),s=e;if(n&&"object"==typeof n)if(n.parse&&"function"==typeof n.parse)try{i&&this._setValidOption("pending",t),s=n.parse(e)}catch(e){throw e}else h.level>h.LEVEL_WARN&&h.info("converter does not support the parse method.");return s},_addValidationError:function(t,i){var s,a,o,l;t instanceof e.ConverterError||t instanceof e.ValidatorError?(a=(o=t.getMessage()).severity||r.SEVERITY_LEVEL.ERROR,l=o.summary||n.getTranslatedString("oj-message.error"),s=o.detail||n.getTranslatedString("oj-converter.detail")):t.summary||t.detail?(a=r.SEVERITY_LEVEL.ERROR,l=t.summary||n.getTranslatedString("oj-message.error"),s=t.detail||n.getTranslatedString("oj-converter.detail")):(a=r.SEVERITY_LEVEL.ERROR,l=n.getTranslatedString("oj-message.error"),s=t.message||n.getTranslatedString("oj-converter.detail")),i.push({summary:l,detail:s,severity:a})},_processValidationErrors:function(t,i,n){var s,a=[],o=t._messages||[],l={};l.context=i||0,l.display=n||e.ComponentMessage.DISPLAY.SHOWN,0===o.length&&this._addValidationError(t,o);for(var r=0;r<o.length;r++)s=o[r],a.push(this._createComponentMessage(s.summary,s.detail,s.severity,l));return a||null},_createComponentMessage:function(t,i,n,s){var a;return a=new e.ComponentMessage(t,i,n,s),a=Object.seal?Object.seal(a):a},_refreshComponentDisplayValue:function(e,t){var i;return this._toggleOjHasNoValueClass(e),(t||e!==this._getLastModelValue())&&(i=this._UpdateElementDisplayValue(e)),i},_refreshTheming:function(e,t){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&(t?this.widget()[0].classList.add(this._OPTION_TO_CSS_MAPPING[e]):this.widget()[0].classList.remove(this._OPTION_TO_CSS_MAPPING[e]))},_runDeferredValidation:function(e){var t=this;if(this._CanSetValue()){if(!this._resolveBusyStateDeferredValidation){var i=this.element[0],n=s.getContext(i).getBusyContext(),a="The page is waiting for async deferred validation ";i&&i.id&&(a+='for "'+i.id+'" '),a+="to finish.",this._resolveBusyStateDeferredValidation=n.addBusyState({description:a})}var o=this._validateValueForRequiredOnly(this.options.value,e);if(!(o instanceof Promise))return this._setValidOption(this._determineValidFromMessagesOptions(),null),void(this._resolveBusyStateDeferredValidation&&(this._resolveBusyStateDeferredValidation(),delete this._resolveBusyStateDeferredValidation));o.then(function(){t._resolveBusyStateDeferredValidation&&(t._resolveBusyStateDeferredValidation(),delete t._resolveBusyStateDeferredValidation),t._setValidOption(t._determineValidFromMessagesOptions(),null)})}else h.level>h.LEVEL_WARN&&h.info("Deferred validation skipped as component is readonly or disabled.");this._setValidOption(this._determineValidFromMessagesOptions(),null)},_runMixedValidationAfterSetOption:function(e){var t,i=!1;this._hasInvalidMessagesShowing()&&(i=!0),this._clearComponentMessages(),i&&(t=this._GetDisplayValue(),this._SetValue(t,null,e)),!i&&this._IsRequired()?this._runDeferredValidation(e.validationContext):this._setValidOption(this._determineValidFromMessagesOptions(),null)},_UpdateElementDisplayValue:function(e,t){var i,n;i=e;try{i=this._formatValue(e);try{this._setLastModelValue(e),this._afterConverterFormat(i)}catch(e){throw e}n=i}catch(s){t||this._afterConverterFormatFailure(s),this._setLastModelValue(e),this._afterConverterFormat(i),n=void 0}return n},_SetLoading:function(){var e=this.widget()[0],t=this.GetFocusElement();e.classList.add("oj-loading"),this._saveAriaLabel=t.getAttribute("aria-label");var i=n.getTranslatedString("oj-ojEditableValue.loading");t.setAttribute("aria-label",i)},_ClearLoading:function(){var e=this.widget()[0],t=this.GetFocusElement();e.classList.remove("oj-loading"),this._saveAriaLabel?t.setAttribute("aria-label",this._saveAriaLabel):t.removeAttribute("aria-label")},_UseReadonlyDiv:function(){return"div"===a.parseJSONFromFontFamily("oj-form-control-option-defaults").readonlyElem},_ShowHelpHints:function(){return this._IsTextFieldComponent()?"focus":"always"},_ShowHelpHintsLocation:function(){return"inline"},_afterConverterFormat:function(e){var t;this._SetDisplayValue(e),t=this._GetDisplayValue(),this._setLastDisplayValue(t),this._SetRawValue(t,null)},_afterConverterFormatFailure:function(e){var t;t=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",t),this._setValidOption(c,null)},_loadingConverter:function(t){var i=this,n=e.EditableValueUtils._getShowLoadingDelay(),s=this._converterChangedCounter,a=setTimeout(function(){s===i._converterChangedCounter&&i._SetLoading()},n);return t.then(function(e){return i._ClearLoading(),clearTimeout(a),e})},_validateValueForRequiredOnly:function(t,i){var n,s,a=this;if(this._IsRequired()){s=this._getImplicitRequiredValidator();try{this._setValidOption("pending",null);var o=s.validate(e.StringUtils.trim(t));if(o instanceof Promise)return o.then(function(){},function(t){(n=a._processValidationErrors(t,i,e.ComponentMessage.DISPLAY.HIDDEN))&&a._updateMessagesOption("messagesHidden",n)})}catch(t){(n=this._processValidationErrors(t,i,e.ComponentMessage.DISPLAY.HIDDEN))&&this._updateMessagesOption("messagesHidden",n)}}return null},_asyncValidateValue:function(t,i,n){var s,a,o,l,r,d=this._GetNormalizedAsyncValidatorsFromOption(),u=this._GetAllValidatorsFromValidatorsOptionAndImplicit(),p=!1,g=this,_=[],y=this._asyncValidatorValidateCounter,m=[],v=this._IsRequired();if(v&&(l=this._getImplicitRequiredValidator()),(v||d.length>0||u.length>0)&&this._setValidOption("pending",i),l)try{var f=l.validate(e.StringUtils.trim(t));f&&m.push(f)}catch(e){this._addValidationError(e,_),this._setValidOption(c,i),p=!0}for(s=0;s<d.length;s++){try{r=d[s].validate(t)}catch(e){r=Promise.reject(e)}r instanceof Promise||(r=Promise.resolve(r)),m.push(r)}for(s=0;s<u.length;s++)try{(r=u[s].validate(t))instanceof Promise&&m.push(r)}catch(e){this._addValidationError(e,_),this._setValidOption(c,i),p=!0}if(_.length>0){let e=new Error;e._messages=_,o=this._processValidationErrors(e,n),this._updateMessagesOption("messagesShown",o,i)}function C(e){return e.then(function(e){var i;return g._asyncValidatorValidateCounter===y?i="resolved":(h.level>h.LEVEL_WARN&&h.info("Validate ignored because new value came in before async validator finished for "+t),i="ignore"),{v:e,status:i}},function(e){var s;return g._asyncValidatorValidateCounter===y?(o=g._processValidationErrors(e,n),g._updateMessagesOption("messagesShown",o,i),p||(g._setValidOption(c,i),p=!0),s="rejected"):(h.level>h.LEVEL_WARN&&h.info("Validate ignored because new value came in before async validator finished for "+t),s="ignore"),{e:e,status:s}})}return m.length>0?new Promise(function(e){Promise.all(m.map(C)).then(function(t){t.filter(function(e){return"ignore"===e.status}).length>0?a="ignoreValidation":(a=p?c:"valid",g._setValidOption(g._determineValidFromMessagesOptions(),i)),e(a)})}):(0===_.length&&this._setValidOption(g._determineValidFromMessagesOptions(),i),0===_.length?t:void 0)},_labelledByUpdated:function(t){var i=e.EditableValueUtils._getCustomOjLabelElements(t);if(i)for(let e=0;e<i.length;e++){var n=i[e];n.classList.add(this._GetDefaultStyleClass()+"-label"),void 0===this.widget().attr("data-oj-internal")&&void 0!==this.options.readOnly&&this._addRemoveOjReadOnlyClassOnLabel(n,this.options.readOnly)}},_describedByUpdated:p._describedByUpdated,_setBusyState:e.EditableValueUtils._SetBusyState,_clearBusyState:e.EditableValueUtils._ClearBusyState,_setBusyStateAsyncValidatorHint:e.EditableValueUtils._SetBusyStateAsyncValidatorHint,_clearBusyStateAsyncValidatorHint:e.EditableValueUtils._ClearBusyStateAsyncValidatorHint,_setBusyStateAsyncConverterLoading:e.EditableValueUtils._SetBusyStateAsyncConverterLoading,_clearBusyStateAsyncConverterLoading:e.EditableValueUtils._ClearBusyStateAsyncConverterLoading,_AfterCreateConverterCached:e.EditableValueUtils._AfterCreateConverterCached,_getReadonlyDiv:e.EditableValueUtils._getReadonlyDiv,_createOrUpdateReadonlyDiv:e.EditableValueUtils._createOrUpdateReadonlyDiv,_createReadonlyDiv:e.EditableValueUtils._createReadonlyDiv,_setReadonlyDivLabelledBy:e.EditableValueUtils._setReadonlyDivLabelledBy,_GetFormControlContainer:function(){if(this._IsCustomElement()){var e="."+[this._GetComponentManagedBaseLabelStyleClass(),"container"].join("-");return this._getRootElement().querySelector(e)}},_IsTextFieldComponent:function(){return!1},_GetComponentManagedBaseLabelStyleClass:function(){return this._IsTextFieldComponent()?"oj-text-field":"oj-form-control"},_CreateMiddleWrapper:function(){var e=document.createElement("div");return e.className="oj-text-field-middle",e},_ResolveLabelEdgeStrategyType:function(){var t=this.options.labelEdge;return this._IsCustomElement()&&"inside"===t&&(this._IsTextFieldComponent()||(t=e.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL)),t}},!0),o.setDefaultOptions({editableValue:{displayOptions:o.createDynamicPropertyGetter(function(e){var t={messages:e.containers.indexOf("ojDataGrid")>=0||e.containers.indexOf("ojTable")>=0?["notewindow"]:["inline"],converterHint:["placeholder","notewindow"],validatorHint:["notewindow"]};return t[e.isCustomElement?"helpInstruction":"title"]=["notewindow"],t}),help:o.createDynamicPropertyGetter(function(e){return e.isCustomElement?{instruction:""}:{definition:null,source:null}}),labelEdge:o.createDynamicPropertyGetter(function(e){if(e.isCustomElement)return(a.parseJSONFromFontFamily("oj-form-control-option-defaults")||{}).labelEdge}),userAssistanceDensity:o.createDynamicPropertyGetter(function(e){return e.containers.indexOf("ojDataGrid")>=0||e.containers.indexOf("ojTable")>=0?"compact":"reflow"})}});var _=function(e,t){this.Init(e),this._userAssistanceDivElement=t};e.Object.createSubclass(_,e.MessagingStrategy,"InlineHelpHintsStrategy"),_.prototype.activate=function(e){_.superclass.activate.call(this,e),null==this.containerRoot&&this._createInlineHelpHints()},_.prototype.reactivate=function(e,t){_.superclass.reactivate.call(this,e),this._userAssistanceDivElement=t,this._isContainerRootDomInDocument()||this._createInlineHelpHints()},_.prototype.shouldUpdate=function(e){let t=!(!e||void 0===e.title),i=!(!e||void 0===e.validatorHint);return t||i},_.prototype.update=function(){_.superclass.update.call(this),this._updateInlineHelpHints()},_.prototype.deactivate=function(){var e=this.GetComponent()._getRootElement(),t=this._getHelpHintsInlineContainer(e);t&&(this.RemoveAriaDescribedByForInlineMessaging(t),t.parentElement.removeChild(t)),this._focusinCallback&&this._deleteFocusEventHandlers(e),_.superclass.deactivate.call(this)},_.prototype._createInlineHelpHints=function(){var e=this.GetComponent();let t=e._ShowHelpHints();"always"===t&&this._addHelpHintsContent(e),"focus"===t&&this._createFocusEventHandlers(e),this._createHelpHintsAttributeEventHandlers(e)},_.prototype._createFocusEventHandlers=function(e){var t=e._getRootElement();this._focusinCallback=_._focusinHandler.bind(this,e),t.addEventListener("focusin",this._focusinCallback),this._focusoutCallback=_._focusoutHandler.bind(this,e),t.addEventListener("focusout",this._focusoutCallback)},_.prototype._deleteFocusEventHandlers=function(e){e.removeEventListener("focusin",this._focusinCallback),delete this._focusinCallback,e.removeEventListener("focusout",this._focusoutCallback),delete this._focusoutCallback},_.prototype._createHelpHintsAttributeEventHandlers=function(e){var t=e._getRootElement();this._helpHintsChangedCallback=_._helpHintsChangedHandler.bind(this,e),t.addEventListener("helpHintsChanged",this._helpHintsChangedCallback)},_.prototype._deleteHelpHintsAttributeEventHandlers=function(e){e.removeEventListener("helpHintsChanged",this._helpHintsChangedCallback),delete this._helpHintsChangedCallback},_.prototype._getHelpHintsInlineContainer=function(e){return e.querySelector(".oj-helphints-inline-container")},_.prototype._isContainerRootDomInDocument=function(){let e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e},_._focusinHandler=function(e,t){this._userAssistanceDivElement.classList.add("oj-focus"),this._contentAddedOnFocus||(this._contentAddedOnFocus=this._addHelpHintsContent(e))},_._helpHintsChangedHandler=function(e,t){this._addHelpHintsContent(e)},_.prototype._addHelpHintsContent=function(i){let n,s=i.options.help,a=s?s.instruction:null;if(a){let t=e.PopupMessagingStrategyUtils.GetTextDom(document,a,!0);n=t?t.outerHTML:""}if(!n&&this.ShowValidatorHint()){let e=this.GetValidatorHints();e.length>0&&(n=e.join("<br/>"))}if(!n){let e=i.options.helpHints,t=e?e.definition:null;t&&(n=t)}if(!n&&this.ShowConverterHint()){let e=this.GetConverterHint();e.length>0&&(n=e.join("<br/>"))}if(n&&!this.containerRoot){if(this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-helphints-inline-container"),t(this.containerRoot).uniqueId(),this.AddAriaDescribedByForInlineMessaging(this.containerRoot),"inline"===i._ShowHelpHintsLocation())this._userAssistanceDivElement.appendChild(this.containerRoot);else{let e=i._GetFormControlContainer();e.parentElement.insertBefore(this.containerRoot,e)}}return this.containerRoot&&(this.containerRoot.innerHTML=n||""),this._userAssistanceDivElement&&(n?this._userAssistanceDivElement.classList.add("oj-has-helphints"):this._userAssistanceDivElement.classList.remove("oj-has-helphints")),n},_.prototype._updateInlineHelpHints=function(){const e=this.GetComponent();this._addHelpHintsContent(e)},_._focusoutHandler=function(e,t){this._userAssistanceDivElement.classList.remove("oj-focus")},e.InlineMessagingStrategy=function(e,t){this.Init(e),this._parentElement=t},e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.INLINE,e.InlineMessagingStrategy),e.Object.createSubclass(e.InlineMessagingStrategy,e.MessagingStrategy,"oj.InlineMessagingStrategy"),e.InlineMessagingStrategy.prototype.activate=function(t){e.InlineMessagingStrategy.superclass.activate.call(this,t)},e.InlineMessagingStrategy.prototype.reactivate=function(t,i){e.InlineMessagingStrategy.superclass.reactivate.call(this,t),this._parentElement=i,this._updateInlineMessage()},e.InlineMessagingStrategy.prototype.shouldUpdate=function(e){return!(!e||void 0===e.validityState)},e.InlineMessagingStrategy.prototype.update=function(){e.InlineMessagingStrategy.superclass.update.call(this),this._updateInlineMessage()},e.InlineMessagingStrategy.prototype.deactivate=function(){this._removeMessagingContentRootDom(),e.InlineMessagingStrategy.superclass.deactivate.call(this)},e.InlineMessagingStrategy.prototype._getDefaultAnimation=function(){if(!e.InlineMessagingStrategy._defaultAnimation){var t=(a.parseJSONFromFontFamily("oj-messaging-inline-option-defaults")||{}).animation;t=t||{},e.InlineMessagingStrategy._defaultAnimation=t}return e.InlineMessagingStrategy._defaultAnimation},e.InlineMessagingStrategy.prototype._replaceAnimationOptions=function(t,i){var n,s;e.StringUtils.isString(t)?(s=!0,n=t+""):(s=!1,n=JSON.stringify(t));for(var a=Object.keys(i),o=0;o<a.length;o++){var l=a[o];n=n.replace(new RegExp(l,"g"),i[l])}return s?n:JSON.parse(n)},e.InlineMessagingStrategy.prototype._determineAnimation=function(e,t){var i,n,s,a=this._getDefaultAnimation();if(a){var o,l=e[0],r=l.innerHTML,d=l.offsetHeight;l.innerHTML=t,o=l.offsetHeight,l.innerHTML=r,"noanimation"!==(i=o>d?"open":o<d?"close":"noanimation")&&(n=a[i])&&(s=this._replaceAnimationOptions(n,{"#oldHeight":d+"px","#newHeight":o+"px"}))}return{action:i,effect:s}},e.InlineMessagingStrategy.prototype._setBusyState=function(){if(!this._resolveBusyState){var e=this.GetComponent(),t=e?e.element:null,i=t?t[0]:null,n=s.getContext(i).getBusyContext(),a="The page is waiting for inline message ";i&&i.id&&(a+='for "'+i.id+'" '),a+="to open/close",this._resolveBusyState=n.addBusyState({description:a})}},e.InlineMessagingStrategy.prototype._clearBusyState=function(){this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},e.InlineMessagingStrategy.prototype._queueAction=function(e){var t=this,i=this.$messagingContentRoot;t._inInlineMessagingAnimation?this._currentContentToShow=e:(this._currentContentToShow=null,this._setBusyState(),this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){if(t._timeoutId=null,i&&i[0]){var n=t._determineAnimation(i,e),s=n.action,a=n.effect;"noanimation"===s?(i[0].innerHTML=e,t._clearBusyState()):("close"===s?i[0].setAttribute("aria-live","off"):i[0].setAttribute("aria-live","polite"),"open"===s&&(i[0].innerHTML=e),t._inInlineMessagingAnimation=!0,l.startAnimation(i[0],"inline-"+s,a,t.GetComponent()).then(function(){var n;t._inInlineMessagingAnimation=!1,"close"===s&&(i[0].setAttribute("aria-live","polite"),i[0].innerHTML=e),null!==t._currentContentToShow?(n=t._currentContentToShow,t._currentContentToShow=null,t._queueAction(n)):t._clearBusyState()}))}else t._clearBusyState()},0))},e.InlineMessagingStrategy.prototype._updateInlineMessage=function(){var e;e=this._buildInlineHtml(),this._parentElement&&(e?this._parentElement.classList.add("oj-has-messages"):this._parentElement.classList.remove("oj-has-messages"));var t=this._isMessagingContentRootDomInDocument();e&&!t&&this._createInlineMessage(),this.$messagingContentRoot&&this.$messagingContentRoot[0]&&(this.GetComponent()._IsCustomElement()?this._queueAction(e):this.$messagingContentRoot[0].innerHTML=e)},e.InlineMessagingStrategy.prototype._createInlineMessage=function(){this.$messagingContentRoot=t(this._getInlineContentHtml()),this.AddAriaDescribedByForInlineMessaging(this.$messagingContentRoot[0]),this._addAriaLive(this.$messagingContentRoot),this._parentElement?this._parentElement.appendChild(this.$messagingContentRoot[0]):this.GetComponent().widget()[0].appendChild(this.$messagingContentRoot[0])},e.InlineMessagingStrategy.prototype._getInlineContentHtml=function(){return"<div class='oj-messaging-inline-container'></div>"},e.InlineMessagingStrategy.prototype._removeMessagingContentRootDom=function(){if(this._isMessagingContentRootDomInDocument()){this.RemoveAriaDescribedByForInlineMessaging(this.$messagingContentRoot[0]);let e=this.$messagingContentRoot[0].parentNode;e&&e.removeChild(this.$messagingContentRoot[0])}this.$messagingContentRoot=null},e.InlineMessagingStrategy.prototype._addAriaLive=function(i){e.Assert.assertPrototype(i,t),i[0].setAttribute("aria-live","polite")},e.InlineMessagingStrategy.prototype._buildInlineHtml=function(){var e;return this.ShowMessages()?(e=this.GetComponent().document[0],this._buildMessagesHtml(e)):""},e.InlineMessagingStrategy.prototype._buildMessagesHtml=function(t){var i,n,s="";return this.HasMessages()&&(n=this.GetMessages(),i=this.GetMaxSeverity(),s=e.PopupMessagingStrategyUtils.buildMessagesHtml(t,n,i,!0)),s},e.InlineMessagingStrategy.prototype._isMessagingContentRootDomInDocument=function(){var e=!1;if(!this.$messagingContentRoot)return!1;{let t=this.$messagingContentRoot[0].id;e=document.getElementById(t)}return null!==e};var y=function(e,t){this.Init(e),this._parentElement=t};e.Object.createSubclass(y,e.MessagingStrategy,"InlineRequiredStrategy"),y.prototype.activate=function(e){y.superclass.activate.call(this,e),null==this.containerRoot&&this._createInlineRequired()},y.prototype.reactivate=function(e,t){y.superclass.reactivate.call(this,e),this._parentElement=t,this._isContainerRootDomInDocument()||this._createInlineRequired()},y.prototype.shouldUpdate=function(e){return!1},y.prototype.update=function(){y.superclass.update.call(this)},y.prototype.deactivate=function(){var e=this._getRequiredInlineContainer();e&&this._parentElement.removeChild(e),this.GetComponent()._getRootElement().removeEventListener("requiredChanged",this._requiredChangedCallback),delete this._requiredChangedCallback,this._parentElement=null,this.containerRoot=null,y.superclass.deactivate.call(this)},y.prototype._createInlineRequired=function(){var e=this.GetComponent();const i=e.options,s=e._getRootElement();if(i.required){this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-required-inline-container");let i=n.getTranslatedString("oj-ojEditableValue.requiredText");this.containerRoot.textContent=i,t(this.containerRoot).uniqueId(),this._parentElement.appendChild(this.containerRoot),e._AriaRequiredUnsupported()&&this.AddDescribedByToElement(s,this.containerRoot.id)}this._requiredChangedCallback||(this._requiredChangedCallback=this._requiredChangedHandler.bind(this,e),s.addEventListener("requiredChanged",this._requiredChangedCallback))},y.prototype._getRequiredInlineContainer=function(){return this._parentElement.querySelector(".oj-required-inline-container")},y.prototype._requiredChangedHandler=function(e,t){let i=t.detail.value,n=this._getRequiredInlineContainer();i&&null===n?this._createInlineRequired():i||null===n||n&&this._parentElement.removeChild(n)},y.prototype._isContainerRootDomInDocument=function(){let e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e};var m=function(e){this.Init(e),this._displayOptions=e};e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.USER_ASSISTANCE_INLINE,m),e.Object.createSubclass(m,e.MessagingStrategy,"InlineUserAssistanceStrategy"),m.prototype.activate=function(e){m.superclass.activate.call(this,e),this._componentMessaging=e;const t=this.GetComponent(),i=t.options,n=t._getRootElement();this._readonlyChangedCallback=this._readonlyChangedHandler.bind(this,t),n.addEventListener("readonlyChanged",this._readonlyChangedCallback),this._disabledChangedCallback=this._disabledChangedHandler.bind(this,t),n.addEventListener("disabledChanged",this._disabledChangedCallback),this._userAssistanceDensityChangedCallback=this._userAssistanceDensityChangedHandler.bind(this,t),n.addEventListener("userAssistanceDensityChanged",this._userAssistanceDensityChangedCallback),null==this.containerRoot&&this._createInlineContainer(),this._isDisabledOrReadonly()||this._activateContainerStrategies(e,i)},m.prototype.reactivate=function(e){m.superclass.reactivate.call(this,e);const t=this.GetComponent().options;this._isDisabledOrReadonly(t)||(this._isContainerRootDomInDocument()||this._createInlineContainer(),this._inlineMessagingStrategy?(this._inlineMessagingStrategy.reactivate(e,this.containerRoot),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.reactivate(e,this.containerRoot),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.reactivate(e,this.containerRoot)):this._activateContainerStrategies(this._componentMessaging,t))},m.prototype.shouldUpdate=function(e){return!this._isDisabledOrReadonly()&&(this._shouldUpdateContent=e,!0)},m.prototype.update=function(){m.superclass.update.call(this),this._inlineMessagingStrategy&&(this._isDisabledOrReadonly()||(this._inlineMessagingStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineMessagingStrategy.update(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineRequiredStrategy.update(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineHelpHintsStrategy.update()))},m.prototype.deactivate=function(){this._inlineMessagingStrategy.deactivate(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.deactivate(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.deactivate(),this._removeContainerRootDom(),delete this._inlineMessagingStrategy,delete this._inlineRequiredStrategy,delete this._inlineHelpHintsStrategy;const e=this.GetComponent()._getRootElement();e.removeEventListener("readonlyChanged",this._readonlyChangedCallback),delete this._readonlyChangedCallback,e.removeEventListener("disabledChanged",this._disabledChangedCallback),delete this._disabledChangedCallback,e.removeEventListener("userAssistanceDensityChanged",this._userAssistanceDensityChangedCallback),delete this._userAssistanceDensityChangedCallback,m.superclass.deactivate.call(this)},m.prototype._createInlineContainer=function(){this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-user-assistance-inline-container");const e=this.GetComponent(),i=e.options.userAssistanceDensity;"efficient"===i?this.containerRoot.classList.add("oj-efficient"):"reflow"===i&&this.containerRoot.classList.add("oj-reflow"),t(this.containerRoot).uniqueId(),e.widget()[0].appendChild(this.containerRoot)},m.prototype._removeContainerRootDom=function(){if(this._isContainerRootDomInDocument()){let e=this.containerRoot.parentNode;e&&e.removeChild(this.containerRoot)}this.containerRoot=null},m.prototype._isContainerRootDomInDocument=function(){var e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e},m.prototype._activateContainerStrategies=function(t,i){var n=e.InlineMessagingStrategy;this._inlineMessagingStrategy=new n(this._displayOptions,this.containerRoot),this._inlineMessagingStrategy.activate(t),void 0!==i.required&&(n=y,this._inlineRequiredStrategy=new n(this._displayOptions,this.containerRoot),this._inlineRequiredStrategy.activate(t)),n=_,this._inlineHelpHintsStrategy=new n(this._displayOptions,this.containerRoot),this._inlineHelpHintsStrategy.activate(t)},m.prototype._userAssistanceDensityChangedHandler=function(e,t){let i=t.detail.value;"efficient"===i?(this.containerRoot.classList.add("oj-efficient"),this.containerRoot.classList.remove("oj-reflow")):"reflow"===i?(this.containerRoot.classList.add("oj-reflow"),this.containerRoot.classList.remove("oj-efficient")):(this.containerRoot.classList.remove("oj-efficient"),this.containerRoot.classList.remove("oj-reflow"))},m.prototype._readonlyChangedHandler=function(e,t){if(t.detail.value)this._deactivateContainerStrategies();else{const t=e.options;this._activateContainerStrategies(this._componentMessaging,t)}},m.prototype._disabledChangedHandler=function(e,t){if(t.detail.value)this._deactivateContainerStrategies();else{const t=e.options;this._activateContainerStrategies(this._componentMessaging,t)}},m.prototype._deactivateContainerStrategies=function(){this._inlineMessagingStrategy&&this._inlineMessagingStrategy.deactivate(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.deactivate(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.deactivate(),delete this._inlineMessagingStrategy,delete this._inlineRequiredStrategy,delete this._inlineHelpHintsStrategy},m.prototype._isDisabledOrReadonly=function(e=this.GetComponent().options){var t=e.disabled||!1,i=e.readOnly||!1;return t||i};var v=function(e){this.Init(e)};e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL,v),e.Object.createSubclass(v,g,"InsideFormControlLabelStrategy"),v.prototype.activate=function(e){v.superclass.activate.call(this,e),this._CreateLabel()},v.prototype.reactivate=function(e){v.superclass.reactivate.call(this,e),this._DestroyLabel(),this._CreateLabel()},v.prototype.shouldUpdate=function(){return!1},v.prototype.update=function(){v.superclass.update.call(this)},v.prototype.deactivate=function(){this._DestroyLabel(),v.superclass.deactivate.call(this)},v.prototype._GetFormControlLabelStyleClass=function(){return"oj-form-control-label-inside"},v.prototype._InsertOjLabel=function(e,t,i){let n=i._getRootElement();n.insertBefore(e,n.firstElementChild)},v.prototype._CreateEventHandlers=function(e,t,i,n){v.superclass._CreateEventHandlers.call(this,e,t,i,n)},v._labelHintChangedHandler=function(e,t){e.innerText=t.detail.value},e.InsideLabelPlaceholderStrategy=function(e){this.Init(e)},e.Object.createSubclass(e.InsideLabelPlaceholderStrategy,e.MessagingStrategy,"oj.InsideLabelPlaceholderStrategy"),e.InsideLabelPlaceholderStrategy.prototype.activate=function(t){e.InsideLabelPlaceholderStrategy.superclass.activate.call(this,t),this._createPlaceholderToggle()},e.InsideLabelPlaceholderStrategy.prototype.reactivate=function(t){e.InsideLabelPlaceholderStrategy.superclass.reactivate.call(this,t),this._destroyPlaceholderToggle(),this._createPlaceholderToggle()},e.InsideLabelPlaceholderStrategy.prototype.deactivate=function(){this._destroyPlaceholderToggle(),e.InsideLabelPlaceholderStrategy.superclass.deactivate.call(this)},e.InsideLabelPlaceholderStrategy.prototype.shouldUpdate=function(e){return e&&void 0!==e.converterHint||this.GetComponent().options.placeholder},e.InsideLabelPlaceholderStrategy.prototype.update=function(){e.InsideLabelPlaceholderStrategy.superclass.update.call(this),this._placeholderChanged()},e.InsideLabelPlaceholderStrategy.prototype._destroyPlaceholderToggle=function(){var e=this.GetComponent(),t=e._GetContentElement()[0],i=e._getRootElement();this._blurCallback(),t.removeEventListener("focusout",this._blurCallback,!1),delete this._blurCallback,t.removeEventListener("focusin",this._focusCallback,!1),delete this._focusCallback,i.removeEventListener("placeholderChanged",this._placeholderChangedCallback,!1),delete this._placeholderChangedCallback,e._HasPlaceholderSet()&&(e._SetPlaceholder(e.options.placeholder),e._customPlaceholderSet=!0)},e.InsideLabelPlaceholderStrategy.prototype._createPlaceholderToggle=function(){var t=this.GetComponent(),i=t._GetContentElement()[0],n=t._getRootElement();t._customPlaceholderSet=!0,this._blurCallback=e.InsideLabelPlaceholderStrategy._blurHandler.bind(this,i),i.addEventListener("focusout",this._blurCallback,!1),this._focusCallback=e.InsideLabelPlaceholderStrategy._focusHandler.bind(this),i.addEventListener("focusin",this._focusCallback,!1),this._placeholderChangedCallback=this._placeholderChanged.bind(this),n.addEventListener("placeholderChanged",this._placeholderChangedCallback,!1),this._placeholderChanged()},e.InsideLabelPlaceholderStrategy.prototype._placeholderChanged=function(){var t,i=this.GetComponent()._GetContentElement()[0];t=e.FocusUtils.containsFocus(i)?this._focusCallback:this._blurCallback,Promise.resolve(!0).then(function(){t()})},e.InsideLabelPlaceholderStrategy.ShowConverterHintAsPlaceholder=function(e){var t=e.options.displayOptions;if(!t||"displayOptions"!==e._getResolvedUserAssistance())return!1;var i=t.converterHint;return i instanceof Array?"placeholder"===i[0]:"placeholder"===i},e.InsideLabelPlaceholderStrategy._focusHandler=function(){var t,i=this.GetComponent();if(e.InsideLabelPlaceholderStrategy.ShowConverterHintAsPlaceholder(i)){var n=this.GetConverterHint();t=n.length>0?n[0]:null}t||(t=i.options.placeholder),i._SetPlaceholder(t)},e.InsideLabelPlaceholderStrategy._blurHandler=function(t){if(t.hasAttribute("aria-haspopup")){var i=t.getAttribute("aria-owns"),n=document.getElementById(i);if(e.FocusUtils.containsFocus(n))return}var s,a=this.GetComponent();if(e.InsideLabelPlaceholderStrategy.ShowConverterHintAsPlaceholder(a)){var o=this.GetConverterHint();s=o.length>0?o[0]:null}s||(s=a.options.placeholder),null==s?a._SetPlaceholder(null):a._SetPlaceholder("")},e.InsideLabelStrategy=function(e){this.Init(e),this._displayOptions=e},e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE,e.InsideLabelStrategy),e.Object.createSubclass(e.InsideLabelStrategy,g,"oj.InsideLabelStrategy"),e.InsideLabelStrategy.prototype.activate=function(t){e.InsideLabelStrategy.superclass.activate.call(this,t),this._componentMessaging=t;const i=this.GetComponent()._getRootElement();this._placeholderChangedCallback=this._placeholderChangedHandler.bind(this),i.addEventListener("placeholderChanged",this._placeholderChangedCallback),this._activatePlaceholderStrategyIfNeeded(t),this._CreateLabel()},e.InsideLabelStrategy.prototype.reactivate=function(t){e.InsideLabelStrategy.superclass.reactivate.call(this,t),this._DestroyLabel(),this._CreateLabel(),this._placeholderStrategy?this._placeholderStrategy.reactivate(t):this._activatePlaceholderStrategyIfNeeded(this._componentMessaging)},e.InsideLabelStrategy.prototype.shouldUpdate=function(e){return!!this._placeholderStrategy&&this._placeholderStrategy.shouldUpdate(e)},e.InsideLabelStrategy.prototype.update=function(){this._placeholderStrategy&&this._placeholderStrategy.update()},e.InsideLabelStrategy.prototype.deactivate=function(){this._placeholderStrategy&&(this._placeholderStrategy.deactivate(),delete this._placeholderStrategy),this.GetComponent()._getRootElement().removeEventListener("placeholderChanged",this._placeholderChangedCallback),delete this._placeholderChangedCallback,this._DestroyLabel(),e.InsideLabelStrategy.superclass.deactivate.call(this)},e.InsideLabelStrategy.prototype._activatePlaceholderStrategyIfNeeded=function(t){if(void 0===this._placeholderStrategy){let i=()=>{let i=e.InsideLabelPlaceholderStrategy;this._placeholderStrategy=new i(this._displayOptions),this._placeholderStrategy.activate(t)};const n=this.GetComponent();(n.options.placeholder||"displayOptions"===n._getResolvedUserAssistance()&&e.InsideLabelPlaceholderStrategy.ShowConverterHintAsPlaceholder(n))&&i()}},e.InsideLabelStrategy.prototype._placeholderChangedHandler=function(){this._activatePlaceholderStrategyIfNeeded(this._componentMessaging)},e.InsideLabelStrategy.prototype._GetContainer=function(e){let t=e._GetFormControlContainer();if(!t)return null;let i="_GetContentWrapper";return e[i]&&(t=e[i]()),t},e.InsideLabelStrategy.prototype._GetFormControlLabelStyleClass=function(){return[e.InsideLabelStrategy._BASE_STYLE_CLASS,"label","inside".toLowerCase()].join("-")},e.InsideLabelStrategy.prototype._InsertOjLabel=function(e,t){t.insertBefore(e,t.firstElementChild)},e.InsideLabelStrategy._BASE_STYLE_CLASS="oj-text-field",e.PopupMessagingStrategy=function(e){this.Init(e)},e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.NOTEWINDOW,e.PopupMessagingStrategy),e.Object.createSubclass(e.PopupMessagingStrategy,e.MessagingStrategy,"oj.PopupMessagingStrategy"),e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT={ojRadioset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojCheckboxset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojInputText:{position:"launcher",events:{open:"focusin"}},ojTextArea:{position:"launcher",events:{open:"focusin"}},ojInputPassword:{position:"launcher",events:{open:"focusin"}},ojSwitch:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojSlider:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorSpectrum:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorPalette:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},default:{position:"launcher-wrapper",events:{open:"focusin"}}},e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT="oj-form-control-hint",e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER="oj-form-control-hint-converter",e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR="oj-form-control-hint-validator",e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE="oj-form-control-hint-title",e.PopupMessagingStrategy._OPEN_NAMESPACE=".ojPopupMessagingOpen",e.PopupMessagingStrategy._CLOSE_NAMESPACE=".ojPopupMessagingClose",e.PopupMessagingStrategy.prototype.activate=function(t){e.PopupMessagingStrategy.superclass.activate.call(this,t),this._initMessagingPopup()},e.PopupMessagingStrategy.prototype.reactivate=function(t){e.PopupMessagingStrategy.superclass.reactivate.call(this,t),this._updatePopupIfOpenOrComponentHasFocus()},e.PopupMessagingStrategy.prototype.update=function(){e.PopupMessagingStrategy.superclass.update.call(this),this._updatePopupIfOpenOrComponentHasFocus()},e.PopupMessagingStrategy.prototype.deactivate=function(){this._unregisterLauncherEvents(),this._destroyTooltip(),e.PopupMessagingStrategy.superclass.deactivate.call(this)},e.PopupMessagingStrategy.prototype.close=function(){this._closePopup()},e.PopupMessagingStrategy.prototype._closePopup=function(){this._queueAction(function(e){if(this._isPopupInitialized())return e&&this._setActionResolver(this.$messagingContentRoot,"close",e),void this.$messagingContentRoot.ojPopup("close");e&&e(!0)}.bind(this))},e.PopupMessagingStrategy.prototype._initMessagingPopup=function(){this._openPopupCallback||this._registerLauncherEvents()},e.PopupMessagingStrategy.prototype._addAnimateEventListeners=function(e){var t=function(e,t,i){var n=this.GetComponent();n&&n._trigger&&(t.stopPropagation(),n._trigger(e,null,i)||t.preventDefault())};e.on("ojanimatestart.notewindow",t.bind(this,"animateStart")),e.on("ojanimateend.notewindow",t.bind(this,"animateEnd"))},e.PopupMessagingStrategy.prototype._removeAnimateEventListeners=function(e){e.off("ojanimatestart.notewindow"),e.off("ojanimateend.notewindow")},e.PopupMessagingStrategy.prototype._setBusyState=function(e){var t=this.GetComponent(),i=t?t.element:null,n=i?i[0]:null,a=s.getContext(n).getBusyContext(),o="The page is waiting for note window ";return n&&n.id&&(o+='for "'+n.id+'" '),o+="to "+e,a.addBusyState({description:o})},e.PopupMessagingStrategy.prototype._setActionResolver=function(e,t,i){var n;this._actionCount>1&&(n=e.ojPopup("option","animation"),e.ojPopup("option","animation",null));var s=this._setBusyState(t);e.one("oj"+t,function(){n&&e.ojPopup("option","animation",n),s(),i(!0)})},e.PopupMessagingStrategy.prototype._queueAction=function(e){if(this.GetComponent()._IsCustomElement()){var t=this,i=function(e){var i=new Promise(e);return i.then(function(){t._actionCount-=1}),i};this._actionCount?(this._actionCount+=1,this._actionPromise=this._actionPromise.then(function(){return i(e)})):(this._actionCount=1,this._actionPromise=i(e))}else e(null)},e.PopupMessagingStrategy.prototype._openPopup=function(t){this._queueAction(function(i){var n,s,a;if(this._canOpenPopup()&&(s=this._buildPopupHtml(),!e.StringUtils.isEmptyOrUndefined(s))){var o=this._getPopupElement(),l=o.ojPopup("isOpen");if((n=e.PopupMessagingStrategyPoolUtils.getPopupContentNode(o)).innerHTML="",n.innerHTML=s,!l)return a=this.GetLauncher(),t&&"press"===t.type&&this._openPopupOnPressEvent(a),i&&this._setActionResolver(o,"open",i),void o.ojPopup("open",a);l&&o.ojPopup("refresh")}i&&i(!0)}.bind(this))},e.PopupMessagingStrategy.prototype._openPopupOnPressEvent=function(e){this._inPressEvent=!0,e[0].addEventListener("click",this._eatChangeAndClickOnPress,!0),e[0].addEventListener("change",this._eatChangeAndClickOnPress,!0),e.one("touchend",function(){setTimeout(function(){this._inPressEvent=!1},50)})},e.PopupMessagingStrategy.prototype._eatChangeAndClickOnPress=function(e){this._inPressEvent&&(e.preventDefault(),e.stopPropagation(),"click"===e.type&&(this._inPressEvent=!1))},e.PopupMessagingStrategy.prototype._canOpenPopup=function(){var e=this.GetComponent().options,t=e.disabled||!1,i=e.readOnly||!1;return!(t||i)},e.PopupMessagingStrategy.prototype._updatePopupIfOpenOrComponentHasFocus=function(){var t,i,n,s;null!=this.GetLauncher()&&(n=this.GetLauncher()[0].contains(document.activeElement),this._isPopupInitialized()?(s=this._getPopupElement()).ojPopup("isOpen")&&((t=this._buildPopupHtml())?((i=e.PopupMessagingStrategyPoolUtils.getPopupContentNode(s)).innerHTML="",i.innerHTML=t,s.ojPopup("refresh")):s.ojPopup("close")):n&&(t=this._buildPopupHtml())&&this._openPopup(void 0))},e.PopupMessagingStrategy.prototype._unregisterLauncherEvents=function(){var t=this.GetLauncher();t.off(e.PopupMessagingStrategy._OPEN_NAMESPACE),t.off(e.PopupMessagingStrategy._CLOSE_NAMESPACE),t[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),t[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0),e.DomUtils.isTouchSupported()&&(t.ojHammer().off("press"),t.ojHammer("destroy"),t.off("contextmenu",this._eatContextMenuOnOpenPopupListener),this._eatContextMenuOnOpenPopupListener=null,this._inPressEvent=null),this._openPopupCallback=null,this._closePopupCallback=null},e.PopupMessagingStrategy.prototype._registerLauncherEvents=function(){var t,n,s,a,o,l,r,d,u=this.GetLauncher();(a=(s=e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?s.events:e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events).open&&((r=this._openPopupCallback)||(r=this._openPopup.bind(this),this._openPopupCallback=r),d=a.open.indexOf("press"),l=this._getNamespacedEvents(a.open.replace("press",""),e.PopupMessagingStrategy._OPEN_NAMESPACE),u.on(l,r),e.DomUtils.isTouchSupported()&&-1!==d&&(this._eatContextMenuOnOpenPopupListener=function(){return!1},u.on("contextmenu",this._eatContextMenuOnOpenPopupListener),o={recognizers:[[i.Press,{time:750}]]},u.ojHammer(o).on("press",r))),a.close&&((n=this._closePopupCallback)||(n=this._closePopup.bind(this),this._closePopupCallback=n),t=this._getNamespacedEvents(a.close,e.PopupMessagingStrategy._CLOSE_NAMESPACE),u.on(t,n))},e.PopupMessagingStrategy.prototype._getNamespacedEvents=function(e,t){var i,n,s;if(""===e||""===t)return e;s=(i=e.split(" ")).length,n=[];for(var a=0;a<s;a++)i[a]&&n.push(i[a]+t);return n.join(" ")},e.PopupMessagingStrategy.prototype._getPopupPosition=function(){var t,i,n;return(t=(i=e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?i.position:e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.position)&&("launcher"===t?n=this.GetLauncher():"launcher-wrapper"===t&&(n=this.GetLauncher().parent())),n||(n=this.GetComponent().widget()),{my:"start bottom",at:"end top",collision:"flipcenter",of:n}},e.PopupMessagingStrategy.prototype._getPopupElement=function(){var t,i;if(this.$messagingContentRoot)return this.$messagingContentRoot;if(t=e.PopupMessagingStrategyPoolUtils.getNextFreePopup(),i=this._getPopupPosition(),t.ojPopup("option","position",i),t.ojPopup("option","beforeClose",this._popupBeforeCloseCallback.bind(this)),t.ojPopup("option","close",this._popupCloseCallback.bind(this)),t.ojPopup("option","open",this._popupOpenCallback.bind(this)),this.GetComponent()._IsCustomElement()){var n=(a.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).animation;n.actionPrefix="notewindow",t.ojPopup("option","animation",n),this._addAnimateEventListeners(t)}else t.ojPopup("option","animation",null);return this.$messagingContentRoot=t,this.$messagingContentRoot},e.PopupMessagingStrategy.prototype._popupOpenCallback=function(e){var i=t(e.target),n=this;window.setTimeout(function(){o.isComponentInitialized(i,"ojPopup")?i.ojPopup("option","autoDismiss","focusLoss"):delete n.$messagingContentRoot},10)},e.PopupMessagingStrategy.prototype._popupBeforeCloseCallback=function(){this._resolveBusyState=this._setBusyState("close")},e.PopupMessagingStrategy.prototype._popupCloseCallback=function(i){var n=this.GetLauncher(),s=t(i.target);this._removeAnimateEventListeners(s),o.isComponentInitialized(s,"ojPopup")&&(s.ojPopup("option","autoDismiss","none"),s.ojPopup("option","open",null),s.ojPopup("option","close",null),s.ojPopup("option","beforeClose",null)),n&&n[0]&&(n[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),n[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0)),this.$messagingContentRoot=null,this._inPressEvent=null,e.PopupMessagingStrategyPoolUtils.getPopupContentNode(s).innerHTML="",this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},e.PopupMessagingStrategy.prototype._destroyTooltip=function(){this._closePopup(),e.PopupMessagingStrategyPoolUtils.destroyFreePopup()},e.PopupMessagingStrategy.prototype._buildPopupHtml=function(){var t=!1,i=this.GetComponent().document[0],n=[],s="";return this.ShowMessages()&&n.push(this._buildMessagesHtml(i)),(this.ShowConverterHint()||this.ShowValidatorHint()||this.ShowTitle())&&n.push(this._buildHintsHtml(i)),n.forEach(function(n){n&&(t?s=s.concat(e.PopupMessagingStrategyUtils.getSeparatorHtml(i)):t=!0,s=s.concat(n))}),s},e.PopupMessagingStrategy.prototype._buildMessagesHtml=function(t){var i,n="",s=this.GetMaxSeverity();return this.HasMessages()&&(i=this.GetMessages(),n=e.PopupMessagingStrategyUtils.buildMessagesHtml(t,i,s,!1)),n},e.PopupMessagingStrategy.prototype._buildHintsHtml=function(t){var i,n,s=[],a="";if(this.ShowConverterHint()&&(i=(s=this.GetConverterHint()).length?s[0]:"",a+=e.PopupMessagingStrategyUtils.buildHintHtml(t,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER,i,!1,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),this.ShowValidatorHint())for(s=this.GetValidatorHints(),n=0;n<s.length;n++)a+=e.PopupMessagingStrategyUtils.buildHintHtml(t,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR,s[n],!1,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT);return this.ShowTitle()&&(a+=e.PopupMessagingStrategyUtils.buildHintHtml(t,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE,this.GetTitle(),!0,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),a?"<div class='oj-form-control-hints'>"+a+"</div>":""},e.PopupMessagingStrategy.prototype._isPopupInitialized=function(){return!!this.$messagingContentRoot&&o.isComponentInitialized(this.$messagingContentRoot,"ojPopup")},e.PopupMessagingStrategyUtils={},e.PopupMessagingStrategyUtils.buildHintHtml=function(t,i,n,s,a){var o;if(n){o=t.createElement("div");for(var l=a.split(" "),r=0,d=l.length;r<d;++r)o.classList.add(l[r]);o.classList.add(i),e.PopupMessagingStrategyUtils._appendTextDom(o,e.PopupMessagingStrategyUtils.GetTextDom(t,n,s))}return o?o.outerHTML:""},e.PopupMessagingStrategyUtils.getSeverityTranslatedString=function(e){var t;switch(e){case r.SEVERITY_LEVEL.FATAL:t=n.getTranslatedString("oj-message.fatal");break;case r.SEVERITY_LEVEL.ERROR:t=n.getTranslatedString("oj-message.error");break;case r.SEVERITY_LEVEL.WARNING:t=n.getTranslatedString("oj-message.warning");break;case r.SEVERITY_LEVEL.INFO:t=n.getTranslatedString("oj-message.info");break;case r.SEVERITY_LEVEL.CONFIRMATION:t=n.getTranslatedString("oj-message.confirmation")}return t},e.PopupMessagingStrategyUtils.getSeparatorHtml=function(e){var i;return(i=t(e.createElement("hr")))?i.get(0).outerHTML:""},e.PopupMessagingStrategyUtils.buildMessagesHtml=function(t,i,n,s){var a,o,l,d,u,h,p,g,c="",_=[],y={};for(o=0;o<i.length;o++)u=(d=i[o])instanceof r?d:new r(d.summary,d.detail,d.severity),y[h=r.getSeverityLevel(u.severity)]||(y[h]=[]),y[h].push(u);for(o=n;o>=r.SEVERITY_LEVEL.CONFIRMATION;o--)for(_=y[o]||[],l=0;l<_.length;l++)d=_[l],h=r.getSeverityLevel(d.severity),p=e.PopupMessagingStrategyUtils.getSeverityTranslatedString(h),g=d.summary||p,a=d.detail||"",c=c.concat(e.PopupMessagingStrategyUtils.buildMessageHtml(t,g,a,h,s));return c},e.PopupMessagingStrategyUtils.buildMessageHtml=function(t,i,n,s,o){var l,r,d,u,h,p=e.PopupMessagingStrategyUtils.getSeverityTranslatedString(s);if((d=t.createElement("div")).classList.add(e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE),o)for(var g=e.PopupMessagingStrategyUtils._getSeveritySelector(s).split(" "),c=0,_=g.length;c<_;++c)d.classList.add(g[c]);u=t.createElement("span");for(var y=e.PopupMessagingStrategyUtils._getSeverityIconSelector(s).split(" "),m=0,v=y.length;m<v;++m)u.classList.add(y[m]);if(null==p?u.removeAttribute("title"):u.setAttribute("title",p),u.setAttribute("role","img"),d.appendChild(u),(l=t.createElement("span")).classList.add(e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT),"header"===(a.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).messageSummaryOptionDefault&&((h=t.createElement("div")).classList.add(e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY),h.textContent=i,l.appendChild(h)),n){var f=e.PopupMessagingStrategyUtils.GetTextDom(t,n,!0);(r=t.createElement("div")).classList.add(e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL),e.PopupMessagingStrategyUtils._appendTextDom(r,f),l.appendChild(r)}return d.appendChild(l),d.outerHTML},e.PopupMessagingStrategyUtils._getSeverityIconSelector=function(t){var i;switch(t){case r.SEVERITY_LEVEL.FATAL:case r.SEVERITY_LEVEL.ERROR:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON;break;case r.SEVERITY_LEVEL.WARNING:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON;break;case r.SEVERITY_LEVEL.INFO:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON;break;case r.SEVERITY_LEVEL.CONFIRMATION:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON}return e.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS+i},e.PopupMessagingStrategyUtils._getSeveritySelector=function(t){var i;switch(t){case r.SEVERITY_LEVEL.FATAL:case r.SEVERITY_LEVEL.ERROR:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR;break;case r.SEVERITY_LEVEL.WARNING:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING;break;case r.SEVERITY_LEVEL.INFO:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO;break;case r.SEVERITY_LEVEL.CONFIRMATION:default:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION}return i},e.PopupMessagingStrategyUtils.GetTextDom=function(t,i,n){var s=null;return e.StringUtils.isString(i)&&(n&&e.DomUtils.isHTMLContent(i)?s=e.DomUtils.cleanHtml(i.substring(6,i.length-7)):(s=t.createElement("span")).textContent=i),s},e.PopupMessagingStrategyUtils._appendTextDom=function(t,i){e.StringUtils.isString(i)?t.innerHTML=i:t.appendChild(i)},e.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS="oj-component-icon oj-message-status-icon ",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE="oj-message",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY="oj-message-summary",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL="oj-message-detail",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT="oj-message-content",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON="oj-message-error-icon",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON="oj-message-warning-icon",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON="oj-message-info-icon",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON="oj-message-confirmation-icon",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR="oj-message-error",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING="oj-message-warning",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO="oj-message-info",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION="oj-message-confirmation",e.PopupMessagingStrategyPoolUtils={},e.PopupMessagingStrategyPoolUtils.getNextFreePopup=function(){var i,n=e.PopupMessagingStrategyPoolUtils._getPool(),s=n.find("."+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING);if(0===s.length){(i=t(e.PopupMessagingStrategyPoolUtils._getPopupContentHtml()))[0].style.display="none",i.appendTo(n);i.ojPopup({initialFocus:"none",tail:"simple",autoDismiss:"none",modality:"modeless",animation:{open:null,close:null}})}else i=t(s[0]);return i},e.PopupMessagingStrategyPoolUtils.getPopupContentNode=function(t){return t.find("."+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER)[0]},e.PopupMessagingStrategyPoolUtils.destroyFreePopup=function(){var t;if(e.PopupMessagingStrategyPoolUtils._getFreePoolCount()>0){var i=(t=e.PopupMessagingStrategyPoolUtils.getNextFreePopup())[0];t.ojPopup("destroy"),i.parentNode.removeChild(i)}},e.PopupMessagingStrategyPoolUtils._getPool=function(){var i=t("#"+e.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID);if(i.length>0)return i;var n=(i=t("<div>"))[0];return n.setAttribute("id",e.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID),n.setAttribute("role","presentation"),document.body.appendChild(n),i},e.PopupMessagingStrategyPoolUtils._getFreePoolCount=function(){return e.PopupMessagingStrategyPoolUtils._getPool().find("."+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING).length},e.PopupMessagingStrategyPoolUtils._getPopupContentHtml=function(){return'<div class="'+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING+'"><div class="'+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER+'"></div></div>'},e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER="oj-messaging-popup-container",e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING="oj-messaging-popup",e.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID="__oj_messaging_popup_pool"});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojoptgroup',["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(e,t){"use strict";var o={properties:{disabled:{type:"boolean",value:!1},label:{type:"string"}},methods:{setProperty:{},getProperty:{},refresh:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function r(e){this.updateDOM=function(){var t=e.element.customOptgroupRenderer;t&&"function"==typeof t&&t(e.element)}}o.properties.customOptgroupRenderer={},o.extension._CONSTRUCTOR=r,e.CustomElementBridge.register("oj-optgroup",{metadata:o})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojoption',["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(e,t){"use strict";var n={properties:{disabled:{type:"boolean",value:!1},value:{type:"any"}},methods:{setProperty:{},getProperty:{},refresh:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function o(n){function o(n){var o=e.BaseCustomElementBridge.getSlotMap(n),i=["startIcon","","endIcon"];t.each(o,function(e,o){-1===i.indexOf(e)&&function(e,n){t.each(n,function(t,n){e.removeChild(n)})}(n,o)}),t.each(i,function(e,i){o[i]&&function(e,n){t.each(n,function(t,n){e.appendChild(n)})}(n,o[i])})}this.updateDOM=function(){var e=n.element.customOptionRenderer;o(n.element),e&&"function"==typeof e&&e(n.element)}}n.properties.customOptionRenderer={},n.extension._CONSTRUCTOR=o,e.CustomElementBridge.register("oj-option",{metadata:n})});
define('ojs/ojhighlighttext',["exports","ojs/ojvcomponent"],function(t,e){"use strict";
/**
     * @license
     * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
     * The Universal Permissive License (UPL), Version 1.0
     * as shown at https://oss.oracle.com/licenses/upl/
     * @ignore
     */var h=function(t,e,h,i){var r,s=arguments.length,n=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,h):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,h,i);else for(var l=t.length-1;l>=0;l--)(r=t[l])&&(n=(s<3?r(n):s>3?r(e,h,n):r(e,h))||n);return s>3&&n&&Object.defineProperty(e,h,n),n};t.HighlightText=class extends e.VComponent{constructor(t){super(t),this._HIGHLIGHT_TOKEN="__@@__"}render(){const t=this.props,h=this._highlighter(t.text,t.matchText);return e.h("oj-highlight-text",{class:"oj-highlighttext"},h)}_highlighter(t,h){if(h){const i=this._escapeRegExp(h),r=t.replace(new RegExp(i,"gi"),this._HIGHLIGHT_TOKEN+"$&"+this._HIGHLIGHT_TOKEN).split(this._HIGHLIGHT_TOKEN).map((t,h)=>h%2==0?t:e.h("span",{class:"oj-highlighttext-highlighter"},t));return e.h("span",null,r)}return e.h("span",null,t)}_escapeRegExp(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}},t.HighlightText.metadata={extension:{_DEFAULTS:class{constructor(){this.text="",this.matchText=""}}},properties:{text:{type:"string",value:""},matchText:{type:"string",value:""}}},t.HighlightText=h([e.customElement("oj-highlight-text")],t.HighlightText),Object.defineProperty(t,"__esModule",{value:!0})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojselectcombobox',["ojs/ojcore","jquery","ojs/ojcontext","ojs/ojlistdataproviderview","ojs/ojtreedataproviderview","ojs/ojthemeutils","ojs/ojtimerutils","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojeditablevalue","ojs/ojoptgroup","ojs/ojoption","ojs/ojhighlighttext"],function(e,t,i,s,o,n,a,l,r){"use strict";var h,c,u={properties:{asyncValidators:{type:"Array<Object>",value:[]},converter:{type:"object"},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},maximumResultCount:{type:"number",value:15},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},minLength:{type:"number",value:0},optionRenderer:{type:"function"},options:{type:"Array<Object>|object"},optionsKeys:{type:"object",properties:{childKeys:{type:"object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"object"}}}}},children:{type:"string"},label:{type:"string"},value:{type:"string"}}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},rawValue:{type:"Array<string>",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{filterFurther:{type:"string"},moreMatchesFound:{type:"string"},noMatchesFound:{type:"string"},oneMatchesFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array",value:[]},value:{type:"Array<any>",writeback:!0},valueOptions:{type:"Array<Object>",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},d={properties:{asyncValidators:{type:"Array<Object>",value:[]},converter:{type:"object"},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},filterOnOpen:{type:"string",enumValues:["none","rawValue"],value:"none"},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},maximumResultCount:{type:"number",value:15},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},minLength:{type:"number",value:0},optionRenderer:{type:"function"},options:{type:"Array<Object>|object"},optionsKeys:{type:"object",properties:{childKeys:{type:"object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"object"}}}}},children:{type:"string"},label:{type:"string"},value:{type:"string"}}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{filterFurther:{type:"string"},moreMatchesFound:{type:"string"},noMatchesFound:{type:"string"},oneMatchesFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array",value:[]},value:{type:"any",writeback:!0},valueOption:{type:"object",writeback:!0,properties:{value:{type:"any"},label:{type:"string"}}}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojValueUpdated:{},ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},p={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},maximumResultCount:{type:"number",value:15},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},minimumResultsForSearch:{type:"number",value:15},optionRenderer:{type:"function"},options:{type:"Array<Object>|object"},optionsKeys:{type:"object",properties:{childKeys:{type:"object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"object"}}},children:{type:"string"},label:{type:"string"},value:{type:"string"}}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},readonly:{type:"boolean",value:!1},renderMode:{type:"string",enumValues:["jet","native"]},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{filterFurther:{type:"string"},moreMatchesFound:{type:"string"},noMatchesFound:{type:"string"},oneMatchesFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},searchField:{type:"string"}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"Array<any>",writeback:!0},valueOptions:{type:"Array<Object>",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},f={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},maximumResultCount:{type:"number",value:15},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},minimumResultsForSearch:{type:"number",value:15},optionRenderer:{type:"function"},options:{type:"Array<Object>|object"},optionsKeys:{type:"object",properties:{childKeys:{type:"object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"object"}}},children:{type:"string"},label:{type:"string"},value:{type:"string"}}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},readonly:{type:"boolean",value:!1},renderMode:{type:"string",enumValues:["jet","native"]},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{filterFurther:{type:"string"},moreMatchesFound:{type:"string"},noMatchesFound:{type:"string"},oneMatchesFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},searchField:{type:"string"}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"any",writeback:!0},valueOption:{type:"object",writeback:!0,properties:{value:{type:"any"},label:{type:"string"}}}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},v={GENERATED_OPTIONS_SELECTOR:"oj-select-options-generated",KEY:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isControl:function(e){switch(e.which){case v.KEY.SHIFT:case v.KEY.CTRL:case v.KEY.ALT:return!0;default:return!!e.metaKey}},isFunctionKey:function(e){var t=e.which?e.which:e;return t>=112&&t<=123}},DEFAULT_FETCH_SIZE:15,DEFAULT_FETCH_ALL_SIZE:-1,FILTERING_FETCH_SIZE_MIN:100,FILTERING_FETCH_SIZE_MAX:500,FILTERING_FETCH_SIZE_MRC_TIMES:7,DEFAULT_QUERY_DELAY:70,ValueChangeTriggerTypes:{ENTER_PRESSED:"enter_pressed",OPTION_SELECTED:"option_selected",BLUR:"blur",SEARCH_ICON_CLICKED:"search_icon_clicked"},lastMousePosition:{x:0,y:0},nextUid:(h=1,function(){var e=h;return h+=1,e}),scrollBarDimensions:null,each2:function(e,i){for(var s=t.isFunction(e[0])?t(e[0]()):t(e[0]),o=-1,n=e.length;++o<n&&(s.context=s[0]=t.isFunction(e[0])?e[o]():e[o])&&!1!==i.call(s[0],o,s););return e},measureScrollbar:function(){var e=t("<div class='oj-listbox-measure-scrollbar'></div>");e.appendTo("body");var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i},splitVal:function(e,i){var s,o,n;if(null===e||e.length<1)return[];for(o=0,n=(s=e.split(i)).length;o<n;o++)s[o]=t.trim(s[o]);return s},getSideBorderPadding:function(e){return e.outerWidth(!1)-e.width()},installKeyUpChangeEvent:function(e){var i="keyup-change-value";e.on("keydown",function(){void 0===t.data(e,i)&&t.data(e,i,e.val())}),e.on("keyup",function(s){if(s.which!==v.KEY.ENTER){var o=t.data(e,i);void 0!==o&&e.val()!==o&&(t.removeData(e,i),e.trigger("keyup-change"))}else s.preventDefault()})},getSearchText:function(e){var t,i=e.which||e.keyCode;return e&&"keydown"===e.type&&(32===i||i>47&&i<58||i>64&&i<91||i>95&&i<112||i>185&&i<193||i>218&&i<223)&&(null!=e.key?t=e.key:(i>=96&&i<=105&&(i-=48),t=String.fromCharCode(i),e.shiftKey||(t=t.toLowerCase())),e.preventDefault()),t},escapeRegExp:function(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")},installFilteredMouseMove:function(e){e.on("mousemove",function(e){var i=v.lastMousePosition;void 0!==i&&i.x===e.pageX&&i.y===e.pageY||(t(e.target).trigger("mousemove-filtered",e),v.lastMousePosition.x=e.pageX,v.lastMousePosition.y=e.pageY)})},thunk:function(e){var t,i=!1;return function(){return!1===i&&(t=e(),i=!0),t}},_focus:function(e,t){if(t[0]!==document.activeElement){var i=v._addBusyState(e.container,"setting focus");a.getTimer(40).getPromise().then(function(){var e,s=t[0],o=t.val().length;t.focus(),t.is(":visible")&&s===document.activeElement&&(s.setSelectionRange?s.setSelectionRange(o,o):s.createTextRange&&((e=s.createTextRange()).collapse(!1),e.select())),i()})}},getCursorInfo:function(e){var i=t(e)[0],s=0,o=0;if("selectionStart"in i)s=i.selectionStart,o=i.selectionEnd-s;else if("selection"in document){i.focus();var n=document.selection.createRange();o=document.selection.createRange().text.length,n.moveStart("character",-i.value.length),s=n.text.length-o}return{offset:s,length:o}},killEvent:function(e){e.preventDefault()},local:function(e,i){var s,o,n=e,a=function(e){return""+e.label};t.isArray(n)&&(n={results:o=n}),!1===t.isFunction(n)&&(o=n,n=function(){return o});var l=n();return l&&l.text&&(a=l.text,t.isFunction(a)||(s=l.text,a=function(e){return e[s]})),function(e){var s=e.term,o={results:[]};""!==s||i?(n()&&v.each2(t(n().results),function(t,s){v._processData(e,s,o.results,i,!0,a)}),e.callback(o)):e.callback(n())}},createOptionTag:function(e,i,s,o){var n=t("<option>");return n.addClass("oj-listbox-result oj-listbox-result-selectable oj-listbox-results-depth-"+e),n.attr("role","option"),n.attr("id","oj-listbox-result-label-"+v.nextUid()),n.text(o(s)),n.attr("value",i),n},createOptgroupTag:function(e,i,s){var o=t("<optgroup>");return o.addClass("oj-listbox-results-sub"),o.attr("label",s(i)),e.addClass("oj-listbox-result-with-children"),o},listPopulateResults:function(e,i,s){var o=function(e,i,n){var a,l,r,h;i.each(function(){(l=t(this)).is("li")&&(l.children("ul").length>0?(r=l.contents().filter(function(){return 1!==this.nodeType||"ul"!==this.tagName.toLowerCase()}).text(),a=v.createOptgroupTag(e,r,s),h=l.children("ul"),o(a,h.children(),n+1)):a=v.createOptionTag(n,l.attr("oj-data-value"),l.text(),s),a.appendTo(e))})};o(e,i,0)},ojOptionPopulateResults:function(e,i,s){var o=function(e,i,n){var a,l,r;i.each(function(){(l=t(this)).is("oj-option")?(r=l.text()||l.attr("label"),a=v.createOptionTag(n,l.prop("value"),r,s)):l.is("oj-optgroup")?(r=l.text()||l.attr("label"),a=v.createOptgroupTag(e,r,s),o(a,l.children(),n+1)):l.is("option")&&(a=l),a.appendTo(e)})};o(e,i,0)},lookupOptionKeys:function(e,t,i){return e[t[i]||i]},arrayPopulateResults:function(e,t,i,s){var o=function(e,t,s,n){for(var a,l,r,h,c,u=0,d=t.length;u<d;u++)a=t[u],r=v.lookupOptionKeys(a,n,"children"),h=v.lookupOptionKeys(a,n,"label"),r&&r.length>0?(l=v.createOptgroupTag(e,h,i),o(l,r,s+1,n.childKeys||{})):(c=v.lookupOptionKeys(a,n,"value"),l=v.createOptionTag(s,c,h,i)),l.appendTo(e)};o(e,t,0,s||{})},cleanupResults:function(e){e.children().not("oj-option, oj-optgroup").remove(),e.removeClass("oj-listbox-result-with-children")},_addBusyState:function(e,t){var s={description:"The component identified by '"+e.attr("id")+"' "+t};return i.getContext(e[0]).getBusyContext().addBusyState(s)},_clearBusyState:function(e){e&&e()},isDataProvider:function(t){return!(!t||!e.DataProviderFeatureChecker)&&e.DataProviderFeatureChecker.isDataProvider(t)},isTreeDataProvider:function(t){return!(!t||!e.DataProviderFeatureChecker)&&e.DataProviderFeatureChecker.isTreeDataProvider(t)},getDataProvider:function(e){if(e){var t=e._dataProvider||e.options;if(v.isDataProvider(t))return t}return null},clearDataProviderWrapper:function(e){e.options._dataProvider=null},_findOption:function(t,i){if(e.Object.compareValues(i,t.value))return t;if(t.children)for(var s,o=t.children,n=0;n<o.length;n++)if(s=v._findOption(o[n],i))return s;return null},findOption:function(e,t){if(Array.isArray(e)){for(var i=0,s=e.length;i<s;i++){var o=v._findOption(e[i],t);if(o)return o}return null}return v._findOption(e,t)},findOptions:function(e,t){for(var i=[],s=0;s<t.length;s++){var o=v.findOption(e,t[s]);o&&i.push(o)}return i},findOptionFromResult:function(e,t,i){var s,o=v.getLastQueryResult(e);if(o&&(s=v.findOption(o,t)),e.ojContext.multiple&&!s&&(s=v.getSelectedOptionData(e,t)),s){var n={value:t,label:s.label};return s.data&&s.metadata&&(n.data=s.data,n.metadata=s.metadata),n}return i},mergeValueAndValueOptions:function(e){var t=e.options.value,i=!1;if(e.multiple){var s,o=e.options.valueOptions;if(t&&t.length>0)o&&o.length&&(s=v.findOptions(o,t)),s&&s.length===o.length||(i=!0);else o&&v.syncValueWithValueOptions(e,o,t,null)}else{var n,a=e.options.valueOption;if(null!=t)a&&(n=v.findOption(a,t)),n||(i=!0);else a&&v.syncValueWithValueOption(e,a,t,null)}return i},syncValueWithValueOption:function(i,s,o,n){var a,l=!0;if(v.isValueOptionsForPlaceholder(!1,s)?v.isValueForPlaceholder(!1,o)?(a=o,l=!1):a=null:a=s?s.value:null,e.Object.compareValues(a,o)){if(!0===n){var r=i.element[0];t(r.options[r.selectedIndex]).text(v.getLabel(s))}else if(!1===n){var h=i.select||i.combobox;h&&l&&h._updateSelection(s)}}else v._forceSetValue(i,a)},syncValueWithValueOptions:function(i,s,o,n){var a,l=!0;if(v.isValueOptionsForPlaceholder(!0,s))v.isValueForPlaceholder(!0,o)?(a=o,l=!1):a=v.getValueForPlaceholder(!0),e.Object.compareValues(a,o)||v._forceSetValue(i,a);else if(s){a=[];for(var r=0;r<s.length;r++)a.push(s[r].value);if(e.Object.compareValues(a,o)){if(!0===n){var h=0;i.element.find("option").each(function(){if(this.selected){var e=v.getLabel(s[h]);this.text!=e&&t(this).text(e),h+=1}})}else if(!1===n){var c=i.select||i.combobox;c&&l&&c._updateSelection(s)}}else v._forceSetValue(i,a)}},_forceSetValue:function(e,t){var i=e;i.forceCanSetValue=!0;try{i._SetValue(t,null,{doValueChangeCheck:!1,_context:{internalSet:!0,writeback:!0}})}finally{delete i.forceCanSetValue}},isPlaceholderSpecified:function(e){return"string"==typeof e.placeholder},getFixupValueOptionsForPlaceholder:function(e){return e?[]:{value:null,label:null}},isValueOptionsForPlaceholder:function(t,i){return null==i||!t&&null==i.value||e.Object.compareValues(i,v.getFixupValueOptionsForPlaceholder(t))},getValueOptionsForPlaceholder:function(e,t){var i=e.multiple;return e._IsCustomElement()&&v.isPlaceholderSpecified(e.options)&&v.isValueOptionsForPlaceholder(i,t)&&(t=v.getFixupValueOptionsForPlaceholder(i)),t},getValueForPlaceholder:function(e){return e?[]:""},isValueForPlaceholder:function(t,i){return null==i||e.Object.compareValues(i,v.getValueForPlaceholder(t))},setValueOptions:function(e,t){var i,s={internalSet:!0,changed:!0,writeback:!0},o=v.getOpts(e),n=!!o&&v.isDataProvider(o.options);if(e.multiple){var a=[],l=[];if(t&&t.length){i=[];for(var r=0;r<t.length;r++)i.push({value:t[r].value,label:t[r].label}),n&&(a.push(t[r].data),l.push(t[r].metadata))}else i=t;s=v.getContextWithExtraData(s,o,a,l),e.option("valueOptions",i,{_context:s}),o&&(o.valueOptions=i)}else{var h=t;Array.isArray(t)&&(h=t[0]),h&&(s=v.getContextWithExtraData(s,o,h.data,h.metadata)),h&&!v.isValueOptionsForPlaceholder(e.multiple,h)?(i={value:h.value,label:h.label},e.option("valueOption",{value:h.value,label:h.label},{_context:s})):i=h,e.option("valueOption",i,{_context:s}),o&&(o.valueOption=i)}},updateValueOptions:function(e){if(e){var t=e.datalist?e.datalist:e.opts.element;e.opts.initSelection.call(null,t,function(t){var i=e.ojContext.multiple,s=t;if(null==s&&"oj-combobox"===e._classNm){var o=e.ojContext.options.value;if(i){s=[];for(var n=0;n<o.length;n++)s.push(e.opts.manageNewEntry(o[n]))}else s=e.opts.manageNewEntry(o)}s&&(e.setValOpts(s),i?e._updateSelection(s):e._updateSelectedOption(s))})}},applyValueOptions:function(e,t){if(e&&!e.ojContext._resolveValueOptionsLater&&("oj-combobox"===e._classNm||"oj-select"===e._classNm)){var i=e.ojContext.multiple,s=i?t.valueOptions:t.valueOption;if(v.isValueOptionsForPlaceholder(i,s))return!1;if(s)return e._updateSelection(s),!0}return!1},isValueChanged:function(e){return e._valueHasChanged},setValueChanged:function(e,t){e._valueHasChanged=t},hasInvalidComponentMessages:function(e){return!e.isValid()&&e._hasInvalidComponentMessagesShowing()},wrapDataProviderIfNeeded:function(t,i){var n=t.options,a=n.options;if(v.isDataProvider(a)){var l,r=n.optionsKeys||{},h=v.isTreeDataProvider(a);if(h&&!(a instanceof e.TreeDataProviderView)||!h&&!(a instanceof e.ListDataProviderView)){var c=function(e){for(var t=e.data,i={data:{}},s=Object.keys(t),o=0;o<s.length;o++){var n=s[o],a=t[n];i.data[n]=a}return null!=r.label?i.data.label=String(t[r.label]):null!=t.label&&(i.data.label=String(t.label)),null!=r.value&&(i.data.value=t[r.value]),i.metadata={key:t[r.value||"value"]},i};l=h?new o(a,{dataMapping:{mapFields:c}}):new s(a,{dataMapping:{mapFields:c}})}l&&(n._dataProvider=l,i&&(i._dataProvider=l))}},getLabel:function(e){return null!=e.label?e.label:String(e.value)},_handleDataProviderEvents:function(e,t){if("mutate"===t.type&&null!=t.detail.remove){for(var i=t.detail.remove.data,s=!1,o=[].concat(e.options.value),n=0;n<i.length;n++){var a=o.indexOf(i[n].value);a>=0&&(o.splice(a,1),s=!0)}s&&e._setOption("value",o)}e._setOption("options",e.options.options)},addDataProviderEventListeners:function(e){var t=v.getDataProvider(e.options);if(t){v.removeDataProviderEventListeners(e);var i=v._handleDataProviderEvents.bind(null,e);e._saveDataProviderEH=i,t.addEventListener("mutate",i),t.addEventListener("refresh",i)}},removeDataProviderEventListeners:function(e){var t=v.getDataProvider(e.options),i=e._saveDataProviderEH;null!=t&&i&&(t.removeEventListener("mutate",i),t.removeEventListener("refresh",i),e._saveDataProviderEH=void 0)},addLoadingIndicator:function(e){var i=e;if(void 0===i._loadingIndicatorCount?i._loadingIndicatorCount=1:i._loadingIndicatorCount+=1,null==i._saveLoadingIndicator){var s=t(document.createElement("div"));s.uniqueId().attr("role","presentation").addClass("oj-listbox-loading-icon-container");var o=t(document.createElement("div"));o.addClass("oj-icon oj-listbox-loading-icon"),s.append(o),i.prepend(s),i._saveLoadingIndicator=s}},removeLoadingIndicator:function(e){var t=e;void 0!==t._loadingIndicatorCount&&(1===t._loadingIndicatorCount?(t._loadingIndicatorCount=void 0,null!=t._saveLoadingIndicator&&(t._saveLoadingIndicator.remove(),t._saveLoadingIndicator=void 0)):t._loadingIndicatorCount-=1)},addDropdownMessage:function(e,i,s){if(!e._saveDropdownMessage){var o=t(document.createElement("div"));o.addClass("oj-listbox-filter-message-box");var n=t(document.createElement("div"));n.addClass("oj-listbox-filter-message-text oj-listbox-liveregion"),n.attr({role:"region","aria-live":"polite"});var a=t(document.createElement("div"));a.addClass("oj-listbox-filter-message-separator"),o.append(n),o.append(a),e.prepend(o),n.text(s),e._saveDropdownMessage=o}},removeDropdownMessage:function(e){e._saveDropdownMessage&&(e._saveDropdownMessage.remove(),e._saveDropdownMessage=void 0)},createItemResult:function(e,t){return{label:e.label,value:e.value,disabled:e.disabled,children:e.children,data:e,metadata:t}},fetchFlatData:function(e,t,i,s,o,n){var a=[],l=t.fetchFirst(i)[Symbol.asyncIterator](),r=n>0;return l.next().then(function t(h){if(h){var c=h.value.data,u=h.value.metadata;if(c)for(var d,p,f=0;f<c.length&&(!r||a.length<n);f++)d=c[f],p=u[f],!i.filterCriterion&&s&&s.matcher&&!s.matcher(s.term,v.getLabel(d),d)||a.push(v.createItemResult(d,p));if(o&&v.removeDropdownMessage(o),o&&!h.done&&r&&a.length>=n)v.addDropdownMessage(o,e,e.getTranslatedString("filterFurther")),e._hasMore=!0;else{if(!h.done&&(!r||a.length<n))return l.next().then(t);e._hasMore=!1}}return Promise.resolve(a)})},fetchTreeData:function(e,t,i,s,o,n){var a=n>0,l=i.size;return e._hasMore=!1,o&&v.removeDropdownMessage(o),function t(o){i.size=l;var n=[],r=o.fetchFirst(i)[Symbol.asyncIterator]();return r.next().then(function h(c){var u=c.value.data,d=c.value.metadata,p=function i(s){if(s<u.length){if(l>0||!a){var r=u[s],h=d[s],c=o.getChildDataProvider(r.value);return c?t(c).then(function(e){return f(r,h,e),i(s+1)}):(f(r,h,[]),i(s+1))}e._hasMore=!0}return Promise.resolve(n)}(0);return p.then(function(){if(a){if(c.done||l<=0)return c.done||(e._hasMore=!0),Promise.resolve(n)}else if(c.done)return Promise.resolve(n);return r.next().then(h)});function f(e,t,r){var h=!s||!s.matcher||i.filterCriterion||s.matcher(s.term,v.getLabel(e),e),c=null==o.getChildDataProvider(e.value);if(c||(h=!1),h&&0===r.length&&a&&(l-=1),h||r.length>0){var u=v.createItemResult(e,t);e.disabled&&(u.disabled=!0),c&&!u.disabled||(u._jetUnSelectable=!0),r.length>0&&(u.children=r),n.push(u)}}})}(t).then(function(t){return e._hasMore&&o&&v.addDropdownMessage(o,e,e.getTranslatedString("filterFurther")),t})},fetchFilteredData:function(t,i,s,o,n){var a=v.getDataProvider(t.options),l={size:i},r=a.getCapability("filter"),h=e.AttributeFilterOperator.AttributeOperator.$co,c=e.AttributeFilterOperator.AttributeOperator.$regex,u=!1,d=!1;if(r){var p=r.operators;p&&p.length>0&&(p.indexOf(h)>=0||p.indexOf(c)>=0)&&(u=!0,p.indexOf(c)>=0&&(d=!0))}var f=v.isTreeDataProvider(a);if(o&&o.term)if(u){var m,_=t.options.optionsKeys;if(m=_&&_.label?_.label:"label",d){var b=v.escapeRegExp(o.term);l.filterCriterion={op:c,attribute:m,value:new RegExp(b,"i")}}else l.filterCriterion={op:h,attribute:m,value:o.term}}else if(!f)if(s>0){var g=s*v.FILTERING_FETCH_SIZE_MRC_TIMES;g>v.FILTERING_FETCH_SIZE_MAX?g=v.FILTERING_FETCH_SIZE_MAX:g<v.FILTERING_FETCH_SIZE_MIN&&(g=v.FILTERING_FETCH_SIZE_MAX),l.size=g}else l.size=s;return f?v.fetchTreeData(t,a,l,o,n,s):v.fetchFlatData(t,a,l,o,n,s)},rejectedError:{},fetchFromDataProvider:function(e,t,i,s){var o=e.ojContext;o._fetchResolveFunc||(o._fetchResolveFunc=v._addBusyState(e.container,"fetching data")),o._saveRejectFunc&&o._saveRejectFunc(v.rejectedError);var n=new Promise(function(e,t){o._saveRejectFunc=t});e.selection&&"init"===t.fetchType&&!o._spinnerContainer&&(o._spinnerContainer=e.selection,v.addLoadingIndicator(o._spinnerContainer),t.fetchType=null);var a=v._getMaxItems(t),l=s||t.fetchSize||a,r=v.fetchFilteredData(o,l,a,i,e.dropdown).then(function(e){return o._resultCount=e?e.length:0,e});Promise.race([n,r]).then(function(t){o._saveRejectFunc=null,o._spinnerContainer&&(v.removeLoadingIndicator(o._spinnerContainer),o._spinnerContainer=void 0),o._resolveSearchBoxLater&&e._showSearchBox(""),i.callback({results:t}),o._fetchResolveFunc&&(o._fetchResolveFunc(),o._fetchResolveFunc=null)},function(e){e!==v.rejectedError&&o._fetchResolveFunc&&(i.callback(),o._fetchResolveFunc(),o._fetchResolveFunc=null)})},fetchFirstBlockFromDataProvider:function(e,t,i){var s=v.getDataProvider(t),o=v._addBusyState(e,"fetching selected data"),n=v._getMaxItems(t),a={size:i||n};return v.isTreeDataProvider(s)?v.fetchTreeData({},s,a,null,null,n).then(function(e){if(1===i&&e&&e.length>0){for(var t=e[0];t.children;)t=t.children[0];e=[t]}return v._clearBusyState(o),e},function(){return v._clearBusyState(o),null}):s.fetchFirst(a)[Symbol.asyncIterator]().next().then(function(e){return v._clearBusyState(o),e.value.data},function(){return v._clearBusyState(o),null})},duringFetchByKey:function(e){return e._fetchByKeys},fetchByKeyFromDataProvider:function(t,i,s){var o,n=v.getDataProvider(i),a=t&&t.selection?t.container:t,l=v._addBusyState(a,"fetching selected data");t&&t.selection&&("init"!==t.opts.fetchType||a._spinnerContainer||(a._spinnerContainer=t.selection,v.addLoadingIndicator(a._spinnerContainer))),a._fetchByKeys&&a._fetchByKeys.promise&&e.Object.compareValues(s.value,a._fetchByKeys.key)?o=a._fetchByKeys.promise:(o=n.fetchByKeys({keys:s.value}),a._fetchByKeys={key:s.value,promise:o}),o.then(function(e){a._fetchByKeys=void 0,a._spinnerContainer&&(v.removeLoadingIndicator(a._spinnerContainer),a._spinnerContainer=void 0);var t=[];e.results.forEach(function(e){t.push(v.createItemResult(e.data,e.metadata))}),s.callback({results:t}),v._clearBusyState(l)},function(){a._fetchByKeys=void 0,s.callback(),v._clearBusyState(l)})},validateFromDataProvider:function(e,t,i){return new Promise(function(s,o){v.fetchByKeyFromDataProvider(e,t,{value:Array.isArray(i)?i:[i],callback:function(e){var t=null;if(e&&e.results.length){(t={}).value=[],t.valueOptions=[];for(var i=0;i<e.results.length;i++)t.valueOptions.push(e.results[i]),t.value.push(e.results[i].value)}s(t)}})})},isReadonly:function(e){return e._IsCustomElement()&&(e.options.readOnly||"loading"===e.options.loading)},_getMaxItems:function(e){var t;return void 0!==e.maximumResultCount&&null!==e.maximumResultCount?(t=e.maximumResultCount)<1&&(t=v.DEFAULT_FETCH_ALL_SIZE):t=v.DEFAULT_FETCH_SIZE,t},remote:function(e,i){return function(s){var o={component:this.ojContext};s.value?o.value=s.value:o.term=s.term||"",e(o).then(function(e){var o={results:[]};e&&v.each2(t(e),function(e,t){v._processData(s,t,o.results,i,!1)}),s.callback(o)})}},_processData:function(e,i,s,o,n,a){var l,r=i[0];if(!r.label&&o&&o.label&&(r.label=r[o.label]),!r.value&&o&&o.value&&(r.value=r[o.value]),!r.children&&o&&o.children&&(r.children=r[o.children],delete r[o.children]),r.children){l={};for(var h=Object.keys(r),c=0;c<h.length;c++){var u=h[c];l[u]=r[u]}l.children=[],v.each2(t(r.children),function(t,i){v._processData(e,i,l.children,o&&o.childKeys?o.childKeys:null,n,a)}),(!n||e.matcher(e.term,a(l),r)||l.children.length)&&s.push(l)}else n&&!e.matcher(e.term,a(r),r)||s.push(r)},checkFormatter:function(e,i,s){if(t.isFunction(i))return!0;if(!i)return!1;throw new Error(s+" must be a function or a false value")},clazz:function(i,s){var o=function(){};return e.Object.createSubclass(o,i,""),o.prototype=t.extend(o.prototype,s),o},LAST_QUERY_RESULT:"last-query-result",getLastQueryResult:function(e){return t.data(e.container,e._classNm+"-"+v.LAST_QUERY_RESULT)},saveLastQueryResult:function(e,i){t.data(e.container,e._classNm+"-"+v.LAST_QUERY_RESULT,i)},getSelectedOptionData:function(i,s){if(i.ojContext.multiple&&i.selection)for(var o,n,a=i.selection.find("."+i._classNm+"-selected-choice"),l=0;l<a.length;l++)if(o=a.get(l),n=t(o).data(i._elemNm),e.Object.compareValues(s,n.value))return n},getContextWithExtraData:function(e,i,s,o){return!(!!i&&v.isDataProvider(i.options))||null==s||Array.isArray(s)&&0===s.length?e:t.extend(e||{},{extraData:{data:s,metadata:o}})},getOpts:function(e){var t;return e&&(e.combobox&&e.combobox.opts?t=e.combobox.opts:e.select&&e.select.opts&&(t=e.select.opts)),t}},m={closeOnSelect:!0,openOnEnter:!0,formatNoMatches:function(e){return e.getTranslatedString("noMatchesFound")},formatMoreMatches:function(e,t){return 1===t?e.getTranslatedString("oneMatchesFound"):e.getTranslatedString("moreMatchesFound",{num:""+t})},id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:","},_=v.clazz(Object,{_bind:function(e){var t=this;return function(){return e.apply(t,arguments)}},_customOptionRenderer:function(e){var i,s=this;e.each(function(){(i=t(this)).is("oj-option")?i.wrap("<li></li>"):i.is("oj-optgroup")&&(i.wrap("<li></li>"),s._customOptionRenderer(i.children()),i.children().wrapAll("<ul class='oj-listbox-result-sub' role='group'></ul>"))})},_init:function(e){var i,s,o=this._classNm,n=this._elemNm;this.ojContext=e.ojContext;var a=this._prepareOpts(e);this.opts=a,this.id=a.id,this.headerInitialized=!1,this.isOjOption=this.ojContext._IsCustomElement()&&!a.options&&a.element.find("oj-option").length>0,void 0!==a.element.data(n)&&null!==a.element.data(n)&&a.element.data(n)._destroy(),this._prepareContainer(),this.body=v.thunk(function(){return a.element.closest("body")}),this.dropdown=this.container.find(".oj-listbox-drop"),this.dropdown.data("ojlistbox",this),this._setPickerAttributes(a.pickerAttributes);var l=this.containerId;this.dropdown.attr("data-oj-containerid",l),i=this.container.find(".oj-listbox-results"),this.results=i,this.results.on("click",v.killEvent);var r=this._getTransferredAttribute("aria-label");if(null!=r&&this.results.attr("aria-label",r),a.list&&t("#"+a.list).is("ul")){var h=t("#"+a.list);this.dropdownListParent=h.parent(),h.addClass("oj-listbox-results").attr("role","listbox"),this.results.replaceWith(h),i=this.container.find(".oj-listbox-results"),this.results=i,this.results.css("display","")}if(this.isOjOption){var c=a.element.children();this._customOptionRenderer(c),this.results.append(a.element.children()),this.datalist=this.results}s="oj-select"===o?this.container.find("input.oj-listbox-input"):this.container.find("input."+o+"-input"),this.search=s,this.queryCount=0,this.resultsPage=0,this.context=null,this._ariaDescribedByAdded=[],this._initContainer(),this.container.on("click",v.killEvent),v.installFilteredMouseMove(this.results),this.elementTabIndex&&("oj-select"===o?this.selection.attr("tabindex",this.elementTabIndex):this.search.attr("tabindex",this.elementTabIndex)),this._boundHighlightUnderEvent=this._bind(this._highlightUnderEvent),this.ojContext._IsCustomElement()?(this._delegatedDropdownTouchStartListener=function(e){const i=e.currentTarget,s=e.target.closest(".oj-listbox-results");s&&i.contains(s)&&this._boundHighlightUnderEvent(t.Event(e,{currentTarget:s}))}.bind(this),this.dropdown.on("mousemove-filtered touchmove touchend",".oj-listbox-results",this._boundHighlightUnderEvent),this.dropdown[0].addEventListener("touchstart",this._delegatedDropdownTouchStartListener,{passive:!0})):this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".oj-listbox-results",this._boundHighlightUnderEvent),t(this.container).on("change","."+o+"-input",function(e){e.stopPropagation()}),t(this.dropdown).on("change","."+o+"-input",function(e){e.stopPropagation()});var u=this;if(v.installKeyUpChangeEvent(s),s.on("keyup-change input paste",this._bind(this._updateResults)),s.on("focus",function(){s.addClass(o+"-focused"),"oj-select"!==o&&u.container.addClass("oj-focus"),u.isSearchFocused=!0}),s.on("blur",function(){s.removeClass(o+"-focused"),"oj-select"!==o&&u.container.removeClass("oj-focus"),u.isSearchFocused=!1}),this.dropdown.on("mouseup",".oj-listbox-results",this._bind(function(e){t(e.target).closest(".oj-listbox-result-selectable").length>0&&(this._highlightUnderEvent(e),this._selectHighlighted(null,e))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),t.isFunction(this.opts.initSelection)){this.opts.fetchType="init";var d=this.getValOpts();(!this.ojContext.multiple||d&&0!==d.length)&&(this.ojContext.multiple||d)||(d=null),this._initSelection(d)}var p=a.element.prop("readonly");void 0===p&&(p=!1),this._readonly(p);var f=a.element.prop("disabled");if(void 0===f&&(f=!1),this._enable(!f),p){let e=this.container.find(".oj-combobox-input");this.ojContext._createOrUpdateReadonlyDiv(e[0])}v.scrollBarDimensions=v.scrollBarDimensions||v.measureScrollbar(),this.autofocus=a.element.prop("autofocus"),a.element.prop("autofocus",!1),this.autofocus&&this._focus(),v.addDataProviderEventListeners(a.ojContext),this.applyReadonlyState()},_CreateContentElements:function(){return null},_ConfigureSlots:function(){},_RestoreSlots:function(){},_createContainerForWidget:function(){var e=t(document.createElement("div")),i=this._CreateContentElements();return e.attr("class",this._COMPONENT_CLASSLIST),e.append(i),e},_prepareContainer:function(){var e,t,i,s,o;(e=this.ojContext._IsCustomElement()?this._prepareContainerForCustomElement():this._prepareContainerForWidget()).find(".oj-listbox-drop").css("display","none"),i="#"+(t=this._getOrCreateContainerId(e)).replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),o=this.opts.element.attr("tabindex"),s=this._elemNm,this.opts.element.data(s,this).attr("tabindex","-1"),e.data(s,this),this.container=e,this.containerId=t,this.containerSelector=i,this.elementTabIndex=o,this._ConfigureSlots()},_prepareContainerForCustomElement:function(){var e,i=this.ojContext.OuterWrapper,s=this._CreateContentElements(),o=this._COMPONENT_CLASSLIST;return(e=t(i)).addClass(o),e.prepend(s),e},_prepareContainerForWidget:function(){var e,t=this.opts.element,i=this._createContainerForWidget();return t.before(i),i.append(t),(e=this._getAttribute("style"))&&i.attr("style",e),i},_getOrCreateContainerId:function(e){var t;if(this.ojContext._IsCustomElement())(t=this._getAttribute("id"))||(t=this._classNm+"-"+v.nextUid(),e.attr("id",t));else{var i=this.opts.rootAttributes;t=i&&i.id?i.id:"ojChoiceId_"+(this._getAttribute("id")||this._classNm+v.nextUid()),e.attr("id",t)}return t},applyReadonlyState:function(){var t=this.ojContext._GetContentElement();if(v.isReadonly(this.ojContext)){if(this.container.addClass("oj-read-only"),"oj-combobox"===this._classNm)if(this.ojContext.multiple){if(t=null,this.search.removeAttr("tabindex"),this.selection.attr("tabindex",this.elementTabIndex||"0"),this.ojContext.options.labelledBy){var i=this.uuid+"_Label",s=e.EditableValueUtils._getOjLabelAriaLabelledBy(this.ojContext.options.labelledBy,i);s&&this.selection.attr("aria-labelledby",s)}}else t.attr("readonly",!0),this.ojContext._createOrUpdateReadonlyDiv(t[0]);else"oj-select"===this._classNm&&t.attr("aria-readonly","true");t&&(t.removeAttr("role"),t.removeAttr("aria-expanded"))}else this.container.removeClass("oj-read-only"),"oj-combobox"===this._classNm?this.ojContext.multiple?(t=null,null!=this.elementTabIndex&&this.search.attr("tabindex",this.elementTabIndex),this.selection.removeAttr("tabindex"),this.selection.removeAttr("aria-labelledby")):t.removeAttr("readonly",!0):"oj-select"===this._classNm&&t.removeAttr("aria-readonly"),t&&(t.attr("role","combobox"),t.attr("aria-expanded","false"));this._enableInterface()},updateAriaLabelIfNeeded:function(){if(this.ojContext._IsCustomElement()){var e=this._contentElement.attr("aria-label");e?this.results.attr("aria-label",e):this.results.removeAttr("aria-label")}},_clickAwayHandler:function(e){var i=this.dropdown;t(e.target).closest(i).length||t(e.target).closest("#"+t.escapeSelector(i.attr("data-oj-containerid"))).length||i.length>0&&i.data("ojlistbox").close(e)},_surrogateRemoveHandler:function(){this.dropdown&&this.dropdown.remove()},_destroy:function(){var e=this._closeDelayTimer;isNaN(e)||(delete this._closeDelayTimer,window.clearTimeout(e));var t=this.opts.element,i=t.data(this._elemNm);this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.opts.list&&this.results?(this._cleanupList(this.results),this.dropdownListParent&&this.dropdownListParent.append(this.results)):this.isOjOption&&this.results&&(this._unwrapOjOptions(this.results),this.opts.element.append(this.results.children())),void 0!==i&&(this.ojContext._IsCustomElement()?this._cleanUpContainerForCustomElement():this._cleanUpContainerForWidget(),t.removeAttr("aria-hidden").removeData(this._elemNm).off("."+this._classNm).prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())},_cleanUpContainerForWidget:function(){var e=this.opts.element,t=e.data(this._elemNm);t.container.after(e),t.container.remove(),t.dropdown.remove()},_cleanUpContainerForCustomElement:function(){var e=this.opts.element,t=e.data(this._elemNm);t.dropdown[0].removeEventListener("touchstart",this._delegatedDropdownTouchStartListener,{passive:!0}),delete this._delegatedDropdownTouchStartListener,t.container.empty(),t.container.off("click"),t.container.append(e),this._RestoreSlots()},_unwrapOjOptions:function(e){var i,s=e.children(),o=this;s.each(function(){(i=t(this)).is("li")&&(i.hasClass("oj-listbox-result-with-children")||i.children("oj-optgroup").length>0?(i.hasClass("oj-listbox-result-with-children")&&i.children(".oj-listbox-result-label").remove(),o._unwrapOjOptions(i.find("oj-optgroup").children()),i.find("oj-optgroup").children().children().unwrap(),i.find("oj-optgroup").unwrap()):i.hasClass("oj-listbox-result")?i.find("oj-option").unwrap().unwrap():i.find("oj-option").unwrap())})},_cleanupList:function(e){if(e&&e.is("ul")){e.removeClass("oj-listbox-results oj-listbox-result-sub"),e.removeAttr("role");for(var i=e.children().length-1;i>=0;i--)this._cleanupList(t(e.children()[i]))}else if(e.is("li")){(e.hasClass("oj-listbox-placeholder")||e.hasClass("oj-listbox-no-results"))&&e.remove(),e.attr("class")&&e.attr("class",e.attr("class").replace(/oj-listbox-\S+/g,""));var s=e.children(".oj-listbox-result-label");s&&s.contents().unwrap(),"none"===e.css("display")&&e.css("display",""),this._cleanupList(e.children("ul"))}},_optionToData:function(e){if(e.is("option")||e.is("oj-option"))return{value:e.prop("value")||e.attr("value"),label:e.text().trim()||e.attr("label"),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:"locked"===e.attr("locked")||!0===e.data("locked")};if(e.is("optgroup")||e.is("oj-optgroup"))return{label:e.prop("label")||e.attr("label"),disabled:e.prop("disabled"),children:[],element:e.get(),css:e.attr("class")};if(e.is("li")){var t,i,s,o=null,n=e.children();if(n&&n.length>0&&n.is("ul"))t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.clone().children().remove().end().text().trim(),i=e.attr("oj-data-value"),o=[];else if(n&&n.length>0&&n.is("oj-optgroup"))t=n.prop("label"),s=n.prop("disabled"),o=[];else{var a=e.find("oj-option");t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.text().trim(),i=a.length>0?a.prop("value"):e.attr("oj-data-value"),s=a.length>0?a.prop("disabled"):void 0}return{value:i,label:t,disabled:s,element:e.get(),css:e.attr("class"),children:o}}},_prepareOpts:function(e){var i,s,o=e,n=this;o.options&&Array.isArray(o.options)&&o.optionsKeys&&(o.options=t.extend(!0,[],o.options));var a=(i=o.element).get(0).tagName.toLowerCase();if(o.ojContext._IsCustomElement()?!o.options&&o.element.children().length>0&&(s=t(i),this.datalist=s):"input"===a&&i.attr("list")?(s=t("#"+i.attr("list")),this.datalist=s):"select"===a&&i.children().length>0?(s=i,this.datalist=s):o.list&&(s=t("#"+o.list),this.datalist=s),(o=t.extend({},{populateResults:function(e,i,s,l){var r,h=this.opts.id,c=v.isTreeDataProvider(v.getDataProvider(this.opts)),u=this.opts.optionRenderer;if("function"!=typeof u&&(u=null),this.opts.ojContext._IsCustomElement()&&u){var d=u;u=function(e){var t=d(e);return!t||"OJ-OPTION"!==t.tagName&&"OJ-OPTGROUP"!==t.tagName?t&&t.insert?t.insert:null:(t.hasAttribute("data-oj-binding-provider")||t.setAttribute("data-oj-binding-provider","none"),t)}}(r=function(e,i,l,d,p){var f,m,_,b,g,y,j,x,C=function(e,i){if(i.children&&i.children.length>0){var s=i.element&&t(i.element[0]).is("li")&&t(i.element[0]).children("ul"),o=s?t(i.element[0]).children("ul"):t("<ul></ul>");o.hasClass("oj-listbox-result-sub")||o.addClass("oj-listbox-result-sub"),o.attr("role","group"),r(i,i.children,o,d+1,!1),s||e.append(o)}},O=function(e,i){e.length&&i&&i.length&&e.each(function(){!function e(i,s){var o=t(i).is("OJ-HIGHLIGHT-TEXT"),n=3===i.nodeType;if(o)i.setAttribute("match-text",s);else if(n){var a=i.data;if(""!==a.trim()){var l=document.createElement("oj-highlight-text");l.setAttribute("text",a),l.setAttribute("match-text",s),l.setAttribute("data-oj-internal",""),l.setAttribute("data-oj-binding-provider","none"),i.parentNode.replaceChild(l,i)}}else if(1===i.nodeType&&i.childNodes&&!/(script|style)/i.test(i.tagName))for(var r=0;r<i.childNodes.length;r++)e(i.childNodes[r],s)}(this,i.toUpperCase())})},S=function(e){if(o.highlightTermInOptions(s)){var t=e.find(".oj-listbox-highlighter-section");t.length||(t=e),O(t,s.term)}},E=function(t,i){var s;if(u){var n=v.isDataProvider(o.options)?i.data:i,a={index:f,depth:d,leaf:!i.children,parent:e,data:n,component:o.ojContext,parentElement:t.get(0)};o.ojContext._FixRendererContext&&(a=o.ojContext._FixRendererContext(a));var l=u.call(o.ojContext,a);null!==l&&(null===l.parentNode||l.parentNode instanceof DocumentFragment)&&(t.get(0).appendChild(l),s=l)}else void 0!==(x=o.formatResult(i))&&(t.text(x),t.attr("aria-label",x));return S(t),s},V=n._getPlaceholder();for(p&&null!==V&&!s.term&&l.find(".oj-listbox-placeholder").length<=0&&("select"!==a||!n.ojContext._IsRequired())&&(_={value:"",label:V},(y=t("<li></li>")).addClass("oj-listbox-placeholder oj-listbox-results-depth-0 oj-listbox-result oj-listbox-result-selectable"),y.attr("role","presentation"),(j=t(document.createElement("div"))).addClass("oj-listbox-result-label"),j.attr("id","oj-listbox-result-label-"+v.nextUid()),j.attr("role","option"),void 0!==(x=o.formatResult(_))&&j.text(x),j.attr("aria-label",x),y.append(j),y.data(n._elemNm,_),l.prepend(y)),f=0,m=i.length;f<m;f++){g=!0===(_=i[f]).disabled,b=c?!_._jetUnSelectable:!g&&null!=h(_)&&null==_.children;var I=_.element&&t(_.element[0]).is("li");if((y=t(I?_.element[0]:"<li></li>")).hasClass("oj-listbox-result"))_.children&&_.children.length>0&&C(y,_),S(t(_.element[0]).children("div")),t(_.element[0]).css("display","");else{y.addClass("oj-listbox-results-depth-"+d),y.addClass("oj-listbox-result"),y.addClass(b?"oj-listbox-result-selectable":"oj-listbox-result-unselectable"),g&&y.addClass("oj-disabled"),_.children&&y.addClass("oj-listbox-result-with-children"),y.attr("role","presentation");var A="oj-listbox-result-label-"+v.nextUid();if((j=t(document.createElement("div"))).addClass("oj-listbox-result-label"),j.attr("id",A),j.attr("role","option"),g&&j.attr("aria-disabled","true"),e&&e.ariaLabelledById?_.ariaLabelledById=e.ariaLabelledById+" "+A:_.ariaLabelledById=A,!I){var P=E(j,_);if(y.append(j),P&&("OJ-OPTION"===P.tagName||"OJ-OPTGROUP"===P.tagName)&&(P.getAttribute("disabled")&&(y.removeClass("oj-listbox-result-selectable"),y.addClass("oj-listbox-result-unselectable oj-disabled"),j.attr("aria-disabled","true")),"OJ-OPTGROUP"===P.tagName&&P.hasAttribute("label"))){var w=P.getAttribute("label"),N=document.createTextNode(w);P.insertBefore(N,P.firstChild)}}if(_.children&&_.children.length>0&&C(y,_),y.data(n._elemNm,_),I){var T=t(_.element[0]);if(T.children("oj-optgroup").length>0){var D=T.children("oj-optgroup").prop("label")+"";T.prepend(j.text(D))}else T.children("oj-option").length>0?T.contents().wrapAll(j):T.contents().filter(function(){return"UL"!==this.tagName}).wrapAll(j);S(T.children("div")),T.css("display","")}else l.append(y)}}})(null,i,e,0,l)},highlightTermInOptions:function(e){return!(!0===e.initial)}},m,o)).id=function(e){return e.value},o.formatResult=function(e){var t=v.getLabel(e);return isNaN(t)?t:this.ojContext._formatValue(t)},o.formatSelection=function(e){var t=v.getLabel(e);if(null!=e&&null!=t)return isNaN(t)?t:this.ojContext._formatValue(t)},"select"!==a&&null!==o.manageNewEntry&&(o.manageNewEntry=function(e){var i={};return i.label=t.trim(e),i.value=i.label,i}),this.datalist)o.query=this._bind(function(e){var t,i,s={results:[],more:!1},o=e.term;i=function(t,s){var a,l,r=t.children()&&t.children().length>0&&(t.children().is("ul")||t.children().is("oj-optgroup"));t.is("option")||t.is("oj-option")||t.is("li")&&!r?e.matcher(o,t.text()||t.attr("label"),t)&&s.push(n._optionToData(t)):(t.is("optgroup")||t.is("oj-optgroup")||t.is("li")&&r)&&(a=n._optionToData(t),t.is("optgroup")||t.is("oj-optgroup")?l=t.children():t.children("oj-optgroup")?l=t.children().children("ul").children():t.children("ul").children(),v.each2(l,function(e,t){i(t,a.children)}),a.children.length>0&&s.push(a))},t=this.datalist.children(),void 0!==this._getPlaceholder()&&t.length>0&&""===t.first().attr("value")&&(t=t.slice(1)),v.each2(t,function(e,t){i(t,s.results)}),e.callback(s)});else if("options"in o){var l=o.options;v.getDataProvider(o)?o.query=function(e){e.value?v.fetchByKeyFromDataProvider(n,o,e):v.fetchFromDataProvider(n,o,e)}:t.isFunction(l)?o.query=v.remote(l,o.optionsKeys?o.optionsKeys:null):o.query=v.local(l,o.optionsKeys?o.optionsKeys:null)}return o},_createHeader:function(){var e=this.opts.element.find(".oj-listbox-header");if(e.length){this.header=t("<li>",{class:"oj-listbox-result-header oj-listbox-result-unselectable",role:"presentation"}),this.header.append(e.children()),this._initializeHeaderItems();var i=t("<ul>",{class:"oj-listbox-results-with-header",role:"listbox"});i.append(this.header),i.appendTo(this.results.parent());var s=t("<li>",{role:"presentation"});i.append(s),this.results.attr("role","presentation"),this.results.appendTo(s)}this.headerInitialized=!0},_initializeHeaderItems:function(){this.headerItems=this.header.find("li[role='option'], li:not([role])"),this.headerItems.uniqueId(),this.header.find("ul").attr("role","presentation"),this.header.find("li:not([role])").attr("role","option");this.header.find("a, input, select, textarea, button, object, .oj-component-initnode").each(function(){t(this).attr("tabIndex",-1)})},_isHeaderItem:function(e){var i=!1;return this.headerItems.each(function(){return t(this).attr("id")!==e||(i=!0,!1)}),i},_getNextHeaderItem:function(e){if(!this.headerItems)return null;if(!e)return this.headerItems.first();var i=!1,s=null;return this.headerItems.each(function(){return i?(s=t(this),!1):(i=t(this).attr("id")===e,!0)}),s},_getPreviousHeaderItem:function(e){if(!this.headerItems)return null;var i=null;return this.headerItems.each(function(){return t(this).attr("id")!==e&&(i=t(this),!0)}),i},_setFocusOnHeaderItem:function(e){var t=e.find(".oj-component .oj-enabled").first();if(0===t.length){0===(t=e.find("a, input, select, textarea, button, object, .oj-component-initnode").first()).length&&(t=e.children().first())}t&&t.addClass("oj-focus oj-focus-highlight oj-focus-only")},_removeHighlightFromHeaderItems:function(){this.headerItems&&this.headerItems.find(".oj-focus").removeClass("oj-focus oj-focus-highlight oj-focus-only")},_triggerSelect:function(e){var i=t.Event(this._elemNm+"-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},_isInterfaceEnabled:function(){return!0===this.enabledInterface},_enableInterface:function(){var e=this._enabled&&!(v.isReadonly(this.ojContext)||this._readonly);return e!==this.enabledInterface&&(v.isReadonly(this.ojContext)||this.container.toggleClass("oj-disabled",!e),this.close(),this.enabledInterface=e,!0)},_enable:function(e){var t=e;void 0===t&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!(t||v.isReadonly(this.ojContext))),this.container.toggleClass("oj-enabled",t),this._enableInterface())},_disable:function(){this._enable(!1)},_readonly:function(e){var t=e;return void 0===t&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this._enableInterface(),!0)},_opened:function(){return this.container.hasClass("oj-listbox-dropdown-open")},_getDropdownPositionElement:function(){return this.container[0].querySelector(".oj-text-field-container")},_usingHandler:function(i,s){if(e.PositionUtils.isAligningPositionClipped(s)){var o=v._addBusyState(this.container,"closing popup");this._closeDelayTimer=window.setTimeout(function(){t.proxy(this.close,this),o()},1)}else{var n=this.container,a=s.element.element;a.css(i),"bottom"===s.vertical?(n.addClass("oj-listbox-drop-above"),a.addClass("oj-listbox-drop-above")):(n.removeClass("oj-listbox-drop-above"),a.removeClass("oj-listbox-drop-above"))}},_getDropdownPosition:function(){var i={my:"start top",at:"start bottom",of:this._getDropdownPositionElement(),collision:"flip",using:t.proxy(this._usingHandler,this)},s="rtl"===e.DomUtils.getReadingDirection();return e.PositionUtils.normalizeHorizontalAlignment(i,s)},_positionDropdown:function(){var e=this.dropdown,t=this._getDropdownPosition(),i=this.container;e.css("width",i.outerWidth()),e.position(t)},_shouldOpen:function(e){if(this._opened())return!1;if(!1===this._enabled||v.isReadonly(this.ojContext)||!0===this._readonly)return!1;var t={component:this.opts.element};return this.ojContext._trigger("beforeExpand",e,t)},_clearDropdownAlignmentPreference:function(){this.container.removeClass("oj-listbox-drop-above"),this.dropdown.removeClass("oj-listbox-drop-above")},open:function(e,t){return!!this._shouldOpen(e)&&(this._opening(e,t),!0)},_opening:function(){this.headerInitialized||this._createHeader(),this.container.addClass("oj-listbox-dropdown-open")},_showDropDown:function(){if(this._opened()&&"true"!==this._getActiveContainer().attr("aria-expanded")){this._clearDropdownAlignmentPreference();var i=this.dropdown.parent();if("oj-select"===this._classNm&&!0!==this.opts.multiple&&i&&i.hasClass("oj-listbox-drop-layer"))e.PopupService.getInstance().triggerOnDescendents(i,e.PopupService.EVENT.POPUP_REFRESH);else{this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.appendTo(this.body()),this.header&&(this.dropdown.find(".oj-listbox-results-with-header").prepend(this.header),this.header.show());var s={};s[e.PopupService.EVENT.POPUP_CLOSE]=t.proxy(this.close,this),s[e.PopupService.EVENT.POPUP_REMOVE]=t.proxy(this._surrogateRemoveHandler,this),s[e.PopupService.EVENT.POPUP_AUTODISMISS]=t.proxy(this._clickAwayHandler,this),s[e.PopupService.EVENT.POPUP_REFRESH]=t.proxy(this._positionDropdown,this);var o={};o[e.PopupService.OPTION.POPUP]=this.dropdown,o[e.PopupService.OPTION.LAUNCHER]=this.opts.element,o[e.PopupService.OPTION.EVENTS]=s,o[e.PopupService.OPTION.POSITION]=this._getDropdownPosition(),o[e.PopupService.OPTION.LAYER_SELECTORS]="oj-listbox-drop-layer",o[e.PopupService.OPTION.CUSTOM_ELEMENT]=this.ojContext._IsCustomElement(),e.PopupService.getInstance().open(o),t("#oj-listbox-drop").removeAttr("id"),this.dropdown.attr("id","oj-listbox-drop");var n=this.containerId;this.dropdown.attr("data-oj-containerid",n)}this._positionDropdown(),this._getActiveContainer().attr("aria-expanded",!0)}},close:function(i,s){if(this.shouldReopenOnNewData=!0===s,this._opened()){this.container.removeClass("oj-listbox-dropdown-open");var o=this._getActiveContainer().attr("aria-expanded");if(delete this.ojContext._resolveSearchBoxLater,o&&"false"!==o){var n=this.containerId,a="scroll."+n,l="resize."+n,r="orientationchange."+n;this.container.parents().add(window).each(function(){t(this).off(a).off(l).off(r)}),this._clearDropdownAlignmentPreference();var h={};h[e.PopupService.OPTION.POPUP]=this.dropdown,e.PopupService.getInstance().close(h),this.header&&(this.header.hide(),this.header.appendTo(this.container)),this.dropdown.removeAttr("data-oj-containerid"),this.dropdown.removeAttr("id"),this.opts.list||this.isOjOption?this._removeHighlight():(this.dropdown.detach(),this.results.empty()),this.dropdown.appendTo(this.container),this._getActiveContainer().attr("aria-expanded",!1),"ojcombobox"===this._elemNm&&this._getActiveContainer().removeAttr("aria-activedescendant"),t.removeData(this.container,this._classNm+"-last-term")}}},_setPickerAttributes:function(t){e.EditableValueUtils.setPickerAttributes(this.dropdown,t)},_clearSearch:function(){},_ensureHighlightVisible:function(){var e,i,s,o,n,a,l=this.results,r=this._highlight();r<0||(e=this._findHighlightableChoices(),s=(i=t(e[r])).offset().top+i.outerHeight(!0),r===e.length-1&&(a=l.find("li.oj-listbox-more-results")).length>0&&(s=a.offset().top+a.outerHeight(!0)),s>(o=l.offset().top+l.outerHeight(!0))&&l.scrollTop(l.scrollTop()+(s-o)),(n=i.offset().top-l.offset().top)<0&&"none"!==i.css("display")&&l.scrollTop(l.scrollTop()+n))},_findHighlightableChoices:function(){return this.results.find(".oj-listbox-result-selectable:not(.oj-disabled, .oj-selected)").filter(function(){return"none"!==t(this).css("display")})},_moveHighlight:function(e){var i=this._findHighlightableChoices(),s=this._highlight();if(this.header&&(s<=0||s===i.length-1)){var o=this._getActiveContainer().attr("aria-activedescendant"),n=this._isHeaderItem(o);n||(o=null);var a=null;if(e>0&&(s<0||s===i.length-1)?a=this._getNextHeaderItem(o):e<0&&(n&&s<0||0===s)&&(a=this._getPreviousHeaderItem(o)),a)return this._removeHighlight(),this._setFocusOnHeaderItem(a),void this._getActiveContainer().attr("aria-activedescendant",a.attr("id"));n&&e<0&&(s=0)}for(;s>=-1&&s<i.length;){(s+=e)===i.length?s=0:-1===s&&(s=i.length-1);var l=t(i[s]);if(l.hasClass("oj-listbox-result-selectable")&&!l.hasClass("oj-disabled")&&!l.hasClass("oj-selected")){this._highlight(s);break}}},_highlight:function(e){var i,s=e,o=this._findHighlightableChoices();if(0===arguments.length){var n=o.filter(".oj-hover");return n.length||(n=o.children(".oj-hover").closest(".oj-listbox-result")),this._updateMatchesCount(n.text()),o.get().indexOf(n[0])}if(s>=o.length&&(s=o.length-1),s<0&&(s=0),this._removeHighlight(),(i=t(o[s])).hasClass("oj-listbox-result-with-children")){var a=i.children(".oj-listbox-result-label");a.addClass("oj-hover"),this._updateMatchesCount(a.text())}else i.addClass("oj-hover"),this._updateMatchesCount(i.text());return this._getActiveContainer().attr("aria-activedescendant",i.find(".oj-listbox-result-label").attr("id")),this._ensureHighlightVisible(),0},_removeHighlight:function(){this.results.find(".oj-hover").removeClass("oj-hover"),this._removeHighlightFromHeaderItems(),"ojcombobox"===this._elemNm&&this._getActiveContainer().removeAttr("aria-activedescendant")},_highlightUnderEvent:function(e){var i=t(e.target).closest(".oj-listbox-result-selectable");if(i.length>0&&!i.is(".oj-hover")){var s=this._findHighlightableChoices();this._highlight(s.index(i))}else 0===i.length&&this._removeHighlight()},_updateMatchesCount:function(e){if(!this.dropdown.find(".oj-listbox-filter-message-text").length){var t=this.container.find(".oj-listbox-liveregion");t.length&&t.text(e)}},_updateResults:function(e,i){var s=this.search,o=this,n=s.val(),l=t.data(this.container,this._classNm+"-last-term");if((!0===e||!l||n!==l||!0===this.opts.multiple||i)&&(l||n||!e||"input"!==e.type)){t.data(this.container,this._classNm+"-last-term",n);var r=this.opts.minLength||0;n.length>=r?(this._queryTimer&&this._queryTimer.clear(),e&&!0!==e?(this._queryResolveBusyState=v._addBusyState(this.container,"query results"),this._queryTimer=a.getTimer(v.DEFAULT_QUERY_DELAY),this._queryTimer.getPromise().then(function(t){t&&o._queryResults(e)}).then(this._queryResolveBusyState)):this._queryResults(e)):this.close()}},_queryResults:function(e){var t,i,s=this.search,o=this.results,n=this.opts,a=this,l=s.val();function r(){if(a._positionDropdown(),a.header&&a.headerItems.length){var e=a._findHighlightableChoices(),t=a.headerItems.length+e.length;if(a.headerItems.attr("aria-setsize",t),e.length){var i=e.children("[role='option']");i.attr("aria-setsize",t),i.first().attr("aria-posinset",a.headerItems.length+1)}}}(n.minLength||0)>l.length?this.close():(this.open(null,!0),this.queryCount+=1,i=this.queryCount,this._removeHighlight(),l=null!=(t=this.search.val())&&(!0!==e||n.inputSearch||"rawValue"===n.filterOnOpen||n.minLength>0)?t:"",this.resultsPage=1,n.query({element:n.element,term:l,page:this.resultsPage,context:null,matcher:n.matcher,callback:this._bind(function(t){if(i===this.queryCount&&this._opened())if(n.ojContext._hasMore||v.removeDropdownMessage(a.dropdown),this.context=t&&void 0!==t.context?t.context:null,(!t||t.results&&0===t.results.length||this._isDataSelected(t)&&this.ojContext.isValid())&&v.checkFormatter(a.ojContext,n.formatNoMatches,"formatNoMatches")){var l=n.formatNoMatches(a.ojContext,s.val());if("oj-select"===this._classNm||this.header){if(this._showDropDown(),this._preprocessResults(o),r(),v.addDropdownMessage(a.dropdown,a.ojContext,l),!this._hasSearchBox()){var h=a.dropdown.find(".oj-listbox-filter-message-separator");h.length&&h.css("display","none")}}else this.close(null,!0);this._updateMatchesCount(l)}else v.saveLastQueryResult(this,t.results),this._showDropDown(),this._preprocessResults(o),a.opts.populateResults.call(this,o,t.results,{term:s.val(),page:this.resultsPage,context:null,initial:e},this._showPlaceholder()),this._postprocessResults(t,e),r(),this._updateMatchesCount(n.formatMoreMatches(a.ojContext,this._findHighlightableChoices().length))})}))},_preprocessResults:function(e){if(this.opts.list||this.isOjOption){var t=e.children();this._hideResultList(t)}else e.empty()},_processAriaLabelForHierarchy:function(){var e=this.results.find(".oj-listbox-result-with-children");if(0!==e.length){var i=this,s=function(e){var t=e.find(".oj-listbox-result-label"),s=e.data(i._elemNm).ariaLabelledById;s&&t&&t.attr("aria-labelledby",s)};v.each2(e,function(e,i){var o=i.find(".oj-listbox-result-selectable:visible");o&&o.length>0&&(s(t(o[0])),o.length>1&&s(t(o[o.length-1])))})}},_normalizeHighlighterLabel:function(e){var t;if((t=e.children("div").children("oj-option").length>0?e.children("div").children("oj-option").find("oj-highlight-text"):e.children("div").children("oj-highlight-text")).length>0)for(var i=0;i<t.length;i++){var s=t[i],o=s.getAttribute("text")||"",n=document.createTextNode(o);s.parentElement.replaceChild(n,s)}},_hideResultList:function(e){for(var i=0;i<e.length;i++){var s,o=t(e[i]);o.is("LI")&&((o.hasClass("oj-listbox-no-results")||o.hasClass("oj-listbox-placeholder"))&&o.remove(),o.css("display","none"),o.hasClass("oj-selected")&&o.removeClass("oj-selected"),this._normalizeHighlighterLabel(o)),(s=o.children("oj-optgroup")?o.children("oj-optgroup").children("ul"):o.children("ul"))&&s.children()&&this._hideResultList(s.children())}},_cancel:function(e){this.close(e)},_focusSearch:function(){v._focus(this,this.search)},_selectHighlighted:function(e,i){var s=e;if(this.header){var o=this._getActiveContainer().attr("aria-activedescendant");if(this._isHeaderItem(o)){var n=t("#"+o),a=n.find("a, input, select, textarea, button, object").first();return 0===a.length&&(a=n.children()),a.length&&a[0].click(),void this.close(i)}}var l=this._highlight(),r=this.results.find(".oj-hover").closest(".oj-listbox-result").data(this._elemNm);if(r){this._highlight(l);var h=this.getVal();(s=s||{}).trigger=v.ValueChangeTriggerTypes.OPTION_SELECTED;var c=this._onSelect(r,s,i);c instanceof Promise?c.then(this._bind(function(e){e&&(this._triggerUpdateEvent(r,s,i),this._triggerValueUpdatedEvent(r,h))})):!1!==c&&(this._triggerUpdateEvent(r,s,i),this._triggerValueUpdatedEvent(r,h)),i&&"keydown"===i.type&&(this.enterKeyEventHandled=!0)}},_getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},_setPlaceholder:function(){var e=this._getPlaceholder();if(this.ojContext.multiple&&"oj-select"===this._classNm){var t=this.selection.find(".oj-select-default");t.length>0?t.text(e):this._clearSearch()}else e?this.search.attr("placeholder",e):this.search.removeAttr("placeholder")},_initContainerWidth:function(){var e=function(){var e,t,i,s,o;if(null!=(e=this._getAttribute("style")))for(s=0,o=(t=e.split(";")).length;s<o;s++)if(null!==(i=t[s].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return null}.call(this);null!==e&&this.container.css("width",e)},valHasChanged:function(){var e=this.container;if(v.duringFetchByKey(e)){v.setValueChanged(this.ojContext,!0);var t=this.selection;t._saveLoadingIndicator&&!this.ojContext.multiple&&v.removeLoadingIndicator(t)}},getVal:function(){return this.ojContext.option("value")},getRawValue:function(){return this.ojContext.option("rawValue")},setVal:function(t,i,s){this.valHasChanged();var o={doValueChangeCheck:!1};s&&(o._context=s);var n=this.ojContext.multiple;if(!this._skipSetValueOptions)if(v.isValueForPlaceholder(n,t)&&null!==this._getPlaceholder())this.setValOpts(v.getFixupValueOptionsForPlaceholder(n));else{var a,l=v.getLastQueryResult(this);l&&(a=n?v.findOptions(l,t):v.findOption(l,t)),a?this.setValOpts(a):"oj-combobox"===this._classNm?this.ojContext._resolveValueOptionsLater=null!=v.findOption(this.getValOpts(),t):this.ojContext._resolveValueOptionsLater=!0}var r=this.getVal(),h=null;return Array.isArray(t)||this.ojContext._IsCustomElement()?!e.Object.compareValues(r,t)||v.hasInvalidComponentMessages(this.ojContext)?h=this.ojContext._SetValue(t,i,o):"oj-combobox"!==this._classNm||n||this.ojContext._SetDisplayValue(t):!e.Object.compareValues(r,[t])||v.hasInvalidComponentMessages(this.ojContext)?h=this.ojContext._SetValue([t],i,o):"oj-combobox"!==this._classNm||n||this.ojContext._SetDisplayValue([t]),h},getValOpts:function(){var e=this.ojContext;return e.multiple?e.option("valueOptions"):e.option("valueOption")},setValOpts:function(t){var i=this.ojContext,s=i.multiple,o=v.getFixupValueOptionsForPlaceholder(s),n=s?i.options.valueOptions:i.options.valueOption;v.isValueOptionsForPlaceholder(s,t)&&v.isValueOptionsForPlaceholder(s,n)&&v.isPlaceholderSpecified(i.options)?s?i.options.valueOptions=o:i.options.valueOption=o:e.Object.compareValues(t,this.getValOpts())||v.setValueOptions(i,t),s?this.opts.valueOptions=t:this.opts.valueOption=t},_triggerUpdateEvent:function(e,t,i){},_triggerValueUpdatedEvent:function(e,t){},_showPlaceholder:function(){return!1},_getActiveContainer:function(){return this.search},_getAttribute:function(e){return this.opts.ojContext._IsCustomElement()?this.opts.ojContext.OuterWrapper.getAttribute(e):this.opts.element.attr(e)},_getTransferredAttribute:function(e){return this.opts.element.attr(e)},_showSearchBox:function(e){var i=!1,s=this.dropdown.find(".oj-listbox-search");if(s&&(this._hasSearchBox()?(this.dropdown.find(".oj-listbox-search-wrapper").removeClass("oj-helper-hidden-accessible"),t(s).removeAttr("aria-hidden"),this.search.val(e),i=!0):(this.dropdown.find(".oj-listbox-search-wrapper").addClass("oj-helper-hidden-accessible"),t(s).attr("aria-hidden","true"))),v._focus(this,i?this.search:this.selection),i){var o=this;s.find(".oj-listbox-spyglass-box").on("mouseup click",function(e){o.search.focus(),e.preventDefault()})}},_hasSearchBox:function(){if(this._userTyping)return!0;var e,i=this.opts.minimumResultsForSearch;return this.opts.list?e=t("#"+this.opts.list).find("li").length:v.isDataProvider(this.opts.options)?void 0===this.ojContext._resultCount?(e=i+1,this.ojContext._resolveSearchBoxLater=!0):(e=this.ojContext._resultCount,delete this.ojContext._resolveSearchBoxLater):this.datalist?e=this.ojContext._IsCustomElement()?this.datalist.children().find("oj-option").length:this.datalist[0].length:this.opts.options&&(e=this.opts.options.length),e>i},_isDataSelected:function(e){return!1},_findItem:function(e,i){for(var s=0;s<e.length;s++)if(t(e[s]).data(this._elemNm).value===i)return e[s];return null}}),b=v.clazz(_,{_enableInterface:function(){b.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!(this._isInterfaceEnabled()||v.isReadonly(this.ojContext)))},_focus:function(){this.close()},_destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),b.superclass._destroy.apply(this,arguments)},_clear:function(e){if(this.selection.data(this._elemNm)){e||r.warn("Event should not be null when user modified the value in UI");var t=this.ojContext._IsCustomElement()?"":[];"oj-select"===this._classNm&&this.ojContext._IsRequired()||this.setVal(t,e),this.search.val(""),this.selection.removeData(this._elemNm)}this._setPlaceholder()},_initSelection:function(){if(!v.applyValueOptions(this,this.opts)){var e=this.datalist?this.datalist:this.opts.element;this.opts.initSelection.call(null,e,this._bind(this._updateSelectedOption))}},_containerKeydownHandler:function(e){if(this._isInterfaceEnabled())if(e.which!==v.KEY.PAGE_UP&&e.which!==v.KEY.PAGE_DOWN){switch(e.which){case v.KEY.UP:case v.KEY.DOWN:return this._opened()?this._moveHighlight(e.which===v.KEY.UP?-1:1):this.open(e),void e.preventDefault();case v.KEY.ENTER:return this._opened()&&e.stopPropagation(),this._selectHighlighted(null,e),e.preventDefault(),void(this._opened()||(this._userTyping=!1));case v.KEY.TAB:return this.close(e),void(this._userTyping=!1);case v.KEY.ESC:return this._opened()&&e.preventDefault(),this._cancel(e),void(this._userTyping=!1)}this._userTyping=!0}else e.preventDefault()},_containerKeyupHandler:function(e){this._isInterfaceEnabled()&&(this._opened()||this.open(e))},_initContainer:function(){var e=this.container,i=this.opts.rootAttributes,s=i&&i.id?i.id:this._getAttribute("id")||v.nextUid(),o=this._getTransferredAttribute("aria-label"),n=this._getTransferredAttribute("aria-controls"),a=e.find("."+this._classNm+"-choice");this.selection=a,this._contentElement="ojcombobox"===this._elemNm?this.search:this.selection,a.attr("id",this._classNm+"-choice-"+s),a.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+s),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+s);var l=e.find(".oj-listbox-liveregion");if(l.length&&l.attr("id","oj-listbox-live-"+s),"oj-select"!==this._classNm&&this.search.attr("aria-owns",this.results.attr("id")),!this.ojContext._IsCustomElement()){var r=t("label[for='"+this._getAttribute("id")+"']");r.attr("id")||r.attr("id",this._classNm+"-label-"+s),this.search.attr("aria-labelledby",r.attr("id")),this.opts.element.attr("aria-labelledby",r.attr("id")),this.search.attr("id")&&r.attr("for",this.search.attr("id"))}o&&this.search.attr("aria-label",o),n&&this.search.attr("aria-controls",n),a.on("keydown",this._bind(this._containerKeydownHandler)),a.on("mousedown",this._bind(function(e){if(!("end"===e.target.getAttribute("slot")||t(this._endSlot).find(e.target).length>0)&&this._isInterfaceEnabled()){this.opts.element.prop("disabled")&&v.killEvent(e),a.removeClass("oj-focus-highlight"),this._opened()?this.close(e):this._isInterfaceEnabled()&&this.open(e);var i=this.search.parent().attr("aria-hidden");i&&"true"===i?this.selection.focus():this.search.focus(),t(e.target).hasClass("oj-combobox-open-icon")&&v.killEvent(e),this.container.addClass("oj-active")}})),a.on("mouseup",this._bind(function(){this.container.removeClass("oj-active")})),a.on("focus",this._bind(function(e){v.killEvent(e)})),this.search.on("compositionstart",this._bind(function(){this.ojContext._isComposing=!0})),this.search.on("compositionend",this._bind(function(e){this.ojContext._isComposing=!1,this._onSearchInputHandler(e)})),this.search.on("input",this._bind(function(e){this.ojContext._isComposing||this._onSearchInputHandler(e)})),this.search.on("focus",this._bind(function(){this._previousDisplayValue=this.search.val()})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(void 0!==this.search.val()&&this.results.find(".oj-hover").length<=0&&("keyup"!==e.type||!this.enterKeyEventHandled))if(this.opts.manageNewEntry){var t=this.search.val(),i=this.opts.manageNewEntry(t),s={trigger:"blur"===e.type?v.ValueChangeTriggerTypes.BLUR:v.ValueChangeTriggerTypes.ENTER_PRESSED},o=this.selection.data(this._elemNm),n=this.getVal();if(!o&&""!==t||o&&o.label!==t||!this.ojContext.isValid()&&t!==this._previousDisplayValue){var a=this._onSelect(i,s,e);"blur"!==e.type&&(a instanceof Promise?a.then(this._bind(function(t){t&&(this._triggerUpdateEvent(i,s,e),this._triggerValueUpdatedEvent(i,n))})):!1!==a&&(this._triggerUpdateEvent(i,s,e),this._triggerValueUpdatedEvent(i,n)))}else"keyup"===e.type&&(o&&o.label===t&&(i=o),this.close(e),this._triggerUpdateEvent(i,s,e),this._triggerValueUpdatedEvent(i,n))}else if(null==this.opts.manageNewEntry){var l=this.selection.data(this._elemNm);if(""===this.search.val())"oj-select"!==this._classNm&&this._clear(e);else if(l||""===this.search.val()){if("oj-select"!==this._classNm){var r=this.opts.formatSelection(l);void 0!==r&&this.search.val(r)}}else this._clearSearch()}"blur"===e.type&&(this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus")),this.enterKeyEventHandled=!1}})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this._setPlaceholder()},_onSearchInputHandler:function(e){"oj-combobox"===this._classNm&&(this.hasUncommittedValue=!0),this.ojContext._SetRawValue(this.search.val(),e)},_prepareOpts:function(){var i=b.superclass._prepareOpts.apply(this,arguments),s=this,o=i.element.get(0).tagName.toLowerCase();if("input"===o&&i.element.attr("list")||"select"===o&&i.element.children().length>0||i.ojContext._IsCustomElement()&&!i.options||i.list){var n=i.list?"li":"option";i.ojContext._IsCustomElement()&&(n="oj-option"),i.initSelection=function(a,l){var r,h=s.getVal();Array.isArray(h)&&!i.ojContext._IsCustomElement()&&(h=h[0]),null!=h&&(r=s._optionToData(a.find(n).filter(function(){var t;return"li"===n?t=this.getAttribute("oj-data-value"):"option"!==n&&"oj-option"!==n||(t=this.value),e.Object.compareValues(t,h)})),"select"===o&&void 0===r&&(h=null)),null==h&&(r=s._optionToData(a.find(n).filter(function(){return"li"===n?!0===this.getAttribute("oj-data-selected"):"option"===n&&this.selected})),"oj-select"===s._classNm&&void 0===r&&i.ojContext._IsCustomElement()&&(r=s._optionToData(t(a.find(n)[0])),e.Logger.info("Select identified by "+s.container.attr("id")+" defaults to first option because the value is not set."))),l(r)},i.validate=function(t,i){var o;return null!=i&&(o=s._optionToData(t.find(n).filter(function(){var t;return"li"===n?t=this.getAttribute("oj-data-value"):"option"!==n&&"oj-option"!==n||(t=this.value),e.Object.compareValues(t,i)}))),!!o}}else("options"in i||this.getVal()&&this.getVal().length>0)&&(v.isDataProvider(i.options)||t.isFunction(i.options)?i.initSelection=function(n,a){var l=function(t,s){for(var o=0,n=t.length;o<n;o++){var a=t[o];if(e.Object.compareValues(s,i.id(a)))return a;if(a.children){var r=l(a.children,s);if(r)return r}}return null},r=s._getValueItem(),h=null;if(null!=r){var c=v.getLastQueryResult(s);if(c&&(h=l(c,r)),!h){var u=s.currentItem;u&&u.length&&e.Object.compareValues(r,i.id(u[0]))&&(h=u[0],e.Logger.info("Select identified by "+s.container.attr("id")+" defaults to first option due to invalid value."))}h||s.valueChangeTrigger?a(h):i.query({value:[r],callback:t.isFunction(a)?function(t){(!v.isDataProvider(i.options)||e.Object.compareValues(r,s.getVal())&&!v.isValueChanged(s.ojContext))&&(t&&t.results&&(h=l(t.results,r)),a(h),v.setValueChanged(s.ojContext,void 0))}:t.noop})}else{var d=s.ojContext.options.optionsKeys;"select"!==o||s.ojContext._HasPlaceholderSet()||d&&(d.value||d.label)?a(h):v.fetchFirstBlockFromDataProvider(s.container,i,1).then(function(t){t&&t.length>0&&(a(t[0]),e.Logger.info("Select identified by "+s.container.attr("id")+" defaults to first option because the value is not set."))})}}:(i.initSelection=function(n,a){var l=s._getValueItem(),r="select"===o&&s.ojContext._HasPlaceholderSet()&&!s.ojContext._IsRequired(),h=r?s._getPlaceholder():null,c=null;i.query({matcher:function(t,s,o){var n=e.Object.compareValues(l,i.id(o));return n&&(c=o),null==h&&(h=o),n},callback:t.isFunction(a)?function(){c||"select"!==o||s.ojContext._isOptionDataPending()||(c=h,e.Logger.info("Select identified by "+s.container.attr("id")+" defaults to "+(r?"placeholder":"first option")+" due to invalid value.")),a(c)}:t.noop})},i.validate=function(s,o){var n=o,a=null;return i.query({matcher:function(t,s,o){var l=e.Object.compareValues(n,i.id(o));return l&&(a=o),l},callback:t.noop}),!!a}));return i},_postprocessResults:function(t,i,s){var o,n=-1,a=this;o=this._findHighlightableChoices(),v.each2(o,function(t,i){var s=a._getValueItem();return null==s||!e.Object.compareValues(s,a.id(i.data(a._elemNm)))||(n=t,!1)}),!1!==s&&!0===i&&n>=0&&this._highlight(n),this._processAriaLabelForHierarchy()},_onSelect:function(e,t,i){if(!this._triggerSelect(e))return!1;var s,o,n=v.getOpts(this.ojContext);t&&t.trigger&&(s={optionMetadata:{trigger:t.trigger}}),s=v.getContextWithExtraData(s,n,e.data,e.metadata),this.close(i);var a=e,l=this.hasUncommittedValue,r=null,h=null;if(0===this.id(e).length?(o=this.ojContext._IsCustomElement()?v.getValueForPlaceholder(!1):[],a=v.getFixupValueOptionsForPlaceholder(!1)):o=this.id(e),"oj-combobox"!==this._classNm&&"oj-select"!==this._classNm||(this._skipSetValueOptions=!0,this.setValOpts(v.findOptionFromResult(this,o,a))),this.hasUncommittedValue=!1,(r=this.setVal(o,i,s))instanceof Promise)h=r.then(this._bind(function(e){return this._onSelectAfterSetVal(e,l),e}));else{var c=!1!==r;this._onSelectAfterSetVal(c,l),h=r}return"blur"!==i.type&&this._focusSearch(),h},_onSelectAfterSetVal:function(e,t){!1===e&&(this.hasUncommittedValue=t),this._skipSetValueOptions=!1},_clearSearch:function(){this.search.val("")},_getValueItem:function(){var e=null,t=this.getVal();return null!=t&&(e=!this.ojContext._IsCustomElement()&&t.length?t[0]:t),e},_getSelectionData:function(){return this.selection.data(this._elemNm)},_GetContentWrapper:function(){return this.container[0].querySelector(".oj-text-field-middle")}}),g=v.clazz(b,{_elemNm:"ojcombobox",_classNm:"oj-combobox",_COMPONENT_CLASSLIST:"oj-combobox oj-component",_CreateContentElements:function(){return t(["<div class='oj-text-field-container' role='presentation'>","  <div class='oj-combobox-choice' tabindex='-1' role='presentation'>","   <div class='oj-text-field-middle'>","     <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","       spellcheck='false' class='oj-combobox-input' role='combobox' aria-expanded='false' aria-autocomplete='list' />","   </div>","   <abbr class='oj-combobox-clear-entry' role='presentation'></abbr>","   <span class='oj-combobox-divider' role='presentation'></span>","   <a class='oj-combobox-arrow oj-combobox-icon oj-component-icon oj-clickable-icon-nocontext oj-combobox-open-icon'","       role='button' aria-label='expand'></a>","  </div>","</div>","<div class='oj-listbox-drop' role='presentation'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join(""))},_ConfigureSlots:function(){if(null!=this.container&&this.ojContext._IsCustomElement()){var t=this.container,i=e.BaseCustomElementBridge.getSlotMap(t[0]).end;i&&(t.find(".oj-combobox-divider").remove(),t.find(".oj-combobox-arrow").remove(),t.find(".oj-combobox-choice").append(i),this._endSlot=i)}},_RestoreSlots:function(){var e=this._endSlot;null!=e&&null!=this.container&&this.ojContext._IsCustomElement()&&this.container.append(e),this._endSlot=null},_triggerValueUpdatedEvent:function(e,t){if(this.ojContext._IsCustomElement()){var i=this.id(e);if(null==i&&(i=e.label?e.label:""),this.ojContext.isValid()){var s={},o=this.ojContext.OuterWrapper;s.value=i,s.previousValue=t;var n=new CustomEvent("ojValueUpdated",{detail:s});o.dispatchEvent(n)}}},_enable:function(e){g.superclass._enable.apply(this,arguments),this._enabled?this.container.find(".oj-combobox-arrow").removeClass("oj-disabled"):this.container.find(".oj-combobox-arrow").addClass("oj-disabled")},_opening:function(e,t){g.superclass._opening.apply(this,arguments),this._focusSearch(),t||this._updateResults(!0)},_containerKeydownHandler:function(e){"end"===e.target.getAttribute("slot")||t(this._endSlot).find(e.target).length>0||v.KEY.isControl(e)||v.KEY.isFunctionKey(e)||g.superclass._containerKeydownHandler.apply(this,arguments)},_updateSelection:function(e){var t,i,s=[];if(this.selection.data(this._elemNm,e),null!==e&&0!==e.length?(void 0!==(t=this.opts.formatSelection(e))&&this.search.val()!==t&&this.search.val(t),this.search.removeClass(this._classNm+"-default"),s.push(e),i=t):(this.search.val(""),this._setPlaceholder(),i=""),this.ojContext.options.readOnly){let e=this.ojContext._getReadonlyDiv();e&&(e.textContent=i)}this.currentItem=s},_updateSelectedOption:function(e){if(null!=e)this._updateSelection(e),this.setValOpts(e);else{var t,i=this.getVal();t=null==i?null:Array.isArray(i)?i.length?{label:i[0]}:null:{label:i},this._updateSelection(t),!e&&i?this.setValOpts({value:i,label:v.getLabel({value:i})}):this.setValOpts(e)}}}),y=v.clazz(b,{_elemNm:"ojselect",_classNm:"oj-select",_userTyping:!1,_COMPONENT_CLASSLIST:"oj-select oj-component",_CreateContentElements:function(){return t(["<div class='oj-text-field-container' role='presentation'>","  <div class='oj-select-choice' tabindex='0' role='combobox' ","     aria-autocomplete='none' aria-expanded='false'>","   <div class='oj-text-field-middle'>","      <span class='oj-select-chosen'></span>","   </div>","    <abbr class='oj-select-search-choice-close' role='presentation'></abbr>","    <a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role='presentation'>","    </a>","  </div>","</div>","<div class='oj-listbox-drop' role='dialog'>","  <div class='oj-listbox-search-wrapper'>","  <div class='oj-listbox-search'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","           spellcheck='false' class='oj-listbox-input' title='Search field' ","           role='combobox' aria-expanded='false' aria-autocomplete='list' />","    <span class='oj-listbox-spyglass-box'>","      <span class='oj-component-icon oj-listbox-search-icon' role='presentation'>","       <b role='presentation'></b></span>","    </span>","  </div>","  </div>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join(""))},_enable:function(e){if(y.superclass._enable.apply(this,arguments),this._enabled){var t=this.elementTabIndex?this.elementTabIndex:"0";this.selection.attr("tabindex",t),this.container.find(".oj-select-arrow").removeClass("oj-disabled")}else this.selection.attr("tabindex","-1"),this.container.find(".oj-select-arrow").addClass("oj-disabled")},close:function(e){if(this._opened()){var t=e?e.originalEvent:null,i=t instanceof MouseEvent||t instanceof FocusEvent,s=e&&(!i||e.target===this.selection||e.target===this.search||this.dropdown.has(e.target).length>0);y.superclass.close.apply(this,arguments),this.selection.attr("aria-expanded",!1).removeAttr("aria-haspopup").removeAttr("aria-owns"),this.search.attr("aria-expanded",!1).removeAttr("aria-controls"),this._testClear(e)||this._clearSearch(),this.ojContext.hasAfterToggleHandlerAddedFocusClass&&!s&&(this.ojContext._getRootElement().classList.remove("oj-focus"),this.ojContext.hasAfterToggleHandlerAddedFocusClass=!1),s&&v._focus(this,this.selection),this.container.find(".oj-listbox-spyglass-box").off("mouseup click")}},_opening:function(e,t){y.superclass._opening.apply(this,arguments),this._showDropDown();var i=v.getSearchText(e);this._showSearchBox(i),t||(i?this._updateResults():this._updateResults(!0))},_showDropDown:function(){if(this._opened()){var e="true"!==this.selection.attr("aria-expanded");y.superclass._showDropDown.apply(this,arguments),e&&(this.selection.attr("aria-expanded",!0).attr("aria-haspopup","dialog").attr("aria-owns",this.results.attr("id")),this.search.attr("aria-expanded",!0).attr("aria-controls",this.results.attr("id")+" "+this.container.find(".oj-listbox-liveregion").attr("id")))}},_initContainer:function(){var e=this.containerId+"_selected";this.text=this.container.find(".oj-select-chosen").attr("id",e),y.superclass._initContainer.apply(this,arguments),this.selection.attr({"aria-labelledby":this.search.attr("aria-labelledby"),"aria-describedby":e});var t=this._getTransferredAttribute("aria-label");t&&this.selection.attr("aria-label",t),this.search.on("keydown",this._bind(this._containerKeydownHandler)),this.search.on("keyup-change input",this._bind(this._containerKeyupHandler)),this.search.attr("title",this.ojContext.getTranslatedString("searchField"));var i=this;this.selection.on("blur",function(e){i._testClear(e)})},_initSelection:function(){this._isPlaceholderOptionSelected()?(this._updateSelection(null),this.close(),this._setPlaceholder()):y.superclass._initSelection.apply(this,arguments)},_updateSelectedOption:function(t){if(null!=t){var i,s=this.getVal();Array.isArray(s)&&!this.ojContext._IsCustomElement()&&(s=s[0]),void 0===(i=this.opts.id(t))&&(i=null),e.Object.compareValues(s,i)||this.ojContext._setInitialSelectedValue(i),this.setValOpts(t),this._updateSelection(t),this.close()}else this.setValOpts(null)},_updateSelection:function(e){this.selection.data(this._elemNm,e),null!==e&&this.text.text("string"==typeof e?e:v.getLabel(e)),e&&""!==e.id&&this.text.removeClass(this._classNm+"-default")},_getActiveContainer:function(){return this.search.attr("aria-expanded")&&this._hasSearchBox()?this.search:this.selection},_isPlaceholderOptionSelected:function(){if(null===this._getPlaceholder())return!1;var e=this.getVal();return e=Array.isArray(e)?e[0]:e,v.isValueForPlaceholder(!1,e)},_getPlaceholder:function(){return this.opts.placeholder},_showPlaceholder:function(){return this.opts.placeholder=this.ojContext.options.placeholder,!0},_setPlaceholder:function(){var e=this._getPlaceholder();this._isPlaceholderOptionSelected()&&void 0!==e&&this.text.text(e).addClass(this._classNm+"-default")},setVal:function(e,t,i){var s=y.superclass.setVal.call(this,e,t,i);return s instanceof Promise?s.then(this._bind(function(t){!1!==t&&this.selection.data("selectVal",e)})):(!1!==s&&this.selection.data("selectVal",e),s)},_containerKeydownHandler:function(e){if(!(v.KEY.isControl(e)&&e.which!==v.KEY.SHIFT||e.which===v.KEY.SHIFT||v.KEY.isFunctionKey(e))){switch(e.which){case v.KEY.TAB:return this.close(e),this.selection.focus(),void this._testClear(e);case v.KEY.ENTER:if(e.target===this.selection[0]&&!this._opened())return this.open(e),void e.preventDefault()}if(y.superclass._containerKeydownHandler.apply(this,arguments),this._userTyping&&(this.open(e),this._opened())){var i=this.dropdown.find(".oj-listbox-search");if("true"===t(i).attr("aria-hidden")){var s=v.getSearchText(e);s&&(this._showSearchBox(s),this._updateResults())}}}},_testClear:function(e){return""===this.text.text()&&(!(this.datalist&&this.selection.data(this._elemNm)&&this.selection.data(this._elemNm).value||!v.isValueForPlaceholder(!1,this.ojContext.options.value))&&(this._clear(e),!0))}}),j=v.clazz(_,{_prepareOpts:function(){var i=j.superclass._prepareOpts.apply(this,arguments),s=this,o=i.element.get(0).tagName.toLowerCase();if("input"===o&&i.element.attr("list")||"select"===o&&i.element.children().length>0||i.ojContext._IsCustomElement()&&!i.options||i.list){var n=i.list?"li":"option";i.ojContext._IsCustomElement()&&(n="oj-option"),i.initSelection=function(t,i){var a,l=[];if(s.getVal())for(var r=s.getVal(),h=0;h<r.length;h++){var c=r[h];(a=t.find(n).filter(function(){var t;return"li"===n?t=this.getAttribute("oj-data-value"):"option"!==n&&"oj-option"!==n||(t=this.value),e.Object.compareValues(t,c)}))&&a.length?l.push(s._optionToData(a)):"ojcombobox"===s._elemNm&&l.push({value:c,label:c})}else"select"!==o&&(a=t.find(n).filter(function(){return"option"===n?this.selected:"li"===n?!0===this.getAttribute("oj-data-selected"):"oj-option"===n&&!0===this.getAttribute("selected")}),v.each2(a,function(e,t){l.push(s._optionToData(t))}));i(l)}}else"options"in i&&(v.isDataProvider(i.options)||t.isFunction(i.options)?i.initSelection=function(o,n){var a=function(e,s){for(var o=[],n=0,l=e.length;n<l;n++){var r=e[n];if(s.indexOf(i.id(r))>=0&&o.push(r),r.children){var h=a(r.children,s);h&&h.length&&t.merge(o,h)}}return o},l=s.getVal(),r=[],h=v.getLastQueryResult(s);h&&(r=a(h,l));var c=function(){for(var t=[],o=0;o<l.length;o++){for(var a=l[o],h=!1,c=0;c<r.length;c++){var u=r[c];if(e.Object.compareValues(a,i.id(u))){t.push(u),r.splice(c,1),h=!0;break}}if(!h){var d=s.currentItem;if(d&&d.length)for(var p=0;p<d.length;p++)if(e.Object.compareValues(a,i.id(d[p]))){t.push(d[p]),h=!0;break}h||"ojcombobox"!==s._elemNm||t.push({value:a,label:a})}}n(t)};s.valueChangeTrigger?c():i.query({value:l,callback:function(o){if(o&&o.results){var n=a(o.results,l);if(n&&n.length){var h=n;if(v.isDataProvider(i.options)){h=[];var u=s.getVal();if(e.Object.compareValues(l,u)&&!v.isValueChanged(s.ojContext))h=n;else{var d,p,f=s.getValOpts();u.forEach(function(t){for(p=!1,d=0;d<f.length;d++)if(e.Object.compareValues(f[d].value,t)){p=!0,h.push(f[d]);break}if(!p)for(d=0;d<n.length;d++)if(e.Object.compareValues(n[d].value,t)){h.push({value:n[d].value,label:n[d].label});break}}),l=u,v.setValueOptions(s.ojContext,h)}}t.merge(r,h)}}v.setValueChanged(s.ojContext,void 0),c()}})}:i.initSelection=function(o,n){var a=s.getVal();if(a&&0!==a.length){var l=[];i.query({matcher:function(s,o,n){var r=t.grep(a,function(t){return e.Object.compareValues(t,i.id(n))}).length;return r&&l.push(n),r},callback:t.isFunction(n)?function(){for(var t=[],o=0;o<a.length;o++){for(var r=a[o],h=!1,c=0;c<l.length;c++){var u=l[c];if(e.Object.compareValues(r,i.id(u))){t.push(u),l.splice(c,1),h=!0;break}}h||"ojcombobox"!==s._elemNm||t.push({value:r,label:r})}n(t)}:t.noop})}});return i},_selectChoice:function(e){var t=this.container.find("."+this._classNm+"-selected-choice.oj-focus"),i=t&&t.length>0,s=e&&e.length>0;(!i&&s||i&&!s||i&&s&&e[0]!==t[0])&&(i&&(this.opts.element.trigger("choice-deselected",t),t.removeClass("oj-focus")),s&&(this.close(),e.addClass("oj-focus"),this.container.find("."+this._classNm+"-description").text(e.attr("valueText")+". Press back space to delete.").attr("aria-live","assertive"),this.opts.element.trigger("choice-selected",e)))},_destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.ojContext._IsCustomElement()&&(this.container[0].removeEventListener("touchstart",this._delegatedContainerTouchStartListener,{passive:!1}),delete this._delegatedContainerTouchStartListener,this.container.off("click touchstart")),j.superclass._destroy.apply(this,arguments)},_initContainer:function(){var e,i="."+this._classNm+"-choices",s=v.nextUid(),o=this._getTransferredAttribute("aria-label"),n=this._getTransferredAttribute("aria-controls");this.searchContainer=this.container.find("."+this._classNm+"-search-field");var a=this.container.find(i);this.selection=a;var l=this;this.selection.on("click","."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)",function(){"ojcombobox"===l._elemNm&&l.search[0].focus(),l._selectChoice(t(this))}),"ojselect"===this._elemNm&&this.selection.on("blur",function(){l._selectChoice(null)}),this._contentElement="ojcombobox"===this._elemNm?this.search:this.selection,a.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+s),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+s),this._contentElement.attr("aria-owns",this.results.attr("id")),this.ojContext._IsCustomElement()||((e=t("label[for='"+this._getAttribute("id")+"']")).attr("id")||e.attr("id",this._classNm+"-label-"+s),this._contentElement.attr("aria-labelledby",e.attr("id")),this.opts.element.attr("aria-labelledby",e.attr("id")),this.search.attr("id")&&e.attr("for",this.search.attr("id"))),o&&this._contentElement.attr("aria-label",o),n&&this._contentElement.attr("aria-controls",n),this.elementTabIndex&&this._contentElement.attr("tabindex",this.elementTabIndex),this.keydowns=0,"ojselect"===this._elemNm&&(this.selection.on("keydown",this._bind(this._containerKeydownHandler)),this.selection.on("keyup",this._bind(function(){this.keydowns=0}))),this.search.on("keydown",this._bind(this._containerKeydownHandler)),this.search.on("keyup",this._bind(function(){this.keydowns=0})),this.search.on("compositionstart",this._bind(function(){this.ojContext._isComposing=!0})),this.search.on("compositionend",this._bind(function(e){this.ojContext._isComposing=!1,this._onSearchInputHandler(e)})),this.search.on("input",this._bind(function(e){this.ojContext._isComposing||this._onSearchInputHandler(e)})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(this.opts.manageNewEntry&&this.search.val()&&this.results.find(".oj-hover").length<=0){var t=this.opts.manageNewEntry(this.search.val()),i={trigger:"blur"===e.type?v.ValueChangeTriggerTypes.BLUR:v.ValueChangeTriggerTypes.ENTER_PRESSED},s=this._onSelect(t,i,e);s instanceof Promise?s.then(this._bind(this._clearSearchOnBlur)):this._clearSearchOnBlur()}this._selectChoice(null),"blur"===e.type&&(this.isSearchFocused=!1,this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus")),e.stopImmediatePropagation()}})),this._containerClickAndTouchStartListener=this._bind(function(e){this._isInterfaceEnabled()&&(t(e.target).closest("."+this._classNm+"-selected-choice").length>0||(this._selectChoice(null),this._opened()?this.close(e):(this.open(e),("ojcombobox"===this._elemNm||this._hasSearchBox())&&this._focusSearch()),e.preventDefault()))}),this.ojContext._IsCustomElement()?(this._delegatedContainerTouchStartListener=function(e){const s=e.currentTarget,o=e.target.closest(i);o&&s.contains(o)&&this._containerClickAndTouchStartListener(t.Event(e,{currentTarget:o}))}.bind(this),this.container.on("click",i,this._containerClickAndTouchStartListener),this.container[0].addEventListener("touchstart",this._delegatedContainerTouchStartListener,{passive:!1})):this.container.on("click touchstart",i,this._containerClickAndTouchStartListener),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this._clearSearch()},_onSearchInputHandler:function(e){var t=(this.getValOpts()||[]).slice(0),i=this.search.val(),s=t.map(function(e){return e.label});""!==i&&s.push(i),"oj-combobox"===this._classNm&&(this.hasUncommittedValue=!0),this.ojContext._SetRawValue(s,e)},_containerKeydownHandler:function(e){if(this._isInterfaceEnabled()){this.keydowns+=1;var t=this.selection.find("."+this._classNm+"-selected-choice.oj-focus"),i=t.prev("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),s=t.next("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),o="ojselect"!==this._elemNm||this._userTyping?v.getCursorInfo(this.search):v.getCursorInfo(this.selection);if(t.length&&(e.which===v.KEY.LEFT||e.which===v.KEY.RIGHT||e.which===v.KEY.BACKSPACE||e.which===v.KEY.DELETE||e.which===v.KEY.ENTER)){var n=t;return e.which===v.KEY.LEFT&&i.length?n=i:e.which===v.KEY.RIGHT?n=s.length?s:null:e.which===v.KEY.BACKSPACE?(this._unselect(t.first(),e),this._resetSearchWidth(),n=i.length?i:s):e.which===v.KEY.DELETE?(this._unselect(t.first(),e),this._resetSearchWidth(),n=s.length?s:null):e.which===v.KEY.ENTER&&(n=null),this._selectChoice(n),e.preventDefault(),void(n&&n.length||this.open(e))}if(this._isBackNavAllowed()&&0===o.offset&&!o.length&&(e.which===v.KEY.BACKSPACE&&1===this.keydowns||e.which===v.KEY.LEFT))return this._selectChoice(this.selection.find("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)").last()),void e.preventDefault();if(this._selectChoice(null),!v.KEY.isControl(e)&&!v.KEY.isFunctionKey(e)){switch(e.which){case v.KEY.UP:case v.KEY.DOWN:return this._opened()?this._moveHighlight(e.which===v.KEY.UP?-1:1):this.open(e),void e.preventDefault();case v.KEY.PAGE_UP:case v.KEY.PAGE_DOWN:return void e.preventDefault();case v.KEY.ENTER:return this._opened()&&(this._selectHighlighted(null,e),e.stopPropagation()),void e.preventDefault();case v.KEY.TAB:return void this.close(e);case v.KEY.ESC:return this._cancel(e),void e.preventDefault()}this._opened()&&!1===this._userTyping&&(this._userTyping=!0,this.close()),this._userTyping=!0}}},_isBackNavAllowed:function(){return"ojselect"!==this._elemNm||document.activeElement!==this.search[0]},_enableInterface:function(){j.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!(this._isInterfaceEnabled()||v.isReadonly(this.ojContext)))},_initSelection:function(e){var t=this.getVal();if(null!==t&&0!==t.length||"oj-select"!==this._classNm&&""!==this.opts.element.text().trim()||(this._updateSelection(e||[]),this.close(),this._clearSearch()),this.datalist||null!==this.getVal()&&this.getVal().length){var i,s=this;i=this.datalist?this.datalist:this.opts.element,v.applyValueOptions(this,this.opts)||this.opts.initSelection.call(null,i,function(e){null!=e&&0!==e.length&&(s._updateSelection(e),s.close(),s._clearSearch())})}},_focus:function(){this.close(),this.search.focus()},_updateSelection:function(e){var i=[],s=[],o=this;t(e).each(function(){i.indexOf(o.id(this))<0&&(i.push(o.id(this)),s.push(this))}),s&&s.length>0&&("oj-combobox"===this._classNm||"oj-select"===this._classNm)&&("init"!==this.opts.fetchType&&this._skipSetValueOptions?v.isDataProvider(this.opts.options)&&(s=v.findOptions(this.opts.valueOptions,i)):this.setValOpts(s)),this.selection.find("."+this._classNm+"-selected-choice").remove(),this.selection.find(".oj-select-default").remove(),this._updateAriaDescribedBy(null,!0),t(s).each(function(){o._addSelectedChoice(this)}),this.currentItem=s,this.currentValue=i,o._postprocessResults()},_updateAriaDescribedBy:function(e,t){var i=this._contentElement,s=this.selection,o=i.attr("aria-describedby")||"",n=!1,a=o;t&&(this._ariaDescribedByAdded.forEach(function(e){a=a.replace(e,""),n=!0}),a=a.trim().replace(/\s\s+/g," "),this._ariaDescribedByAdded=[]),e&&(a=(a+" "+e).trim(),this._ariaDescribedByAdded.push(e),n=!0),n&&(i.attr("aria-describedby",a),"oj-combobox"===this._classNm&&s.attr("aria-describedby",a))},_onSelect:function(e,i,s){if(!this._triggerSelect(e))return!1;var o;i&&i.trigger&&(o={optionMetadata:{trigger:i.trigger}});var n=this.getVal()?this.getVal().slice(0):[],a=this.getValOpts()?this.getValOpts().slice(0):[],l=a.slice(0),r="oj-combobox"===this._classNm||"oj-select"===this._classNm;this.ojContext.isValid()||(n=this.currentValue.slice(0),l=this.currentItem.slice(0));var h,c,u=this,d=[],p=[],f=v.getOpts(this.ojContext),m=!!f&&v.isDataProvider(f.options),_=null,b=null,g=this.hasUncommittedValue;if(m)for(var y=0;y<l.length;y++)c=l[y],h=this.id(c),l[y]=v.findOptionFromResult(u,h,c),d.push(l[y].data),p.push(l[y].metadata);if(h=this.id(e),t(e).each(function(t){n.indexOf(h)<0&&""!==h&&(n.push(h),r&&(c=Array.isArray(e)?v.findOptionFromResult(u,h,e[t]):v.findOptionFromResult(u,h,e),l.push(c),m&&(d.push(c.data),p.push(c.metadata))))}),r&&(this._skipSetValueOptions=!0,this.setValOpts(l)),o=v.getContextWithExtraData(o,f,d,p),this.hasUncommittedValue=!1,(_=this.setVal(n,s,o))instanceof Promise)b=_.then(this._bind(function(t){return this._afterOnSelectSetVal(t,e,a,g),t}));else{var j=!1!==_;this._afterOnSelectSetVal(j,e,a,g),b=_}return this.opts.closeOnSelect&&this.close(s),i&&i.trigger===v.ValueChangeTriggerTypes.BLUR||"ojcombobox"!==this._elemNm||this._focusSearch(),b},_afterOnSelectSetVal:function(e,t,i,s){var o="oj-combobox"===this._classNm||"oj-select"===this._classNm;!1===e&&(this.hasUncommittedValue=s,o&&!this.ojContext.isValid()&&this.setValOpts(i)),this._skipSetValueOptions=!1,!this.select&&this.opts.closeOnSelect||this._postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect&&this.ojContext.isValid()&&this._resetSearchWidth()},_cancel:function(e){this.close(e),"ojcombobox"===this._elemNm&&this._focusSearch()},_addSelectedChoice:function(e){var i,s=!e.locked,o=t("<li class='"+this._classNm+"-selected-choice'>    <div></div>    <a href='#' onclick='return false;' role='button' aria-label='remove' class='"+this._classNm+"-clear-entry       oj-component-icon oj-clickable-icon-nocontext "+this._classNm+"-clear-entry-icon' tabindex='-1'>    </a></li>"),n=t("<li class='"+this._classNm+"-selected-choice "+this._classNm+"-locked'><div></div></li>"),a=s?o:n;if(void 0!==(i=this.opts.formatSelection(e))){var l=this._classNm+"-selected-choice-label-"+v.nextUid();a.find("div").addClass(this._classNm+"-selected-choice-label").text(i).attr("id",l),a.find("."+this._classNm+"-clear-entry").attr("aria-label",i+" remove"),a.attr("valueText",i),this._updateAriaDescribedBy(l,!1)}s&&a.find("."+this._classNm+"-clear-entry").on("mousedown",v.killEvent).on("click dblclick",this._bind(function(e){this._isInterfaceEnabled()&&(t(e.target).closest("."+this._classNm+"-selected-choice").fadeOut("fast",this._bind(function(){this._unselect(t(e.target),e),this.selection.find("."+this._classNm+"-selected-choice.oj-focus").removeClass("oj-focus"),this.close(e),"ojcombobox"===this._elemNm&&this._focusSearch()})).dequeue(),v.killEvent(e),e.stopPropagation())})),a.data(this._elemNm,e),"ojcombobox"===this._elemNm?a.insertBefore(this.searchContainer):this.selection.append(a)},_syncValueOptions:function(t,i,s){var o,n=[],a=[],l=[],r=v.getOpts(this.ojContext),h=!!r&&v.isDataProvider(r.options);if(i&&s){for(var c=0;c<i.length;c++)for(var u=0;u<s.length;u++){var d=s[u];e.Object.compareValues(d.value,i[c])&&(h&&(o=this.id(d),d=v.findOptionFromResult(this,o,d),a.push(d.data),l.push(d.metadata)),n.push(d))}v.setValueOptions(t,n),this.currentItem=n}return v.getContextWithExtraData(null,r,a,l)},_unselect:function(e,t){var i=this.getVal()?this.getVal().slice(0):[],s=e.closest("."+this._classNm+"-selected-choice");if(0===s.length)throw new Error("Invalid argument: "+s+". Must be ."+this._classNm+"-selected-choice");var o=s.data(this._elemNm);if(o){var n,a,l;this.ojContext.isValid()?n=(this.getValOpts()||[]).slice(0):(i=this.currentValue.slice(0),n=this.currentItem.slice(0));var r=i.indexOf(this.id(o));-1!==r&&(i.splice(r,1),a=this._syncValueOptions(this.ojContext,i,n),this._skipSetValueOptions=!0,(l=this.setVal(i,t,a))instanceof Promise?l.then(this._bind(function(e){this._afterUnselectSetValue(e,s)})):this._afterUnselectSetValue(l,s))}},_afterUnselectSetValue:function(e,t){this._skipSetValueOptions=!1,!1!==e&&this.select&&this._postprocessResults(),t.remove()},_postprocessResults:function(e,t,i){if(this.ojContext.isValid()){var s=this.getVal(),o=this.results.find(".oj-listbox-result"),n=this.results.find(".oj-listbox-result-with-children"),a=this;v.each2(o,function(e,t){var i=a.id(t.data(a._elemNm));s&&s.indexOf(i)>=0&&(t.addClass("oj-selected"),t.find(".oj-listbox-result-selectable").addClass("oj-selected"))}),v.each2(n,function(e,t){t.is(".oj-listbox-result-selectable")||0!==t.find(".oj-listbox-result-selectable:not(.oj-selected)").length||t.addClass("oj-selected")}),this._processAriaLabelForHierarchy(),!o.filter(".oj-listbox-result:not(.oj-selected)").length>0&&"oj-select"!==this._classNm&&this.close(null,!0)}},_isDataSelected:function(e){var t=this.getVal();if(!t||0===t.length)return!1;for(var i=e.results,s=0;s<i.length;s++)if(-1===t.indexOf(this.id(i[s])))return!1;return!0},_resetSearchWidth:function(){},setVal:function(t,i,s){var o=[],n=t;this.valHasChanged(),"string"==typeof t&&(n=v.splitVal(t,this.opts.separator));for(var a=0;a<n.length;a++)o.indexOf(n[a])<0&&o.push(n[a]);var l={doValueChangeCheck:!1};if(s&&(l._context=s),!this._skipSetValueOptions){var r,h=v.getLastQueryResult(this);h&&(r=v.findOptions(h,n)),r&&r.length&&v.setValueOptions(this.ojContext,r)}var c=this.getVal(),u=null;return e.Object.compareValues(c,o)&&!v.hasInvalidComponentMessages(this.ojContext)||(u=this.ojContext._SetValue(o,i,l)),u instanceof Promise?u.then(this._bind(function(e){this._afterSetValue(o)})):(this._afterSetValue(o),u)},_afterSetValue:function(e){(this.ojContext.isValid()||0===e.length)&&(this.currentValue=e),this.search.attr("aria-activedescendant",this.opts.element.attr("id"))},_getSelectionData:function(){var e=null,i=this,s=null,o=this.container.find("."+this._classNm+"-selected-choice");return o&&(e=[],o.each(function(){null!=(s=t(this).data(i._elemNm))&&e.push(s)})),e},_clearSearchOnBlur:function(){!this._opened()&&"oj-select"!==this._classNm&&this.ojContext.isValid()&&this._clearSearch()},_GetContentWrapper:function(){return this.container[0].querySelector(".oj-text-field-container")}}),x=v.clazz(j,{_elemNm:"ojcombobox",_classNm:"oj-combobox",_COMPONENT_CLASSLIST:"oj-combobox oj-combobox-multi oj-component",_CreateContentElements:function(){return t(["<div class='oj-text-field-container' role='presentation'> ","<ul class='oj-combobox-choices'>","  <li class='oj-combobox-search-field'><span class='oj-helper-hidden'>&nbsp;</span>","    <input type='text' role='combobox' aria-expanded='false' aria-autocomplete='list' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='oj-combobox-input'>","  </li>","</ul>","</div>","<div class='oj-combobox-description oj-helper-hidden-accessible'></div>","<div class='oj-listbox-drop oj-listbox-drop-multi'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join(""))},_opening:function(e,t){this._resizeSearch(),x.superclass._opening.apply(this,arguments),this._focusSearch(),t||this._updateResults(!0),this.search.focus()},_clearSearch:function(){var e=this._getPlaceholder(),t=this._getMaxSearchWidth();null!=e&&v.isValueForPlaceholder(!0,this.getVal())&&v.isValueOptionsForPlaceholder(!0,this.getValOpts())?(this.search.attr("placeholder",e),this.search.val("").width(t>0?t:this.container.css("width")),this.searchContainer.width("100%")):(this.search.attr("placeholder",""),this.search.val("").width(10),this.searchContainer.width("auto"))},_resetSearchWidth:function(){this.search.width(10)},_getMaxSearchWidth:function(){return this.selection.width()-v.getSideBorderPadding(this.search)},_textWidth:function(e){var i=document.createElement("span"),s=document.createTextNode(e);i.style.display="none",i.appendChild(s),t("body").append(i);var o=t("body").find("span:last").width();return t("body").find("span:last").remove(),o},_resizeSearch:function(){var e,t,i,s,o=v.getSideBorderPadding(this.search);e=this._textWidth(this.search.val())+10,t=this.search.offset().left,(s=(i=this.selection.width())-(t-this.selection.offset().left)-o)<e&&(s=i-o),s<40&&(s=i-o),s<=0&&(s=e),this.search.width(Math.floor(s))}}),C=v.clazz(j,{_elemNm:"ojselect",_classNm:"oj-select",_userTyping:!1,_COMPONENT_CLASSLIST:"oj-select oj-select-multi oj-component",_CreateContentElements:function(){return t(["<div class='oj-text-field-container' role='presentation'>","<ul class='oj-select-choices' tabindex='0' role='combobox' ","  aria-autocomplete='none' aria-expanded='false'>","</ul>","</div>","<div class='oj-select-description oj-helper-hidden-accessible'></div>","<div class='oj-listbox-drop' role='dialog'>","  <div class='oj-listbox-search-wrapper'>","  <div class='oj-listbox-search'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","           spellcheck='false' class='oj-listbox-input' title='Search field' ","           role='combobox' aria-expanded='false' aria-autocomplete='list' />","    <span class='oj-listbox-spyglass-box'>","      <span class='oj-component-icon oj-listbox-search-icon' role='presentation'>","       <b role='presentation'></b></span>","    </span>","  </div>","  </div>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join(""))},_enable:function(e){if(C.superclass._enable.apply(this,arguments),this._enabled){var t=this.elementTabIndex?this.elementTabIndex:"0";this.selection.attr("tabindex",t)}else this.selection.attr("tabindex","-1")},_containerKeydownHandler:function(e){C.superclass._containerKeydownHandler.apply(this,arguments),this._userTyping&&!this._opened()&&this.open(e)},_opening:function(e,t){C.superclass._opening.apply(this,arguments),this._showDropDown();var i=v.getSearchText(e);this._showSearchBox(i),t||(i?this._updateResults():this._updateResults(!0))},close:function(e){!0===this._userTyping&&(this._userTyping=!1);var t=e?e.originalEvent:null,i=t instanceof MouseEvent||t instanceof FocusEvent,s=e&&(!i||e.target===this.selection||e.target===this.search||this.dropdown.has(e.target).length>0);C.superclass.close.apply(this,arguments),this.ojContext.hasAfterToggleHandlerAddedFocusClass&&!s&&(this.ojContext._getRootElement().classList.remove("oj-focus"),this.ojContext.hasAfterToggleHandlerAddedFocusClass=!1),s&&v._focus(this,this.selection)},_clearSearch:function(){var e=this._getPlaceholder();if(null!=e&&v.isValueForPlaceholder(!0,this.getVal())&&v.isValueOptionsForPlaceholder(!0,this.getValOpts())){var i=t("<li></li>");i.addClass("oj-select-default"),i.text(e),this.selection.append(i)}}}),O=v.clazz(g,{_elemNm:"ojinputsearch",_classNm:"oj-inputsearch",_COMPONENT_CLASSLIST:"oj-inputsearch oj-component",_getDropdownPositionElement:function(){return this.container.children().first()},_CreateContentElements:function(){var e=t(["<div class='oj-inputsearch-choice' tabindex='-1' role='presentation'>","   <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","       spellcheck='false' class='oj-inputsearch-input' role='combobox' aria-expanded='false' aria-autocomplete='list' />","   <a class='oj-inputsearch-search-button oj-inputsearch-search-icon oj-component-icon oj-clickable-icon-nocontext'","       role='button' aria-label='search'></a>","</div>","<div class='oj-listbox-drop' role='presentation'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div role='region' class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join("")),i=e.find(".oj-inputsearch-search-button");return this._attachSearchIconClickHandler(i),e},_attachSearchIconClickHandler:function(e){var t=this;e.on("click",function(e){if(t._isInterfaceEnabled()){if(t.opts.manageNewEntry){var i=t.search.val(),s=t.opts.manageNewEntry(i),o={trigger:v.ValueChangeTriggerTypes.SEARCH_ICON_CLICKED},n=t.selection.data(t._elemNm);!n&&""!==i||n&&n.label!==i||!t.ojContext.isValid()&&i!==t._previousDisplayValue?(t._onSelect(s,o,e),t._triggerUpdateEvent(s,o,e)):(n&&n.label===i&&(s=n),t._triggerUpdateEvent(s,o,e))}return!1}}).on("mousedown",function(e){return e.stopPropagation(),!1})},_enable:function(e){O.superclass._enable.apply(this,arguments),this._enabled?this.container.find(".oj-inputsearch-search-button").removeClass("oj-disabled"):this.container.find(".oj-inputsearch-search-button").addClass("oj-disabled")},_triggerUpdateEvent:function(e,t,i){var s;t&&(s=t.trigger);var o={_context:{optionMetadata:{trigger:s}}},n=this.id(e);if(n&&0!==n.length||(n=e.label?e.label:[]),void 0!==this.ojContext._AsyncValidate(n,i,o)&&this.ojContext.isValid()){"string"==typeof n&&(n=[n]);var a={value:n,optionMetadata:{trigger:s}};this.ojContext._trigger("update",i,a)}},_prepareOpts:function(e){var t=O.superclass._prepareOpts.apply(this,arguments);return t.highlightTermInOptions=function(){return!0},t}});e.__registerWidget("oj.ojCombobox",t.oj.editableValue,{defaultElement:"<input>",widgetEventPrefix:"oj",options:{asyncValidators:[],converter:null,filterOnOpen:"none",labelledBy:null,placeholder:null,options:null,optionsKeys:{},pickerAttributes:null,optionRenderer:null,minLength:0,maximumResultCount:15,rawValue:null,required:!1,readOnly:!1,validators:[],valueOption:null,valueOptions:null,valueUpdated:null},widget:function(){return this.combobox.container},_ComponentCreate:function(){this._super(),v.wrapDataProviderIfNeeded(this,null),this._setup()},_AfterCreate:function(){if(this._super(),this._IsCustomElement()){this._initInputIdLabelForConnection(this._GetContentElement()[0],this.OuterWrapper.id,this.options.labelledBy);var e=this._getRootElement();this._focusable({element:e,applyHighlight:!1,afterToggle:this._handleAfterFocusToggle.bind(this,e)}),this.combobox&&"none"===this.options.labelEdge&&this.combobox.updateAriaLabelIfNeeded()}},_handleAfterFocusToggle:function(e,t){"focusout"===t&&(this._getDropdown()&&e.classList.add("oj-focus"))},_InitOptions:function(t,i){if(this._super(t,i),e.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],i,this),this.multiple=this._IsCustomElement()?"OJ-COMBOBOX-MANY"===this.OuterWrapper.nodeName:this.options.multiple,void 0===this.options.value)this._IsCustomElement()||(this.options.value=void 0!==this.element.attr("value")?v.splitVal(this.element.val(),","):null);else{var s=this.options.value;Array.isArray(s)?this._IsCustomElement()||(s=s.slice(0)):"string"==typeof s&&(!0===this.multiple?s=v.splitVal(s,","):this._IsCustomElement()||(s=[s])),this.options.value=s}},_IsRequired:function(){return this.options.required},_labelledByUpdatedForInputComp:function(t,i){if(e.EditableValueUtils._labelledByUpdatedForInputComp.apply(this,arguments),null!=this.combobox.results){var s=this.uuid+"_Label",o=e.EditableValueUtils._getOjLabelAriaLabelledBy(t,s);this.combobox.results.attr("aria-labelledby",o)}},_initInputIdLabelForConnection:e.EditableValueUtils._initInputIdLabelForConnection,_linkLabelForInputComp:e.EditableValueUtils._linkLabelForInputComp,_createOrUpdateReadonlyDiv:e.EditableValueUtils._createOrUpdateReadonlyDiv,_AfterSetOptionRequired:e.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:e.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionAsyncValidators:e.EditableValueUtils._AfterSetOptionAsyncValidators,_AfterSetOptionConverter:e.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:e.EditableValueUtils._ResetConverter,_GetConverter:e.EditableValueUtils._GetConverter,_GetNormalizedValidatorsFromOption:e.EditableValueUtils._GetNormalizedValidatorsFromOption,_GetNormalizedAsyncValidatorsFromOption:e.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption,_setup:function(){var e={},i=this.multiple;e.element=this.element,e.ojContext=this,v.isValueForPlaceholder(i,this.options.value)&&(i?this.options.valueOptions=v.getValueOptionsForPlaceholder(this,this.options.valueOptions):this.options.valueOption=v.getValueOptionsForPlaceholder(this,this.options.valueOption)),e=t.extend(this.options,e),this.combobox=i?new x:new g,this.combobox._init(e),this._refreshRequired(this.options.required),this._resolveValueOptionsLater=v.mergeValueAndValueOptions(this)},_refreshRequired:e.EditableValueUtils._refreshRequired,_AriaRequiredUnsupported:function(){return!1},_destroy:function(){this.combobox._destroy(),this._super()},_IsTextFieldComponent:function(){return!0},_GetContentWrapper:function(){if(this._IsCustomElement())return this.combobox._GetContentWrapper()},refresh:function(){this._super(),this.combobox._destroy(),this._setup(),this._SetRootAttributes(),this._initComponentMessaging()},_setOption:function(e,t,i){var s=t,o=this.multiple;if("value"===e&&(Array.isArray(s)?this._IsCustomElement()||(s=s.slice(0)):"string"==typeof s&&(!0===o?s=v.splitVal(s,","):this._IsCustomElement()||(s=[s])),i&&i._context&&i._context.optionMetadata?this.combobox.valueChangeTrigger=i._context.optionMetadata.trigger:this.combobox.valueChangeTrigger=null,"string"==typeof this.options.placeholder&&(null==s||s&&0===s.length||this._IsCustomElement()&&v.isValueForPlaceholder(o,s))))return v.setValueOptions(this,v.getFixupValueOptionsForPlaceholder(o)),void this._super(e,s,i);if("options"===e?(v.removeDataProviderEventListeners(this),v.clearDataProviderWrapper(this)):"optionsKeys"===e?v.clearDataProviderWrapper(this):"valueOption"===e&&!0!==o?(s=v.getValueOptionsForPlaceholder(this,s),this.combobox.opts.valueOption=s):"valueOptions"===e&&!0===o&&(s=v.getValueOptionsForPlaceholder(this,s),this.combobox.opts.valueOptions=s),this._super(e,s,i),"valueOption"===e&&!0!==o)v.syncValueWithValueOption(this,s,this.options.value,!1);else if("valueOptions"===e&&!0===o)v.syncValueWithValueOptions(this,s,this.options.value,!1);else if("value"===e)v.updateValueOptions(this.combobox);else if("options"===e)v.isDataProvider(s)&&(v.wrapDataProviderIfNeeded(this,this.combobox?this.combobox.opts:null),v.addDataProviderEventListeners(this)),this.combobox.opts.options=s,this.combobox.opts=this.combobox._prepareOpts(this.combobox.opts),(this.combobox.isSearchFocused&&this.combobox.shouldReopenOnNewData||this.combobox._opened())&&this.combobox._updateResults(!1,!0);else if("optionsKeys"===e)v.wrapDataProviderIfNeeded(this,this.combobox?this.combobox.opts:null);else if("disabled"===e)s?this.combobox._disable():this.combobox._enable();else if("readOnly"===e)this.combobox.applyReadonlyState();else if("labelledBy"===e){if(this.options.labelledBy){var n=this._GetContentElement()[0].id;this._labelledByUpdatedForInputComp(this.options.labelledBy,n)}}else"maximumResultCount"===e&&(this.combobox.opts.maximumResultCount=s)},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e);break;case"converter":this._AfterSetOptionConverter(e);break;case"asyncValidators":this._AfterSetOptionAsyncValidators(e);break;case"labelHint":case"labelEdge":this.combobox&&this.combobox.updateAriaLabelIfNeeded()}},_NotifyDetached:function(){this._superApply(arguments),this.combobox.close()},_NotifyHidden:function(){this._superApply(arguments),this.combobox.close()},_VerifyConnectedForSetup:function(){return!0},_SetDisplayValue:function(e){v.applyValueOptions(this.combobox,this.options)?this.multiple&&this.combobox._clearSearch():this.combobox._initSelection(),this._resolveValueOptionsLater=!1},_GetDisplayValue:function(){var e=null,t=v.getOpts(this),i=this.combobox._getSelectionData();if(null!=i)if(this.multiple)if(e=[],Array.isArray(i))for(var s=0;s<i.length;s++)e.push(t.formatSelection(i[s]));else e.push(t.formatSelection(i));else e=Array.isArray(i)&&i.length>0?t.formatSelection(i[0]):t.formatSelection(i);else e=this._super();return e},_SetPlaceholder:function(e){this.combobox&&(this.combobox.opts.placeholder=e,this.combobox._setPlaceholder&&this.combobox._setPlaceholder())},_parseValue:function(e){var t,i=e;if("string"==typeof i&&(!0===this.multiple?i=v.splitVal(i,","):this._IsCustomElement()||(i=[i])),Array.isArray(i)){t=[];for(var s=0;s<i.length;s++){var o=this._super(i[s]);t.push(o)}}else t=this._super(i);return t},_GetMessagingLauncherElement:function(){return this.combobox.search},_NotifyContextMenuGesture:function(e,t,i){var s=this._GetMessagingLauncherElement();this._OpenContextMenu(t,i,{launcher:s})},_GetContentElement:function(){return this.combobox.search},_GetAriaLabelElement:function(){return this._GetContentElement()[0]},_GetDefaultStyleClass:function(){return"oj-combobox"},_SetLoading:function(){this._super(),this.combobox.applyReadonlyState()},_ClearLoading:function(){this._super(),this.combobox.applyReadonlyState()},validate:function(){var e,t,i=this._getDisplayValueForSetValue(),s=this.combobox,o=i;if(s.hasUncommittedValue){var n=null;if(this.multiple){var a=i[i.length-1],l=(s.getVal()||[]).slice(0),r=this._getValueOptionCandidateFromRawValue(a),h=s.id(r),c=(s.getValOpts()||[]).slice(0);n=c.slice(0),-1===l.indexOf(h)&&(n.push(r),l.push(h),e=c),o=l}else n=this._getValueOptionCandidateFromRawValue(i),o=s.id(n);s._skipSetValueOptions=!0,s.setValOpts(n),s.hasUncommittedValue=!1}return t=this._SetValue(o,null,this._VALIDATE_METHOD_OPTIONS),this._IsCustomElement()&&(t instanceof Promise?t=t.then(function(t){return s._skipSetValueOptions=!1,!t&&e&&(s.setValOpts(e),s.hasUncommittedValue=!0),Promise.resolve(t?"valid":"invalid")}):(s._skipSetValueOptions=!1,!t&&e&&(s.setValOpts(e),s.hasUncommittedValue=!0),t=Promise.resolve(t?"valid":"invalid"))),t},_SetValue:function(t,i,s){var o=this._super(t,i,s);(!o||o instanceof Promise)&&((this._IsCustomElement()?v.isValueForPlaceholder(this.multiple,t):null==t||""===t||e.Object.compareValues(t,[]))||s===this._VALIDATE_METHOD_OPTIONS||this._SetDisplayValue(t));return o},_CanSetValue:function(){return!!this.forceCanSetValue||this._super()},_getValueOptionCandidateFromRawValue:function(e){var t=this.combobox.opts.manageNewEntry(e);return v.findOptionFromResult(this.combobox,e,t)},_getDisplayValueForSetValue:function(){var e=null,t=null,i=this.combobox.hasUncommittedValue;if(!0!==this.multiple)e=i?this.combobox.getRawValue():this.combobox.getValOpts()?this.combobox.getValOpts().value:null,t=this._IsCustomElement()?e:null==e||""===e?[]:[e];else{var s=this.combobox.currentValue?this.combobox.currentValue.slice(0):[];null==(e=this.combobox.search.val())||""===e?t=s:(s.push(e),t=s)}return t},_getDropdown:function(){if(this.combobox&&this.combobox._opened())for(var e=t(".oj-listbox-drop"),i=0;i<e.length;i++)if("oj-listbox-drop"===t(e[i]).attr("id")&&t(e[i]).attr("data-oj-containerid")===this.combobox.containerId)return t(e[i]);return null},_findItem:function(e,i){for(var s=0;s<e.length;s++)if(t(e[s]).data("ojcombobox").value===i)return e[s];return null},getNodeBySubId:function(e){var i,s=null;if(null==e)return this.combobox.container?this.combobox.container[0]:null;if(!(s=this._super(e))){"oj-combobox-drop"===(i=e.subId)&&(i="oj-listbox-drop"),"oj-combobox-results"===i&&(i="oj-listbox-results"),"oj-combobox-selection"===i&&(i="oj-combobox-selected-choice");var o=this._getDropdown();switch(i){case"oj-combobox-input":case"oj-combobox-arrow":s=this.widget().find("."+i)[0];break;case"oj-listitem":if(o){var n=o.find(".oj-listbox-result");s=this._findItem(n,e.value)}break;case"oj-combobox-remove":var a=this.widget().find(".oj-combobox-selected-choice"),l=this._findItem(a,e.value);s=l?t(l).find(".oj-combobox-clear-entry-icon")[0]:null;break;case"oj-listbox-drop":o&&(s=o[0]);break;case"oj-listbox-results":o&&(s=o.find("."+i)[0]);break;case"oj-combobox-selected-choice":s=this.widget().find("."+i).toArray()}}return s||null},getSubIdByNode:function(e){var i=null;if(null!=e){var s=t(e);i=s.hasClass("oj-combobox-input")?{subId:"oj-combobox-input"}:s.hasClass("oj-combobox-arrow")?{subId:"oj-combobox-arrow"}:s.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:s.data("ojcombobox").value}:s.hasClass("oj-combobox-clear-entry-icon")?{subId:"oj-combobox-remove",value:s.closest(".oj-combobox-selected-choice").data("ojcombobox").value}:this._super(e)}return i}}),e.__registerWidget("oj.ojInputSearch",t.oj.editableValue,{defaultElement:"<input>",widgetEventPrefix:"oj",options:{placeholder:void 0,required:!1,list:void 0,options:null,optionsKeys:null,pickerAttributes:null,optionRenderer:null,minLength:0,beforeExpand:null,rawValue:void 0,optionChange:null,update:null,validators:void 0},widget:function(){return this.inputSearch.container},_ComponentCreate:function(){this._super(),this._setup()},_InitOptions:function(t,i){if(this._super(t,i),e.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],i,this),void 0===this.options.value)this.options.value=void 0!==this.element.attr("value")?v.splitVal(this.element.val(),","):null;else{var s=this.options.value;Array.isArray(s)?s=s.slice(0):"string"==typeof s&&(s=[s]),this.options.value=s}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e)}},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:e.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:e.EditableValueUtils._AfterSetOptionValidators,_refreshRequired:e.EditableValueUtils._refreshRequired,_GetNormalizedValidatorsFromOption:e.EditableValueUtils._GetNormalizedValidatorsFromOption,_AriaRequiredUnsupported:function(){return!1},_setup:function(){var e={};e.element=this.element,e.ojContext=this,e.inputSearch=!0,e=t.extend(this.options,e),this.inputSearch=new O,this.inputSearch._init(e),this._refreshRequired(this.options.required)},_destroy:function(){this.inputSearch._destroy(),this._super()},refresh:function(){this._super(),this.inputSearch._destroy(),this._setup(),this._SetRootAttributes()},_setOption:function(e,t,i){var s=t;"value"===e&&(null!=s&&(Array.isArray(s)?s=s.slice(0):"string"==typeof s?s=[s]:r.error("ojInputSearch value has to be an array of string or a string.")),i&&i._context&&i._context.optionMetadata?this.inputSearch.valueChangeTrigger=i._context.optionMetadata.trigger:this.inputSearch.valueChangeTrigger=null),this._super(e,s,i),"options"===e&&(this.inputSearch.opts.options=s,this.inputSearch.opts=this.inputSearch._prepareOpts(this.inputSearch.opts)),"disabled"===e&&(s?this.inputSearch._disable():this.inputSearch._enable())},_NotifyDetached:function(){this._superApply(arguments),this.inputSearch.close()},_NotifyHidden:function(){this._superApply(arguments),this.inputSearch.close()},_SetDisplayValue:function(e){this.inputSearch._initSelection()},_SetPlaceholder:function(e){this.inputSearch&&(this.inputSearch.opts.placeholder=e,this.inputSearch._setPlaceholder&&this.inputSearch._setPlaceholder())},validate:function(){var e=this.inputSearch.search.val(),t=null,i=[];return this.isValid()&&(i=this.inputSearch.getVal()),t=null==e||""===e?i:[e],this._SetValue(t,null,this._VALIDATE_METHOD_OPTIONS)},_parseValue:function(e){var t,i=[];if(null==e)return i;if(Array.isArray(e))for(var s=0;s<e.length;s++)t=this._super(e[s]),i.push(t.toString());else"string"==typeof e?(t=this._super(e),i.push(t.toString())):r.error("ojInputSearch value has to be an array of string or a string.");return i},_GetMessagingLauncherElement:function(){return this.inputSearch.search},_GetContentElement:function(){return this.inputSearch.search},_GetDefaultStyleClass:function(){return"oj-inputsearch"},_getDropdown:function(){if(this.inputSearch&&this.inputSearch._opened())for(var e=t(".oj-listbox-drop"),i=0;i<e.length;i++)if("oj-listbox-drop"===t(e[i]).attr("id")&&t(e[i]).attr("data-oj-containerid")===this.inputSearch.containerId)return t(e[i]);return null},expand:function(){this.inputSearch.open()},collapse:function(){this.inputSearch.close()},getNodeBySubId:function(e){var t,i=null;if(null===e)return this.inputSearch.container?this.inputSearch.container[0]:null;if(!(i=this._super(e)))switch("oj-inputsearch-search"===(t=e.subId)&&(t="oj-inputsearch-search-button"),t){case"oj-inputsearch-input":case"oj-inputsearch-search-button":i=this.widget().find("."+t)[0];break;case"oj-listitem":var s=this._getDropdown();if(s){var o=s.find(".oj-listbox-result");i=this.inputSearch._findItem(o,e.value)}}return i||null},getSubIdByNode:function(e){var i=null;if(null!=e){var s=t(e);i=s.hasClass("oj-inputsearch-input")?{subId:"oj-inputsearch-input"}:s.hasClass("oj-inputsearch-search-button")?{subId:"oj-inputsearch-search"}:s.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:s.data("ojinputsearch").value}:this._super(e)}return i}}),e.__registerWidget("oj.ojSelect",t.oj.editableValue,{defaultElement:"<select>",widgetEventPrefix:"oj",options:{labelledBy:null,maximumResultCount:15,minimumResultsForSearch:15,placeholder:null,optionRenderer:null,options:null,optionsKeys:{},pickerAttributes:null,required:!1,readOnly:!1,renderMode:"jet",valueOption:null,valueOptions:null},widget:function(){return this.select?this.select.container:this.element.parent().parent()},_ComponentCreate:function(){this._super(),v.wrapDataProviderIfNeeded(this,null),this._setup()},_AfterCreate:function(){var t;if(this._super(),this._IsCustomElement()){if(this.options.labelledBy){var i=this.uuid+"_Label";!(t=e.EditableValueUtils._getOjLabelAriaLabelledBy(this.options.labelledBy,i))||this.multiple&&v.isReadonly(this)||this._GetContentElement().attr("aria-labelledby",t),this._IsRequired()&&this.options.translations.required&&(this._implicitReqValidator=null,this._getImplicitRequiredValidator())}var s=this._getRootElement();this._focusable({element:s,applyHighlight:!1,afterToggle:this._handleAfterFocusToggle.bind(this,s)}),this.select&&"none"===this.options.labelEdge&&this.select.updateAriaLabelIfNeeded()}},_handleAfterFocusToggle:function(e,t){(this.hasAfterToggleHandlerAddedFocusClass=!1,"focusout"===t)&&(this._getDropdown()&&(e.classList.add("oj-focus"),this.hasAfterToggleHandlerAddedFocusClass=!0))},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e);break;case"labelHint":case"labelEdge":this.select&&this.select.updateAriaLabelIfNeeded()}},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:e.EditableValueUtils._AfterSetOptionRequired,_nativeSetDisabled:function(e){e?(this.element.attr("disabled",""),this.element.parent().parent().addClass("oj-disabled").removeClass("oj-enabled")):(this.element.removeAttr("disabled"),this.element.parent().parent().removeClass("oj-disabled").addClass("oj-enabled"))},_nativeChangeHandler:function(e){var i=[],s=[],o=!this._IsRequired()&&this._HasPlaceholderSet();t(e.target).find("option").each(function(){this.selected&&(this.value||o&&""===this.value)&&(i.push(this.value),s.push({value:this.value,label:this.text}))}),v.duringFetchByKey(this.element)&&v.setValueChanged(this,!0),this._IsCustomElement()&&!0!==this.multiple?(this._SetValue(i[0],e,{doValueChangeCheck:!1,_context:{internalSet:!0}}),v.setValueOptions(this,s[0])):(this._SetValue(i,e,{doValueChangeCheck:!1,_context:{internalSet:!0}}),v.setValueOptions(this,s))},_nativeQueryCallback:function(e){if(e){var t=this.element;v.arrayPopulateResults(t,e,this._formatValue.bind(this),v.isDataProvider(this.options.options)?null:this.options.optionsKeys),t.addClass(v.GENERATED_OPTIONS_SELECTOR)}},_nativeSetSelected:function(e){var t=null;if(e)t=e;else if(this._HasPlaceholderSet()&&(this.options.required&&(t=this._nativeFindFirstEnabledOptionValue()),this._SetPlaceholder(this.options.placeholder)),null===t){var i=this._nativeFindFirstEnabledOption();t=this._nativeFindFirstEnabledOptionValue(i),v.setValueOptions(this,{value:t,label:i.text()})}this._setInitialSelectedValue(t)},_nativeFetchFromDataProvider:function(){var e=this;v.fetchFirstBlockFromDataProvider(this.element,e.options).then(function(t){if(e._nativeQueryCallback(t),t.length){var i=e.options.value;i?v.validateFromDataProvider(e.element,e.options,i).then(function(t){var i,s;if(v.isValueChanged(e)&&!1===e.multiple)v.setValueChanged(e,void 0);else if(v.isValueChanged(e)&&e.multiple&&(s=e.options.valueOptions,i=e.options.value,v.setValueChanged(e,void 0)),t){var o=t.valueOptions;Array.isArray(o)&&o.length&&v.setValueOptions(e,s?o.concat(s):o);var n=t.value;if(Array.isArray(n)&&n.length){i=i?n.concat(i):n;var a=e.multiple?i:n[0];e._nativeSetSelected(a),e.multiple&&1!==a.length||(e.element[0].value=a)}}}):e._nativeSetSelected()}})},_nativeSetup:function(){var e=this.element;if(this._IsCustomElement()?t(this.OuterWrapper).addClass("oj-select-native oj-component oj-select oj-form-control"):e.wrap("<div>").parent().addClass("oj-select-native oj-component oj-select oj-form-control"),e.addClass("oj-select-select oj-component-initnode"),e.wrap('<div class="oj-text-field-container" role="presentation">'),this.multiple?(e[0].multiple||(e[0].multiple=!0),e.parent().prepend("<a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-multiple-open-icon' role='presentation'></a>")):e.parent().prepend("<a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role='presentation'></a>"),this._nativeSetDisabled(this.options.disabled),this.options.list)v.listPopulateResults(e,t("#"+this.options.list).children(),this._formatValue.bind(this)),e.addClass(v.GENERATED_OPTIONS_SELECTOR);else if(this.options.options)v.getDataProvider(this.options)?this._nativeFetchFromDataProvider():this._nativeQueryCallback(this.options.options);else if(this._IsCustomElement()){var i=e.children();1===i.length&&i.hasClass("oj-listbox-placeholder")||(v.ojOptionPopulateResults(e,i,this._formatValue.bind(this)),e.addClass(v.GENERATED_OPTIONS_SELECTOR))}this._focusable({element:e,applyHighlight:!0}),this.options.value||this._HasPlaceholderSet()||v.getDataProvider(this.options)||this._setInitialSelectedValue(this._nativeFindFirstEnabledOptionValue()),e.change(this._nativeChangeHandler.bind(this)),v.addDataProviderEventListeners(this),"top"===this._ResolveLabelEdgeStrategyType()&&this._initComponentMessaging()},_ResolveLabelEdgeStrategyType:function(){var e=this._superApply(arguments);return this._IsCustomElement()&&this._isNative()&&"inside"===e&&(e="top"),e},_jetSetup:function(){var e={};e.element=this.element,e.ojContext=this,e=t.extend(this.options,e),this.select=this.multiple?new C:new y,this.select._init(e),this.select.container.addClass("oj-select-jet oj-form-control"),this._focusable({element:this.select.selection,applyHighlight:!0})},_setInitialSelectedValue:function(e){var t;t=this._IsCustomElement()?e:Array.isArray(e)?e:[e],this._SetValue(t,null,{doValueChangeCheck:!1,_context:{internalSet:!0,writeback:!0},changed:!0})},_setup:function(){v.isValueForPlaceholder(this.multiple,this.options.value)&&(this.multiple?this.options.valueOptions=v.getValueOptionsForPlaceholder(this,this.options.valueOptions):this.options.valueOption=v.getValueOptionsForPlaceholder(this,this.options.valueOption)),this._resolveValueOptionsLater=v.mergeValueAndValueOptions(this),this._isNative()?this._nativeSetup():this._jetSetup(),this._refreshRequired(this.options.required)},_IsTextFieldComponent:function(){return!0},_GetContentWrapper:function(){if(this._IsCustomElement())return this.select._GetContentWrapper()},refresh:function(){this._super(),this._cleanup(),this._setup(),this._isNative()&&this.options.value&&this.element.val(this.options.value),this._SetRootAttributes(),this._initComponentMessaging()},_refreshRequired:e.EditableValueUtils._refreshRequired,_AriaRequiredUnsupported:function(){return!1},_destroy:function(){this._cleanup(),this._super()},_NotifyDetached:function(){this._superApply(arguments),this.select&&this.select.close()},_NotifyHidden:function(){this._superApply(arguments),this.select&&this.select.close()},_VerifyConnectedForSetup:function(){return!0},_SetPlaceholder:function(e){if(this._isNative()&&null!=e){var i=t(this.element.children("option:first-child"));i&&""===i.attr("value")?(i.text(this.options.placeholder),i.attr("value","")):((i=v.createOptionTag(0,"",e,this._formatValue.bind(this))).addClass("oj-listbox-placeholder"),this._hidePlaceholder(i,this._IsRequired()),i.prependTo(this.element))}else if(this.select){var s=e;"inside"===this.options.labelEdge&&(s=e||""),this.select.opts.placeholder=s,this.select._setPlaceholder()}},_HasPlaceholderSet:function(){return v.isPlaceholderSpecified(this.options)},_ClearPlaceholder:function(){this._SetPlaceholderOption(null),this._SetPlaceholder(null)},_InitOptions:function(t,i){if(this._super(t,i),e.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],i,this),this.multiple=this._IsCustomElement()?"OJ-SELECT-MANY"===this.OuterWrapper.nodeName:this.options.multiple,void 0===this.options.value)this._IsCustomElement()?this.options.value=null:this.options.value=void 0!==this.element.attr("value")?v.splitVal(this.element.val(),","):null;else{var s=this.options.value;Array.isArray(s)&&(this._IsCustomElement()||(s=s.slice(0))),this.options.value=s}},_SetDisplayValue:function(e){if(this.select)v.applyValueOptions(this.select,this.options)||this.select._initSelection(),this._resolveValueOptionsLater=!1;else{var t;if(this._setPlaceholderStyle(e)&&(this.element[0].selectedIndex=0),null==e)this._resolveValueOptionsLater&&v.setValueOptions(this,v.getFixupValueOptionsForPlaceholder(this.multiple));else{var i,s=!1,o=e;if(this.multiple||(Array.isArray(e)&&(o=e[0]),null===(i=this._nativeFindLabel(o))&&(r.warn("JET select: selected value not found"),this.element[0].options&&this.element[0].options.length>0?(this.element[0].selectedIndex=0,o=this.element[0].value,i=this.element[0].text,s=!0):i=String(e))),s||this.element.val(e),e=o,this._resolveValueOptionsLater){if(this.multiple){var n=0;t=[],this.element.find("option").each(function(){this.selected&&(t.push({value:e[n],label:this.text}),n+=1)})}else t={value:e,label:i};v.setValueOptions(this,t)}}this._resolveValueOptionsLater=!1}},_GetDisplayValue:function(){var e=null;if(this.select){var t=v.getOpts(this),i=this.select._getSelectionData();if(null!=i)if(this.multiple)if(e=[],Array.isArray(i))for(var s=0;s<i.length;s++)e.push(t.formatSelection(i[s]));else e.push(t.formatSelection(i));else e=Array.isArray(i)&&i.length>0?t.formatSelection(i[0]):t.formatSelection(i);else e=this._super()}else e=this._super();return e},validate:function(){var e,t=null;if(this.select)if(!0===this.multiple){var i=this.select.search.val(),s=this.select.getVal()?this.select.getVal():[];null==i||""===i?t=s:(s.push(i),t=s)}else t=this.select.getVal();else this._isNative()&&(t=this.options.value);return e=this._SetValue(t,null,this._VALIDATE_METHOD_OPTIONS),this._IsCustomElement()&&(e=Promise.resolve(e?"valid":"invalid")),e},_CanSetValue:function(){return!!this.forceCanSetValue||this._super()},_nativeFindFirstEnabledOption:function(){var e=this.element.find("option:not(:disabled)");return e.length>0?t(e[0]):null},_nativeFindFirstEnabledOptionValue:function(e){return e||(e=this._nativeFindFirstEnabledOption()),e?this._IsCustomElement()?e.attr("value"):[e.attr("value")]:null},_nativeSetOptions:function(e){var t=this.options.value,i=this.element;if(i.hasClass(v.GENERATED_OPTIONS_SELECTOR))v.cleanupResults(i);else{var s=i.children();s.length>0&&s.remove()}if(v.isDataProvider(e))this._nativeFetchFromDataProvider();else{v.arrayPopulateResults(i,e,this._formatValue.bind(this),this.options.optionsKeys);var o=null;this._HasPlaceholderSet()&&(this.options.required&&(o=this._nativeFindFirstEnabledOptionValue()),this._SetPlaceholder()),null===o&&(o=this._nativeFindFirstEnabledOptionValue()),this.options.value=o,this.option("value",t)}i.addClass(v.GENERATED_OPTIONS_SELECTOR)},_removePlaceholderInMultiValues:function(e){for(var t,i=[],s=0;s<e.length;s++)null!=(t=e[s])&&(t.length>0?(1===i.length&&""===i[0]&&i.pop(),i.push(t)):0===i.length&&i.push(t));return i},_nativeFindLabel:function(e){var i=this.element[0].options;if(i&&i.length>0)for(var s=0;s<i.length;s++)if(i[s].value===e)return t(i[s]).text();return null},_setPlaceholderStyle:function(e){var t=this.multiple;return(null==e||""===e)&&this._HasPlaceholderSet()||!this._IsCustomElement()&&Array.isArray(e)&&1===e.length&&""===e[0]||this._IsCustomElement()&&this._HasPlaceholderSet()&&v.isValueForPlaceholder(t,e)?(this.element.addClass("oj-select-default"),!0):(this.element.removeClass("oj-select-default"),!1)},_setOption:function(i,s,o){var n,a,l=s,r=this,h=this._super,c=this.multiple,u=!1;if("value"!==i)if("placeholder"===i?this.select?(this.select.opts.placeholder=l,v.isValueForPlaceholder(c,this.options.value)&&this.select._setPlaceholder()):(n=this.options.value)&&0!==n.length&&n[0]||(this.element[0].selectedIndex=0):"maximumResultCount"===i?this.select?this.select.opts.maximumResultCount=l:u=!0:"minimumResultsForSearch"===i?this.select&&(this.select.opts.minimumResultsForSearch=l):"renderMode"===i&&(this._cleanup(),u=!0),"options"===i?(v.removeDataProviderEventListeners(this),v.clearDataProviderWrapper(this)):"optionsKeys"===i?v.clearDataProviderWrapper(this):"valueOption"===i&&!0!==c?(l=v.getValueOptionsForPlaceholder(this,l),this.select&&(this.select.opts.valueOption=l)):"valueOptions"===i&&!0===c&&(l=v.getValueOptionsForPlaceholder(this,l),this.select&&(this.select.opts.valueOptions=l)),this._super(i,l,o),u&&this.refresh(),"disabled"===i)this.select?l?this.select._disable():this.select._enable():this._nativeSetDisabled(l);else if("readOnly"===i)this.select&&this.select.applyReadonlyState(),"native"===this.options.renderMode&&this.refresh();else if("valueOption"===i&&!0!==c)v.syncValueWithValueOption(this,l,this.options.value,this._isNative());else if("valueOptions"===i&&!0===c)v.syncValueWithValueOptions(this,l,this.options.value,this._isNative());else if("options"===i)v.isDataProvider(l)&&(v.wrapDataProviderIfNeeded(this,this.select?this.select.opts:null),v.addDataProviderEventListeners(this)),this.select?(n=this.select.getVal(),a=c?n&&0!==n.length:this._IsCustomElement()?null!=n:n&&null!=n[0],v.getDataProvider(this.options)&&a?v.applyValueOptions(this.select,this.options)?(this.select.opts.options=l,this.select.opts=r.select._prepareOpts(this.select.opts)):v.validateFromDataProvider(this.select.container,this.options,this.options.value).then(function(e){var t=e?e.value:null;if(t){var i=e.valueOptions;Array.isArray(i)&&i.length&&v.setValueOptions(r,i),Array.isArray(t)&&t.length&&h.call(r,"value",c?t:t[0])}else r.options.placeholder?c||r.select._updateSelectedOption(r.options.placeholder):c?h.call(r,"value",null):v.fetchFirstBlockFromDataProvider(r.select.container,r.options,1).then(function(e){e&&e.length>0&&n===r.select.getVal()?r.select._updateSelectedOption(e[0]):(h.call(r,"value",null),r.select.text.text(""))});r.select.opts.options=l,r.select.opts=r.select._prepareOpts(r.select.opts)}):(this.select.opts.options=l,this.select.opts=this.select._prepareOpts(this.select.opts),c&&!a||(this.select.setValOpts(null),this._super("value",n)))):this._nativeSetOptions(l);else if("optionsKeys"===i)v.wrapDataProviderIfNeeded(this,this.select?this.select.opts:null);else if("required"===i&&this._isNative()){var d=t(this.element.find(".oj-listbox-placeholder"));d&&""===d.attr("value")&&this._hidePlaceholder(d,l)}else if("multiple"!==i||this._IsCustomElement()){if("labelledBy"===i&&this.options.labelledBy){var p=this.uuid+"_Label",f=e.EditableValueUtils._getOjLabelAriaLabelledBy(this.options.labelledBy,p);!f||this.multiple&&v.isReadonly(this)||this._GetContentElement().attr("aria-labelledby",f),null!=this.select&&null!=this.select.results&&this.select.results.attr("aria-labelledby",f),this._IsRequired()&&this.options.translations.required&&(this._implicitReqValidator=null,this._getImplicitRequiredValidator())}}else this.multiple=l;else{if((this._HasPlaceholderSet()||c)&&(null!=l&&0===l.length||this._IsCustomElement()&&v.isValueForPlaceholder(c,l)))return v.setValueOptions(this,v.getFixupValueOptionsForPlaceholder(c)),void this._super(i,l,o);var m;this.select&&((m=this.select.datalist)||(m=this.select.opts.element));var _=this._IsCustomElement()&&!c;if(Array.isArray(l)||_||(l=[l]),this._isNative()&&(_||(l=this._removePlaceholderInMultiValues(l)),this._setPlaceholderStyle(l)),v.getDataProvider(this.options)&&l)return this.select&&(this.select.opts.options=this.options.options),void v.validateFromDataProvider(this._isNative()?this.element:this.select.container,this.options,l).then(function(e){if(e){var t=e.valueOptions;Array.isArray(t)&&t.length&&v.setValueOptions(r,t);var s=e.value;if(Array.isArray(s)&&s.length){var o=c?s:s[0];h.call(r,i,o),r._isNative()&&(r.element[0].value=o)}}});if(!_){for(var b=[],g=0;g<l.length;g++)this.select?(!this.select.opts.validate||this.select.opts.validate(m,l[g])||this._isOptionDataPending())&&b.push(l[g]):this.element.find("option[value='"+l[g]+"']").length>0&&b.push(l[g]);return void((b.length>0||c)&&(this._isNative()?this._nativeSetSelected(b):(this._super(i,b,o),v.updateValueOptions(this.select))))}this.select&&this.select.opts.validate&&!this.select.opts.validate(m,l)&&!this._isOptionDataPending()||(this._super(i,l,o),v.updateValueOptions(this.select))}},_isOptionDataPending:function(){var e=this.options.options,t=this.select.datalist;if(t){if(0===t.children().length)return!0}else{if(v.isDataProvider(e))return!0;if(!e||0===e.length)return!0}return!1},_getDropdown:function(){if(this.select&&this.select._opened()){var e=this.select.dropdown;if(e&&e.attr("data-oj-containerid")===this.select.containerId)return e}return null},_hidePlaceholder:function(e,t){t?(e.attr("disabled",""),e.attr("hidden","")):(e.removeAttr("disabled"),e.removeAttr("hidden"))},_isNative:function(){return"native"===this.options.renderMode&&!v.isReadonly(this)},_cleanup:function(){this.element.parent().parent().hasClass("oj-select-native")?(this.element.off("change"),this.element.hasClass(v.GENERATED_OPTIONS_SELECTOR)&&v.cleanupResults(this.element),this.element.parent().hasClass("oj-text-field-container")&&this.element.unwrap(),this.element.parent().children(".oj-select-arrow").remove(),this._IsCustomElement()||this.element.unwrap(),this.element.removeClass("oj-select-select oj-component-initnode"),this.element.attr({"aria-labelledby":""})):this.select&&(this.select._destroy(),this.select=void 0)},getNodeBySubId:function(e){var i,s=null;if(null==e){var o=this.widget();return o?o[0]:null}if(this._isNative())return null;if(!(s=this._super(e))){var n=this._getDropdown();switch(i=e.subId){case"oj-select-drop":n&&(s=n[0]);break;case"oj-select-results":n&&(s=n.find(".oj-listbox-results")[0]);break;case"oj-select-search":n&&(s=n.find(".oj-listbox-search")[0]);break;case"oj-select-input":case"oj-listbox-input":n&&(s=n.find(".oj-listbox-input")[0]);break;case"oj-select-choice":case"oj-select-chosen":case"oj-select-arrow":s=this.widget().find("."+i)[0];break;case"oj-listitem":if(n){var a=n.find(".oj-listbox-result");s=this.select._findItem(a,e.value)}break;case"oj-select-remove":var l=this.widget().find(".oj-select-selected-choice"),r=this.select._findItem(l,e.value);s=r?t(r).find(".oj-select-clear-entry-icon")[0]:null;break;case"oj-listbox-result-label":if(n){var h=t("#"+this.select.results.attr("id")).children(),c=e.index;h.length&&c<h.length&&(s=h.eq(c).find("."+i)[0])}}}return s||null},getSubIdByNode:function(e){if(this._isNative())return this._super(e);var i=null;if(null!=e){var s=t(e);i=s.hasClass("oj-listbox-input")?{subId:"oj-select-input"}:s.hasClass("oj-select-arrow")?{subId:"oj-select-arrow"}:s.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:s.data("ojselect").value}:s.hasClass("oj-select-clear-entry-icon")?{subId:"oj-select-remove",value:s.closest(".oj-select-selected-choice").data("ojselect").value}:this._super(e)}return i},_GetDefaultStyleClass:function(){return"oj-select"},_GetMessagingLauncherElement:function(){return this.select?this.select.selection:this.element},_GetContentElement:function(){return this.select?this.select.selection:this.element},_GetAriaLabelElement:function(){return this._GetContentElement()[0]}}),l.setDefaultOptions({ojSelect:{displayOptions:{converterHint:["none"]},renderMode:l.createDynamicPropertyGetter(function(){return(n.parseJSONFromFontFamily("oj-select-option-defaults")||{}).renderMode})}}),c={properties:{readonly:{binding:{consume:{name:"readonly"}}},userAssistanceDensity:{binding:{consume:{name:"userAssistanceDensity"}}}}},d.extension._WIDGET_NAME="ojCombobox",d.extension._INNER_ELEM="input",d.extension._GLOBAL_TRANSFER_ATTRS=["aria-controls","aria-label","tabindex"],d.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-combobox-one",{metadata:e.CollectionUtils.mergeDeep(d,c)}),u.extension._WIDGET_NAME="ojCombobox",u.extension._INNER_ELEM="input",u.extension._GLOBAL_TRANSFER_ATTRS=["aria-controls","aria-label","tabindex"],u.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-combobox-many",{metadata:e.CollectionUtils.mergeDeep(u,c)}),f.extension._WIDGET_NAME="ojSelect",f.extension._INNER_ELEM="select",f.extension._GLOBAL_TRANSFER_ATTRS=["aria-controls","aria-label","tabindex"],f.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-select-one",{metadata:e.CollectionUtils.mergeDeep(f,c)}),p.extension._WIDGET_NAME="ojSelect",p.extension._INNER_ELEM="select",p.extension._GLOBAL_TRANSFER_ATTRS=["aria-controls","aria-label","tabindex"],p.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-select-many",{metadata:e.CollectionUtils.mergeDeep(p,c)})});
!function(e,t,n,a,o,i){"use strict";var r={};o.inputSearch=function(t,a,s){var u,c,l,p,d,h,g=e("#"+n.escapeCSS(t+"_HIDDEN"),apex.gPageContext$),m=e("#"+n.escapeCSS(t)+"_LABEL",apex.gPageContext$),x=e("#"+n.escapeCSS(t),apex.gPageContext$),f=e.extend({ajaxIdentifier:null,itemsToSubmit:"",dependingOnSelector:"",optimizeRefresh:!0,matchCaseSensitive:!1,matchContains:!0,maxOptions:null,lazyLoad:!1,cache:!0,width:null,maxLength:null,elementAttributes:null,isEscaped:!0,minLength:1,placeholder:"",title:""},s),S=e.ui.keyCode;function b(e){var t,n=[];for(t=0;t<e.length;t++)n.push({label:e[t],value:e[t]});return n}function v(){g.trigger("apexbeforerefresh"),r={},i(t).setValue(""),g.ojInputSearch(f),g.trigger("apexafterrefresh")}!f.lazyLoad&&a&&(f.options=b(a)),d=i.create(t,{enable:function(){g.ojInputSearch({disabled:!1})},disable:function(){g.ojInputSearch({disabled:!0})},getValue:function(){return c.val()},setValue:function(e){g.val(e),c.val(e)},setFocusTo:function(){return c},getPopupSelector:function(){return".oj-listbox-results"},reinit:function(e){r={},this.setValue(e,null,!0)},delayLoading:!0,isChanged:function(){return h!==c.val()},setStyleTo:function(){return c}}),require(["ojs/ojcore","ojs/ojselectcombobox"],(function(a){var i;if(u=f.options,f.options=function(a){return new Promise((function(i,s){var c,l,p,d="",h="",m=[],x=a.term;if(void 0!==a.term)if(f.lazyLoad){if(f.cache&&r[c=t+"_"+x])return void i(r[c]);o.util.cascadingLov(g,f.ajaxIdentifier,{x01:x,pageItems:e(f.itemsToSubmit,apex.gPageContext$)},{optimizeRefresh:f.optimizeRefresh,dependingOn:e(f.dependingOnSelector,apex.gPageContext$),success:function(e){var t=b(e);f.cache&&(r[c]=t),i(t)},target:g})}else{for(f.matchContains||(d="^"),d+=n.escapeRegExp(x),f.matchCaseSensitive||(h="i"),p=new RegExp(d,h),l=0;l<u.length&&(!f.maxOptions||m.length<f.maxOptions);l++)u[l].label.match(p)&&m.push(u[l]);i(m)}}))},g.ojInputSearch(f),h=g.val(),f.dependingOnSelector&&e(s.dependingOnSelector,apex.gPageContext$).change((function(){g.trigger("apexrefresh")})),g.on("apexrefresh",v),c=e(g.ojInputSearch("getNodeBySubId",{subId:"oj-inputsearch-input"})),p=e(g.ojInputSearch("getNodeBySubId",{subId:"oj-inputsearch-search"})),l=c.closest(".oj-inputsearch-choice"),f.width&&c.attr("size",f.width),f.maxLength&&c.attr("maxlength",f.maxLength),f.elementAttributes){var j,C,y,I=n.htmlBuilder();for(C in I.markup("<input ").attr("id","customAttrHolder").attr("class","uVisuallyHidden").markup(f.elementAttributes).markup(" />"),e("body").append(I.toString()),y=(j=e("#customAttrHolder"))[0].attributes)y.hasOwnProperty(C)&&-1===e.inArray(y[C].name,["id","class"])&&c.attr(y[C].name,y[C].value);j.remove()}g.removeClass("oj-component-initnode"),i=g.attr("class"),g.attr("class","oj-component-initnode"),c.addClass("apex-item-text apex-item-auto-complete").addClass(i).attr("aria-labelledby",n.escapeCSS(t)+"_LABEL").val(h),l.addClass("oj-text-field-container"),g.on("ojbeforeexpand",(function(){var t=n.escapeCSS(c.attr("aria-owns"));e("#"+t).attr("tabindex","-1")})),c.on("keydown",(function(e){e.which===S.ENTER&&x.toggleClass("js-uses-enter",c.closest(".oj-inputsearch").hasClass("oj-listbox-dropdown-open"))})),m.on("click",(function(){c.focus()})),p.remove(),x.find("span.apex-item-icon").insertAfter(c),d.resolve()}))}}(apex.jQuery,apex.server,apex.util,apex.debug,apex.widget,apex.item);
define("inputSearch", function(){});


define("inputSearchBundle.min", function(){});
