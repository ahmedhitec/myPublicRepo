apex.page={},function(e,t,n,a,i,o,r){"use strict";e.loadingDeferreds=[];var s=!1,l=!1,u=null,d=null;function c(e,n){var a,i,o={};switch("SUBMIT"===n?a=null:"CONFIRM"===n&&(a="Delete"),i={request:a,set:null,showWait:!1,waitMsg:null,form:"wwv_flow",reloadOnSubmit:null,ignoreChange:!0,validate:!1},typeof e){case"string":o=t.extend(i,{request:e});break;case"object":o=t.extend(i,e);break;default:o=i}return o}function p(e,t){var n=i.isValidPageItemName(e);return n&&"radio"===t&&!document.getElementById(e)&&(n=!1),n}function g(e,n,a){var i={};t(e[0].elements).each((function(){var e=this.name,t=this.type;if("BUTTON"!==this.nodeName&&"button"!==t&&"submit"!==t&&"reset"!==t&&e&&(a||!i[e]))return p(e,t)?(i[e]=1,n(this,e,t)):void 0}))}t((function(){t("#wwvFlowForm").on("submit",(function(t){if(!l)return e.submit(),!1}))})),e.forEachPageItem=g,e.submit=function(u){var d,m,f,h,v,x=!0,b=c(u,"SUBMIT");if(void 0!==b.submitIfEnter&&13!==(window.event?window.event.keyCode:b.submitIfEnter.which))return!0;if(n.trigger(apex.gPageContext$,"apexbeforepagesubmit",b.request))n.gCancelFlag=!1;else{b.showWait&&(m=apex.widget.waitPopup()),b.set&&t.each(b.set,(function(e,t){e&&void 0!==t&&$s(e,t)})),h=t("form[name="+b.form+"]",apex.gPageContext$),b.reloadOnSubmit&&$s("pReloadOnSubmit",b.reloadOnSubmit),d=$v("pReloadOnSubmit"),t("#pRequest",apex.gPageContext$).val(b.request);try{window.external&&"unknown"==typeof window.external.AutoCompleteSaveForm&&window.external.AutoCompleteSaveForm(t("form[name="+b.form+"]",apex.gPageContext$).get(0))}catch(e){}f=0,(v=function(){var u,c,w,C,y,T,P,E,I;"wwv_flow.accept"===h.attr("action")&&0===t("#pPageItemsProtected",apex.gPageContext$).length?++f>5?(m&&m.remove(),a.alert(r.getMessage("APEX.WAIT_UNTIL_PAGE_LOADED"))):(void 0===m&&1===f&&(m=apex.widget.waitPopup()),setTimeout(v,300)):(b.validate&&(e.validate(h)||(x=!1,a.alert(r.getMessage("APEX.CORRECT_ERRORS"),(function(){})))),x&&(n.trigger(apex.gPageContext$,"apexpagesubmit",b.request),"S"===d?(u=h,c=m,w=b.ignoreChange,T=[],P={},E={},I=apex.model,t(u[0].elements).each((function(){var e=this,n=e.name,a=e.nodeName,i=e.type;if("BUTTON"!==a&&"button"!==i&&"submit"!==i&&"reset"!==i&&n){if(/x[0-2][0-9]/.exec(n)){if(e.disabled||"INPUT"===a&&("checkbox"===i||"radio"===i)&&!e.checked)return;P[n]=t(e).val()}if(/f[0-5][0-9]|fcs|fmap|fhdr|fcud|frowid/.exec(n)){if(e.disabled||"INPUT"===a&&("checkbox"===i||"radio"===i)&&!e.checked)return;P[n]||(P[n]=[]),P[n].push(t(e).val())}p(n,i)&&T.push(n)}})),T.length&&(P.pageItems=T),I&&(y=I.addChangesToSaveRequest(P)),c||(E.loadingIndicatorPosition="page"),s=w,l=!0,C=i.accept(P,E),l=!1,y&&y(C),C.done((function(e){e.errors?(e.pageSubmissionId&&$s("pPageSubmissionId",e.pageSubmissionId),c&&(c.remove(),c=null),a.clearErrors(),a.showErrors(e.errors),s=!1):e.redirectURL?(apex.navigation.redirect(e.redirectURL),c=null):s=!1})).fail((function(e,t,n){s=!1})).always((function(){c&&c.remove()}))):"A"===d?function(e,n){var a,r,u=[],d=[],c={};for(g(e,(function(e,t){u.push(t),d.push(e)}),!0),l=!0,r=i.addPageItemsToRequest(u,c,!0),a=0;a<d.length;a++)t(d[a]).removeAttr("name");for(a=0;a<r.length;a++)t(r[a]).attr("name","p_files");for(c=i.chunk(JSON.stringify(c)),t.isArray(c)||(c=[c]),a=c.length-1;a>=0;a--)e.prepend("<input type='hidden' name='p_json' value='"+o.escapeHTML(c[a])+"'>");for(s=n,e.trigger("submit"),l=!1,a=0;a<d.length;a++)t(d[a]).attr("name",u[a]);t("input[name='p_json']").remove()}(h,b.ignoreChange):(l=!0,h.trigger("submit"),l=!1)))})()}return void 0===b.submitIfEnter&&void 0},e.confirm=function(t,n){var i,o=c(n,"CONFIRM");i=t||"Would you like to perform this delete action?",a.confirm(i,(function(t){t&&e.submit(o)}))},e.validatePageItemsOnBlur=function(){t(t("#wwvFlowForm")[0].elements).each((function(){var e=this,n=e.name,i=e.type;"BUTTON"!==e.nodeName&&"button"!==i&&"submit"!==i&&"reset"!==i&&n&&p(n,i)&&0===t(e).closest(".js-ignoreChange").length&&t(e).on("blur.apexValidate",(function(t){var n,i=[];e.disabled||((n=apex.item(e)).getValidity().valid?a.clearErrors(n.id):(i.push({message:n.getValidationMessage(),location:"inline",pageItem:n.id}),a.showErrors(i)))}))}))},e.validate=function(e){var n=!0,i=[],o=apex.model;return e||(e=t("#wwvFlowForm")),a.clearErrors(),g(e,(function(e,t){var a;(a=apex.item(t)).isDisabled()||a.getValidity().valid||(n=!1,i.push({message:a.getValidationMessage(),location:"inline",pageItem:a.id}))})),n&&o&&(n=!o.anyErrors()),n||a.showErrors(i),n},e.isChanged=function(){var e=!1,n=apex.model;return n&&(e=n.anyChanges()),e||g(t("#wwvFlowForm"),(function(n,a){if(!n.disabled)return 0===t(n).closest(".js-ignoreChange").length&&apex.item(a).isChanged()?(e=!0,!1):void 0})),!e&&u&&(e=u()),e},e.warnOnUnsavedChanges=function(n,a){a&&(u=a),t(window).off(".apexpageunload"),n||(n=r.getMessage("APEX.WARN_ON_UNSAVED_CHANGES")),d=n,t("button.js-ignoreChange").each((function(){var n=t(this),a=n.prop("onclick");a&&n.removeAttr("onclick").on("click",(function(){e.cancelWarnOnUnsavedChanges(),a()}))})),t("a.js-ignoreChange").on("click.apexpageunload",(function(){e.cancelWarnOnUnsavedChanges()})),t(window).on("beforeunload.apexpageunload",(function(t){if(!s&&e.isChanged())return d}))},e.cancelWarnOnUnsavedChanges=function(){d=null,t(window).off("beforeunload.apexpageunload")},apex.submit=e.submit,apex.confirm=e.confirm,e.init=function(e,a){var i;t.isFunction(a)&&a.call(e),"undefined"!=typeof Hammer&&(Hammer.defaults.cssProps&&delete Hammer.defaults.cssProps.userSelect,i=new Hammer(document.body,{}),function(e){var t;for(t in e)e.hasOwnProperty(t)&&i.on(t,e[t])}({tap:function(e){n.trigger(e.target,"apextap",e)},doubletap:function(e){n.trigger(e.target,"apexdoubletap",e)},press:function(e){n.trigger(e.target,"apexpress",e)},pan:function(e){n.trigger(e.target,"apexpan",e)},swipe:function(e){n.trigger(e.target,"apexswipe",e)}}))},e.bindTemplates=function(e){e||(e=t(document)),e.find(".js-bindContent .js-bindContent").each((function(){apex.debug.error("Nested template content bindings not allowed."),t(this).attr("class","")})),e.find(".js-bindContent").each((function(){var e,n,a,i="",r="",s=!1,l=t("body"),u=t(this),d="false"!==(u.attr("data-bind-immediate")||"false").toLowerCase(),c=u.html().replace(/~~/g,"&").replace(/&amp;/g,"&");function p(){var e,a=apex.util.applyTemplate(c),i=document.activeElement;t(i).closest(n).length&&(e=i.id),n.html(a),e&&t("#"+e).focus()}var g=o.debounce(p,150);if(u.next().length||u.prev().length)n=u,s=!0;else{for(n=u.parent(),a=u[0].previousSibling;a&&3===a.nodeType;)a.textContent.trim()&&(c=a.textContent+c),a=a.previousSibling;for(a=u[0].nextSibling;a&&3===a.nodeType;)a.textContent.trim()&&(c+=a.textContent),a=a.nextSibling}(e=(e=u.attr("data-bind-depends"))?e.split(/,\s*/):o.extractTemplateDependencies(c)).length>0&&(e.forEach((function(e){var t,n=apex.item(e);n.node&&(i.length>0&&(i+=","),i+="#"+e,t=n.node.type,(d&&"text"===t||"textarea"===t)&&(r.length>0&&(r+=","),r+="#"+e))})),console.log("xxx depends",i,r,d),l.on("change",i,g),r&&l.on("keyup",r,g)),p(),s&&n.attr("class","").removeAttr("data-bind-immediate").removeAttr("data-bind-depends")})),e.find(".js-bindClass").each((function(){var e,n="",a=t(this),i=a.removeClass("js-bindClass").attr("class").replace(/~~/g,"&");function r(){var e=apex.util.applyTemplate(i);a.attr("class",e)}var s=o.debounce(r,150);(e=o.extractTemplateDependencies(i)).length>0&&(e.forEach((function(e){apex.item(e).node&&(n.length>0&&(n+=","),n+="#"+e)})),console.log("xxx depends",n),t("body").on("change",n,s)),r()}))},t((function(){setTimeout((function(){e.bindTemplates()}),0)}))}(apex.page,apex.jQuery,apex.event,apex.message,apex.server,apex.util,apex.lang);