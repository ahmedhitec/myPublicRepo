apex.message={},function(e,t,a,i){"use strict";var o={},n=[],r=[],l={beforeShow:null,beforeHide:null,closeNotificationSelector:"button.t-Button--closeAlert"};e.TYPE={SUCCESS:"success",ERROR:"error"},e.registerTemplates=function(a){var i,n,r,l;if(t.isPlainObject(a))o=t.extend(o,a);else for(i=0;i<a.length;i++)for(r=a[i].ids.split(","),n=0;n<r.length;n++)(l={})[r[n]]=a[i].markup,e.registerTemplates(l)},e.clearTemplates=function(){o={}},e.getTemplates=function(){return o},e.setThemeHooks=function(e){l=t.extend(l,e)},e.showErrors=function(r){var s,c,d,u,p=t.isPlainObject(r)?[r]:r,m=[],E=t("#APEX_SUCCESS_MESSAGE");for(s=0;s<p.length;s++)n.push(p[s]);for(c=0;c<n.length;c++)u="string"==typeof(d=n[c]).location?[d.location]:d.location,t.inArray("inline",u)>-1&&d.pageItem&&f(d),t.inArray("page",u)>-1&&m.push(d);m.length>0&&function(n){var r,s,c,d,u,p,f,m=a.htmlBuilder(),E={},g=!0,h=t("#APEX_ERROR_MESSAGE");h.html(o[h.data("template-id")]),m.markup("<div").attr("class","a-Notification a-Notification--error").markup(">"),m.markup("<h2").attr("class","a-Notification-title aErrMsgTitle").markup(">"),c=1===n.length?i.getMessage("FLOW.SINGLE_VALIDATION_ERROR"):i.formatMessage("FLOW.VALIDATION_ERROR",n.length);for(m.content(c).markup("</h2>"),m.markup("<ul").attr("class","a-Notification-list htmldbUlErr").markup(">"),r=0;r<n.length;r++){if(d=n[r],m.markup("<li").attr("class","a-Notification-item htmldbStdErr").markup(">"),(f=d.pageItem||d.regionStaticId)&&m.markup("<a").attr("href","#").optionalAttr("data-region",d.regionStaticId).optionalAttr("data-instance",d.instance).optionalAttr("data-record",d.recordId).optionalAttr("data-column",d.columnName).optionalAttr("data-for",d.pageItem).attr("class","a-Notification-link").markup(">"),d.unsafe?m.content(d.message):m.markup(d.message),f&&m.markup("</a>"),d.techInfo){for(p=i.getMessage("APEX.ERROR.TECHNICAL_INFO"),m.markup("<button class='a-Button a-Button--notification js-showDetails' tabindex='-1' type='button'").attr("aria-label",p).attr("title",p).markup("><span class='a-Icon icon-info' aria-hidden='true'></span></button>"),m.markup("<div class='a-Notification-details' style='display:none'><h2>").content(p).markup("</h2><ul class='error_technical_info'>"),s=0;s<d.techInfo.length;s++)u=d.techInfo[s],m.markup("<li><span class='a-Notification-detailName'>").content(u.name+": ").markup("</span>"),u.usePre&&m.markup("<br>"),m.markup("<span").attr("class","a-Notification-detailValue"+(u.usePre?" a-Notification--pre":"")).markup(">").content(u.value).markup("</span></li>");m.markup("</ul></div>")}m.markup("</li>")}m.markup("</ul>"),m.markup("</div>"),E.placeholders={MESSAGE:m.toString(),CLOSE_NOTIFICATION:i.getMessage("APEX.CLOSE_NOTIFICATION"),ERROR_MESSAGE_HEADING:i.getMessage("APEX.ERROR_MESSAGE_HEADING"),IMAGE_PREFIX:window.apex_img_dir||""},h.html(a.applyTemplate(h.html(),E)),l.beforeShow&&(g=l.beforeShow(e.TYPE.ERROR,h));(void 0===g||g)&&h.removeClass("u-hidden").addClass("u-visible")}(m),E.removeClass("u-visible").addClass("u-hidden")},e.clearErrors=function(a){var i,o,r,s,c=!0,d=t("#APEX_ERROR_MESSAGE");function u(e){var t=p(e),a=t.attr("data-old-aria-describedby");a?t.attr("aria-describedby",a).removeAttr("aria-invalid data-old-aria-describedby").removeClass("apex-page-item-error"):t.removeAttr("aria-invalid aria-describedby").removeClass("apex-page-item-error")}if(a)u(a),r=t("#"+a+"_error_placeholder.a-Form-error");else{for(i=0;i<n.length;i++)s="string"==typeof(o=n[i]).location?[o.location]:o.location,t.inArray("inline",s)>-1&&o.pageItem&&u(o.pageItem);r=t("span.a-Form-error"),l.beforeHide&&(c=l.beforeHide(e.TYPE.ERROR,d)),(void 0===c||c)&&d.removeClass("u-visible").addClass("u-hidden").html("")}r.html("").removeClass("u-visible").addClass("u-hidden"),n=[]},e.showPageSuccess=function(n){var r=!0,s=t("#APEX_SUCCESS_MESSAGE"),c={placeholders:{SUCCESS_MESSAGE:n,CLOSE_NOTIFICATION:i.getMessage("APEX.CLOSE_NOTIFICATION"),SUCCESS_MESSAGE_HEADING:i.getMessage("APEX.SUCCESS_MESSAGE_HEADING"),IMAGE_PREFIX:window.apex_img_dir||""}};e.clearErrors(),s.html(a.applyTemplate(o[s.data("template-id")],c)),l.beforeShow&&(r=l.beforeShow(e.TYPE.SUCCESS,s)),(void 0===r||r)&&s.removeClass("u-hidden").addClass("u-visible")},e.hidePageSuccess=function(){var a=!0,i=t("#APEX_SUCCESS_MESSAGE");l.beforeHide&&(a=l.beforeHide(e.TYPE.SUCCESS,i)),(void 0===a||a)&&i.removeClass("u-visible").addClass("u-hidden")},e.confirm=function(e,a){var i;t.ui.dialog&&"CSS1Compat"===document.compatMode?setTimeout((function(){u(""+e,{confirm:!0,callback:a})}),0):(i=confirm(e),a(i))},e.alert=function(e,a){t.ui.dialog&&"CSS1Compat"===document.compatMode?setTimeout((function(){u(""+e,{callback:a})}),0):(alert(e),a&&a())},e.addVisibilityCheck=function(e){r.push(e)};var s=[],c=null,d=null;function u(e,o){var n,r,l,u,p,f,m,E,g=!1,h=apex.navigation,S=a.getTopApex().jQuery,b=S("body"),v=null,C=[];return o=t.extend({id:null,isPopup:!1,noOverlay:!1,draggable:!0,resizable:!1,notification:!0,dialogClass:"ui-dialog--notification",okButton:!0,okLabelKey:"APEX.DIALOG.OK",cancelLabelKey:"APEX.DIALOG.CANCEL",confirm:!1,defaultButton:!1},o),u=o.isPopup?"popup":"dialog",m=o.parentElement,o.id&&(n=S("#"+o.id)),d=o.returnFocusTo||document.activeElement||null,m&&S!==apex.jQuery&&(p=(m=t(m)).offset(),f=S("iframe").filter((function(){return this.contentWindow===window})).offset(),E=t(window),p.top+=f.top-E.scrollTop(),p.left+=f.left-E.scrollLeft(),g=!0,o.parentElement=S("<div>").css("position","absolute").appendTo(b).outerWidth(m.outerWidth()).outerHeight(m.outerHeight()).offset(p)),n&&n[0]?(g&&n[u]("option","parentElement",o.parentElement),n[u]("open")):(n="string"==typeof e?S("<div><p>"+a.escapeHTML(e).replace(/\r\n|\n/g,"<br>")+"</p></div>"):"function"==typeof e?S(e()):e,o.id&&n.attr("id",o.id),o.okButton&&C.unshift({class:"js-confirmBtn",text:i.getMessage(o.okLabelKey),click:function(){v=!0,n[u]("close")}}),o.confirm&&C.unshift({text:i.getMessage(o.cancelLabelKey),click:function(){v=!1,n[u]("close")}}),o.extraButtons&&o.extraButtons.forEach((function(e){C.unshift(e)})),o.id&&S!==apex.jQuery&&(s.push({dialogId:o.id,widget:u}),c||(c=function(){var e,a;for(e=0;e<s.length;e++)a=s[e],S("#"+a.dialogId)[a.widget]("close").remove();t(window).off("unload",c)},t(window).on("unload",c))),b.append(n),r={closeText:i.getMessage("APEX.DIALOG.CLOSE"),autoOpen:!0,noOverlay:o.noOverlay,modal:!0,classes:{"ui-dialog":o.dialogClass},parentElement:o.isPopup?o.parentElement:void 0,title:o.title||"",closeOnEscape:!0,create:function(){S(this).closest(".ui-dialog").css("position","fixed").attr("role",o.notification?"alertdialog":"dialog"),o.init&&o.init(n),l=n.parent().find(".js-confirmBtn").addClass("ui-button--hot")},open:function(e){h.beginFreezeScroll(),o.open?o.open(e):l.focus()},close:function(){h.endFreezeScroll(),o.callback&&(null===v&&(v=!1),o.confirm?o.callback(v):o.callback()),g&&n[u]("option","parentElement").remove(),d&&t(d).focus(),o.id||n.remove()},beforeClose:o.beforeClose,resize:o.resize,resizeStop:o.resizeStop,buttons:C},["draggable","resizable","width","height","minWidth","minHeight","maxWidth","maxHeight"].forEach((function(e){void 0!==o[e]&&(r[e]=o[e])})),n[u](r),o.defaultButton&&n.on("keydown",(function(e){13===e.which&&"INPUT"===e.target.nodeName&&(l.click(),e.preventDefault())}))),n}function p(e){var i=apex.item(e);return i.callbacks&&i.callbacks.setFocusTo&&!t("#"+a.escapeCSS(e)).hasClass("rich_text_editor")?t.isFunction(i.callbacks.setFocusTo)?i.callbacks.setFocusTo.call(i):t(i.callbacks.setFocusTo):t("#"+a.escapeCSS(e))}function f(e){var i,n,r,l={},s={},c=a.escapeCSS(e.pageItem)+"_error",d=p(e.pageItem),u=t("#"+a.escapeCSS(e.pageItem)+"_error_placeholder"),f=d.attr("aria-describedby"),m=a.htmlBuilder();u.length||(i=e.pageItem,(r=(n=d).closest("fieldset").parent()).length||(r=n.parent()),u=t("<div id='"+i+"_error_placeholder' data-template-id='FALLBACK_ET' class='u-hidden'></div>").appendTo(r),o.FALLBACK_ET||(o.FALLBACK_ET="<div class='t-Form-error'>#ERROR_MESSAGE#</div>")),m.markup("<div").attr("id",c).markup(">").content(e.message).markup("</div>"),s.placeholders={ERROR_MESSAGE:m.toString()},u.html(o[u.data("template-id")]),u.html(a.applyTemplate(u.html(),s)).removeClass("u-hidden").addClass("u-visible"),f?(l["data-old-aria-describedby"]=f,l["aria-describedby"]=c+" "+f):l["aria-describedby"]=c,l["aria-invalid"]=!0,d.addClass("apex-page-item-error").attr(l)}e.showDialog=u,t((function(){t("#APEX_SUCCESS_MESSAGE").on("click",l.closeNotificationSelector,(function(t){e.hidePageSuccess(),t.preventDefault()})),t("#APEX_ERROR_MESSAGE").on("click",l.closeNotificationSelector,(function(e){t("#APEX_ERROR_MESSAGE").removeClass("u-visible").addClass("u-hidden"),e.preventDefault()})).on("click","a.a-Notification-link",(function(e){var a,i,o,n,l=t(this),s={};function c(e){var t;for(t=0;t<r.length;t++)r[t](e)}t.each(["data-region","data-instance","data-record","data-column","data-for"],(function(e,t){var a=t.substr(5),i=l.attr(t);void 0!==i&&(s[a]=i)})),(o=s.for)?(c(o),n=apex.item(o),0===t("#"+o+"_CONTAINER,#"+o+"_DISPLAY,#"+o,apex.gPageContext$).filter(":visible").length&&n.show(),n.setFocus()):s.region&&(c(i=s.region),(a=apex.region(i))&&a.gotoError(s)),e.preventDefault()})).on("click",".js-showDetails",(function(e){var a=t(this),i=a.next();u(i,{callback:function(){a.after(i)},dialogClass:"ui-dialog--notificationLarge"})})).on("keydown",".a-Notification-link",(function(e){112===e.which&&e.altKey&&t(this).parent().find(".js-showDetails").click()}))}))}(apex.message,apex.jQuery,apex.util,apex.lang);