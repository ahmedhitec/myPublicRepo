!function(e,t,s,i,a,o){"use strict";var n={},r=e.applyTemplate;function l(e){return i.getMessage("APEX.GV."+e)}function d(e){var t=Array.prototype.slice.call(arguments);return t[0]="APEX.GV."+e,i.formatMessage.apply(i,t)}function h(e,t){return Math.floor(e/t)*t}function c(t,s){var i,a=apex.locale;return"number"!=typeof t&&(i=new RegExp(e.escapeRegExp(a.getCurrency())+"|"+e.escapeRegExp(a.getDualCurrency())+"|"+a.getISOCurrency()+"|"+e.escapeRegExp(a.getGroupSeparator()),"g"),t=t.replace(i,""),"."!==a.getDecimalSeparator()&&t.replace(a.getDecimalSeparator(),".")),t}o.widget("apex.tableModelViewBase",{version:"20.2",widgetEventPrefix:"tableModelViewBase",options:{modelName:null,noDataMessage:"",noDataIcon:"icon-irr-no-results",moreDataMessage:"",hideEmptyFooter:!1,editable:!1,autoAddRecord:!1,hasSize:!1,progressOptions:null,stickyFooter:!1,pagination:{scroll:!1,loadMore:!1,showPageLinks:!1,maxLinks:5,showPageSelector:!1,showRange:!0,firstAndLastButtons:!1,hideSinglePage:!1},highlights:{},highlighter:null,highlighterContext:null,rowsPerPage:null,selectionStatusMessageKey:"APEX.GV.SELECTION_COUNT",hideDeletedRows:!1,footer:!0,scrollParentOverride:null},firstPage:function(){return!this.renderInProgress&&(this.options.pagination.scroll?this.scrollParent$.scrollTop(this.scrollDelta):this.pageOffset>0&&(this.pageOffset=0,this.refresh(!1)),!0)},previousPage:function(){var e,t;return!this.renderInProgress&&(this.options.pagination.scroll?((t=(e=this.scrollParent$).scrollTop()-this.scrollDelta-this.displayPageHeight)<0&&(t=0),e.scrollTop(t+this.scrollDelta)):this.pageOffset>0&&(this.pageOffset-=this.pageSize,this.pageOffset<0&&(this.pageOffset=0),this.refresh(!1)),!0)},nextPage:function(){var e,t,s,i;return!this.renderInProgress&&(this.options.pagination.scroll?(e=this.scrollParent$,t=this._getDataContainer().first().height()-this.displayPageHeight,(s=e.scrollTop()-this.scrollDelta+this.displayPageHeight)>t&&(s=t),e.scrollTop(s+this.scrollDelta)):((i=this.model.getTotalRecords())<0||this.pageOffset+this.pageCount<i)&&(this.pageOffset+=this.pageSize,this.refresh(!1)),!0)},lastPage:function(){var e,t,s,i;return!this.renderInProgress&&(this.options.pagination.scroll?(t=this.scrollParent$,s=this._getDataContainer().first().height()-this.displayPageHeight,t.scrollTop(s+this.scrollDelta)):(i=this.model.getTotalRecords())>0&&(e=Math.ceil(i/this.pageSize),this.pageOffset=(e-1)*this.pageSize,this.refresh(!1)),!0)},loadMore:function(){return this.options.pagination.scroll&&!this.scrollPaging?this._addNextPage():this.nextPage()},gotoPage:function(e){var t,s=this.model.getTotalRecords();return!this.renderInProgress&&(s>0&&(t=Math.ceil(s/this.pageSize),e>=0&&e<t&&(this.pageOffset=e*this.pageSize,this.refresh(!1))),!0)},getActiveRecordId:function(){return this.activeRecordId},getActiveRecord:function(){return this.activeRecord},setActiveRecordValue:function(e){var t=this.columnItems[e];this.activeRecord&&t&&(this.ignoreItemChange=!0,this._setModelValue(null,t.item,this.activeRecord,e,!0),this.ignoreItemChange=!1)},lockActive:function(){this.activeRecord&&(this.activeLockCount+=1)},unlockActive:function(){this.activeRecord&&(this.activeLockCount-=1,this.activeLockCount<0&&(this.activeLockCount=0),0===this.activeLockCount&&(this.activeUnlockCallback&&(this.activeUnlockCallback(),this.activeUnlockCallback=null),this.finishEditingCallback&&(this.finishEditingCallback(),this.finishEditingCallback=null)))},finishEditing:function(){var e=this,t=o.Deferred();function s(){e._finishEditing?e._finishEditing(t):t.resolve()}return this.activeLockCount>0?this.finishEditingCallback=s:s(),t.promise()},addStateIcon:function(t,s,i){var a=e.htmlBuilder();this.stateIconMessages[t]=i,0===this.stateIcons$.find("[data-state='"+t+"']").length&&(a.markup("<span tabindex='0'").attr("class",s).attr("data-state",t).markup("></span>"),this.stateIcons$.append(a.toString()))},removeStateIcon:function(e){this.stateIcons$.find("[data-state='"+e+"']").remove(),delete this.stateIconMessages[e]},_create:function(){var e=this.options;e.hideDeletedRows&&this.element.addClass("a-GV--hideDeleted"),this.pageOffset=0,this.pageCount=0,this.pageSize=10,this.noData=!0,this.onLastPage=!1,this.lastScrollLeft=null,this.lastScrollTop=null,this.stateIconMessages={},this.reinitCallbacks=null,this.pendingRefresh=null,this.ignoreFieldChange=null,this.activeRecord=null,this.activeRecordId=null,this.activeLockCount=0,this.activeUnlockCallback=null,this.columnItems=null,this.columnItemsContainer$=null,e.progressOptions||(e.progressOptions={fixed:!e.hasSize}),e.pagination.scroll&&(e.rowsPerPage=null),e.rowsPerPage&&(this.pageSize=e.rowsPerPage)},_tableModelViewDestroy:function(){this.footer$.remove(),this.footer$=null,this.pageRange$=null,this.pageSelector$=null,this.status$=null,this.stateIcons$=null,this.element.removeClass("a-GV--hideDeleted"),this._scrollHandler&&this.scrollParent$.off("scroll",null,this._scrollHandler)},_refreshCheckIfVisible:function(){return null===this.element[0].offsetParent?(this.pendingRefresh=!0,!1):(this.pendingRefresh=!1,!0)},_initModel:function(e,s){var i,a=this.options,o=this;if(this.model&&(this.model.unSubscribe(this.modelViewId),this.modelName!==e&&t.release(this.modelName),this.model=null,this.modelName=null),e){if(this.modelName=e,this.model=t.get(e),!this.model)throw new Error("Model not found: "+e);this.modelViewId=this.model.subscribe({onChange:s||function(e,t){var s,n,r,l,d,h,c,g,u,p,f;if(!o.pendingRefresh){if("refresh"===e)o.pageOffset=0,o.pageCount=0,o.refresh();else if("refreshRecords"===e||"revert"===e)for(n=o._elementsFromRecordIds(t.recordIds),s=0;s<n.length;s++)(r=n[s])&&(l=t.records[s],h=t.recordIds[s],d=t.newIds[h]||h,c=o.model.getRecordMetadata(d),o._replaceRecord(r,l,h,d,c));else if("move"===e)for(p=t.records,t.insertAfterId&&(r=(n=o._elementsFromRecordIds([t.insertAfterId])).length>0?n[0]:null),s=p.length-1;s>=0;s--)l=p[s],d=o.model.getRecordId(l),c=o.model.getRecordMetadata(d),(n=o._elementsFromRecordIds([d])).length>0&&n[0]&&o._removeRecord(n[0]),g=o._insertRecord(r,l,d,c,r?"after":"before");else if("insert"===e||"copy"===e)if("insert"===e?(f=!1,p=[t.record]):(f=!0,p=t.records),t.insertAfterId&&(r=(n=o._elementsFromRecordIds([t.insertAfterId])).length>0?n[0]:null),o.noData)setTimeout((function(){o.refresh(),(n=o._elementsFromRecordIds([o.model.getRecordId(p[0])])).length>0&&n[0]&&o._afterInsert(n,f)}),1);else{for(u=[],s=p.length-1;s>=0;s--)l=p[s],d=o.model.getRecordId(l),c=o.model.getRecordMetadata(d),g=o._insertRecord(r,l,d,c,r?"after":"before"),u.push(g);o._afterInsert(u,f)}else if("clearChanges"===e){if(i)for(n=o._elementsFromRecordIds(t.deletedIds),s=0;s<n.length;s++)n[s]&&o._removeRecord(n[s]);for(n=o._elementsFromRecordIds(t.changedIds),s=0;s<n.length;s++)(r=n[s])&&(d=t.changedIds[s],c=o.model.getRecordMetadata(d),l=o.model.getRecord(d),o._updateRecordState(r,d,l,c))}else if(t.recordIds){for(n=o._elementsFromRecordIds(t.recordIds),s=0;s<n.length;s++)(r=n[s])&&(d=t.recordIds[s],c=o.model.getRecordMetadata(d),l=t.records[s],"delete"===e?(!a.hideDeletedRows&&i&&null!==c||o._removeFocus(r),i&&null!==c?o._updateRecordState(r,d,l,c):o._removeRecord(r)):o._updateRecordState(r,d,l,c));"delete"===e&&(0===o.model.getTotalRecords()?o.refresh():a.hideDeletedRows&&(o.element.find(".is-deleted").removeClass("is-selected").removeAttr("aria-selected"),o._updateStatus()))}else"set"===e||"metaChange"===e?null!==o.ignoreFieldChange&&o.ignoreFieldChange===t.field||(l=t.record,d=o.model.getRecordId(l),t.oldIdentity&&o._identityChanged(t.oldIdentity,d),c=o.model.getRecordMetadata(d),(n=o._elementsFromRecordIds([d])).length>0&&n[0]&&("set"===e&&o._updateRecordField(n[0],l,t.field,c),o._updateRecordState(n[0],d,l,c))):"instanceRename"===e&&o.modelName[1]===t.oldInstance&&(o.modelName[1]=t.newInstance);o._updateTotalRecords()}},progressView:this.element,progressOptions:a.progressOptions}),i=this.model.getOption("onlyMarkForDelete"),this.options.pagination.scroll&&this.scrollParent$&&this.scrollParent$.scrollTop(0),this.pageOffset=0,this.pageCount=0}},_renderButton:function(e,t,s,i){e.markup("<button class='"+t+"' type='button'").attr("aria-label",i).attr("title",i).markup("><span aria-hidden='true' class='a-Icon ").attr(s).markup("'></span></button>")},_renderAltDataMessages:function(e,t){var s=this.options;function i(s,i,a,o){e.markup("<div class='"+s+" a-GV-altMessage' style='display:none;'><div class='a-GV-altMessage-icon'>").markup("<span aria-hidden='true' class='a-Icon "+a+"'></span>").markup("</div><span class='a-GV-altMessage-text'").optionalAttr("id",t?t+i+"_msg":null).markup(">").markup(o).markup("</span></div>")}i("a-GV-noDataMsg","_no",s.noDataIcon,s.noDataMessage),i("a-GV-moreDataMsg","_more","icon-warning",s.moreDataMessage)},_renderLoadMore:function(e){var t=this.options;t.pagination.scroll&&t.pagination.loadMore&&!this.scrollPaging&&e.markup("<div class='a-GV-loadMore'><button type='button' class='js-load a-GV-loadMoreButton'>").content(l("LOAD_MORE")).markup("</button></div>")},_renderFooter:function(e,t){var s,i,a=this.options;function o(){var s=l("PAGE_RANGE");e.markup("<span class='js-rangeDisplay'").optionalAttr("id",t?t+"_pageRange":null).attr("title",s).markup("><span class='u-vh'>").content(s).markup("</span><span class='a-GV-pageRange'></span></span>")}a.footer&&(e.markup("<div class='a-GV-footer'><div class='a-GV-stateIcons'></div><div").optionalAttr("id",t?t+"_status":null).markup(" class='a-GV-status'></div><div class='a-GV-pagination'>"),a.pagination&&(s=!1,i=this.model.getOption("hasTotalRecords"),a.pagination.scroll||(i&&a.pagination.firstAndLastButtons&&this._renderButton(e,"a-GV-pageButton a-GV-pageButton--nav js-pg-first","icon-first",l("FIRST_PAGE")),this._renderButton(e,"a-GV-pageButton a-GV-pageButton--nav js-pg-prev","icon-prev",l("PREV_PAGE"))),i&&(a.pagination.showPageLinks||a.pagination.showPageSelector)?e.markup("<span class='a-GV-pageSelector'></span>"):a.pagination.showRange&&(o(),s=!0),a.pagination.scroll||(this._renderButton(e,"a-GV-pageButton a-GV-pageButton--nav js-pg-next","icon-next",l("NEXT_PAGE")),i&&a.pagination.firstAndLastButtons&&this._renderButton(e,"a-GV-pageButton a-GV-pageButton--nav js-pg-last","icon-last",l("LAST_PAGE"))),!s&&a.pagination.showRange&&o()),e.markup("</div></div>"))},_refreshPagination:function(e){var t=this.options;this.scrollPaging=t.pagination.scroll&&(this.model.getOption("hasTotalRecords")||!t.pagination.loadMore),this.lastScrollTop=0,this.lastScrollLeft=0,e.length&&(t.hasSize||(e=t.scrollParentOverride?o(t.scrollParentOverride):o(window)),this.lastScrollLeft=e.scrollLeft(),this.lastScrollTop=e.scrollTop())},_paginationHasFocus:function(){var e,t=o(document.activeElement);if(t.closest(".a-GV-footer").length>0){if(t.parent().hasClass("a-GV-pageSelector-item"))return t.parent().attr("data-value");if(e=/js-pg-\S+/.exec(t.attr("class")))return"."+e[0]}return!1},_restorePaginationFocus:function(e){var t,s;e&&((t=e)>=0&&(t="[data-value='"+e+"'] button"),(s=this.footer$.find(t))[0]&&s[0].disabled&&(s=this.footer$.find(":focusable").eq(0)),s.focus())},_initPaginationFooter:function(e){var t=this,s=this.options,i=this.element.hasClass("u-RTL")?"right":"left";this.pageKey=null,this.footer$=this.element.find(".a-GV-footer"),this.status$=this.footer$.find(".a-GV-status"),this.stateIcons$=this.footer$.find(".a-GV-stateIcons"),this.pageRange$=this.footer$.find(".a-GV-pageRange"),this.pageSelector$=this.footer$.find(".a-GV-pageSelector"),this.noData$=this.element.find(".a-GV-noDataMsg"),this.moreData$=this.element.find(".a-GV-moreDataMsg"),o.ui.tooltip&&this.stateIcons$.tooltip({content:function(){var e=o(this).attr("data-state");return t.stateIconMessages[e]},items:"[data-state]",show:apex.tooltipManager.defaultShowOption(),tooltipClass:"a-GV-tooltip",position:{my:i+" bottom",at:i+" top-10",collision:"flipfit"}}),this._updateScrollHandler(e),s.pagination.scroll&&(this.pageOffset=0,this.pageCount=0),!s.hasSize&&s.footer&&s.stickyFooter&&o.apex.stickyWidget&&this.footer$.stickyWidget({isFooter:!0,toggleWidth:!0,stickToEnd:!0,top:function(){return t.element.offset().top+t._getHeaderHeight()}}),s.pagination.showPageLinks?this.pageSelector$.click((function(e){var s=o(e.target).parent();s.length&&t.gotoPage(parseInt(s.attr("data-value"),10)),e.preventDefault()})):s.pagination.showPageSelector&&this.pageSelector$.change((function(e){t.gotoPage(parseInt(o(e.target).val(),10))})),this.footer$.find(".js-pg-first").click((function(){t.firstPage()})),this.footer$.find(".js-pg-prev").click((function(){t.previousPage()})),this.footer$.find(".js-pg-next").click((function(){t.nextPage()})),this.footer$.find(".js-pg-last").click((function(){t.lastPage()})),this.element.find(".js-load").click((function(){t.loadMore()}))},_footerHeight:function(){return this.footer$&&this.footer$.outerHeight()||0},_addNextPage(){if(this.renderInProgress)return!1;let e=this.model.getTotalRecords();return(e<0||this.pageOffset+this.pageCount<e)&&(this.pageOffset+=this.pageCount,this._addPageOfRecords()),!0},_addPageOfRecords:function(e){var t,s,i,a,n,r,l=this._hasControlBreaks(),d=this,c=this.options,g=this._getDataRenderContext();function u(e,t,s,i,a){var o;return e>=t||(s.attr("data-start",e),s.attr("data-end",t),o=Math.floor((t-e)/i)*a,s.css("height",o),!1)}if(!this.renderInProgress){if(n=d.noData$.parent().children().not(".a-GV-altMessage"),(this.noData||this.moreData$.is(":visible"))&&(this.noData$.hide(),this.moreData$.hide(),n.show(),this.resize()),a=d._getDataContainer(),0!==this.pageOffset&&c.pagination.scroll||(this.pageFirstOffset="",this.pageLastOffset=""),this.controlBreakCollapsed=!!l&&null,l)if(0!==this.pageOffset&&c.pagination.scroll){let e=this.model.getOption("metaField");if(e){let t,s=this.model.recordAt(this.pageOffset-1);s&&(t=this.model.getValue(s,e),r=!0===t.endControlBreak)}}else r=!0;t=0,s=this.pageSize,c.pagination.scroll||(this.pageOffset=h(this.pageOffset,this.pageSize)),i=this.pageOffset,this.renderInProgress=!0,this.model.forEachInPage(this.pageOffset,s,(function(h,p,f){var m,_,v;h&&(_=(m=f?this.model.getRecordMetadata(f):{}).serverOffset,l&&!m.agg&&(!0,r&&(r=!1,v=this._controlBreakLabel(h),this._renderBreakRecord(g,!0,v,_)),m.endControlBreak&&(r=!0)),this._renderRecord(g,h,p,f,m),void 0!==_&&(_+=1,""===this.pageFirstOffset&&(this.pageFirstOffset=_),this.pageLastOffset=_),t+=1),t!==s&&h||function(){var s,r,l,h,p,f=null,m=d.model.getOption("hasTotalRecords"),_=d.displayPageHeight/d.displayPageSize;if(d.pageCount=t,0===d.pageOffset&&0===t)d.noData=!0,n.hide(),d.moreData$.hide(),d.noData$.show(),c.autoAddRecord&&d.model.allowAdd()&&d._autoAddRecord();else{if(0===t)return void(c.pagination.scroll||(d.pageOffset-=d.pageSize,d.pageOffset<0&&(d.pageOffset=0),d.renderInProgress=!1,d._addPageOfRecords()));d.noData=!1,d.noData$.hide(),d.model.getDataOverflow()&&c.moreDataMessage?(d.moreData$.show(),n.hide()):(d.moreData$.hide(),n.show()),d.scrollPaging&&m?(s=a.last().find(".a-GV-scrollFiller"),p=l=d.model.getTotalRecords(),0===s.length?(r=d._getDataRenderContext(),d._renderFillerRecord(r,"a-GV-scrollFiller"),(s=d._insertFiller(r,null)).attr("data-start",0),s.attr("data-end",l),s=s.last()):0===s.last().next().length&&(p=parseInt(s.last().attr("data-end"),10)),2===a.length&&(f=a.first().find(".a-GV-scrollFiller")),l!==p&&(s.last().attr("data-end",l),f&&f.last().attr("data-end",l)),h=d._getRecordsPerRow(),s.each((function(e){var a,n=!1,l=!1,c=o(f?[f[e],this]:this),p=parseInt(c.last().attr("data-start"),10),m=parseInt(c.last().attr("data-end"),10);if(i<=p?(n=u(i+t,m,c,h,_),d._insertData(g,i,t,c,"before"),l=!0):i+t<m?(u(i+t,m,c,h,_),r=d._getDataRenderContext(),d._renderFillerRecord(r,"a-GV-scrollFiller"),a=d._insertFiller(r,c),u(p,i-1,a,h,_),n=d._insertData(g,i,t,c,"before"),l=!0):i+t!==m+1&&e!==s.length-1||(n=u(p,i-1,c,h,_),d._insertData(g,i,t,c,"after"),l=!0),l)return n&&c.remove(),!1}))):d._insertData(g,i,t)}if(d._updateTotalRecords(),d.renderInProgress=!1,c.pagination.scroll&&(d.controlBreakCollapsed||!m&&a.last().height()<d.scrollParent$.height())){let t=d.model.getTotalRecords();if(t<0||d.pageOffset+d.pageCount<t){let t=!0;d.pageOffset+=d.pageCount,d.scrollPaging&&m&&(t=!1,(s=a.last().find(".a-GV-scrollFiller")).each((function(){if(d.pageOffset===parseInt(o(this).attr("data-start"),10))return t=!0,!1}))),t&&d._addPageOfRecords(e)}}else e&&e()}()}),this)}},_initPageSize:function(){var t,s,i,a,n=this.options,r=n.hasSize?this.scrollParent$[0]:document;r||(r=document),t=this._getRecordHeight(),r===document?(s=o(window).height(),this.footer$.hasClass("js-stickyWidget-toggle")&&(s-=this._footerHeight()),(a=this._getStickyTop())>0&&(s-=a+this._getHeaderHeight())):s=r.offsetHeight,s-=e.getScrollbarSize().height,t<=0&&(t=24),(i=Math.floor(s/t))<1&&(i=1),this.displayPageSize=i,this.displayPageHeight=i*t,i*=this._getRecordsPerRow(),this.options.rowsPerPage||(this.pageSize=n.pagination.scroll?Math.max(40,2*i):i)},_updateStatus:function(){var e,t=this._selectedCount(),s="";this.options.hideDeletedRows&&(e=this._deletedCount()),t>0&&(s+=i.format(this._selectedStatusMessage(),t)),e>0&&(s&&(s+=", "),s+=d("DELETED_COUNT",e)+" "),this.status$.text(s)},_setModelValue:function(e,t,s,i,a){var o,n,r,d,h,g;e&&e.removeClass("is-active"),o=t.getValue(),a||(this.ignoreFieldChange=i),"NUMBER"===(g=this.model.getOption("fields")[i]).dataType&&g.formatMask&&(o=c(o,g.formatMask)),h=this.model.getRecordId(s),null!==(n=this.model.getValue(s,i))&&"object"==typeof n&&n.hasOwnProperty("v")&&(o={v:o,d:t.displayValueFor(o)}),"DUP"===this.model.setValue(s,i,o)?(this._setColumnItemValue(t,s,i),apex.message.alert(l("DUP_REC_ID"))):(r=t.getValidity(),d=this.model.getRecordId(s),r.valid?this.model.setValidity("valid",d,i):this.model.setValidity("error",d,i,t.getValidationMessage()),d!==h&&this._identityChanged(h,d)),a||(this.ignoreFieldChange=null)},_initColumnItems:function(e){var t,i,r,l,d,h=!0;for(this.columnItems={},this.columnItemsContainer$=null,t=0;t<e.length;t++)d=null,(l=(i=e[t]).elementId)&&(n[l]?r=(d=this.columnItems[i.property]=n[l]).item:(r=a(l)).node&&(h=!1,n[l]=d=this.columnItems[i.property]={element$:o("#"+l).closest(".a-GV-columnItem"),item:r}),d&&!this.columnItemsContainer$&&(this.columnItemsContainer$=d.element$.parent()));this.columnItemsContainer$?h||this.columnItemsContainer$.find(":tabbable").addClass("js-tabbable").attr("tabindex",-1):this.editable&&s.error("An editable "+this.widgetName+" must have at least one column with a column item.")},_activateColumnItem:function(e,t){var s=e.element$;s.find(".js-tabbable").attr("tabindex",0).removeClass("js-tabbable"),t&&s.find(":tabbable").first().attr("aria-labelledby",t)},_deactivateColumnItem:function(e,t){var s=e.element$,i=s.find(":tabbable");i.first().removeAttr("aria-labelledby"),this.columnItemsContainer$.append(s),i.addClass("js-tabbable").attr("tabindex",-1)},_renderFieldDataValue:function(t,s,i,a,o){var n,l,d,h=null,g=this.options;(o&&o.url||s.linkTargetColumn)&&!a.agg&&(h=s.linkTargetColumn?this.model.getValue(i,s.linkTargetColumn)||null:o.url),n=this.model.getValue(i,s.property),(a.agg||a.inserted&&s.readonly)&&this.model.isIdentityField(s.property)&&(n=""),(s.linkText||s.linkAttributes||s.cellTemplate)&&(l={model:this.model,record:i}),h&&(t.markup("<a").attr("href",h),s.linkAttributes&&t.markup(r(s.linkAttributes,l)),t.markup(" tabindex='-1'>")),h&&s.linkText?t.markup(r(s.linkText,l)):s.cellTemplate?a.agg?t.content(""):(n=r(s.cellTemplate,l),g.highlighter&&(n=g.highlighter(g.highlighterContext,n,s)),t.markup(n)):null!==n&&""!==n||!(g.showNullAs||a.agg||h)?(null===n&&(n=""),"object"==typeof n&&n.hasOwnProperty("d")?n=n.d:"NUMBER"===s.dataType&&s.formatMask?n=apex.locale.formatNumber(c(n),s.formatMask):(d=this.columnItems[s.property])&&(n=d.item.displayValueFor(n,{readonly:o&&!!o.ck||s.readonly||a.deleted||!1,disabled:o&&o.disabled||!1})),!1!==s.escape&&(n=e.escapeHTML(""+n)),g.highlighter&&(n=g.highlighter(g.highlighterContext,n,s)),t.markup(n)):(n=a.agg||a.inserted||o&&(o.changed||o.error||o.warning)?"":h||g.showNullAs,t.content(n)),h&&t.markup("</a>")},_beginSetColumnItems:function(){this.reinitCallbacks=[]},_setColumnItemValue:function(e,t,s,i){var a,o=null,n=this.model.getValue(t,s);null!==n&&"object"==typeof n&&n.hasOwnProperty("d")&&(o=n.d,n=n.v),this.reinitCallbacks?(a=e.reinit(n,o))&&this.reinitCallbacks.push(a):e.setValue(n,o),i&&(i.fields&&i.fields[s]&&i.fields[s].disabled?e.disable():e.enable())},_endSetColumnItems:function(){var e,t=this.reinitCallbacks;if(t)for(e=0;e<t.length;e++)t[e]();this.reinitCallbacks=null},_autoAddRecord:function(e){var t=this.model.insertNewRecord(null,e);this.model.getRecordMetadata(t).autoInserted=!0},_triggerBeginEditing:function(e,t){this.element.trigger("apexbeginrecordedit",[{model:this.model,record:e,recordId:t}])},_triggerEndEditing:function(e,t){this.element.trigger("apexendrecordedit",[{model:this.model,record:e,recordId:t}])},_updateHighlights:function(){var e,t,s=this.options,i=[],a="";for(e in s.highlights)s.highlights.hasOwnProperty(e)&&((t=s.highlights[e]).id=e,i.push(t));for(i.sort((function(e,t){return t.seq-e.seq})),e=0;e<i.length;e++)(t=i[e]).cssClass||(t.cssClass=(t.row?"hlr_":"hlc_")+t.id),(t.color||t.background)&&(t.row?a+="."+t.cssClass+" td":a+="td."+t.cssClass,a+=" { ",t.color&&(a+="color: "+t.color+" !important; "),t.background&&(a+="background-color: "+t.background+" !important; "),a+="}\n");!this.gridStyles$&&a&&(this.gridStyles$=o("<style type='text/css'></style>"),o("head").append(this.gridStyles$)),this.gridStyles$&&(this.gridStyles$=this.gridStyles$.text(a))},_setOption:function(e,t){var i=this.options;this._super(e,t),"noDataMessage"===e?this.element.find(".a-GV-altMessage > .a-GV-altMessage-text").text(t):"noDataIcon"===e?this.element.find(".a-GV-altMessage > .a-GV-altMessage-icon span").attr("class","a-Icon "+t):"rowsPerPage"===e?(i.pagination.scroll&&(i.rowsPerPage=null),i.rowsPerPage&&(this.pageSize=i.rowsPerPage)):"hideDeletedRows"===e?(this.element.toggleClass("a-GV--hideDeleted",t),!0===t&&this.element.find(".is-deleted").removeClass("is-selected").removeAttr("aria-selected"),this._updateStatus()):"scrollParentOverride"===e&&(i.hasSize?s.warn("Ignoring scrollParentOverride when hasSize is true."):this._updateScrollHandler())},_updateScrollHandler:function(e){var t=this,s=this.options,i=s.hasSize,a=this.scrollParent$,n=s.scrollParentOverride;i?(this.scrollParent$=e,this.scrollDelta=0):(this.scrollParent$=o(n||window),this.scrollDelta=this.element.offset().top-this._getStickyTop()),this.scrollPaging&&(a&&this._scrollHandler?a.off("scroll",null,this._scrollHandler):this._scrollHandler=function(){t.element[0].clientWidth>0&&t._scrollPage()},this.scrollParent$.on("scroll",null,this._scrollHandler))},_scrollPage:function(){var e=this,t=!this.model.getOption("hasTotalRecords"),s=this.scrollParent$.scrollTop();s!==this.lastScrollTop&&(this.lastScrollTop=s,this.scrollPageTimer||(this.scrollPageTimer=setTimeout((function(){e.options;var s,i,a,n,r,l,d,c,g=e.displayPageHeight/e.displayPageSize;e.scrollPageTimer=null,e.renderInProgress||(r=e.scrollParent$.height(),d=(l=0-r/2)+(r*=2),t?(a=(i=e._getDataContainer().first()).height(),0-((e.scrollParent$[0]===window?i.offset().top:i.position().top)-e.scrollParent$.scrollTop())+1.5*r>a&&((c=e.model.getTotalRecords())<0||this.pageOffset+this.pageCount<c?(e.pageOffset+=e.pageCount,e._addPageOfRecords()):e.scrollParent$.off("scroll",null,e._scrollHandler))):((s=e._getDataContainer().first().find(".a-GV-scrollFiller")).length||e.scrollParent$.off("scroll",null,e._scrollHandler),n=e.pageOffset,s.each((function(){var t,s,i=o(this),a=i.height(),c=parseInt(i.attr("data-start"),10),u=parseInt(i.attr("data-end"),10);if(c!==u)return t=(s=(e.scrollParent$[0]===window?i.offset().top:i.position().top)-e.scrollParent$.scrollTop())+a,s<=d&&t>=l?(e.pageOffset=a<2*r||s>l?c:h(t<d?u:c+Math.floor((a-t)/g),e.pageSize),e.pageOffset!==n&&e._addPageOfRecords(),!1):void 0}))))}),300)))},_updateTotalRecords:function(){var e,t,s,i,a,n,r,h,c=null,g=null,u=this.options,p=u.pagination,f=this.model.getTotalRecords(),m=this.model.getServerTotalRecords();if(f>=0&&(c=Math.ceil(f/this.pageSize),g=Math.floor(this.pageOffset/this.pageSize)),null!==this.lastScrollLeft&&(this.scrollParent$.scrollLeft(this.lastScrollLeft),this.scrollParent$.scrollTop(this.lastScrollTop),this.lastScrollLeft=null,this.lastScrollTop=null),this.onLastPage=!1,0===this.pageCount&&0===this.pageOffset?(i="",this.onLastPage=!0,this.footer$.find(".js-pg-prev,.js-pg-next,.js-pg-first,.js-pg-last").attr("disabled",!0)):(this.footer$.find(".js-pg-prev,.js-pg-next,.js-pg-first,.js-pg-last").attr("disabled",!1),this.element.find(".js-load").attr("disabled",!1),0===this.pageOffset&&this.footer$.find(".js-pg-prev,.js-pg-first").attr("disabled",!0),f>0&&g===c-1&&(this.onLastPage=!0,this.footer$.find(".js-pg-next,.js-pg-last").attr("disabled",!0),this.element.find(".js-load").attr("disabled",!0)),r=this.model.getOption("hasTotalRecords"),i=this.scrollPaging&&r?d("TOTAL_PAGES",m):r?p.hideSinglePage&&1===c?d("TOTAL_PAGES",m):d("PAGE_RANGE_XYZ",this.pageFirstOffset,this.pageLastOffset,m):d("PAGE_RANGE_XY",this.pageFirstOffset,this.pageLastOffset)),document.activeElement&&document.activeElement.disabled&&o(document.activeElement).hasClass("js-load")&&this.focus(),this.pageRange$.text(i),c>0){if(p.showPageLinks){if(n=f+"_"+this.pageSize+"_"+g,this.pageKey!==n){for(h="<li class='a-GV-pageSelector-item'>&hellip;</li>",this.pageKey=n,a="<ul class='a-GV-pageSelector-list'>",(t=g-Math.floor(p.maxLinks/2))<0&&(t=0),(s=t+p.maxLinks)>=c&&(t=(s=c)-p.maxLinks)<0&&(t=0),t>0&&(a+=h),e=t;e<s;e++)a+="<li class='a-GV-pageSelector-item' data-value='"+e+"'><button class='a-GV-pageButton' type='button'>"+(e+1)+"</button></li>";s<c&&(a+=h),a+="</ul>",this.pageSelector$.html(a)}this.pageSelector$.find(".is-selected").removeClass("is-selected"),this.pageSelector$.find("[data-value="+g+"]").addClass("is-selected")}else if(p.showPageSelector){if(n=f+"_"+this.pageSize,this.pageKey!==n){for(this.pageKey=n,a="<select class='a-GV-pageSelectlist' size='1' aria-label='"+l("PAGE_SELECTION")+"'>",e=0;e<c;e++)a+="<option value='"+e+"'>"+d("SELECT_PAGE_N",e+1)+"</option>";a+="</select>",this.pageSelector$.html(a)}this.pageSelector$.children("select").val(g)}}else this.pageSelector$.empty(),this.pageKey=null;p.hideSinglePage&&!p.scroll&&this.footer$.find(".js-pg-prev,.js-pg-next,.js-pg-first,.js-pg-last"+(r?"":",.js-rangeDisplay")).add(this.pageSelector$)[1===c?"hide":"show"](),u.hideEmptyFooter&&this.footer$[this.noData?"hide":"show"]()},_getHeaderHeight:function(){return 0},_getStickyTop:function(){return 0},_getRecordsPerRow:function(){return 1},_getDataRenderContext:function(){return e.htmlBuilder()},_getDataContainer:function(){return o()},_selectedCount:function(){return 0},_selectedStatusMessage:function(){return i.getMessage(this.options.selectionStatusMessageKey)},_deletedCount:function(){return 0},_hasControlBreaks:function(){return!1},_elementsFromRecordIds:function(e){return[]},_renderFillerRecord:function(e,t){},_insertFiller:function(e,t){return o()},_insertData:function(e,t,s,i,a){},_controlBreakLabel:function(e){return{label:""}},_renderBreakRecord:function(e,t,s,i){e.markup("<h3>").content(s.label).markup("</h3>")},_renderRecord:function(e,t,s,i,a){},_removeRecord:function(e){},_insertRecord:function(e,t,s,i,a){return o()},_afterInsert:function(e,t){},_identityChanged:function(e,t){},_replaceRecord:function(e,t,s,i,a){},_updateRecordField:function(e,t,s,i){},_removeFocus:function(e){},_updateRecordState:function(e,t,s,i){}});var g=o.ui.keyCode;o.widget("apex.tableModelView",o.apex.tableModelViewBase,{version:"19.1",widgetEventPrefix:"tableModelView",options:{beforeTemplate:"<ul>",recordTemplate:null,afterTemplate:"</ul>",collectionClasses:null,iconClassColumn:null,imageURLColumn:null,imageAttributes:null,labelColumn:null,linkTarget:!1,linkTargetColumn:null,linkAttributes:null,useIconList:!1,iconListOptions:{},constrainNavigation:!0,selectionChange:null,pageChange:null},_create:function(){var e=this.options,t=this.element;s.info("TabelModelView '"+t[0].id+"' created. Model: "+e.modelName),t.addClass("a-TMV"),this.rowHeight=null,this.recPerRow=null,this._super(),this._initModel(e.modelName),this._on(this._eventHandlers),this._initRecordTemplate(),this.refresh(),e.disabled&&this._setOption("disabled",e.disabled)},_eventHandlers:{keydown:function(e){var t,s=this.options,i=e.which;s.useIconList&&!e.isDefaultPrevented()&&(!(t=this.getIconList().options).navigation&&t.noNavKeyContent&&o(e.target).closest(t.noNavKeyContent).length||(i!==g.DOWN&&i!==this.getIconList().forwardKey||!s.pagination.loadMore?(i===g.UP||i===this.getIconList().backwardKey)&&s.pagination.loadMore&&o(e.target).hasClass("js-load")&&(this.getIconList().focus(),e.preventDefault()):this.element.find(".js-load").not(":disabled").focus()[0]&&e.preventDefault(),!s.constrainNavigation||i!==g.DOWN&&i!==g.UP&&i!==g.LEFT&&i!==g.RIGHT&&i!==g.PAGE_UP&&i!==g.PAGE_DOWN||e.preventDefault()))},resize:function(e){e.target===this.element[0]&&(this.resize(),e.stopPropagation())}},_destroy:function(){this._tableModelViewDestroy(),this.element.removeClass("a-TMV is-disabled").empty(),this.data$=null,this._initModel(null)},_setOption:function(e,t){this.options;if(s.info("TabelModelView '"+this.element[0].id+"' set option '"+e+"' to: ",t),"iconListOptions"===e)throw new Error("TabelModelView "+e+" cannot be set. Set options directly on the iconList widget");if(this._super(e,t),"disabled"===e){if(this.element.toggleClass("is-disabled",t),this.options.useIconList)return this.getIconList().option(e,t);t&&this.resize()}else"modelName"===e?(this._initModel(t),this.refresh(!1)):"highlights"===e?this._updateHighlights():"beforeTemplate"===e||"recordTemplate"===e||"afterTemplate"===e||"collectionClasses"===e||"iconClassColumn"===e||"imageURLColumn"===e||"imageAttributes"===e||"labelColumn"===e||"linkTarget"===e||"linkTargetColumn"===e||"linkAttributes"===e?(this._initRecordTemplate(),this.refresh()):"footer"!==e&&"useIconList"!==e&&"pagination"!==e||this.refresh()},refresh:function(e){var t,s=!1,i=this,a=this.element;!0!==e&&(s=this._paginationHasFocus()),void 0===e&&(e=o(document.activeElement).closest(a).length>0),this._refreshCheckIfVisible()&&(this.data$&&(t=this.getSelectedRecords()),this._refreshPagination(a.find(".a-TMV-w-scroll")),this._initView(),this._updateStatus(),this.resize(),this._addPageOfRecords((function(){s&&(i._restorePaginationFocus(s),e=!1),t&&t.length>0&&i.setSelectedRecords(t,e)})))},resize:function(){var e,t,s,i,a=this.element,n=this.options,r=a.height(),l=a.children().first(),d=a.find(".a-TMV-w-scroll");null!==a[0].offsetParent&&(l.length&&!this.pendingRefresh?(e=a.width(),d.width(e),this.rowHeight=null,this.recPerRow=null,n.hasSize&&(t=r-this._footerHeight(),l.height(t),d.height(t)),n.useIconList&&(this.data$.iconList("resize"),this.scrollPaging&&(s=this._getRecordsPerRow(),i=this._getRecordHeight(),this.data$.find(".a-GV-scrollFiller").each((function(){var e,t=o(this),a=parseInt(t.last().attr("data-start"),10),n=parseInt(t.last().attr("data-end"),10);e=Math.floor((n-a)/s)*i,t.css("height",e)})))),this._initPageSize()):this.refresh())},focus:function(){var e=this.getIconList();if(e)return e.focus();this.data$.find(":focusable").first().focus()},getSelection:function(){var e=this.getIconList();return e?e.getSelection():null},setSelection:function(e,t,s){var i=this.getIconList();if(i)return i.setSelection(e,t,s)},getRecords:function(e){var t,s,i=this,a=[];return e.each((function(){(t=o(this).attr("data-id"))&&(s=i.model.getRecord(t))&&a.push(s)})),a},getSelectedRecords:function(){return this.options.useIconList&&this.data$?this.getRecords(this.getSelection()):null},setSelectedRecords:function(e,t,s){var i,a=[],n={};if(this.options.useIconList&&this.data$){for(i=0;i<e.length;i++)n[this.model.getRecordId(e[i])]=1;this.data$.children().each((function(){var e=o(this).attr("data-id");n[e]&&a.push(this)})),this.setSelection(o(a),t,s)}},getIconList:function(){return this.options.useIconList&&this.data$?this.data$.data("apex-iconList"):null},_initRecordTemplate:function(){var e,t,s=this.options;if(!s.recordTemplate){if(s.collectionClasses||(s.collectionClasses="a-TMV-defaultIconView"),!s.labelColumn)throw new Error("Option recordTemplate or labelColumn is required");s.beforeTemplate="<ul>",s.afterTemplate="</ul>",e="<li data-id='&APEX$ROW_ID.' class='&APEX$ROW_STATE_CLASSES.'>",s.linkTarget||s.linkTargetColumn?(e+="<a href='&"+(s.linkTargetColumn?s.linkTargetColumn:"APEX$ROW_URL")+".' class='a-IconList-content'"+(s.linkAttributes?" "+s.linkAttributes+" ":"")+">",t="</a>"):(e+="<span class='a-IconList-content'>",t="</span>"),(s.iconClassColumn||s.imageURLColumn)&&(e+="<span class='a-IconList-icon'>",s.iconClassColumn?e+="<span class='&"+s.iconClassColumn+".'></span>":e+="<img src='&"+s.imageURLColumn+".'"+(s.imageAttributes?" "+s.imageAttributes+" ":"")+"/>",e+="</span>"),e+="<span class='a-IconList-label'>&"+s.labelColumn+".</span>",e+=t+"</li>",s.recordTemplate=e}/^\s*<[\w]+[^>]*>/.exec(r(s.recordTemplate))||(r(s.beforeTemplate).toLowerCase().match(/<ul|<ol/)?s.recordTemplate="<li>"+s.recordTemplate+"</li>":s.recordTemplate="<div>"+s.recordTemplate+"</div>")},_initView:function(){var e,t=this,s=this.options,i=this._getDataRenderContext();this.recordElement="div",(e=/<([^ <>]*)/.exec(r(s.recordTemplate)))&&e.length>1&&(this.recordElement=e[1].toLowerCase()),i.markup("<div").attr("class","a-TMV-body").markup(">"),this._renderAltDataMessages(i),i.markup("<div").attr("class","a-TMV-w-scroll").markup(">").markup(r(s.beforeTemplate)).markup("<"+this.recordElement+" class='js-data-placeholder' style='display:none;'></"+this.recordElement+">").markup(r(s.afterTemplate)),this._renderLoadMore(i),i.markup("</div></div>"),this._renderFooter(i),this.element.html(i.toString()),this.data$=this.element.find(".js-data-placeholder").parent(),this.data$.empty().addClass(s.collectionClasses||""),s.useIconList&&(this.data$.iconList(s.iconListOptions),this.data$.on("iconlistselectionchange",(function(e){t._updateStatus(),t._trigger("selectionChange",e)}))),this._initPaginationFooter(this.element.find(".a-TMV-w-scroll"))},_initRecordMetrics:function(){var e,t=this.options;this.recPerRow=1,(e=this.data$.children().filter(":visible").first()).length?(t.useIconList&&(this.recPerRow=this.getIconList().getColumns()),this.rowHeight=e.outerHeight()):(e=o(r(t.recordTemplate)),e=this.data$.append(e),t.useIconList&&(this.getIconList().refresh(),this.recPerRow=this.getIconList().getColumns()),this.rowHeight=e.outerHeight(),this.data$.empty())},_getRecordHeight:function(){return this.rowHeight||this._initRecordMetrics(),this.rowHeight},_getRecordsPerRow:function(){return this.recPerRow||this._initRecordMetrics(),this.recPerRow},_getDataContainer:function(){return this.data$},_selectedCount:function(){return this.options.useIconList?this.getIconList().getSelection().length:0},_hasControlBreaks:function(){return!1},_elementsFromRecordIds:function(e){var t,s,i=[];for(t=0;t<e.length;t++)(s=this.data$.children("[data-id='"+e[t]+"']"))[0]&&i.push(s);return i},_renderFillerRecord:function(e,t){e.markup("<"+this.recordElement+" class='"+t+"'></"+this.recordElement+">")},_insertFiller:function(e,t){var s=o(e.toString());return t?t.before(s):this.data$.html(s),s},_insertData:function(e,t,s,i,a){var o,n;i?i[a](e.toString()):this.data$.append(e.toString()),this.options.useIconList&&(n=(o=this.element.find(".a-TMV-w-scroll")).scrollTop(),this.getIconList().refresh(),o.scrollTop(n)),this._trigger("pageChange",null,{offset:t,count:s})},_controlBreakLabel:function(e){return{label:""}},_renderBreakRecord:function(e,t,s,i){e.markup("<h3>").content(s.label).markup("</h3>")},_renderRecord:function(e,t,s,i,a){var o,n,l=this.options,d="",h={};a.agg||(h.APEX$ROW_ID=""+i,h.APEX$ROW_INDEX=""+(s+1),a.url&&(h.APEX$ROW_URL=a.url),a.deleted?d+=" is-deleted":(a.inserted?d+=" is-inserted":a.updated&&(d+=" is-updated"),a.error?d+=" is-error":a.warning&&(d+=" is-warning"),a.highlight&&((o=l.highlights[a.highlight])&&o.cssClass?d+=" "+o.cssClass:d+=" "+a.highlight)),d&&(h.APEX$ROW_STATE_CLASSES=d),n=r(this.options.recordTemplate,{extraSubstitutions:h,model:this.model,record:t}),l.highlighter&&(n=l.highlighter(l.highlighterContext,n)),e.markup(n))},_removeRecord:function(e){e.remove()},_insertRecord:function(t,s,i,a,n){var r,l=e.htmlBuilder();return this._renderRecord(l,s,null,i,a),r=o(l.toString()),"after"===n&&t?t.after(r):this.data$.prepend(r),this.options.useIconList&&this.getIconList().refresh(),r},_afterInsert:function(e,t){},_identityChanged:function(e,t){var s,i,a=this._elementsFromRecordIds([e])[0];a&&(s=this.model.getRecord(t),i=this.model.getRecordMetadata(t),this._replaceRecord(a,s,e,t,i))},_replaceRecord:function(t,s,i,a,o){var n=e.htmlBuilder();this._renderRecord(n,s,void 0,a,o),t.replaceWith(n.toString()),this.options.useIconList&&this.getIconList().refresh()},_removeFocus:function(e){},_updateRecordState:function(e,t,s,i){this._replaceRecord(e,s,t,t,i)}})}(apex.util,apex.model,apex.debug,apex.lang,apex.item,apex.jQuery);