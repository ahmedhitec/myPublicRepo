!function(e,t,a,s,o,i){"use strict";e.widget("apex.combobox",{version:"5.1",widgetEventPrefix:"combobox",options:{source:[],multipleValues:!1,multipleValueDelimiter:",",label:""},_create:function(){var i=t.htmlBuilder(),n=this,l=this.options,r=e(".a-Combobox").length;this.baseId=this.element[0].id||"combobox"+(r+1),this.actions=a.createContext("combobox",this.element[0]),l.label&&o.warn("Label not provided, which is an accessibility issue (unless the 'label' option is later set)."),i.markup("<span").attr("class","a-Combobox-wrapper").markup("></span>"),this.element.wrap(i.toString()).addClass("a-Combobox"),this.wrapper$=this.element.closest(".a-Combobox-wrapper"),this._createShowAllButton(),this._on(this.element,{keydown:function(t){(t.altKey||t.metaKey)&&t.which===e.ui.keyCode.DOWN&&(n.menu$.menu("open",n.element,!1),n.menu$.find(":focusable").first().focus())}}),this.actions.add({name:this.baseId+"-values",label:s.getMessage("APEX.COMBOBOX.LIST_OF_VALUES"),set:function(e){var t=n.element.val();l.multipleValues?n.element.val((t?t+l.multipleValueDelimiter:t)+e):n.element.val(e),t!==n.element.val()&&n.element.change()},get:function(){return n.element.val()},choices:l.source})},_setOption:function(t,a){switch(this._super(t,a),t){case"multipleValues":break;case"source":this.actions.lookup(this.baseId+"-values").choices=a,this.actions.updateChoices(this.baseId+"-values");break;case"label":e("#"+this.baseId+"-showAll",this.wrapper$).attr("title",s.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",a)).attr("aria-label",s.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",a))}},_createShowAllButton:function(){var a=t.htmlBuilder();a.markup("<button type='button'").attr("id",this.baseId+"-showAll").attr("tabindex","-1").attr("title",s.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",this.options.label)).attr("aria-label",s.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",this.options.label)).attr("class","a-Button a-Button--withIcon a-Button--noLabel js-menuButton").attr("data-menu",this.baseId+"-menu").attr("aria-haspopup",!0).attr("aria-expanded",!1).markup(">"),a.markup("<span").attr("aria-hidden",!0).attr("class","a-Icon icon-menu-drop-down").markup(">").markup("</span>"),a.markup("</button>"),this.wrapper$.append(a.toString()),this.menu$=e("<div/>",{id:this.baseId+"-menu",class:"",style:"display:none;"}).appendTo("body"),this.menu$.menu({actionsContext:this.actions,items:[{type:"radioGroup",action:this.baseId+"-values"}]})},_destroy:function(){this.element.insertBefore(this.wrapper$),this.wrapper$.remove(),this.menu$.remove(),this.element.removeClass("a-Combobox"),a.removeContext("combobox",this.element[0])}})}(apex.jQuery,apex.util,apex.actions,apex.lang,apex.debug);