!function(e,t,n,a,i,r){"use strict";var s="div.apex-item-filedrop",l={item_type:"FILE",enable:function(){this.element.prop("disabled",!1),this.element.parents("div.apex-item-group--file").removeClass("apex_disabled")},disable:function(){this.element.prop("disabled",!0),this.element.parents("div.apex-item-group--file").addClass("apex_disabled")},isDisabled:function(){return!0===this.element.prop("disabled")},setValue:function(e){e?a.error("This input element accepts a filename, which may only be programmatically set to the empty string."):this.element.val("")},getValue:function(){return function(e){for(var t=e||[],n=[],a=0;a<t.length;a++)n.push(t[a].name);return n}(this.element[0].files)},getValidity:function(){var e=this.element.prop("validity")||{},n=t.extend({},e);return this.element.attr("data-valid-message")?(n.valid=!1,n.badInput=!0,n.customError=!0,n):n||{valid:!0}},getValidationMessage:function(){return this.element.attr("data-valid-message")}};function o(e,t){var n=t.type.toLowerCase(),a=t.name.toLowerCase();return(e||[]).some((function(e){return/\*$/.test(e)?(t=e,(/^[^/]+/.exec(n)||[]).pop()===t.slice(0,-2)):/^\./.test(e)?(i=e,function(e){return e.split(".").pop()}(a)===i.slice(1)):e===n;var t,i}))}function d(e,t){return!(t.size>1024*e)}function f(e,t){var n=[],a=e.attr("accept"),s=parseInt(e.data("max-file-size")),l=t||[];l.length>0&&(a&&0===n.length&&(n=function(e,t,n,a){for(var r=a||[],s=0;s<n.length;s++)o(t,n[s])||r.push({type:"error",location:["inline"],pageItem:e.attr("id"),message:i.formatMessageNoEscape("APEX.ITEM.FILE.ACCEPTED_TYPES",t),unsafe:!0});return r}(e,a.split(",").map((function(e){return e.trim().toLowerCase()})),l,n)),s&&0===n.length&&(n=function(e,t,n,a){var r=a||[];function s(e){for(var t,n=0;e>=1024;)e/=1024,++n;for(t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n],n=0;e>=1024;)e/=1024,++n;return(n<2?e.toFixed(0):e.toFixed(1))+" "+t}for(var l=0;l<n.length;l++)d(t,n[l])||r.push({type:"error",location:["inline"],pageItem:e.attr("id"),message:i.formatMessage("APEX.ITEM.FILE.MAX_FILE_SIZE",s(1024*t)),unsafe:!1});return r}(e,s,l,n)),0===(n=(n||[]).filter((function(e,t,n){return n.findIndex((function(t){return JSON.stringify(t)===JSON.stringify(e)}))===t}))).length?(r.clearErrors(),e.removeAttr("data-valid-message")):n.length>0&&(r.clearErrors(),r.showErrors(n),e.attr("data-valid-message",n.map((function(e){return e.message})).join(",")),e.val("").change()))}e.addAttachHandler((function(a){t("input[type='file'].apex-item-file",a).each((function(){var a=t(this),r=n.escapeCSS(this.id),o=a.data("display-style")||"INLINE";("NATIVE"===o&&a.on("change",(function(e){f(a,this.files)})),"INLINE"===o||"DROPZONE_INLINE"===o||"DROPZONE_BLOCK"===o)&&(a.on("change",(function(e){var n=this.files,r="",l=t(this),o=l.next(s).find(".apex-item-filedrop-filename");n&&n.length>1?r=i.formatMessage("APEX.ITEM.FILE.FILES_WITH_COUNT",n.length):n[0]&&(r=n[0].name),r?o.text(r):o.text(""),n&&n.length>0?(l.next(s).addClass("has-files"),l.next(s).find(".apex-item-filedrop-description").hide()):(l.next(s).removeClass("has-files"),l.next(s).find(".apex-item-filedrop-description").show()),f(a,n)})),a.next(s).click((function(e){a.click()})),a.next(s)[0].addEventListener("dragover",(function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy",a.focus(),a.next(s).addClass("is-dragging")})),a.next(s)[0].addEventListener("dragleave",(function(e){e.preventDefault(),a.blur(),a.next(s).removeClass("is-dragging")})),a.next(s)[0].addEventListener("drop",(function(e){e.preventDefault(),a.blur(),a.next(s).removeClass("is-dragging"),a.prop("disabled")||(a[0].files=e.dataTransfer.files,a.change())})),a.data("show-progress")&&"A"===(t("#pReloadOnSubmit").val()||"A")&&t(document).on("apexbeforepagesubmit",(function(e,t){a[0].files.length>0&&a.next(s).addClass("is-loading")})));e.create(r,l)}))}))}(apex.item,apex.jQuery,apex.util,apex.debug,apex.lang,apex.message);