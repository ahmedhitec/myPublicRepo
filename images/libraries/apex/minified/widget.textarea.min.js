!function(e,t,a){"use strict";const r=/\s+$/,n=/^\s+/;let s=(e,t)=>("NONE"!==t&&(e=null==e?"":""+e,"LEADING"!==t&&"BOTH"!==t||(e=e.replace(n,"")),"TRAILING"!==t&&"BOTH"!==t||(e=e.replace(r,""))),e),i={show:function(){this.element.closest(".apex-item-group--textarea").show()},hide:function(){this.element.closest(".apex-item-group--textarea").hide()},setValue:function(e,t,a){e=s(e,this._whitespaceTrim),this.element.val(e),this._charCount&&this._charCount(),a||(this._preventChangeHandler=!0)},getValue:function(){let e=this.element.val();return e=s(e,this._whitespaceTrim),e}},l=void 0!==document.createElement("textarea").style.resize;function o(e){let a,r,n=null,s=null;function i(a){t(document).off("mousemove.apex_startResize").off("mouseup.apex_startResize"),e.css("opacity",1)}a=parseInt(e.css("min-width"),10)||20,r=parseInt(e.css("min-height"),10)||20,e.after('<div class="apex_size_bar"><div class="apex_size_grip"></div></div>'),t("div.apex_size_bar, div.apex_size_grip",e.parent()).mousedown((function(l){return n=e.width()-l.pageX,s=e.height()-l.pageY,e.css("opacity",.25),t(document).on("mousemove.apex_startResize",(function(i){return function(t,i){if(e.height(Math.max(r,s+t.pageY)+"px"),i){let r=Math.max(a,n+t.pageX);e.width(r)}return!1}(i,"se-resize"===t(l.currentTarget).css("cursor"))})).on("mouseup.apex_startResize",i),!1})),e.parent().css("display:inline-block")}e.addAttachHandler((function(r){t("textarea.apex-item-textarea",r).each((function(){let c,u,h,p=0,d=0,m=null,x=this,g=t(x),_=x.id,C=g.attr("data-trim-spaces")||"BOTH",f=g.attr("data-resizable")||!1,v=g.attr("data-counter")||!1,b=()=>{m.removeClass("apex-item-textarea-counter--error apex-item-textarea-counter--warning"),h.html(p),p>0?m.show():m.hide(),d>95?m.addClass("apex-item-textarea-counter--error"):d>=90&&m.addClass("apex-item-textarea-counter--warning")},T=a.debounce(b,200);function w(e){let t=g.val();t.length;if(p=t.replace(/\n/g,"xx").length,p>u){let e=p-u,a=x.selectionStart,r=x.selectionEnd;g.val(t.substring(0,r-e)+t.substring(r)),r-=e,p=u,a<r&&(a=r),x.setSelectionRange(a,r),g.addClass("has-error")}else g.hasClass("has-error")&&g.removeClass("has-error");d=p/u*100,m&&(e?T():b())}if(l?g.css("resize",f?"both":"none"):f&&o(g),v){let e=g.attr("aria-describedby")||"",n="#"+a.escapeCSS(_);u=parseInt(g.attr("data-max-char")||0,10),e.length>0&&(e=" "+e),e=_+"_CHAR_COUNT"+e,m=t(n+"_CHAR_COUNT",r),h=t(n+"_CHAR_COUNTER",r),g.attr("aria-describedby",e),u<=0&&apex.debug.error("Textarea Character Counter requires Maximum Length")}else u=parseInt(g.attr("maxlength")||0,10);u>0&&(g.on("change input",w),w()),g.closest(".a-GV-columnItem")[0]&&g.addClass("js-uses-enter"),"NONE"!==C&&g.change(()=>{if(c._preventChangeHandler)return void(c._preventChangeHandler=!1);let e,t=x.selectionStart,a=x.selectionEnd,r=g.val();"LEADING"!==C&&"BOTH"!==C||(e=r.match(n),e&&(e=e[0].length,t-=e,t<0&&(t=0),a-=e,a<0&&(a=0))),r=s(r,C),a>r.length&&(a=r.length,t>a&&(t=a)),g.val(r),x.setSelectionRange(t,a),u>0&&w()}),e.create(_,i),c=e(_),u>0&&(c._charCount=w),c._whitespaceTrim=C,c._preventChangeHandler=!1}))}))}(apex.item,apex.jQuery,apex.util);