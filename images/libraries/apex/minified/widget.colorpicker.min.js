!function(e,i){e.colorpicker=function(o,t){var n,r;i(o,apex.gPageContext$).each((function(){this,t&&t.preview&&("modern"===t.preview.type?(i(this).css("font-size"),i(this).innerWidth(),r=i("<span id='"+i(this).attr("id")+"_color_preview' class='apex-item-color-picker-preview'></span>"),i(this).before(r),n="#"+i(this).attr("id")+"_color_preview",t.preview&&t.preview.defaultValue&&i(n).css("background-color",t.preview.defaultValue)):n="classic"===t.preview.type?"#"+this.id+"_PREVIEW":"");var o=i(this).ColorPicker({eventName:"xxx",onSubmit:function(e,o,t,n){$s(n,"#"+o.toUpperCase()),i(n).ColorPickerHide()},onBeforeShow:function(){i(this).ColorPickerSetColor(this.value)},onShow:function(e){return i(e).addClass("apex-colorpicker-popup").fadeIn("fast"),!1},onHide:function(e){return i(e).fadeOut("fast"),!1}}),a=i("#"+this.id+"_fieldset",apex.gPageContext$);i(".colorpicker").prop("tabindex",-1).find(".colorpicker_submit").keydown((function(e){13!==e.which&&32!==e.which||(i(this).trigger("click"),e.preventDefault())})).prop("tabindex",0),o.on("keyup",(function(){o.ColorPickerSetColor(this.value)})).on("blur",(function(){o.ColorPickerHide()})).on("focus",(function(){n&&i(n).length>0&&i(n,apex.gPageContext$).css("background-color",this.value)})).on("change",(function(){this.value=this.value.toUpperCase(),n&&i(n).length>0&&i(n,apex.gPageContext$).css("background-color",this.value)})),i("#"+this.id+"_PICKER",apex.gPageContext$).click((function(e){o.ColorPickerShow(),e.preventDefault()})),i("#"+this.id+"_PREVIEW",apex.gPageContext$).css("background",this.value),e.initPageItem(this.id,{enable:function(){!0===o.prop("disabled")&&(o.prop("disabled",!1).removeClass("apex_disabled"),i("#"+this.id+"_PICKER",apex.gPageContext$).click((function(e){o.ColorPickerShow(),e.preventDefault()})),e.util.enableIcon(a,"#"))},disable:function(){!1===o.prop("disabled")&&(o.prop("disabled",!0).addClass("apex_disabled"),e.util.disableIcon(a))},show:function(){a.show()},hide:function(){a.hide()},getPopupSelector:function(){return".colorpicker"}})}))}}(apex.widget,apex.jQuery);