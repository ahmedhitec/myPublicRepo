!function(e,t,a,n){e.cssCalendar=function(i,r,s,l){var o,d,c,f,m,u,v,E=n.fullCalendar,p=!1,g=0,h={keyboardActive:!1,focusEvents:!1,selectorEvent:!1,browseMode:"CALENDAR",dayEvents:[],activeDayEvent:!1,SELECTORID:"com_oracle_apex_selectorevent$",cssClass:"fc-helper",KEY_PREV:37,KEY_NEXT:39,MONTH_VIEW:"month",WEEK_VIEW:"agendaWeek",DAY_VIEW:"agendaDay",LIST_VIEW:"listMonth",viewChangeByKey:!1};function y(e){return!(e.source&&"SQL"===e.apexEventSource)}function w(e){var t,a=n("div.fc-content-skeleton td[data-date="+e+"]"),i=a.index(),r=[],s=[],l=!1;function o(e){r[e]?r[e]++:r[e]=1}return a.closest("table").find("tbody > tr").each((function(e){var a,d,c,f=r[e]||0,m=-1;apex.debug.trace("Row Number:"+e),!1===l&&n(this).children().each((function(r){var u=n(this).attr("rowspan"),v=n(this).attr("colspan")||1;for(apex.debug.trace("Row Number:"+r),a=0;a<v;a++)if("none"!==n(this).css("display")){if(m++,apex.debug.trace("Col Number:"+m+" - Offset:"+f),m+f>=i){if(s[e])return!1;if(n(this).find("a.fc-more").length>0&&(apex.debug.trace("found the link."),t=n(this).find("a.fc-more"),l=!0),u>1)for(d=1;d<u;d++)s[e+d]=!0;return!1}if(u>1)for(c=1;c<u;c++)o(e+c)}}))})),t}function b(e){return("0000"+e.year()).substr(-4)+("00"+(e.month()+1)).substr(-2)+("00"+e.date()).substr(-2)}function D(e){return b(e)+("00"+e.hour()).substr(-2)+("00"+e.minute()).substr(-2)+("00"+e.second()).substr(-2)}function x(e){return null!==e.end&&e.allDay&&!o.endDateExclusive?e.end.clone().subtract(1,"days"):e.end}function T(e){var t;if(!o.endDateExclusive)for(t=0;t<e.length;t++)e[t].end&&(e[t].end=moment(e[t].end,"YYYY-MM-DD[T]HH:mm:ss").add(e[t].allDay?"1":"0","days").format("YYYY-MM-DD[T]HH:mm:ss"));return e}function C(){var e=n(window).width(),t=n(window).height(),a=d.width(),i=d.height(),r=Math.round(a/i*10)/10,s=Math.round(e/t*10)/10,l=r;return s<1&&r>1?l=s:s>1&&r<1&&(l=1),l<1?l=1:l>2.6&&(l=2.6),l}function A(e){return o.minTime?moment(e.format("YYYY-MM-DD")+"T"+o.minTime+"Z"):moment(e.format("YYYY-MM-DD")+"T00:00:00Z")}function V(e){return o.maxTime?moment(e.format("YYYY-MM-DD")+"T"+o.maxTime+"Z"):moment(e.format("YYYY-MM-DD")+"T00:00:00Z").add(1,"days")}function M(e){var t,a,n,i,r,s,l,d;t=o.minTime?(t=parseInt(o.minTime.substr(0,2),10))<0?0:t:0,a=c.find(".fc-time-grid-container"),(n=c.find(".fc-time-grid-container .fc-axis:odd:eq("+(e-t)+")")).length&&(d=(i=n.position().top)+(r=2*n.height())-((s=a.scrollTop())+(l=a.height())),i<s&&a.animate({scrollTop:i},10),i+r>s+l&&a.animate({scrollTop:s+Math.max(r,d)},10))}function R(e){var t=w(e);t&&t.click()}function I(){n(c.find("span.fc-close.ui-icon.ui-icon-closethick")).click()}function L(){apex.jQuery(".fc-day.fc-highlight").css("background-color",""),apex.jQuery(".fc-day.fc-highlight").removeClass("fc-highlight")}function S(){var e=c.fullCalendar("getView"),t=c.fullCalendar("clientEvents",h.SELECTORID);if("month"===e.name)L();else if(t.length>0)try{c.fullCalendar("removeEvents",h.SELECTORID)}catch(e){}}function Y(e){var t,a=c.fullCalendar("getView");if(h.selectorEvent)if("month"===a.name)L(),function(e){var t,a,n=e.start.clone().startOf("day"),i=e.end.clone().subtract(1,"second").startOf("day");for(t=n;t.isSameOrBefore(i);)a=t.format("YYYY-MM-DD"),apex.jQuery(".fc-day[data-date="+a+"]").addClass("fc-highlight"),apex.jQuery(".fc-day[data-date="+a+"]").css("background-color","#bce8f1"),t.add(1,"day")}(h.selectorEvent);else if(t=c.fullCalendar("clientEvents",h.SELECTORID)[0],e&&t)t.start=E.moment(h.selectorEvent.start.format("YYYY-MM-DD[T]HH:mm:ss")),t.end=E.moment(h.selectorEvent.end.format("YYYY-MM-DD[T]HH:mm:ss")),c.fullCalendar("updateEvent",t);else{try{c.fullCalendar("removeEvents",h.SELECTORID)}catch(e){}t={id:h.selectorEvent.id,title:h.selectorEvent.title,allDay:h.selectorEvent.allDay,editable:h.selectorEvent.editable,durationEditable:h.selectorEvent.durationEditable,className:h.selectorEvent.className,start:E.moment(h.selectorEvent.start.format("YYYY-MM-DD[T]HH:mm:ss")),end:E.moment(h.selectorEvent.end.format("YYYY-MM-DD[T]HH:mm:ss")),overlap:h.selectorEvent.overlap},c.fullCalendar("renderEvent",t)}}function k(){h.browseMode="CALENDAR",h.activeDayEvent=!1,I(),n(".fc-event",c).removeClass("fc-helper"),n("div.fc-view",c).focus(),Y()}function N(e,a){var i;(i=n(".fc-event[data-id='"+t.escapeHTML(a)+"']",c)).addClass("fc-helper"),i&&(e.name===h.MONTH_VIEW?1===i.length?i.focus():i.each((function(e,t){n(t).closest(".fc-popover")&&n(t).focus()})):i.first().focus())}function W(e){var t,a=c.fullCalendar("clientEvents");for(h.dayEvents=[],t=0;t<a.length;t++)a[t].start.isAfter(e.end.clone().subtract(1,"minute"))||a[t].end&&a[t].end.isBefore(e.start)||!a[t].end&&a[t].start.isBefore(e.start)||a[t].id===h.SELECTORID||h.dayEvents.push(a[t]);return h.dayEvents.sort((function(e,t){var a,n;function i(e){return e.end?D(e.start)+(9999999999-(e.end-e.start)/6e4).toString()+e.title:D(e.start)+"9999999999"+e.title}return(a=i(e))<(n=i(t))?-1:a>n?1:0})),h.dayEvents.length>0&&(S(),h.browseMode="EVENTS",h.activeDayEvent=0,"month"===e.name&&R(h.dayEvents[h.activeDayEvent].start.format("YYYY-MM-DD")),N(e,h.dayEvents[h.activeDayEvent].id)),h.dayEvents.length>0}function O(){"EVENTS"===h.browseMode&&k(),S(),h.keyboardActive=!1,c.fullCalendar("getView").options.selectable=!0}function F(){c.fullCalendar("refetchEvents"),!0===h.keyboardActive&&"EVENTS"===h.browseMode&&O()}function _(e,t,n){var i;"month"===c.fullCalendar("getView").name?(t.subtract(1,"minutes"),i=b):i=D,o.createLink&&""!==o.createLink?function(e,t){a.plugin(o.ajaxIdentifier,{x01:"PREPARE_URL",x02:D(e),x03:D(t),x06:o.createLink},{success:function(e){e.url?apex.navigation.redirect(e.url):apex.debug(e)}})}(e,t):apex.event.trigger(d,"apexcalendardateselect",{newStartDate:i(e),newEndDate:i(t)}),c.fullCalendar("unselect"),c.fullCalendar("rerenderEvents")}function H(e,t,a){var i;return!(0!==c.fullCalendar("getView").name.indexOf("list")||!n(t.target).parents().hasClass("fc-list-item-description")||"A"!==n(t.target).prop("tagName"))||(e.id===h.SELECTORID?_(h.selectorEvent.start.clone(),h.selectorEvent.end.clone()):e.url?apex.navigation.redirect(e.url):((i=n.extend(!0,{},e)).end=null!==i.end?x(i):null,apex.event.trigger(d,"apexcalendareventselect",{event:i})),!1)}function B(e,t,a,n){var i,r,s=!1,l=!1;if(function(e,t,a,n){var i,r;return!e.options.validRange||(1===t&&!e.options.validRange.end||-1===t&&!e.options.validRange.start||(e.options.validRange.start&&(i="month"===e.name?E.moment(e.options.validRange.start).startOf("day"):E.moment(e.options.validRange.start)),e.options.validRange.end&&(r="month"===e.name?E.moment(e.options.validRange.end).endOf("day"):E.moment(e.options.validRange.end)),1===t?!e.options.validRange.end||!!h.selectorEvent.end.clone().add(a,n).isSameOrBefore(r):!e.options.validRange.start||!!h.selectorEvent.start.clone().subtract(a,n).isSameOrAfter(i)))}(e,t,a,n)){switch(e.name){case h.MONTH_VIEW:if(l=!0,"days"===n){for(i=h.selectorEvent.start.clone().startOf("month"),r=h.selectorEvent.start.clone().endOf("month");!o.weekEnds&&i.format("E")>5;)i.add(1,n);for(;!o.weekEnds&&r.format("E")>5;)r.subtract(1,n);(1===t&&!h.selectorEvent.start.clone().add(a,n).isBefore(r)||-1===t&&h.selectorEvent.start.clone().subtract(a,n).isBefore(i))&&(s=!0)}break;case h.WEEK_VIEW:"days"===n?(l=!0,(1===t&&!h.selectorEvent.start.clone().add(a,n).isBefore(e.end)||-1===t&&h.selectorEvent.start.clone().subtract(a,n).isBefore(e.start))&&(s=!0)):(1===t&&!h.selectorEvent.end.clone().add(a,n).isAfter(V(h.selectorEvent.end.clone().subtract(1,"minute")))||-1===t&&!h.selectorEvent.start.clone().subtract(a,n).isBefore(A(h.selectorEvent.start)))&&(l=!0);break;case h.DAY_VIEW:"days"===n?(s=!0,l=!0):(1===t&&!h.selectorEvent.end.clone().add(a,n).isAfter(V(e.start))||-1===t&&!h.selectorEvent.start.clone().subtract(a,n).isBefore(A(e.start)))&&(l=!0)}if(l){if(h.selectorEvent.start.add(a*t,n),h.selectorEvent.end.add(a*t,n),"days"===n)for(;!o.weekEnds&&h.selectorEvent.start.format("E")>5;)h.selectorEvent.start.add(t,n),h.selectorEvent.end.add(t,n);s?(h.viewChangeByKey=!0,c.fullCalendar("gotoDate",h.selectorEvent.start),Y(!1),e.name!==h.WEEK_VIEW&&e.name!==h.DAY_VIEW||M(h.selectorEvent.start.hour())):Y(!0),e.name!==h.WEEK_VIEW&&e.name!==h.DAY_VIEW||M(h.selectorEvent.start.hour())}}}function K(e,t,a,n){var i=!1;if(-1===t)h.selectorEvent.end.clone().subtract(a,n).isAfter(h.selectorEvent.start)&&(i=!0);else switch(e.name){case h.MONTH_VIEW:"days"===n&&h.selectorEvent.end.clone().add(a,n).subtract(1,"minutes").isBefore(e.end)&&(i=!0);break;case h.WEEK_VIEW:"days"===n?h.selectorEvent.end.clone().add(a,n).subtract(1,"minute").isBefore(e.end)&&(i=!0):h.selectorEvent.end.clone().add(a,n).isAfter(V(h.selectorEvent.end.clone().subtract(1,"minute")))||(i=!0);break;case h.DAY_VIEW:"minutes"===n&&(h.selectorEvent.end.clone().add(30,"minutes").isAfter(V(e.start))||(i=!0))}if(i){if(h.selectorEvent.end.add(a*t,n),"days"===n)for(;!o.weekEnds&&h.selectorEvent.end.clone().subtract(1,"minute").format("E")>5;)h.selectorEvent.end.add(t,"days");Y(!0)}e.name!==h.DAY_VIEW&&e.name!==h.WEEK_VIEW||M(h.selectorEvent.end.clone().subtract(1,"minutes").hour())}function P(e,t){n(".fc-event",c).removeClass("fc-helper"),-1===t?h.activeDayEvent>0?h.activeDayEvent--:h.activeDayEvent=h.dayEvents.length-1:h.activeDayEvent<h.dayEvents.length-1?h.activeDayEvent++:h.activeDayEvent=0,e.name===h.MONTH_VIEW&&I(),e.name===h.MONTH_VIEW&&(h.dayEvents[h.activeDayEvent].start.isBefore(e.start)?R(e.start.format("YYYY-MM-DD")):R(h.dayEvents[h.activeDayEvent].start.format("YYYY-MM-DD"))),N(e,h.dayEvents[h.activeDayEvent].id)}function j(e,t){e.id&&""!==e.id||(e.id="apex.widget.cssCalendar.Id_"+ ++g,c.fullCalendar("updateEvent",e)),t.attr("data-id",e.id),e.source&&"SQL"===e.apexEventSource&&(t.find("span.fc-title").html(t.find("span.fc-title").text()),t.find("div.fc-title").html(t.find("div.fc-title").text()),t.find("td.fc-list-item-title>a").html(t.find("td.fc-list-item-title>a").text())),0===c.fullCalendar("getView").name.indexOf("list")&&(t.find("td.fc-list-item-title").attr("tabindex","0"),t.find("td.fc-list-item-title").wrapInner("<div></div>"),t.find("td.fc-list-item-title a:not([href])").contents().unwrap(),e.description&&t.find("td.fc-list-item-title").append('<div class="fc-list-item-description">'+e.description+"</div>")),o.mouseHoverOver&&function(e,t){var a,i,r;r="24"===o.timeFormatType?"ll HH:mm":"12"===o.timeFormatType?"ll hh:mm A":"lll",t.id!==h.SELECTORID&&t.title&&t.start&&(a=t.end?t.allDay?t.end.clone().subtract(1,"days").isBefore(t.start)?n.fullCalendar.formatRange(t.start,t.end.clone(),"ll"):n.fullCalendar.formatRange(t.start,x(t),"ll"):n.fullCalendar.formatRange(t.start,t.end,r):t.allDay?t.start.format("ll"):t.start.format(r),i=(i='<span class="tt-title">'+(y(t)?apex.util.escapeHTML(t.title):t.title)+"</span><br>")+a+"<br><br>",t.description&&(i+=y(t)?apex.util.escapeHTML(t.description):t.description),n(e).tooltip({show:apex.tooltipManager.defaultShowOption(),items:"a.fc-event",position:{my:"left top+15",at:"left center",collision:"flipfit"},content:i,classes:{"ui-tooltip":"ui-widget-content ui-corner-all ui-widget ui-tooltip"}}))}(t,e)}function X(e){var t=n(window).width();"month"===e.name||"agendaWeek"===e.name?n(window).width()<700&&(p=e.name,c.fullCalendar("changeView","month"===e.name?"listMonth":"listWeek"),c.fullCalendar("option","aspectRatio",C())):0===e.name.indexOf("list")&&t>700&&p&&(c.fullCalendar("changeView",p),c.fullCalendar("option","aspectRatio",C()),p=!1)}function Q(e,t,n){"SQL"===e.apexEventSource?a.plugin(o.ajaxIdentifier,{x01:"CHANGE",x02:D(e.start),x03:null!==e.end?D(x(e)):null,x04:e.id,x05:e.checksum,pageItems:o.pageItems},{refreshObject:d,success:function(e){apex.event.trigger(d,"apexcalendardragdropfinish",e)},error:function(e,t,a){apex.event.trigger(d,"apexcalendardragdroperror",a),n()}}):n()}function G(e,t,a){apex.event.gCancelFlag?a():Q(e,0,a)}function J(e){apex.event.trigger(d,"apexcalendardragdropstart",e)}function U(e,t,a){Q(e,0,a)}function Z(e,t,i,r){a.plugin(o.ajaxIdentifier,{x01:"GET",x02:D(e),x03:D(t),pageItems:o.pageItems},{refreshObject:d,success:function(e){var t,a,i;for(t=T(e),i=0;i<t.length;i++)t[i].apexEventSource="SQL";n.isFunction(o.dataFilter)&&(a=o.dataFilter(t))&&(t=a),r(t)}})}function z(e,t,a,i){o.apexWebLink?n.ajax({url:o.apexWebLink,dataType:"json",jsonp:!1,success:function(e){var t,a;t=T(function(e){var t;if(!o.showTime)for(t=0;t<e.length;t++)e[t].allDay=!0;return e}(e.items)),n.isFunction(o.dataFilter)&&(a=o.dataFilter(t))&&(t=a),i(t)}}):i({})}function $(e){var t=c.fullCalendar("getView");if(h.keyboardActive)switch(t.name){case"month":case"agendaWeek":case"agendaDay":!function(e,t){switch(t.which){case 27:"CALENDAR"===h.browseMode&&W(e)||O(),t.preventDefault();break;case 78:t.shiftKey&&"EVENTS"===h.browseMode&&k(),t.preventDefault();break;case 13:case 32:"CALENDAR"===h.browseMode?_(h.selectorEvent.start.clone(),h.selectorEvent.end.clone()):H(h.dayEvents[h.activeDayEvent]),t.preventDefault();break;case 38:"EVENTS"===h.browseMode?P(e,-1):e.name===h.WEEK_VIEW||e.name===h.DAY_VIEW?t.shiftKey?K(e,-1,30,"minutes"):B(e,-1,30,"minutes"):t.shiftKey?K(e,-1,7,"days"):B(e,-1,7,"days"),t.preventDefault();break;case 9:O();break;case 40:"EVENTS"===h.browseMode?P(e,1):e.name===h.WEEK_VIEW||e.name===h.DAY_VIEW?t.shiftKey?K(e,1,30,"minutes"):B(e,1,30,"minutes"):t.shiftKey?K(e,1,7,"days"):B(e,1,7,"days"),t.preventDefault();break;case h.KEY_NEXT:"CALENDAR"===h.browseMode&&(t.shiftKey?K(e,1,1,"days"):B(e,1,1,"days")),t.preventDefault();break;case h.KEY_PREV:"CALENDAR"===h.browseMode&&(t.shiftKey?K(e,-1,1,"days"):B(e,-1,1,"days")),t.preventDefault();break;case 33:if("CALENDAR"===h.browseMode)switch(e.name){case h.WEEK_VIEW:B(e,-1,7,"days");break;case h.DAY_VIEW:B(e,-1,1,"days");break;case h.MONTH_VIEW:B(e,-1,e.start.clone().subtract(15,"days").endOf("month").date(),"days")}t.preventDefault();break;case 34:if("CALENDAR"===h.browseMode)switch(e.name){case h.WEEK_VIEW:B(e,1,7,"days");break;case h.DAY_VIEW:B(e,1,1,"days");break;case h.MONTH_VIEW:B(e,1,e.start.clone().add(15,"days").endOf("month").date(),"days")}t.preventDefault()}}(t,e)}else 0===t.name.indexOf("list")||!n(".fc-view",c).is(":focus")&&!n(".fc-popover",c).is(":focus")||37!==e.which&&39!==e.which&&40!==e.which&&38!==e.which&&13!==e.which&&34!==e.which&&33!==e.which&&32!==e.which||(e.preventDefault(),function(e){var t,a;e.name!==h.LIST_VIEW&&(e.name===h.MONTH_VIEW?(t=e.start.clone().add(15,"days").startOf("month"),e.validRange&&e.validRange.start&&t.isBefore(e.validRange.start)&&(t=E.moment(e.validRange.start)),a=t.clone().add(1,"days")):(t=e.start.clone().hour(o.startingHour),a=e.start.clone().hour(o.startingHour).add(60,"minutes")),h.selectorEvent={id:h.SELECTORID,title:"",allDay:e.name===h.MONTH_VIEW,editable:!1,durationEditable:!1,className:h.cssClass,start:t,end:a,overlap:!0},e.options.selectable=!1,h.keyboardActive=!0,W(e)||k())}(t)),apex.clipboard.isSupported&&n(".fc-view",c).is(":focus")&&((e.metaKey||e.ctrlKey)&&67===e.which||e.shiftKey&&121===e.which)&&(apex.clipboard.copy(),e.preventDefault())}!function(){var t,a,g,y,w=E.moment();if(d=n("#"+i,apex.gPageContext$),c=n("#"+i+"_calendar",apex.gPageContext$),0===d.length&&(d=c.wrap(apex.util.htmlBuilder().markup("<div").attr("id",i).markup("></div>").toString())),f=n.fullCalendar.defaults,o=n.extend({enableDragAndDrop:!1,pageItems:""},r),(o=n.extend(o,f)).timeFormat={month:"",agenda:""},"24"===o.timeFormatType?(o.slotLabelFormat="H:mm",o.timeFormat="H:mm",o.views={month:{timeFormat:"HH",columnFormat:"dddd"},agenda:{timeFormat:"H:mm",columnFormat:"ll"},list:{displayEventTime:!0,displayEventEnd:!0,listDayFormat:"dddd",listDayAltFormat:"LL",timeFormat:"H:mm",eventTimeFormat:"H:mm"}}):"12"===o.timeFormatType?(o.slotLabelFormat="h(:mm)a",o.timeFormat="h:mm a",o.views={month:{timeFormat:"ha",columnFormat:"dddd"},agenda:{timeFormat:"h:mm a",columnFormat:"ll"},list:{displayEventTime:!0,displayEventEnd:!0,listDayFormat:"dddd",listDayAltFormat:"LL",eventTimeFormat:"h:mm a",timeFormat:"h:mm a"}}):(o.slotLabelFormat="",o.timeFormat="",o.views={month:{timeFormat:"",columnFormat:""},agenda:{timeFormat:"",columnFormat:""},list:{displayEventTime:!0,displayEventEnd:!0,timeFormat:"",listDayFormat:"dddd",listDayAltFormat:"LL",eventTimeFormat:""}}),o.listDayFormat="dddd",o.listDayAltFormat="LL",m=!(!o.apexWebLink&&!o.googleId),o.allDayText="all-day",o.enableDragAndDrop?o.enableResizing?(o.eventStartEditable=!0,o.eventDurationEditable=!0,o.editable=!0):(o.editable=!0,o.eventStartEditable=!0,o.eventDurationEditable=!1):(o.eventStartEditable=!1,o.eventDurationEditable=!1,o.editable=!1),o.keyBoardSupport=!0,u=apex.storage.getScopedSessionStorage({prefix:"ORA_WWV_apex.Calendar",useAppId:!0,usePageId:!0,regionId:i}),v=u.getItem("lastview"))try{null!==(v=JSON.parse(v))&&moment(v.viewStartDate).isValid()&&(w=v.viewStartDate)}catch(e){w=E.moment(),v=null}o.isRTL&&(h.KEY_PREV=39,h.KEY_NEXT=37),o.hasListView&&(g=X),"week"===(a={customButtons:{apexListButton:{text:E.locales[s]&&E.locales[s].buttonText&&E.locales[s].buttonText.list?E.locales[s].buttonText.list:"list",click:function(){o.viewRange&&"month"!==o.viewRange?"agendaWeek"===o.viewRange?c.fullCalendar("changeView","listWeek"):"agendaDay"===o.viewRange&&c.fullCalendar("changeView","listDay"):c.fullCalendar("changeView","listMonth")}}},theme:!0,lang:s,header:JSON.parse(o.calendarHeader),monthNames:o.monthNames,monthNamesShort:apex.locale.getAbbrevMonthNames(),dayNames:o.dayNames,dayNamesShort:o.abbrevDayNames,buttonText:o.buttonText,timeFormat:o.timeFormat,views:o.views,displayEventTime:!1,columnFormat:o.columnFormat,defaultView:o.defaultView,titleFormat:o.titleFormat,slotLabelFormat:o.slotLabelFormat,firstDay:o.firstDayOfWeek,isRTL:o.isRTL,editable:o.editable,eventStartEditable:o.eventStartEditable,eventDurationEditable:o.eventDurationEditable,nextDayThreshold:"00:00:00",weekends:o.weekEnds,eventLimit:parseInt(o.eventLimit,10)<2?2:parseInt(o.eventLimit,10),defaultTimedEventDuration:"01:00:00",aspectRatio:C(),scrollTime:(y=o.startingHour,y<=9?"0"+y+":00:00":y+":00:00"),minTime:o.minTime||"00:00:00",maxTime:o.maxTime||"23:59:59",allDaySlot:m,allDayDefault:m,googleCalendarApiKey:o.googleApiKey,defaultDate:w,eventSources:[{events:Z,editable:o.editable,startEditable:o.eventStartEditable,durationEditable:o.eventDurationEditable},{googleCalendarId:o.googleId,className:"fc-apex-events-gcal"},{events:z,editable:!1,className:"fc-apex-events-webservice"}],eventResize:U,eventDrop:G,eventDragStart:J,eventClick:H,windowResize:g,select:_,slotEventOverlap:!1,defaultEventMinutes:60,selectable:!0,selectHelper:!0,fixedWeekCount:!1,eventRender:j,viewRender:function(e,t){u&&u.getItem("lastview")&&JSON.parse(u.getItem("lastview")).viewType===e.name||O(),o.viewRange||(u&&u.getItem("lastview")?o.viewRange=JSON.parse(u.getItem("lastview")).viewType:o.viewRange="month"),"list"===e.name&&(o.viewRange&&"month"!==o.viewRange?"agendaWeek"===o.viewRange?c.fullCalendar("changeView","listWeek"):"agendaDay"===o.viewRange&&c.fullCalendar("changeView","listDay"):c.fullCalendar("changeView","listMonth")),0===e.name.indexOf("list")?(apex.jQuery(".fc-apexListButton-button").addClass("fc-state-disabled"),apex.jQuery(".fc-apexListButton-button").prop("disabled",!0)):(apex.jQuery(".fc-apexListButton-button").removeClass("fc-state-disabled"),apex.jQuery(".fc-apexListButton-button").prop("disabled",!1));try{c.fullCalendar("removeEvents",h.SELECTORID)}catch(e){}o.viewRange=e.name,h.viewChangeByKey?h.viewChangeByKey=!1:O(),0!==e.name.indexOf("list")&&(p=!1),u.setItem("lastview",JSON.stringify({viewType:e.name,viewStartDate:e.intervalStart,viewEndDate:e.intervalEnd,viewIntervalUnit:e.intervalUnit})),apex.event.trigger(d,"apexcalendarviewchange",{viewType:e.name,startDate:D(e.intervalStart),endDate:D(e.intervalEnd.clone().subtract(1,"second"))}),"month"!==e.name&&"agendaWeek"!==e.name&&"agendaDay"!==e.name||(n(".fc-view > table",c).attr("role","presentation"),n(".fc-view > table > tbody.fc-body table",c).attr("role","presentation"),n(".fc-view > table > thead.fc-head table",c).attr("role","presentation"),n(".fc-view > table > thead.fc-head table > thead > tr > th ",c).attr("scope","col")),o.keyBoardSupport&&(n(".fc-view,.fc-popover",c).off("keydown",$),n(".fc-view,.fc-popover",c).on("keydown",$))},eventAfterAllRender:function(e){n(".fc-prev-button",c).attr("title",apex.lang.getMessage("APEX.GV.PREV_PAGE")),n(".fc-prev-button",c).attr("aria-label",apex.lang.getMessage("APEX.GV.PREV_PAGE")),n(".fc-next-button",c).attr("title",apex.lang.getMessage("APEX.GV.NEXT_PAGE")),n(".fc-next-button",c).attr("aria-label",apex.lang.getMessage("APEX.GV.NEXT_PAGE")),n("div.fc-view-container div.fc-view",c).attr("tabindex","0"),0!==e.name.indexOf("list")&&n("div.fc-view-container div.fc-view .fc-event",c).attr("tabindex","-1"),o.isRTL?n("button.fc-apexListButton-button",c).css("margin-right","10px"):n("button.fc-apexListButton-button",c).css("margin-left","10px"),0===e.name.indexOf("list")&&(n("table.fc-list-table",c).attr("role","presentation"),n("tr.fc-list-heading > td").attr("role","heading"),n("tr.fc-list-heading > td").attr("aria-level","3")),apex.clipboard.isSupported&&apex.clipboard.addHandler(n(".fc-view",c),(function(t){var a,n,i,r="";for(a=c.fullCalendar("clientEvents"),i="month"===e.name||"listMonth"===e.name?"LL":"LLL",r=r+apex.lang.getMessage("APEX.CALENDAR.EVENT_START")+"\t"+apex.lang.getMessage("APEX.CALENDAR.EVENT_END")+"\t"+apex.lang.getMessage("APEX.CALENDAR.EVENT_TITLE")+"\t"+apex.lang.getMessage("APEX.CALENDAR.EVENT_DESCRIPTION")+"\t"+apex.lang.getMessage("APEX.CALENDAR.EVENT_ID")+"\r\n",n=0;n<a.length;n++)!a[n].start.isSameOrAfter(e.start)||a[n].end&&!a[n].end.isSameOrBefore(e.end)||(r=r+a[n].start.format(i)+"\t",a[n].end&&(r+=a[n].end.format(i)),r=r+"\t"+apex.util.stripHTML(a[n].title)+"\t",a[n].description&&(r+=apex.util.stripHTML(a[n].description)),a[n].id&&(r+="\t",0===a[n].id.indexOf("apex.widget.cssCalendar.Id_")?r+=a[n].id.substr("apex.widget.cssCalendar.Id_".length):r+=apex.util.stripHTML(a[n].id)),r+="\r\n");return t.setData("text",r),t})),d.trigger("afterAllRender")}}).defaultView&&(a.defaultView="agendaWeek"),"day"===a.defaultView&&(a.defaultView="agendaDay"),n.isFunction(l)&&(t=l(a))&&(t.dataFilter&&n.isFunction(t.dataFilter)&&(o.dataFilter=t.dataFilter),t.endDateExclusive&&(o.endDateExclusive=!0),t.disableKeyboardSupport&&(o.keyBoardSupport=!1),t.listViewAlwaysShowMonth&&(o.listViewAlwaysShowMonth=t.listViewAlwaysShowMonth),a=t),c.fullCalendar(a),o.keyBoardSupport&&(n(".fc-view,.fc-popover",c).off("keydown",$),n(".fc-view,.fc-popover",c).on("keydown",$)),e.util.onVisibilityChange(d[0],(function(e){e&&(c.fullCalendar("render"),c.fullCalendar("rerenderEvents"))})),d.on("apexrefresh",(function(){F()})),c.on("apexafterclosedialog",(function(){F()})),apex.region.create(i,{type:"CssCalendar",widgetName:"fullCalendar",refresh:function(){F()},focus:function(){c.find("div.fc-view").focus()},widget:function(){return c}}),null!==v&&moment(v.viewStartDate).isValid()&&("month"===v.viewType||"agendaWeek"===v.viewType&&o.showTime||"agendaDay"===v.viewType&&o.showTime||0===v.viewType.indexOf("list"))&&c.fullCalendar("changeView",v.viewType)}(),e.cssCalendar.download=function(e){var t,n;t=c.fullCalendar("getView"),n=a.pluginUrl(o.ajaxIdentifier,{x01:"DOWNLOAD",x02:D(t.start),x03:D(t.end),x06:t.name,x07:t.title,x10:e,pageItems:o.pageItems}),window.open(n).focus()}}}(apex.widget,apex.util,apex.server,apex.jQuery);