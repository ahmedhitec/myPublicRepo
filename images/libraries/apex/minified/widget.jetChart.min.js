!function(e,t,a,r,i,o,n,s){"use strict";apex.widget.jetChart={init:function(c,l,u,m,p,v,f,d){require(["ojs/ojcore","jquery","ojs/ojchart","ojs/ojgauge","ojs/ojgantt","ojs/ojvalidation","ojs/ojtimezonedata"],(function(p){var h,g=e("#"+a.escapeCSS(c)+"_jet",apex.gPageContext$),y=m||{};function x(){if(e("#"+a.escapeCSS(c)).hasClass("is-maximized"))g.css("max-width","100%").css("height",e(window).height()/100*80);else{var t="100%",r=null;l&&(t=l+"px"),u?r=u+"px":"gantt"===y.type&&(r="100%"),g.css("width","100%").css("max-width",t),r?g.css("height",r):g.css("height",""),"dial"!==y.type&&g.css("min-width","100px")}}function j(){t.plugin(d,{pageItems:y.pageItems},{dataType:"json",refreshObject:g,loadingIndicator:g,loadingIndicatorPosition:"centered",success:b})}function b(t){var a,i,n,c=["pie","funnel","pyramid","scatter","bubble","gantt","stock"],l=0,u="dial"===y.type?"dial":"chart",m="gantt"===y.type?"gantt":u;if(e.isFunction(y.dataFilter)&&(t=y.dataFilter(t)),"dial"===u)y.title&&g.closest("div").attr("title",y.title.replace(/#VALUE#/g,t.value).replace(/#MAX#/g,t.max));else if(-1===e.inArray(y.type,c)&&t.series.length>1&&"mixedFrequency"!==y.timeAxisType&&"skipGaps"!==y.timeAxisType&&y.sorting){s.chartSortArray(t.groups,y.sorting);for(var d=0;d<t.series.length;d++){s.chartFillGaps(t.groups,t.series[d].items,y.sorting,v);for(var h=0;h<t.series[d].items.length;h++)t.series[d].items[h].id=""+l,l++}}g[m={chart:"ojChart",dial:"ojStatusMeterGauge",gantt:"ojGantt"}[m]](t),s.onVisibilityChange(g[0],(function(e){e?(p.Components.subtreeShown(g[0]),x(),g[m]("refresh")):p.Components.subtreeHidden(g[0])})),e(window).on("apexwindowresized",(function(){x()})),"ojChart"===m&&("pie"===y.type?g[m]({drill:function(e,t){(i=t.data.link)&&(r.log("Chart link: "+i),o.redirect(i))},dataLabel:function(r){var i,o,s,c,l;switch(i=Math.round(r.value/r.totalValue*100)+"%",s=r.value,c=function(e){for(a in e)if(e.hasOwnProperty(a)&&e[a].items.length>0)for(n in e[a].items)if(e[a].items[n].labelDisplay)return e[a].items[n].labelDisplay}(t.series),y.valueFormats&&y.valueFormats.value&&y.valueFormats.value.converter&&(s=y.valueFormats.value.converter.format(r.value)),-1!==e.inArray(c,["LABEL","ALL","LBL_VAL"])&&(o=r.seriesData?r.seriesData.name:"Other"),c){case"VALUE":l=s;break;case"PERCENT":l=i;break;case"LABEL":l=o;break;case"LBL_VAL":l=o+" - "+s;break;case"ALL":l=o+" - "+i+" ( "+s+" )";break;case"COMBO":l=i+" ( "+s+" )"}return l}}):g[m]({drill:function(a,n){-1===e.inArray(y.type,c)?n.group&&n.series&&(i=function(e,t,a){var r;function i(e,t,a){var r;for(r=0;r<e.length;r++)if("pie"===y.type||"funnel"===y.type||"pyramid"===y.type){if(e[r].name===t)return e[r].link}else if("stock"===y.type){var i=new Date(e[r].name);if(i.getTime()===a||i===a)return e[r].link}else{if(e[r].name===a)return e[r].link;var o=new Date(e[r].name);if(o.getTime()===a||o===a)return e[r].link}}for(r in e)if(e.hasOwnProperty(r))if(e[r].id){if((e[r].id===t||e[r].name===t)&&e[r].items.length>0)return i(e[r].items,t,a)}else if(e[r].name&&e[r].name===t&&e[r].items.length>0)return i(e[r].items,t,a)}(t.series,n.series,n.group)):i=n.data.link,i&&(r.log("Chart link: "+i),o.redirect(i))}})),"ojStatusMeterGauge"===m&&g[m]({tooltip:{renderer:function(e){var a;return t.tooltipRendered&&(a=t.customTooltip?t.customTooltip:e.label),a}}}),"ojGantt"===m&&t.tooltip&&g[m]({tooltip:{renderer:function(e){return e.data.customTooltip}}}),f>0&&setTimeout((function(){j()}),1e3*f)}h="dial"===y.type?"ojStatusMeterGauge":"gantt"===y.type?"ojGantt":"ojChart",n.jetChart.formatData(y,!1),g[h](y),i.create(c,{type:"JetChart",widgetName:h,refresh:function(){x(),j()},focus:function(){g.focus()},widget:function(){return g}}),i(c).refresh()}))},initReportChart:function(r,i,o,c,l){require(["ojs/ojcore","jquery","ojs/ojchart","ojs/ojvalidation"],(function(u){var m,p,v=e("#"+a.escapeCSS(r),apex.gPageContext$);function f(){v.css("width","100%"),v.css("max-width","100%"),v.css("height","500px"),v.css("min-width","100px")}m={legend:{rendered:"off"},animationOnDisplay:"auto",animationOnDataChange:"auto",hoverBehavior:"dim",groups:[],series:[],valueFormats:[]},v.ojChart(m),f(),l?t.widget("wsChart",{x01:l},{dataType:"json",success:function(e){n.jetChart.formatData(e,!0),v.ojChart(e),v.ojChart({dataLabel:function(t){var a,r;return r=t.value,e.valueFormats&&e.valueFormats.value&&e.valueFormats.value.converter&&(r=e.valueFormats.value.converter.format(r)),a=t.seriesData?t.seriesData.name:"Other","pie"===t.seriesData.type?a+" - "+r:null}})}}):(p={p_widget_name:"worksheet",p_widget_mod:"GET_CHART_JSON",x01:i,x02:o},t.plugin(c,p,{dataType:"json",type:"GET",success:function(e){n.jetChart.formatData(e,!0),v.ojChart(e),v.ojChart({dataLabel:function(t){var a,r;return r=t.value,e.valueFormats&&e.valueFormats.value&&e.valueFormats.value.converter&&(r=e.valueFormats.value.converter.format(r)),a=t.seriesData?t.seriesData.name:"Other","pie"===t.seriesData.type?a+" - "+r:null}})}})),s.onVisibilityChange(v[0],(function(e){e?(u.Components.subtreeShown(v[0]),f(),v.ojChart("refresh")):u.Components.subtreeHidden(v[0])}))}))},formatData:function(t,a){var r,i,o,n,s=t,c=new oj.ColorAttributeGroupHandler;if(a)if("bar"!==s.type){for(n=s.series,i=0;i<n.length;i++)n[i].color=c.getValue(n[i].name);s.series=n}else{for(n=s.series[0].items,i=0;i<n.length;i++)n[i].color=c.getValue(n[i].name);s.series[0].items=n}if("gantt"!==s.type)"dial"===s.type?s.metricLabel&&e.each(s.metricLabel,(function(e){"converter"===e&&(s.metricLabel[e]=oj.Validation.converterFactory("number").createConverter(s.metricLabel[e]))})):(s.valueFormats&&e.each(s.valueFormats,(function(t){e.each(s.valueFormats[t],(function(e,a){"converter"===e&&(r=a.formatType?"datetime":"number",s.valueFormats[t][e]=oj.Validation.converterFactory(r).createConverter(s.valueFormats[t][e]))}))})),s.xAxis&&s.xAxis.tickLabel&&e.each(s.xAxis.tickLabel,(function(e,t){"converter"===e&&(r=t.formatType?"datetime":"number",s.xAxis.tickLabel[e]=oj.Validation.converterFactory(r).createConverter(s.xAxis.tickLabel[e]))})),s.yAxis&&s.yAxis.tickLabel&&e.each(s.yAxis.tickLabel,(function(e,t){"converter"===e&&(r=t.formatType?"datetime":"number",s.yAxis.tickLabel[e]=oj.Validation.converterFactory(r).createConverter(s.yAxis.tickLabel[e]))})),s.y2Axis&&s.y2Axis.tickLabel&&e.each(s.y2Axis.tickLabel,(function(e,t){"converter"===e&&(r=t.formatType?"datetime":"number",s.y2Axis.tickLabel[e]=oj.Validation.converterFactory(r).createConverter(s.y2Axis.tickLabel[e]))})));else{if(s.majorAxis&&s.majorAxis.converter)for(o in s.majorAxis.converter)r="datetime",s.majorAxis.converter[o]=oj.Validation.converterFactory(r).createConverter(s.majorAxis.converter[o]);if(s.minorAxis&&s.minorAxis.converter)for(o in s.minorAxis.converter)r="datetime",s.minorAxis.converter[o]=oj.Validation.converterFactory(r).createConverter(s.minorAxis.converter[o])}return s}}}(apex.jQuery,apex.server,apex.util,apex.debug,apex.region,apex.navigation,apex.widget,apex.widget.util);