!function(e){"use strict";var t=e.apex.listview.prototype.options,a=/(^|\s)a-ListView-divider(\s|$)/;t.apexRegionId="",t.apexAjaxIdentifier="",t.apexPageItems="",t.apexFilter="",e(document).on("listviewcreate","ul, ol",(function(){var t=e(this),i=t.data("apex-listview").options;function r(e){apex.server.plugin(i.apexAjaxIdentifier,{pageItems:i.apexPageItems,x01:"FETCH",x04:t.data("apex-last-search"),x05:e},{dataType:"html",loadingIndicator:t,loadingIndicatorPosition:"centered",refreshObject:t,clear:1===e?l:void 0,success:n})}function l(){t.empty(),t.listview("refresh")}function n(a){var i=e(a),r=i.filter("li[data-role='list-divider']:first"),l=e("li[data-role='list-divider']:last",t);e("li.apex-load-more",t).remove(),t.append(i),r.text()===l.text()&&r.remove(),t.listview("refresh")}i.apexRegionId&&i.apexAjaxIdentifier&&(t.parents("#"+i.apexRegionId),apex.region.create(i.apexRegionId,{type:"ListView",widgetName:"listview",refresh:function(){r(1)},widget:function(){return t}}),t.on("click","li.apex-load-more",(function(a){r(e("li[data-role!='list-divider']",t).length),a.preventDefault()})),(t.attr("data-apex-filter")||t.attr("data-filter"))&&function(){function l(){var e=d.val();t.data("apex-last-search",e),r(1)}var n=e.apex.filterable.prototype.options.filterCallback,s=t.attr("data-input").substr(1),o=e("<div>",{class:"a-ListView-searchbar ui-filterable ui-bar-"+t.attr("data-filter-theme"),role:"search"}),d=e("<input>",{id:s,placeholder:t.attr("data-filter-placeholder"),"data-type":"search"});d.appendTo(o),o.insertBefore(t),i.inset&&o.addClass("ui-listview-filter-inset");i.apexFilter?d.on("change",l).on("keydown",(function(e){13===e.which&&(e.preventDefault(),l())})):t.filterable({filterCallback:function(e,t){return!this.className.match(a)&&n.call(this,e,t)}})}())}))}(apex.jQuery);