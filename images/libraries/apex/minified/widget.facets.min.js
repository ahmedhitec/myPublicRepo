!function(t,e,a,n,s){"use strict";const i="a-FS-currentList",r="a-FS-control",o="apex-item-option-badge",l="."+o,c="is-disabled",h="is-checked",u="icon-bar-chart",p="icon-pie-chart",d="</div>",f="</span>",m="facetCollapsedState",g="openCharts",C="chartConfig",b=s.ui.keyCode;var v=0,F=!1;function _(t){return a.getMessage("APEX.FS."+t)}function k(t){return"string"==typeof t?t:t.map(t=>null!==t&&"object"==typeof t?t.b+"|"+t.e:t).join(":")}function y(t){return t.split(":").map(t=>{var e;return 2===(e=(t+"").split("|")).length?{b:e[0],e:e[1]}:t})}function S(e){return s("#"+t.escapeCSS(e.name)).val()}function x(e,a){s("#"+t.escapeCSS(e)).val(a).trigger("change",[{internal:!0}])}function w(t,e){x(t.name,e)}function A(t,e){for(let a=0;a<t.length;a++)if(t[a].name===e)return a;return-1}function I(t){var e,a;if(t.values&&(t.checkedFirst||t.disabledLast||t.orderByCount))for(a=t.values,e=0;e<a.length;e++)a[e].order=e+1}function L(t){return t.length>0?JSON.stringify(t):""}function V(t,e){return!(t.is(":visible")||"string"==typeof e&&s(e).is(":visible"))}function T(e){return"<div class='a-FS-totalArea'><span class='a-FS-totalLabel'>"+t.escapeHTML(e)+"</span> <span class='a-FS-totalCount'></span></div>"}function O(e){return s("#"+t.escapeCSS(e+"_A-FC"))}function E(t,e,a,s){return!0===e?null!==a&&t>=a?n.formatCompactNumber(t,{maximumFractionDigits:0}):n.formatNumber(t,"FM999G999G999G999G999G999G999G999"):"compact"===e?n.formatCompactNumber(t,s):"string"==typeof e?n.formatNumber(t,e,s):""+t}s.widget("apex.facets",{version:"20.2",widgetEventPrefix:"facets",options:{initState:null,batch:!0,externalApply:!1,feedback:!0,searchField:!1,searchButton:null,searchItem:null,currentFacets:!0,currentIncludeName:!0,showTotalCount:!0,showCharts:!1,chartTopNValues:10,defaultChartDialog:{width:620,height:580,appendTo:"form[name='wwv_flow']",resizable:!0,draggable:!0,title:_("CHART_TITLE"),modal:!1},defaultChartPopup:null,numberFormat:!0,numberFormatThreshold:null,numberFormatOptions:null,persistState:!0,controls:[],text:{},change:null,beforeAddChart:null,afterRemoveChart:null},_create:function(){var t,a,n,i=[],r=this,o=this.options,l=this.element;for(e.info("Facets '"+l[0].id+"' created. Options: ",o),l.addClass("a-FS"),this._super(),o.feedback||(o.showTotalCount=!1),this.lockCount=0,this.totalResourceCount=null,this.facetValueCounts=null,this.hiddenControls=[],this._on(this._eventHandlers),this.idPrefix=l[0].id||"afc_"+v++,this.searchId=null,this.searchButtonId=null,this.pendingChange=!1,this.currentValues={},this.facetValuesNeeded=[],this.facetCountsNeeded=[],this.facetCollapsedState={},this.currentCharts=[],this.chartConfig={},this.chartDashboard$=this.chartsPopup$=this.chartWidget=null,this.chartsLoaded=!1,o.controls.length>0&&(this.itemsContainer$=s("#"+o.controls[0].name).parent(),this.itemsContainer$.on("change.facets",(t,e)=>{var a;e&&e.internal||((a=s(t.target)).prop("id")===o.searchItem?(this._initSearch(),this._doSearch()):this._setFCValue(a))})),this.currentFacetsArea$=this.currentFacets$=this.totalCount$=null,t=0;t<o.controls.length;t++)(a=o.controls[t]).collapsible&&void 0!==a.initialCollapsed&&(a._origCollapsed=a.initialCollapsed),void 0!==a.initialChart&&(a.initialChart&&i.push(a.name),a._origChart=a.initialChart);if(this.sessionStore=apex.storage.getScopedSessionStorage({prefix:"facets",usePageId:!0,regionId:o.regionStaticId}),o.persistState){if("reset"!==o.initState)try{this.facetCollapsedState=JSON.parse(this.sessionStore.getItem(m)),i=JSON.parse(this.sessionStore.getItem(g))||i,this.chartConfig=JSON.parse(this.sessionStore.getItem(C))}catch(t){e.warn("Failed to restore facets state from session",t),this.facetCollapsedState=this.chartConfig=i=null}else[m,g,C].forEach(t=>{this.sessionStore.removeItem(t)});for(s.isPlainObject(this.facetCollapsedState)||(this.facetCollapsedState={}),s.isArray(i)||(i=[]),s.isPlainObject(this.chartConfig)||(this.chartConfig={}),t=0;t<o.controls.length;t++)a=o.controls[t],n=this.facetCollapsedState[a.name],!a.collapsible||1!==n&&0!==n||(a.initialCollapsed=1!==n),"string"==typeof o.showCharts&&(a.initialChart=i.includes(a.name))}apex.widget.util.onVisibilityChange(l[0],t=>{t&&(this.pendingRefresh?(this.refresh(),this.fetchCounts()):this.pendingFetch&&this.fetchCounts())}),apex.region.create(o.regionStaticId,{type:"Facets",widgetName:"facets",refresh:function(){r.refresh()},focus:function(){r.focus()},widget:function(){return l},reset:function(){r.clearAll(!0),r._reset()},clear:function(){r.clearAll(!0)},fetchCounts:function(){r.fetchCounts()},clearFacets:function(){r.clearAll()},apply:function(){r._apply()},lock:function(){r._lock()},unlock:function(){r._unlock()},getTotalResourceCount:function(){return r.totalResourceCount},getFacetCount:function(){return r.facetCount()},getFacetValueCounts:function(){return r.facetValueCounts},showFacet:function(t){r._toggleVisibility(t,!0)},hideFacet:function(t){r._toggleVisibility(t,!1)}}),this.refresh(),o.disabled&&this._setOption("disabled",o.disabled),this.fetchCounts(),require(["ojs/ojcore","ojs/ojchart"],()=>{this.chartsLoaded||this.pendingRefresh||this._initCharts(),this.chartsLoaded=!0})},_eventHandlers:{"click .js-toggleOverflow":function(t){var e=s(t.target);this._updateShowAll(e,!0)},filterablefilter:function(t){var e=s(t.target).parent().find(".js-toggleOverflow");e.length&&this._updateShowAll(e)},"click .js-clear":function(t){this._clear(this._getControl(s(t.target))),this._changed()},"click .js-apply":function(){this._apply()},"click .js-addChart":function(t){var e,a=s(t.target),n=this._getControl(a);n&&this.chartsLoaded&&(e=n.name,this.currentCharts.includes(e)?O(e).focus():(this._addChart(n,a.parent()),this._updateCharts()))},keydown:function(t){var e,a,n,i=this.options,r=t.which;i.batch&&!i.externalApply&&r===b.ENTER?"radio"!==(e=t.target.type)&&"checkbox"!==e||(t.preventDefault(),this._apply()):(a=s(t.target).closest(".a-FS-header"))[0]&&(r!==b.UP&&r!==b.DOWN||(n=a.parent()[r===b.UP?"prev":"next"]().find(".a-FS-header :tabbable"))[0]&&(n.focus(),t.preventDefault()))},collapsibleexpand:function(t){!F&&this.options.persistState&&this._updateCollapsedState(this._getControl(s(t.target)),!0)},collapsiblecollapse:function(t){!F&&this.options.persistState&&this._updateCollapsedState(this._getControl(s(t.target)),!1)}},_destroy:function(){var t=this.element,e=this.options;this._cleanupHandlers(),this._cleanupCharts(),this.itemsContainer$&&this.itemsContainer$.off("change.facets"),t.removeClass("a-FS "+c).empty(),"string"==typeof e.currentFacets&&this.currentFacetsArea$&&this.currentFacetsArea$.removeClass(i+" a-FS-currentList--includeName "+c).empty(),"string"==typeof e.showTotalCount&&this.totalCount$&&this.totalCount$.empty()},_setOption:function(t,e){var a,n=this.element,s=this.options;if("feedback"===t||"currentFacets"===t||"showTotalCount"===t)throw new Error("Facets "+t+" cannot be set");if(this._super(t,e),"disabled"===t)n.toggleClass(c,e),"string"==typeof s.currentFacets&&this.currentFacetsArea$&&this.currentFacetsArea$.toggleClass(c,e);else if("batch"===t){for(a=0;a<s.controls.length;a++)s.controls[a].batch=s.batch;this.refresh()}else"showCharts"!==t&&("defaultChartPopup"!==t&&"defaultChartDialog"!==t||!0!==this.showCharts)||this.refresh()},_initFacetControls:function(){var a=this.options,n=-1;this.facetControlItems=[];for(let i=0;i<a.controls.length;i++){let r=a.controls[i];if(B[r.type]){if("group"===r.type){if(r.facets&&r.facets.length>0){for(let t=0;t<r.facets.length;t++){let e=r.facets[t];e.showChart=!1,e.showCounts=r.showCounts,a.controls.splice(i+1+t,0,e)}delete r.facets}n=-1,(r.checkedFirst||r.disabledLast||r.orderByCount)&&(n=1)}"checkbox"===r.type&&n>0?(r.order=n,n+=1):I(r),void 0!==r.showAllCount&&void 0===r.showAllGrace&&(r.showAllGrace=1),void 0===r.hasFeedback&&(r.hasFeedback=a.feedback),void 0===r.showCounts&&r.hasFeedback&&(r.showCounts=!0),r.hasFeedback||(r.showCounts=!1),void 0===r.showChart&&r.showCounts&&(r.showChart=!1!==a.showCharts),void 0===r.clearBtn&&(r.clearBtn=!0),r.batch=a.batch,"group"!==r.type&&this.facetControlItems.push(r.name),r._watchId&&r.visibleCondition&&t.unwatchCondition(r.visibleCondition,r._watchId),r.lovDependsOn&&s("#"+t.escapeCSS(r.lovDependsOn)).off("change.fsDependsOn"+i)}else e.warn("Unknown control type removed:",r.type),a.controls.splice(i,1),i-=1}!1!==a.searchField&&a.searchItem&&this.facetControlItems.push(a.searchItem)},_makeSetValueFn:function(){var t=this.options;return(e,a)=>{var n,s,i,o=this.currentValues[e.name];if(w(e,a=k(a)),t.batch){if(t.externalApply||(B[e.type],(i=t.controls.indexOf(e))>=0&&this.element.find("#"+this.idPrefix+"_"+i).closest("."+r).find(".a-FS-apply")[o===a?"hide":"show"]()[0].scrollIntoView(!1)),(s=this.facetValuesNeeded.length)>0){for(n=0;n<s;n++)this.facetCountsNeeded.push(this.facetValuesNeeded[n]);this._delayFetchCountsFor()}}else this.currentValues[e.name]=a,this._changed()}},_initFilterable:function(t,e,a){var n=s("#"+a+"_f"),i=t.closest("."+r).find(".a-FS-filter");n.val(""),e.showAllCount>0&&t.find(".apex-item-option").length<e.showAllCount?i.hide():(i.show(),t.find(".apex-item-group").filterable({enhanced:!0,input:n,children:".apex-item-option"}))},refresh:function(){var e,a,n,r,o,l=this._makeSetValueFn(),c=this.element,h=this.options;let u=e=>{var a,n=e.visibleCondition,s=A(h.controls,n.item);s>=0&&(a=h.controls[s]),e._watchId=t.watchCondition(n,{doSubstitution:!0,multiValued:a&&a.multiple},t=>{this._toggleVisibility(e.name,t,!0)})},p=(e,a,n,i)=>{var r=this.idPrefix+"_"+a,o=s("#"+t.escapeCSS(e.lovDependsOn));o.on("change.fsDependsOn"+a,()=>{""===o.val()&&e.lovDependsOnRequired?(e.values=[],this._updateControlValues(e,n,i,r,r+"_lbl")):this.facetValuesNeeded.push(e.name)})};if(V(this.element,h.currentFacets))this.pendingRefresh=!0;else{for(this.pendingRefresh=!1,this._initFacetControls(),this._cleanupHandlers(),this._cleanupCharts(),this._render(),this.currentFacetsArea$=null,h.currentFacets&&(!0===h.currentFacets?this.currentFacetsArea$=c.find("."+i):(this.currentFacetsArea$=s(h.currentFacets).first(),this.currentFacetsArea$.addClass(i).toggleClass("a-FS-currentList--includeName",h.currentIncludeName).html("<ul class='a-FS-currentItems'></ul>")),this.currentFacets$=this.currentFacetsArea$.children("ul").first(),!0===h.showTotalCount&&(this.currentFacetsArea$.prepend(T(h.text.totalCountLabel)),this.totalCount$=this.currentFacetsArea$.find(".a-FS-totalCount")),this.currentFacetsArea$.on("click.facets","button",t=>{var e,a,n,i,r=s(t.target).closest("button"),o=r.data("fc"),l=r.attr("data-value"),c=r.attr("data-begin"),u=r.attr("data-end");if(o>=0&&""!==l){for(n=y(S(a=h.controls[o])),e=0;e<n.length;e++)if(l===(i=n[e])||"object"==typeof i&&c===i.b&&u===i.e){n.splice(e,1);break}w(a,k(n)),this._setFCValueByIndex(o,n),this._changed()}else this.clearAll()})),"string"==typeof h.showTotalCount?this.totalCount$=s(h.showTotalCount).first():!1===h.currentFacets&&!0===h.showTotalCount&&(this.totalCount$=c.find(".a-FS-totalCount")),F=!0,c.find(".a-FS-control--collapsible").each((t,e)=>{var a=s(e),n=h.controls[a.data("fc")];a.collapsible({content:a.find(".a-FS-body"),controllingElement:a.find(".a-FS-toggle"),heading:".a-FS-header",collapsed:!!n.initialCollapsed})}),F=!1,e=0;e<h.controls.length;e++)"group"!==(a=h.controls[e]).type&&(o=S(a),this.currentValues[a.name]=o,n=B[a.type],r=this._getControlElementByIndex(e),n.init(r,a,l),n.setValue(r,a,y(o)),a.filterValues&&this._initFilterable(r,a,this.idPrefix+"_"+e),a.visibleCondition&&u(a),a.values&&a.lovDependsOn&&(p(a,e,n,r),0===a.values.length&&this._toggleVisibility(a.name,!1)));"string"==typeof h.searchField&&(this.searchId="#"+t.escapeCSS(h.searchField),h.searchButton&&(this.searchButtonId="#"+t.escapeCSS(h.searchButton))),this.searchId&&s(this.searchId).on("keydown.facets",t=>{t.which===b.ENTER?(t.preventDefault(),this._doSearch()):t.which===b.ESCAPE&&""!==s(this.searchId).val().trim()&&(t.preventDefault(),s(this.searchId).val(""))}),this.searchButtonId&&s(this.searchButtonId).on("click.facets",()=>{this._doSearch()}),this._initSearch(),this.facetValueCounts&&this._updateControls({counts:this.facetValueCounts},!0),this.chartsLoaded&&this._initCharts()}},fetchCounts:function(){var t=this.options;t.disabled||(V(this.element,t.currentFacets)?this.pendingFetch=!0:(this.pendingFetch=!1,this._fetchCounts()))},facetCount:function(){var t,e,a=this.options.controls,n=0;for(t=0;t<a.length;t++)"group"!==(e=a[t]).type&&""!==S(e)&&(n+=1);return n},focus:function(){this.element.find(".a-FS-search,.a-FS-body").filter(":visible").first().find(":tabbable").first().focus()},clearAll:function(t){var e,a,n=this.options;for(t&&this.searchId&&(s(this.searchId).val(""),x(n.searchItem,"")),e=0;e<n.controls.length;e++)"group"!==(a=n.controls[e]).type&&this._clear(a);this._changed()},addChart:function(t,e,a){var n,s=this.options.controls,i=A(s,t);i>=0&&(n=s[i]).showCounts&&(e&&e.length||this.options.showCharts)&&(this.currentCharts.includes(t)?O(t).focus():(this._addChart(n,null,e,a),this._updateCharts()))},removeChart:function(t){this._removeChart(t)},_getControlElementByIndex:function(t){var e=this.element.find("#"+this.idPrefix+"_"+t);return e.hasClass("a-FS-header")&&(e=e.next().find(".a-FS-bodyInner")),e},_getControl:function(t){var e=t.closest("."+r).attr("data-fc");return this.options.controls[e]},_apply:function(){var t,e,a,n=!1,s=this.options.controls;for(t=0;t<s.length;t++)"group"!==(e=s[t]).type&&(a=S(e),this.currentValues[e.name]!==a&&(n=!0),this.currentValues[e.name]=a);n&&this._changed()},_lock:function(){0===this.lockCount&&this._setOption("disabled",!0),this.lockCount+=1},_unlock:function(){this.lockCount<=0||(this.lockCount-=1,this.lockCount<=0&&(this.lockCount=0,this._setOption("disabled",!1),this.pendingChange&&(this.pendingChange=!1,this._changed())))},_reset:function(){var t=this.options.controls;[m,g,C].forEach(t=>{this.sessionStore.removeItem(t)}),this.element.find(".a-FS-control--collapsible").each((function(){var e=s(this),a=t[e.data("fc")];e.collapsible(a._origCollapsed?"collapse":"expand")})),this._cleanupCharts(),this.chartConfig={};for(let e=0;e<t.length;e++){let a=t[e];a.initialChart=a._origChart||!1}this._initCharts()},_changed:function(){this.options.disabled||this.pendingRefresh||this.pendingFetch?this.pendingChange=!0:(this._trigger("change",{}),setTimeout(()=>{this._fetchCounts()},200))},_fetchCounts:function(){this.options.feedback?this._sendFetchCounts():this._updateControls({counts:{}},!0)},_clear:function(t){var e,a=this.options.controls;if(e=a.indexOf(t),"group"===t.type&&e>=0)for(let t=e+1;t<a.length&&"checkbox"===a[t].type;t++)this._clear(a[t]);else w(t,""),(e=this.options.controls.indexOf(t))>=0&&this._setFCValueByIndex(e,[])},_setFCValue:function(t){var e,a=t[0].id,n=y(t.val());(e=A(this.options.controls,a))>=0&&(this._setFCValueByIndex(e,n),this._changed())},_setFCValueByIndex:function(t,e){var a,n,s=this.options.controls[t];this.currentValues[s.name]=k(e),a=B[s.type],(n=this._getControlElementByIndex(t)).length&&a.setValue(n,s,e)},_initSearch:function(){var t=s(),e=this.options;!0===e.searchField&&e.searchItem?t=s("#"+this.idPrefix+"_search"):e.searchField&&(t=s(this.searchId)),t.val($v(e.searchItem))},_initCharts:function(){const t=new RegExp("_A-FC$");let e=this.options;if(e.showCharts)if(this.chartDashboard$=s("<div class='a-FS-facetsDashboard'></div>"),"string"==typeof e.showCharts){s(e.showCharts).html(this.chartDashboard$);for(let t=0;t<e.controls.length;t++){let a=e.controls[t];e.showCharts&&a.showCounts&&a.showChart&&a.initialChart&&this._addChart(a,null)}this.currentCharts.length&&this._updateCharts()}else{let a,n;if(e.defaultChartDialog)a="dialog",n=e.defaultChartDialog;else{if(!e.defaultChartPopup)throw new Error("Missing chart dialog or popup options");a="popup",n=e.defaultChartPopup}this.chartWidget=a,this.chartsPopup$=s("<div class='a-FS-chartsDialog' style='display:none;' ></div>"),this.chartsPopup$.insertAfter(this.element)[a](s.extend({},n,{autoOpen:!1})).html(this.chartDashboard$).on("dialogbeforeclose popupbeforeclose",e=>{let a=this.chartsPopup$.find("oj-chart").prop("id");a&&(a=a.replace(t,""),this._removeChart(a,!0))})}},_cleanupHandlers:function(){this.searchId&&s(this.searchId).off(".facets"),this.searchId=null,this.searchButtonId&&s(this.searchButtonId).off(".facets"),this.searchButtonId=null,this.currentFacetsArea$&&this.currentFacetsArea$.off(".facets")},_cleanupCharts:function(){this.currentCharts=[],this.chartDashboard$&&this.chartDashboard$.remove(),this.chartsPopup$&&this.chartsPopup$.remove()},_updateShowAll:function(t,e){var a,n,i,o=t.parent(),l=o.parent(),u="true"===o.attr("data-expanded"),p=this._getControl(t),d=o.closest("."+r).find(".a-FS-filter");(d.find("input").val()||"").length>0?o.hide():(o.show(),e&&(u=!u),a=l.find(".apex-item-option"),p.hideEmpty&&(a=a.not("."+c)),n=a.length+1,p.showAllCount>0&&a.length>p.showAllCount+p.showAllGrace&&(n=p.showAllCount),i=0,a.each((function(t){var e=s(this),a=!u&&t>=n&&!s(this).hasClass(h);a||(i+=1),e.toggleClass("u-hidden",a)})),o.attr("data-expanded",u?"true":"false"),t.text(_(u?"SHOW_LESS":"SHOW_MORE")).prop("disabled",!u&&i>=a.length),o.add(d).toggle(a.length>n)),p.hasGroups&&l.find(".apex-item-subgroup").each((function(){var t=s(this);t.toggleClass("u-hidden",0===t.children(".apex-item-option").not(".u-hidden").length)}))},_render:function(){var e,n,s,o=this.element,l=this.options,c=l.text,h=t.htmlBuilder();function p(){h.markup(d+d),l.batch&&h.markup("<div class='a-FS-apply' style='display:none;'><button class='a-Button a-Button--hot js-apply' type='button'>").content(_("BATCH_APPLY")).markup("</button></div>"),h.markup(d+d)}!0===l.searchField&&(n=(e=this.idPrefix+"_search")+"_btn",this.searchId="#"+e,this.searchButtonId="#"+n,h.markup("<div class='a-FS-search'><label").attr("for",e).markup("class='u-vh'>").content(c.searchLabel).markup("</label><input class='text_field apex-item-text apex-item-has-icon' type='text' maxlength=500").attr("id",e).optionalAttr("placeholder",c.searchPlaceholder).markup("><span class='apex-item-icon fa fa-search' aria-hidden='true'></span><button class='a-Button a-Button--noLabel a-Button--icon js-search' type='button'").attr("id",n).markup(">").content(_("GO")).markup("</button></div>")),!0===l.currentFacets?h.markup("<div class='"+i+"'><ul class='a-FS-currentItems'></ul>"+d):!1===l.currentFacets&&!0===l.showTotalCount&&h.markup("<div class='"+i+"'>"+T(l.text.totalCountLabel)+d),s=null;for(let t=0;t<l.controls.length;t++){let n,i,o,c,d=l.controls[t],m=this.idPrefix+"_"+t,g=m+"_lbl",C=this.hiddenControls.indexOf(d.name)>=0,b=d.label,v=null;"group"===d.type?v=d.name:"checkbox"===d.type&&s&&(v=s),null!==v&&v===s||(s&&(N(h),p()),o=r,d.cssClasses&&(o+=" "+d.cssClasses),d.collapsible&&(o+=" a-FS-control--collapsible"),h.markup("<div").attr("class",o).attr("data-fc",t).optionalAttr("style",C?"display:none;":"").markup("><h3 class='a-FS-header'").attr("id",m).markup(">"),d.collapsible&&h.markup("<button class='a-FS-toggle' type='button'").attr("aria-labelledby",g).markup("></button>"),h.markup("<span class='a-FS-label'").attr("id",g).optionalAttr("tabindex",d.collapsible?null:"0").markup(">").content(b).markup(f),l.showCharts&&d.showCounts&&d.showChart&&(i=_("SHOW_CHART"),h.markup("<button type='button' class='a-FS-addChart js-addChart a-Button a-Button--noLabel a-Button--withIcon'").attr("title",i).attr("aria-label",i).markup("><span aria-hidden='true' class='a-Icon "+u+"'></span></button>")),d.clearBtn&&h.markup("<button class='a-FS-clearButton js-clear' type='button'>").content(_("CLEAR")).markup("</button>"),h.markup("</h3><div class='a-FS-body'").attr("id",m+"_b").markup(">"),d.filterValues&&d.values&&(c=a.formatMessage("APEX.FS.FILTER",d.label),e=m+"_f",h.markup("<div class='a-FS-filter'><label").attr("for",e).markup("class='u-vh'>").content(c).markup("</label><input class='text_field apex-item-text apex-item-has-icon' type='text' maxlength=500").attr("id",e).attr("placeholder",c).markup("><span class='apex-item-icon fa fa-search' aria-hidden='true'></span></div>")),h.markup("<div class='a-FS-wrap'").optionalAttr("style",d.maxHeight?"max-height:"+d.maxHeight+"px;":null).markup("><div class='a-FS-bodyInner'>"),v&&$(h,g,!0,d),s=v),n=B[d.type],n.render(h,m,g,d),null!==v&&v===s||(s&&N(h),p())}s&&(N(h),p()),o.html(h.toString())},_sendFetchCounts:function(){var t,e,a=[];for(t=0;t<this.hiddenControls.length;t++)e=this.hiddenControls[t],this.facetValuesNeeded.indexOf(e)<0&&a.push(e);this._send("FETCH_COUNTS",L(a),!0)},_sendFetchCountsFor:function(){this._send("FETCH_COUNTS_FOR",L(this.facetCountsNeeded),!1)},_send:function(t,e,a){var n,s=this.options;this._lock(),n=apex.server.plugin(s.ajaxIdentifier,{pageItems:this.facetControlItems,x01:t,x02:e,x03:L(this.facetValuesNeeded)},{dataType:"json",loadingIndicator:this.element,loadingIndicatorPosition:"centered",refreshObject:"#"+s.regionStaticId}),this.facetValuesNeeded=[],this.facetCountsNeeded=[],n.done(t=>{this._updateControls(t,a),this._updateCharts()}),n.always(()=>{this._unlock()})},_delayFetchCountsFor:function(){this.delayFetchTimer&&clearTimeout(this.delayFetchTimer),this.delayFetchTimer=setTimeout(()=>{this.delayFetchTimer=null,this.facetCountsNeeded.length>0&&this._sendFetchCountsFor()},100)},_updateControls:function(e,i){var o,l,c,h,u,p,d,m=e.counts,g=e.values,C=this.options,b=C.numberFormat,v=C.numberFormatOptions,F=C.numberFormatThreshold,k=this.element,x=t.htmlBuilder(),w=0;function A(t){return E(t,b,F,v)}!i||"compact"!==b&&!0!==b||"resolved"===n.resourcesLoaded().state()||(b=!1,n.resourcesLoaded(()=>{this._updateControls(e,i)})),i?this.facetValueCounts=m||null:m&&this.facetValueCounts&&s.extend(this.facetValueCounts,m),C.batch&&i&&k.find(".a-FS-apply").hide(),void 0!==e.totalCount&&(this.totalResourceCount=e.totalCount),o=null,l=null;for(let t=0;t<C.controls.length;t++){let e,n,s,b,v,F,_,I=null,L=null,V=C.controls[t],T=this.idPrefix+"_"+t,O=m&&m[V.name],E=g&&g[V.name],j=B[V.type],$=this._getControlElementByIndex(t);if("group"!==V.type){if("checkbox"!==V.type&&(l=null),_=k.find("#"+T),"checkbox"===V.type&&(_=_.closest("."+r).children(".a-FS-header")),V.lovValuesOptimization){for(e in E=[],O)E.push({r:e,d:e});E.sort((t,e)=>(t=t.d)>(e=e.d)?1:e>t?-1:0)}if(E&&(V.values=E,this._updateControlValues(V,j,$,T,T+"_lbl")),j.update&&O&&j.update($,T,V,O,A),n=S(V),"checkbox"===V.type){let e=t+1;c+=n,(e>=C.controls.length||"checkbox"!==C.controls[e].type)&&(I=""!==c,h.update(u,p,d))}else I=""!==n;if(null!==I&&_.parent().toggleClass("has-value",I),i&&C.currentFacets&&""!==n){b=V.label,l&&(L=b=l),s=y(n),null!==L&&L===o||(o&&x.markup("</li>"),x.markup("<li class='a-FS-currentItem'>"),C.currentIncludeName&&x.markup("<span class='a-FS-currentLabel'>").content(b).markup(f),o=L);for(let e=0;e<s.length;e++)n=s[e],b=n,j.getLabelForValue&&(b=j.getLabelForValue(V,n)),v=a.formatMessage("APEX.FS.CLEAR_VALUE",b),x.markup("<button class='a-FS-clear' type='button'").attr("aria-label",v).attr("data-fc",t),"object"==typeof n?(x.attr("data-begin",n.b),x.attr("data-end",n.e)):x.attr("data-value",n),x.markup(">").content(b).markup("<span class='a-Icon icon-multi-remove'></span></button>"),w+=1;null!==L&&L===o||x.markup("</li>")}F=_.next().find(".js-toggleOverflow"),F.length&&this._updateShowAll(F)}else l=V.label,c="",h=j,u=$,p=T,d=V}i&&(o&&x.markup("</li>"),C.currentFacets&&(w>1&&x.markup("<li class='a-FS-currentItem a-FS-currentItem--all'><button class='a-FS-clearAll' type='button'>").content(_("CLEAR_ALL")).markup("</button></li>"),!0===C.currentFacets&&this.currentFacetsArea$.toggle(w>0||!0===C.showTotalCount),this.currentFacets$.html(x.toString())),this.totalCount$&&(this.totalCount$.text(A(this.totalResourceCount)),k.add(this.currentFacetsArea$||s()).find(".a-FS-totalArea").toggle(0!==this.totalResourceCount)))},_updateControlValues:function(e,a,n,s,i){var r,o,l,c,h=t.htmlBuilder(),u=e.values,p=y(S(e)),d=this._makeSetValueFn();for(I(e),a.render(h,s,i,e),n.html(h.toString()),c=!1,r=0;r<p.length;r++){for(l=!1,o=0;o<u.length;o++)if(p[r]===u[o].r){l=!0;break}l||(p.splice(r,1),r-=1,c=!0)}c&&w(e,k(p)),a.init(n,e,d),a.setValue(n,e,p),e.filterValues&&this._initFilterable(n,e,s),e.lovValuesOptimization||this.hiddenControls.indexOf(e.name)>=0!=(0===u.length)&&this._toggleVisibility(e.name,u.length>0,!1,!0)},_doSearch:function(){var t;this.searchId&&(t=s(this.searchId).val(),x(this.options.searchItem,t),this._changed())},_toggleVisibility:function(t,e,a,n){var s,i,o,l,c=this.options.controls;(s=A(c,t))>=0&&(o=c[s],i=this.hiddenControls.indexOf(t),e?i>=0&&(this.hiddenControls.splice(i,1),o.hasFeedback&&!n&&(this.facetCountsNeeded.push(t),this._delayFetchCountsFor())):i<0&&this.hiddenControls.push(t),l=this.element.find("#"+this.idPrefix+"_"+s),"checkbox"!==o.type&&(l=l.closest("."+r)),l.toggle(e),a&&!e&&this._clear(o))},_updateCollapsedState:function(t,e){this.facetCollapsedState[t.name]=e?1:0,this.sessionStore.setItem(m,JSON.stringify(this.facetCollapsedState))},_updateCharts:function(){var e,a=this.options,n=a.controls,s=this.facetValueCounts,i=this.currentCharts;let r=(t,e)=>e.items[0].value-t.items[0].value;if(s)for(e=0;e<i.length;e++){let o,l,c,h,u,p,d,f,m,g=!1,C=i[e],b=this.chartConfig[C],v=[],F=A(n,C),k=n[F],y=B[k.type];if("group"===k.type){for(o=F+1;o<n.length&&"checkbox"===n[o].type;o++){if(m=S(n[o]),m){g=!0;break}}for(o=F+1;o<n.length&&"checkbox"===n[o].type;o++){let t=n[o];l=t.altLabel||t.label,c=s[t.name],c&&(m=S(t),u=c[t.value],u>0&&(!g||m)&&v.push({name:l,items:[{id:o,value:u,name:l}]}))}}else for(c=s[C],d=k.values||[{r:k.value,l:k.altLabel||k.label}],m=":"+S(k)+":","::"!==m&&(g=!0),o=0;o<d.length;o++)f=d[o],l=y.useGetlabelForCharts&&y.getLabelForValue?y.getLabelForValue(k,f.r):f.l||t.stripHTML(f.d),u=c[f.r],u>0&&(!g||m.includes(":"+f.r+":"))&&v.push({name:l,items:[{id:o,value:u,name:l}]});if(k.orderByCount&&v.sort(r),p=g?v.length:Math.min(v.length,b.topN||a.chartTopNValues),p<v.length){let t=0,e=_("CHART_OTHERS");for(o=p;o<v.length;o++)t+=v[o].items[0].value;v[p]={name:e,items:[{id:d.length,value:t,name:e}]},v.length=p+1}h=O(C)[0],h.groups=[""],h.valueFormats={value:{converter:{format:t=>E(t,a.numberFormat,a.numberFormatThreshold,a.numberFormatOptions)},tooltipLabel:_("CHART_VALUE_LABEL")}},h.translations={labelSeries:k.label},h.series=v}},_addChart:function(e,a,n,i){var r,o,l=this.options,c=e.name,h=this.currentCharts;function d(t,e){t.legend.rendered="pie"===e?"off":"on",t.styleDefaults.dataLabelPosition="pie"===e?"outsideSlice":"outsideBarEdge",t.refresh()}i=i||this.chartConfig[c]||{type:"bar",topN:l.chartTopNValues},this._persistChartConfig(),this.chartConfig[c]=i,r=s(function(e,a){var n,s,i=_("REMOVE_CHART"),r=t.htmlBuilder();return"bar"===a?(s=p,n=_("CHART_PIE")):(a="pie",s=u,n=_("CHART_BAR")),r.markup('<div class="a-FS-facetChart"><div class="a-FS-facetChart-header"><h3 class="a-FS-facetChart-title">').content(e.label).markup('</h3><div class="a-FS-facetChart-controls">').markup('<button type="button" class="a-FS-changeChartType js-changeChartType a-Button a-Button--noLabel a-Button--withIcon"').attr("data-type",a).attr("title",n).attr("aria-label",n).markup('><span aria-hidden="true" class="a-Icon '+s+'"></span></button><button type="button" class="a-FS-removeChart js-removeChart a-Button a-Button--noLabel a-Button--withIcon"').attr("title",i).attr("aria-label",i).markup('" ><span aria-hidden="true" class="a-Icon icon-multi-remove"></span></button></div></div>').markup('<div class="a-FS-facetChart-body"><oj-chart id="').attr(e.name+"_A-FC").markup('" style="width:100%;height:100%;" legend.position="bottom" hover-behavior="dim" hide-and-show-behavior="withRescale" sorting="descending" animation-on-display="auto" animation-on-data-change="auto"').attr("type",a).markup("></oj-chart></div></div>"),r.toString()}(e,i.type)),this._trigger("beforeAddChart",{},{count:h.length+1,chartName:c,chart:r[0]}),(o=r.find("oj-chart")[0]).dataLabel=t=>{let e,a,n=E(t.value,l.numberFormat,l.numberFormatThreshold,l.numberFormatOptions);return t.totalValue?(e=Math.round(100*t.value/t.totalValue)+"%",a=t.series+" - "+e+" ( "+n+" )"):a=""+n,a},r.find(".js-removeChart").click(()=>{this._removeChart(c)}),r.find(".js-changeChartType").click(t=>{var e,a,n,i,r=s(t.target).closest("button"),o=r.attr("data-type"),l=r.closest(".a-FS-facetChart").find("oj-chart")[0];"bar"===o?(e="pie",a=_("CHART_BAR"),n=u,i=p):(e="bar",a=_("CHART_PIE"),n=p,i=u),r.attr("data-type",e).attr("title",a).attr("aria-label",a).children(".a-Icon").removeClass(i).addClass(n),l.type=e,d(l,e),this.chartConfig[c].type=e,this._persistChartConfig()}),n&&n.length?(n.append(r),h.push(c)):(!0===this.options.showCharts&&h.length>0&&this._removeChart(h[0]),this.chartDashboard$.append(r),h.push(c),!0===this.options.showCharts?("popup"===this.chartWidget&&this.chartsPopup$.popup("option","parentElement",a),this.chartsPopup$[this.chartWidget]("open")):this._persistOpenCharts()),setTimeout(()=>{d(o,i.type)},0)},_removeChart:function(t,e){var a=this.currentCharts,n=a.indexOf(t),s=O(t).closest(".a-FS-facetChart");n>=0&&(a.splice(n,1),s.remove(),!0===this.options.showCharts?e||this.chartsPopup$[this.chartWidget]("close"):this._persistOpenCharts(),this._trigger("afterRemoveChart",{},{count:a.length,chartName:t}))},_persistOpenCharts:function(){this.options.persistState&&this.sessionStore.setItem(g,JSON.stringify(this.currentCharts))},_persistChartConfig:function(){this.options.persistState&&this.sessionStore.setItem(C,JSON.stringify(this.chartConfig))}});var B=[];function j(t,e){B[t]=e}function $(t,e,a,n){var s="apex-item-group apex-item-group--rc ";s+=a?" checkbox_group apex-item-checkbox":" radio_group apex-item-radio",n.listClasses&&(s+=" "+n.listClasses),n.hideRadioButton&&!a&&(s+=" a-FS--hideRadio"),n.hideEmpty&&(s+=" a-FS--hideEmpty"),t.markup("<div tabindex='-1' role='group' aria-labelledby='"+e+"' )").attr("class",s).markup(">")}function N(t){t.markup(d)}function R(t,e,a,n,s,i,r,l,c){var h=e+"_"+a;t.markup("<div").optionalAttr("id",c).attr("class",n).optionalAttr("data-order",s.order).markup("><input").attr("type",l?"checkbox":"radio").attr("id",h).optionalAttr("name",l?null:e+"_r").attr("value",s.r).markup("><label").attr("for",h).markup(">"),s.i&&t.markup("<span class='a-Icon ").attr(s.i).markup("'></span>"),t.markup("<span class='label'>")[i?"content":"markup"](s.d).markup(f),r&&t.markup("<span class='"+o+"'></span>"),t.markup("</label></div>")}function P(t,a,n,s){var i,r,o,l,c,h=!1,u=null,p=s.multiple,f=s.values,m=!1!==s.escape;for($(t,n,p,s),c=f.length+1,s.showAllCount>0&&f.length>s.showAllCount+s.showAllGrace&&(c=s.showAllCount),i=0;i<f.length;i++)o="apex-item-option",l="apex-item-subgroup",i>=c&&(o+=" u-hidden",l+=" u-hidden"),(r=f[i]).g&&r.g!==u&&(u&&t.markup(d),u=r.g,h=!0,t.markup("<div").attr("class",l).markup("><div class='apex-group-label'>").content(r.g).markup(d)),R(t,a,i,o,r,m,s.showCounts,p);u&&t.markup(d),N(t),s.hasGroups=h,h&&((s.checkedFirst||s.disabledLast||s.orderByCount)&&e.warn("Facets list options orderByCount, checkedFirst and disabledLast ignored when list has groups"),s.orderByCount=s.checkedFirst=s.disabledLast=!1),i>c&&t.markup("<div class='a-FS-listFooter' data-expanded='false'><button class='a-FS-toggleOverflow js-toggleOverflow' type='button'>").content(_("SHOW_MORE")).markup("</button></div>")}function H(t,e,a){var n,i;t.find(".apex-item-option").removeClass(h),t.find(":checked").each((function(){n=this.value,s(this).parent().addClass(h),e&&2===(i=this.value.split("|")).length&&(n={b:i[0],e:i[1]}),a.push(n)}))}function D(t,e,a){var n=t.find(".apex-item-group"),s="rangeList"===e.type;n.on("change",(function(){var i,r,o=[];H(n,s,o),G(t,e),o.length>0&&!e.multiple&&s&&!e.noManualEntry&&tt(t,e,[]),s&&e.multiple&&!e.noManualEntry&&(i=t.find(".js-begin").val(),r=t.find(".js-end").val(),Y(e,i,r)&&o.push({b:i,e:r})),a(e,o)}))}function M(t,e,a,n,s){var i,r,o,h,u,p,d,f=a.values;for(i=0;i<f.length;i++)r=e+"_"+i,o=n[f[i].r]||0,p=(u=(h=t.find("#"+r)).parent()).find(l),d=a.hasFeedback&&0===o,u.toggleClass(c,d),"checkbox"===h[0].type&&h.attr("disabled",d),p.attr("data-count",o).text(0===o?"":s(o));W(t,a)}function G(t,e){e.hasFeedback||setTimeout((function(){W(t,e)}),350)}function W(t,e){var a,n,i=e.orderByCount,r=e.checkedFirst,o=e.disabledLast;(r||o||i)&&(n=(a=t.find(".apex-item-group")).children().toArray().sort((t,e)=>{var a=0;function n(t){var e=s(t);return 2+(r&&e.hasClass(h)?-1:0)+(o&&e.hasClass(c)?2:0)}function u(t){return parseInt(s(t).find(l).attr("data-count"),10)||0}function p(t){return parseInt(s(t).attr("data-order"),10)}return(r||o)&&(a=n(t)-n(e)),i&&0===a&&(a=u(e)-u(t)),0===a&&(a=p(t)-p(e)),a}),a.children().detach(),a.append(n))}function U(e,a){var n,s,i=e.values;for("object"==typeof a&&(a=(a.b||"")+"|"+(a.e||"")),n=0;n<i.length;n++)if(a===(s=i[n]).r)return e.escape?s.l||s.d:s.l||t.stripHTML(s.d);return null}function J(e,a,n){var s,i,r=[];for(e.find("input").prop("checked",!1).parent().removeClass(h),s=0;s<n.length;s++)"object"==typeof(i=n[s])&&(i=(i.b||"")+"|"+(i.e||"")),e.find("input[value='"+t.escapeCSS(i)+"']").prop("checked",!0).parent().addClass(h).length||r.push(n[s]);return G(e,a),r}function z(t,e){e.batch||t.markup("<button class='a-Button js-ctrlApply' type='button' disabled>").content(_("GO")).markup("</button>")}function X(t,e,a,n,s){t.markup("<input class='apex-item-text u-textEnd "+a+"' type='number' value=''").attr("id",e).optionalAttr("min",n.min).optionalAttr("max",n.max).optionalAttr("step",n.step).optionalAttr("aria-labelledby",s).markup(">")}function q(t,e,a,n,s){var i,r=e+(n?"_ib":"_ie"),o=a;o+=" "+(i=r+"_lbl"),t.markup("<span").attr("id",i).markup(" class='a-FS-rangePrefix'><span class='u-vh'>").content((n?_("RANGE_BEGIN"):s.rangeText+" "+_("RANGE_END"))+" ").markup(f),s.prefixText&&t.content(s.prefixText),t.markup(f),s.suffixText&&(o+=" "+(i=r+"_lbls")),X(t,r,"js-"+(n?"begin":"end"),s,o),s.suffixText&&t.markup("<span").attr("id",i).markup(" class='a-FS-rangeSuffix'>").content(s.suffixText).markup(f)}function Q(t,e,a,n){t.markup("<div class='a-FS-range'>"),q(t,e,a,!0,n),t.markup("<span class='a-FS-rangeTo'>").content(n.rangeText).markup(f),q(t,e,a,!1,n),z(t,n),t.markup(d)}function Y(t,e,a){return!t.allowOpen&&""!==e&&""!==a||t.allowOpen&&(""!==e||""!==a)}function K(t,e,a){var n=t.find(".js-begin"),s=t.find(".js-end");function i(n,s,i){var r=[];e.multiple&&e.values.length>0&&(H(t.find(".apex-item-group"),!0,r),G(t,e)),n&&r.push({b:s,e:i}),a(e,r)}t.find(".a-FS-range").on("keyup change",(function(a){var r=n.val(),o=s.val(),l=Y(e,r,o);e.values&&e.values.length>0&&!e.multiple&&(""!==r||""!==o)&&J(t,e,[]),e.batch?i(l,r,o):t.find(".js-ctrlApply").attr("disabled",!l)})).on("keydown","input",(function(t){var a=n.val(),r=s.val(),o=Y(e,a,r);t.which===b.ENTER&&o&&(t.preventDefault(),i(o,a,r))})),t.find(".js-ctrlApply").on("click",(function(){var t=n.val(),a=s.val();i(Y(e,t,a),t,a)}))}function Z(t,e){return""===e.b?a.formatMessage(t.currentLabelOpenLow,e.e):""===e.e?a.formatMessage(t.currentLabelOpenHi,e.b):a.formatMessage(t.currentLabel,e.b,e.e)}function tt(t,e,a){var n=t.find(".js-begin"),s=t.find(".js-end");"object"==typeof a?(n.val(a.b),s.val(a.e)):(n.val(""),s.val("")),t.find(".js-ctrlApply").attr("disabled",!Y(e,n.val(),s.val()))}s.apex.facets.addControlType=j,j("list",{render:function(t,e,a,n){P(t,e,a,n)},init:function(t,e,a){D(t,e,a)},update:function(t,e,a,n,s){M(t,e,a,n,s)},getLabelForValue:function(t,e){return U(t,e)},setValue:function(t,e,a){J(t,e,a)}}),j("group",{render:function(){},init:function(){},update:function(t,e,a){W(t,a)},setValue:function(){}}),j("checkbox",{render:function(t,e,a,n){R(t,e,"cb","apex-item-option",{d:n.label,r:n.value,i:n.icon,order:n.order},n.escape,n.showCounts,!0,e)},init:function(t,e,a){t.on("change",(function(){var n=t.find("input"),s="",i=n.prop("checked");i&&(s=n.val()),t.toggleClass(h,i),a(e,s)}))},update:function(t,e,a,n,s){var i=n[a.value]||0,r=t.find("input"),o=t.find(l),h=a.hasFeedback&&0===i;t.toggleClass(c,h),r.attr("disabled",h),o.attr("data-count",i).text(0===i?"":s(i))},getLabelForValue:function(t,e){return t.altLabel||t.label},setValue:function(t,e,a){var n=t.find("input"),s=n.val()===a[0];t.toggleClass(h,s),n.prop("checked",s)}}),j("rangeList",{render:function(t,e,a,n){P(t,e,a,n),n.noManualEntry||Q(t,e,a,n)},init:function(t,e,a){D(t,e,a),e.noManualEntry||K(t,e,a)},update:function(t,e,a,n,s){M(t,e,a,n,s)},getLabelForValue:function(t,e){var a=U(t,e);return null!==a||t.noManualEntry||(a=Z(t,e)),a},setValue:function(t,e,a){var n=J(t,e,a);e.noManualEntry||tt(t,e,n=n.length>0?n[0]:"")}}),j("range",{render:function(t,e,a,n){Q(t,e,a,n)},init:function(t,e,a){K(t,e,a)},getLabelForValue:function(t,e){return Z(t,e)},setValue:function(t,e,a){tt(t,e,a)}}),j("input",{render:function(t,e,a,n){var s,i=e+"_i",r=a;switch(t.markup("<div class='a-FS-input'>"),n.inputLabel&&(r+=" "+(s=i+"_lbl"),t.markup("<span").attr("id",s).markup(" class='a-FS-inputLabel'>").content(n.inputLabel).markup(f)),n.suffixText&&(r+=" "+(s=i+"_lbls")),n.dataType){case"NUMBER":X(t,i,"",n,r);break;case"VARCHAR2":!function(t,e,a,n,s){t.markup("<input class='apex-item-text "+a+"' type='text' value=''").attr("id",e).optionalAttr("aria-labelledby",s).markup(">")}(t,i,"",0,r);break;default:throw new Error("Facets: Unknown dataType: "+n.dataType)}n.suffixText&&t.markup("<span").attr("id",s).markup(" class='a-FS-inputSuffix'>").content(n.suffixText).markup(f),z(t,n),t.markup(d)},init:function(t,e,a){var n=t.find("input");function s(t){a(e,t)}t.find(".a-FS-input").on("keyup change",(function(a){var i=n.val(),r=""!==i;e.batch?s(i):t.find(".js-ctrlApply").attr("disabled",!r)})).on("keydown","input",(function(t){var e=n.val();t.which===b.ENTER&&""!==e&&(t.preventDefault(),s(e))})),t.find(".js-ctrlApply").on("click",(function(){s(n.val())}))},getLabelForValue:function(t,e){return a.formatMessage(t.currentLabel,e)},setValue:function(t,e,a){var n=t.find("input");s.isArray(a)&&(a=a[0]||""),n.val(a),t.find(".js-ctrlApply").attr("disabled",""===a)}}),j("starRating",{render:function(e,n,s,i){var r,o,l,c,h,u,p=i.values.length;if(i.multiple=!1,i.escape=!1,i.checkedFirst=i.disabledLast=!1,""===i.maxSuffixText&&(i.maxSuffixText=" "),i.icon)for(r=0;r<p;r++){for(l=i.values[r],c="<span class='star-rating-stars' aria-hidden='true'>",h=i.color||"red",u=i.icon,o=0;o<p;o++){if(o>=l.r){if(u=i.inactiveIcon||u,!i.inactiveColor)break;h=i.inactiveColor}c+="<span class='"+t.escapeHTMLAttr(u)+"' style='color:"+t.escapeHTMLAttr(h)+";'></span>"}c+=l.r<p?i.suffixText||"":i.maxSuffixText||i.suffixText||"",c+="</span><span class='u-vh'>"+a.formatMessage(l.r<p?i.itemLabel:i.maxItemLabel||i.itemLabel,l.r)+f,l.d=c}P(e,n,s,i)},init:function(t,e,a){D(t,e,a)},update:function(t,e,a,n,s){M(t,e,a,n,s)},getLabelForValue:function(t,e){return a.formatMessage(e<t.values.length?t.itemLabel:t.maxItemLabel||t.itemLabel,e)},setValue:function(t,e,a){J(t,e,a)},useGetlabelForCharts:!0}),j("selectList",{render:function(t,e,a,n){var s,i,r,o=null,l=n.values;function c(e,a){t.markup("<option").attr("value",a).markup(">").content(e).markup("</option>")}for(r="selectlist apex-item-select",n.hideEmpty&&(r+=" a-FS--hideEmpty"),t.markup("<div class='a-FS-selectListFilter'><select aria-labelledby='"+a+"'").attr("class",r).markup(">"),c(n.nullLabel,""),s=0;s<l.length;s++)(i=l[s]).g&&i.g!==o&&(o&&t.markup("</optgroup>"),o=i.g,t.markup("<optgroup").attr("label",i.g).markup(">")),c(i.d,i.r);o&&t.markup("</optgroup>"),t.markup("</select></div>")},init:function(e,a,n){var i=t.debounce((function(){n(a,[s(this).val()])}),400);e.find(".apex-item-select").on("change",i)},update:function(e,a,n,s,i){var r,o,l,h,u,p=n.values;for(r=0;r<p.length;r++)l=s[(o=p[r]).r]||0,h=e.find("option[value='"+t.escapeCSS(o.r)+"']"),u=n.hasFeedback&&0===l,n.showCounts&&h.text(o.d+(l>0?" ("+l+")":"")),h.toggleClass(c,u)},getLabelForValue:function(t,e){return U(t,e)},setValue:function(t,e,a){a=a.length>0?a[0]:"",t.find(".apex-item-select").val(a)}})}(apex.util,apex.debug,apex.lang,apex.locale,apex.jQuery);