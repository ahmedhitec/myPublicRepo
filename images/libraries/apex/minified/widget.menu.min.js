!function(e,n,t,a){"use strict";var i=null,s=null,o=!1,l=null,r=!1,u=!1,c=[],d=!1,h=!1,f=null,m=null,p=0,b=0,g=0,M=0,v=null,C=null,k=null,w=null,y=null,x=!1,_=".a-Menu",T="a-Menu-scrollBtn--up",S="a-Menu-scrollBtn--down",I="a-Menu-item",B=".a-Menu-item, .a-MenuBar-item",A=".a-Menu-item, .a-MenuBar-item, .a-Menu-content",E="a-MenuBar-item",L=".a-Menu-label,.a-MenuBar-label",O="is-disabled",D="is-focused",K="a, button, .a-Menu-label, .a-MenuBar-label",q="aria-expanded",F="aria-haspopup",N=a.ui.keyCode;function P(e,n,t,a){e.markup("<span").attr("class",n+" "+t).optionalAttr("style",a).markup("></span>")}var H=null;function X(e){return H&&e.match(/^#\S*$/)?H+e:e}function R(){var e,n,t,i,s;for(l?(i=a(l),s=null):(i=f,s=m),j({$menu:c[0],subMenu:!1,x:i,y:s,slide:!1}),e=1;e<c.length;e++)t=(n=c[e]).parents(B).eq(0),j({$menu:n,subMenu:!0,x:t,slide:!1})}function U(){a(window).off(".menuTracking"),a("html").off(".menuTracking"),d=!1,apex.tooltipManager&&x&&(apex.tooltipManager.enableTooltips(),x=!1)}function $(e){return e.children(".a-Menu-content").children(".a-Menu-scroll")}function W(){var e;l&&((e=a(l)).is(B)?e.find(K).focus():e.focus())}function j(n){var t,i,s,l,r,u,c,d,h,p,b=0,g="u-callout--top",M="left",v="right",C=n.$menu,k={collision:"flipfit flipfit"},w="none"!==C.css("display");w||C.css({display:"block",position:"absolute",top:-99999,left:0}),n.minWidth&&C.css("min-width",n.minWidth),"true"!==C.attr("data-custom")&&(l=C.find("li").first().outerHeight(),i=a(window).height(),n.$menuBar&&(i-=n.$menuBar.position().top+n.$menuBar.height()),s=i>1e3?.6:i>500?.75:1,i=Math.floor(i*s/l)*l-l,C.height()>i?(0===$(C).length&&((t=e.htmlBuilder()).markup("<div").attr("class","a-Menu-scrollBtn  "+T).markup(">"),P(t,"a-Icon","icon-menu-scroll-up"),t.markup("</div>"),C.children(".a-Menu-content").first().addClass("a-Menu--scrollable").prepend(t.toString()).append(t.toString().replace("icon-menu-scroll-up","icon-menu-scroll-down").replace(T,S)).children("ul").first().wrap("<div class='a-Menu-scroll'></div>")),$(C).height(i)[0].scrollTop=0,C.find(".a-Menu-scrollBtn."+T).addClass(O)):$(C).length>0&&(C.children(".a-Menu-content").first().removeClass("a-Menu--scrollable").children(".a-Menu-scrollBtn").remove(),C.find("ul").first().unwrap())),"number"==typeof n.x&&"number"==typeof n.y?(f=n.x,m=n.y,k.of=a.Event("click",{pageX:f,pageY:m}),g=null):(f=m=null,k.of=n.x),u=C.children(".u-callout"),o&&(M="right",v="left"),C.removeClass("has-callout"),n.subMenu?(r=parseInt(C.find(".a-Menu-content").css("padding-top"),10),k.my=M+" top-"+r,k.at=v+" top"):(u.length&&(C.addClass("has-callout"),b=parseInt(C.css("margin-top"),10)),k.my=M+" top+"+b,k.at=M+" bottom"),C.position(k),C.css("display",w?"block":"none"),u.removeClass("u-callout--top u-callout--bottom"),g&&u.length&&(c=parseInt(C.css("top"),10),d=parseInt(C.css("left"),10),h="fixed"===n.x.offsetParent().css("position")?n.x.position():n.x.offset(),p=n.x.outerWidth(),c<h.top&&(g="u-callout--bottom"),u.addClass(g),u.css("left",p/2+(h.left-d-b))),w||(n.slide?C.slideDown(200):C.show(),n.focus&&C.find(K).eq(0).focus())}a("base").length&&(H=window.location.pathname+window.location.search),a((function(){a(window).on("apexwindowresized",(function(){a(".a-MenuBar").each((function(){a(this).menu("resize")})),d&&R()}))}));var G={openMenu:function(e,n,t,f,m,p){var b=0;this.closeAll(),i=e[0],s=n?n[0]:null,o=a(s||i).hasClass("u-RTL"),l="object"==typeof t&&t.get?t[0]:null,r=!1,u=!1,h=!0,0===c.length&&(d||(d=!0,a(window).on("blur.menuTracking",(function(){G.closeAll(!0)})),a("html").on("mousedown.menuTracking",(function(e){var n=a(e.target);0!==n.closest(_).length||l&&0!==n.closest(l).length||G.closeAll(!0)})).on("mousemove.menuTracking",(function(e){var n,t;g===e.pageX&&M===e.pageY||(g=e.pageX,M=e.pageY,!(t=(n=a(e.target)).parents(_)[0])&&s&&(t=n.parent(".a-MenuBar")[0]),!t&&w&&w!==t&&a(w).focus(),w=t)})),apex.tooltipManager&&(apex.tooltipManager.disableTooltips(),x=!0))),c.push(e),h=!1,[],n&&(t.addClass("is-expanded").children(L).attr(q,"true"),b=t.outerWidth()),j({$menu:e,$menuBar:n,subMenu:!1,x:t,y:f,slide:m,focus:p,minWidth:b})},isCurrentMenu:function(e){return i&&i===e},isCurrentMenuBar:function(e){return s&&s===e},isMenuOpen:function(e){var n;for(n=0;n<c.length;n++)if(c[n]===e)return!0;return!1},openSubMenu:function(e,n,t,a,i){this.closeOpenSiblings(e,t),c.push(n),j({$menu:n,subMenu:!0,x:e,slide:a,focus:i}),e.addClass("is-expanded").children(".a-Menu-inner").find(L).attr(q,"true")},closeOpenSiblings:function(e,n){var t=e.parent().find(".is-expanded");for(n&&(h=!0);t.length>0;)this.closeLast(!1),t=e.parent().find(".is-expanded");h=!1},closeLast:function(e){var n,t,o;c.length>0?((t=(n=c.pop()).parents(B).eq(0)).length>0&&(o=ne(t),t.removeClass("is-expanded").children(".a-Menu-inner"),o.attr(q,"false"),e&&t.find(K).eq(0).focus()),n.hide(),0===c.length&&(!l||r||h||setTimeout((function(){W()}),10),s&&(o=ne(a(i).find(".is-expanded")),a(i).find(".is-expanded").removeClass("is-expanded"),o.attr(q,"false")),(s||i)&&a(s||i).data("apex-menu")._trigger("afterClose",{},{actionTookFocus:r,actionTaken:u,launcher:l}),i=null,h||(s=null,U()))):(i=null,s=null,U())},closeAll:function(e){for(;c.length>0;)this.closeLast(!1);e&&(i=null,s=null,U())}};function z(e){return e.parent().parent().hasClass("a-MenuBar")}function Y(e){var n=null,t=e.search(/_c[0-9]+$/);return t>=0&&(n=1*e.substring(t+2)),n}function Q(e,t,i,s,o,c){var d,h=!1,f=o||e.type;function m(){var i;a(document.body).on("dialogopen.menu",(function(e){var n=a(e.target);i=!0,n.dialog("option","modal")&&n.on("dialogclose.menu",(function(e){n.off("dialogclose.menu"),W()}))})),setTimeout((function(){a(document.body).off("dialogopen.menu")}),150),"string"==typeof e.action&&t?(n.info("Invoke action menu item '"+(e.label||t.lookup(e.action).label)+"'"),r=t.invoke(e.action,{},l)||!1):(n.info("Invoke action menu item '"+e.label+"'"),e.action?r=e.action(s,l)||!1:e.href&&(e.target?apex.navigation.openInNewWindow(e.href,e.target,{favorTabbedBrowsing:!0,noopener:!0}):apex.navigation.redirect(e.href),r=!0)),i&&(r=!0)}try{if("toggle"===f)"string"==typeof e.action&&t&&(e=t.lookup(e.action),h=!0),d=!e.get(),n.info("Invoke toggle menu item '"+(e.label||(d?e.onLabel:e.offLabel))+"' value now "+d),e.set(d),h&&t.update(e.name),u=!0;else if("radioGroup"===f)"string"==typeof e.action&&t&&(e=t.lookup(e.action),h=!0),d=e.choices[i].value,n.info("Invoke choice menu item '"+e.choices[i].label+"' value now "+d),e.set(d),h&&t.update(e.name),u=!0;else if("action"===f)c?setTimeout((function(){m()}),210):m(),u=!0;else if("subMenu"===f)return!1}catch(e){n.error("Error in menu action.",e)}return!0}function V(e,n){var t,a;if(e.menu&&e.menu.items)for(t=0;t<e.menu.items.length;t++)if((a=e.menu.items[t]).current||V(a,n))return n&&a.current&&delete a.current,!0;return!1}function J(e){e.labelKey&&(e.label=t.getMessage(e.labelKey)),e.onLabelKey&&(e.onLabel=t.getMessage(e.onLabelKey)),e.offLabelKey&&(e.offLabel=t.getMessage(e.offLabelKey))}function Z(e){e.is(K)?e.focus():e.find(K).first().focus()}function ee(e){var n;return n=e.closest(".a-Menu-item")[0],e.find(".a-Menu-item").not((function(e,t){return a(t).parent().closest(".a-Menu-item")[0]!==n}))}function ne(e){var n=e.children(L);return 0===n.length&&(n=e.children(".a-Menu-inner").find(L)),n}a.widget("apex.menu",{version:"19.1",widgetEventPrefix:"menu",options:{menubar:!1,callout:!1,menubarShowSubMenuIcon:null,menubarOverflow:!1,iconType:"a-Icon",behaveLikeTabs:!1,tabBehavior:"EXIT",useLinks:!0,slide:!1,firstItemIsDefault:!1,actionsContext:null,items:null,idPrefix:null,customContent:!1,asyncFetchMenu:null,beforeOpen:null,afterClose:null},isActive:!1,scrollTimerId:null,forwardKey:N.RIGHT,backwardKey:N.LEFT,actionsContext:null,_create:function(){var e,t,i=this.options,s=this.element;if(i.menubar&&i.customContent)throw new Error("Menubar cannot have custom content");if(apex.actions&&(this.actionsContext=i.actionsContext||apex.actions),i.items||!0===i.customContent||(i.items=this._parseMenuMarkup(s,i.menubar).items),!i.menubar&&(i.customContent||i.asyncFetchMenu)||i.items&&0!==i.items.length||n.error("Menu has no menu items"),"rtl"===s.css("direction")&&(s.addClass("u-RTL"),i.menubar||s.attr("dir","rtl"),this.forwardKey=N.LEFT,this.backwardKey=N.RIGHT),s.attr("role",i.menubar?"menubar":"menu").addClass(i.menubar?"a-MenuBar":"a-Menu"),i.menubar){if(i.menubarOverflow&&s.addClass("a-MenuBar--overflow"),null===i.menubarShowSubMenuIcon)for(i.menubarShowSubMenuIcon=!1,e=0;e<i.items.length;e++)if("subMenu"!==i.items[e].type){i.menubarShowSubMenuIcon=!0;break}this.refresh(),i.behaveLikeTabs&&s.addClass("a-MenuBar--tabs"),i.firstItemIsDefault&&n.warn("Invalid options for menu bar ignored")}else a("body").append(s),s.hide(),(i.menubarOverflow||i.menubarShowSubMenuIcon||i.behaveLikeTabs)&&n.warn("Invalid options for popup menu ignored");!("onwheel"in s[0])&&this._eventHandlers.wheel&&(t=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",this._eventHandlers[t]=this._eventHandlers.wheel,delete this._eventHandlers.wheel),this._on(this._eventHandlers)},_eventHandlers:{mousedown:function(e){var n,t,i;1!==e.which||e.shiftKey||e.ctrlKey||(i=a(e.target).closest(".a-Menu-item, .a-MenuBar-item, .a-Menu-content, .a-Menu-scrollBtn"),e.preventDefault(),i.length>0&&!i.hasClass("a-Menu-content")&&!i.hasClass(O)&&(i.is(".a-Menu-scrollBtn")?(i.addClass("is-active"),this._startScrolling(i.closest(_),i.hasClass(T))):z(i)&&(t=i[0].id,"subMenu"===(n=this._getMenuItemFromId(t)).type&&(0!==a(e.target).closest(".a-Menu-subMenuCol").length||!n.action&&!n.href)&&this.toggle(i))))},mouseup:function(e){var n,t,i,s,o,l;1!==e.which||e.shiftKey||e.ctrlKey||(l=a(e.target).closest(A),e.preventDefault(),l.length>0&&!l.hasClass("a-Menu-content")&&(i=l[0].id,o=(n=this._getMenuItemFromId(i)).type,s=z(l),"subMenu"===o&&s&&(0!==a(e.target).closest(".a-Menu-subMenuCol").length||!n.action&&!n.href||(o="action",G.closeOpenSiblings(l,s))),"subMenu"===o&&s||!l.is(B)||l.hasClass(O)||"display"===o||(t=Y(i),Q(n,this.actionsContext,t,this.options,o)&&G.closeAll())))},click:function(e){var n,t,i,s;"A"!==e.target.nodeName||1===e.which&&!e.shiftKey&&!e.ctrlKey?(e.preventDefault(),this.keyboardActivate&&(this.keyboardActivate=!1,(n=a(e.target).closest(A)).length>0&&!n.hasClass("a-Menu-content")&&(t=n[0].id,i=this._getMenuItemFromId(t),n.is(B)&&!n.hasClass(O)&&(s=Y(t),Q(i,this.actionsContext,s,this.options,"subMenu"===i.type?"action":i.type)&&G.closeAll())))):this.keyboardActivate=!1},mousemove:function(e){var n,t,i,s,o=this;function l(){var e=i.parent().find(".is-expanded");e.length>0&&!C&&(e.removeClass("is-expanded"),k=e.find(_)[0],C=setTimeout((function(){e.addClass("is-expanded"),C=null,k=null,G.closeOpenSiblings(i,n)}),250))}if(p!==e.pageX||b!==e.pageY){if(p=e.pageX,b=e.pageY,t=a(e.target),C&&t.closest(_)[0]===k&&(a(k).parent().addClass("is-expanded"),k=null,clearTimeout(C),C=null),(i=t.closest(".a-Menu-itemSep")).length>0&&i[0]!==y)return v&&(clearTimeout(v),v=null),n=z(i),l(),y=i[0],void((s=t.closest(_).eq(0)).length>0&&!s.hasClass(D)&&s.focus());if((i=t.closest(B)).length>0){if(!i.hasClass(D)&&"true"!==ne(i).attr(q)){if(v&&(clearTimeout(v),v=null),(n=z(i))&&d?(clearTimeout(C),C=null,G.closeOpenSiblings(i,n)):l(),this.options.menubar&&!G.isCurrentMenuBar(this.element[0])&&!this.isActive)return this.element.find(".is-focused").removeClass(D),void i.addClass(D);Z(i),!i.hasClass(O)&&i.find(_).length>0&&"true"!==ne(i).attr(q)&&(n?G.isCurrentMenuBar(this.element[0])&&this.open(i):v=setTimeout((function(){v=null,G.openSubMenu(i,i.children(_).first(),n,o.options.slide,!0)}),300))}y=i[0]}else t.closest(_).first().focus()}},mouseleave:function(e){v&&(clearTimeout(v),v=null),this.options.menubar&&(G.isCurrentMenuBar(this.element[0])||this.isActive||this.element.find(".is-focused").removeClass(D))},wheel:function(e){var n,t=a(e.target).closest(_),i=e.originalEvent.deltaY||e.originalEvent.detail||-1/40*e.originalEvent.wheelDelta;if(t.length&&!this.options.customContent){if(e.preventDefault(),!(n=$(t)[0]))return;void 0!==e.originalEvent.deltaMode&&1!==e.originalEvent.deltaMode||(i*=30),n.scrollTop+=i,this._checkScrollBounds(t,n)}},keydown:function(e){var n,t,i,s,o,u,c,d,h,f,m,p,b,g,M,v=this,C=e.which;function k(e,a){var i;if(n.hasClass("a-Menu"))s=n.find(".a-Menu-content").first().find(B).first();else{if(i=t.index(n),(i+=1)>=t.length){if(e)return!1;i=0}s=t.eq(i)}return Z(s),a&&(n.find(K).attr("tabindex","-1"),s.find(K).attr("tabindex","0")),n=s,c&&v._checkScrollBounds(d,c),!0}function w(e,a){var i;if(n.hasClass("a-Menu"))s=n.find(".a-Menu-content").first().find(B).last();else{if(i=t.index(n),(i-=1)<0){if(e)return!1;i=t.length-1}s=t.eq(i)}return Z(s),a&&(n.find(K).attr("tabindex","-1"),s.find(K).attr("tabindex","0")),n=s,c&&v._checkScrollBounds(d,c),!0}function y(e){v.toggle(n),!n.hasClass("a-Menu--split")||e?Z(s=n.find(".a-Menu-content").first().find(B).first()):n.find(K).eq(0).focus()}if(!e.altKey)if(o=this.element,this.keyboardActivate=!1,o.hasClass(D)?(n=o,o.find(".is-expanded").first().each((function(){n=a(this)}))):n=o.find(".is-focused"),d=n.closest(_+",.a-MenuBar"),c=$(d)[0],u=n.is(".a-MenuBar")||z(n),t=u?o.find("."+E):ee(d),C===N.UP||C===N.DOWN)u?n.children(_).length>0&&!n.hasClass(O)&&(n.hasClass("a-Menu--split")&&G.isCurrentMenu(n.children(_)[0])?(s=n.find("ul").first().children(B).first()).find(K).focus():y(!0)):C===N.UP?w():k(),e.preventDefault();else if(C===this.forwardKey)u?(k(!1,!0),G.closeOpenSiblings(n,!0),G.isCurrentMenuBar(o[0])&&n.children(_).length>0&&!n.hasClass(O)&&y()):(s=n.children(_)).length>0&&!n.hasClass(O)?(G.openSubMenu(n,s,!1,this.options.slide,!1),Z(s=s.find("ul").first().children(B).first())):this.options.menubar&&(n=o.find(".is-expanded").eq(0),t=o.find("."+E),k(),G.closeOpenSiblings(n,z(n)),n.children(_).length>0&&!n.hasClass(O)&&y()),e.preventDefault();else if(C===v.backwardKey)u?(w(!1,!0),G.closeOpenSiblings(n,!0),G.isCurrentMenuBar(v.element[0])&&n.children(_).length>0&&!n.hasClass(O)&&y()):(s=n.parents(B).eq(0)).length>0&&!z(s)?G.closeLast(!0):this.options.menubar&&(n=o.find(".is-expanded").eq(0),t=o.find("."+E),w(),G.closeOpenSiblings(n,z(n)),n.children(_).length>0&&!n.hasClass(O)&&y()),e.preventDefault();else if(C===N.TAB)u?("EXIT"===this.options.tabBehavior||e.shiftKey)&&(r=!0,G.closeAll()):("NEXT"===(M=this.options.tabBehavior)&&(e.shiftKey?w(!0)||(M="EXIT"):k(!0)||(M="EXIT")),"EXIT"===M&&l&&(r=!0,G.closeAll(),f=a(":tabbable"),this.options.menubar?(h=f.index(a(l).find(":tabbable")))<0&&(h=f.index(this.element.find(":tabbable"))):h=f.index(l),h>0&&h<f.length?h+=e.shiftKey?-1:1:f.length>0&&(h=0),h>=0&&f[h].focus()),e.preventDefault());else if(C===N.ESCAPE)G.closeLast(!0),e.preventDefault();else if(C===N.ENTER||C===N.SPACE){if((n=o.hasClass(D)?o:o.find(".is-focused")).hasClass(O)||!n.is(B))return void e.preventDefault();if(m=n[0].id,b=(p=this._getMenuItemFromId(m)).type,u=z(n),"subMenu"===b&&u&&(p.action||p.href)&&(b="action",G.closeOpenSiblings(n,u)),"subMenu"===b)u?(v.toggle(n),Z(s=n.find(".a-Menu-content").first().find(B).first())):(i=n.children(_)).length>0&&(G.openSubMenu(n,i,!1,this.options.slide,!1),Z(s=i.find("ul").first().children(B).first()));else{if(("A"!==e.target.nodeName||C!==N.SPACE)&&("action"===b||C===N.SPACE&&"BUTTON"===e.target.nodeName))return void(this.keyboardActivate=!0);"display"!==b&&(g=Y(m),Q(p,this.actionsContext,g,this.options,b,C===N.SPACE)&&(r=!0,G.closeAll()))}e.preventDefault()}},keypress:function(e){var n,t,a,i,s,o,l,r,u=-1;if(0!==e.which&&((s=this.element).hasClass(D)?(i=s.find(".a-Menu-content").first().find(B).first(),u=0):i=s.find(".is-focused"),0!==(o=i.closest(_)).length))for(l=ee(o),u<0&&(u=l.index(i)+1)>=l.length&&(u=0),a=l.eq(u),n=String.fromCharCode(e.which).toLowerCase();;){if(0===(r=a.filter(".a-Menu-label")).length&&(r=a.find(".a-Menu-label")),r.text().trim().charAt(0).toLowerCase()===n){Z(a),(t=$(o)[0])&&this._checkScrollBounds(o,t);break}if((u+=1)>=l.length&&(u=0),(a=l.eq(u))[0]===i[0])break}},focusin:function(e){var n=a(e.target);this.isActive||this.element.find(".is-focused").removeClass(D),n.is(_)?n.addClass(D):n.closest(B).addClass(D),this.isActive=!0},focusout:function(e){var n=a(e.target);n.is(_)?n.removeClass(D):n.closest(B).removeClass(D),this.isActive=!1}},_destroy:function(){var e=this.options,t=this.element;d&&G.isMenuOpen(this.element)&&(n.warn("Menu destroyed while still tracking menus."),G.closeAll(!0)),t.empty().removeClass((e.menubar?"a-MenuBar a-MenuBar--tabs":"a-Menu")+" u-RTL a-MenuBar--overflow").removeAttr("role")},_setOption:function(e,t){var a,i,s,o,l=this.options;if("menubar"===e)throw new Error("The menubar option cannot be set");if(l.menubar?"customContent"!==e&&"firstItemIsDefault"!==e||n.warn("Option "+e+" ignored when menubar is true"):"menubarOverflow"!==e&&"menubarShowSubMenuIcon"!==e&&"behaveLikeTabs"!==e||n.warn("Option "+e+" ignored when menubar is false"),this._super(e,t),"menubarOverflow"===e&&l.menubar){if(this.element.toggleClass("a-MenuBar--overflow",t),!t&&(a=(i=l.items)[i.length-1])&&a._overflow){for(o=a.menu.items;o.length>0;)"subMenu"===(s=o.shift()).type&&(s.action||s.href)&&s.menu.items.shift(),i.splice(i.length-1,0,s);i.pop()}}else"actionsContext"===e&&(this.actionsContext=t||apex.actions)},refresh:function(){var n=this.element,t=this.options,a=t.idPrefix||n[0].id||"menu",i=e.htmlBuilder();return t.menubar&&(this._renderMenubar(i,a,t),n.html(i.toString()),this._processMenuCustomMarkup(),this.resize()),this},resize:function(){var n=this.element,t=this.options,a=t.idPrefix||n[0].id||"menu",i=e.htmlBuilder();return t.menubar&&t.menubarOverflow&&this._adjustMenubarForSize(a,t)&&(this._renderMenubar(i,a,t),n.html(i.toString()),this._processMenuCustomMarkup()),this},toggle:function(e,n){var t=this.element;if(this.options.menubar&&(t=null,"number"==typeof e?(e=this.element.children("ul").children("li").eq(e)).length>0&&(t=e.children(_)):e.is(B)&&(t=e.children(_)),!t||1!==t.length))throw new Error("Invalid menu bar menu");return G.isCurrentMenu(t[0])?G.closeAll():this.open(e,n),this},open:function(i,s){var o,l,r,u,c,h,f,m=!1,p=this,b=this.options,g=e.htmlBuilder();function M(){p._trigger("beforeOpen",{},h),l.customContent?("string"==typeof l.customContent&&(r.empty().append(a("#"+e.escapeCSS(l.customContent)).show()),l.customContent=!0),p._parseCustomMarkup(r,c,l)):(g.clear(),p._renderMenu(g,c,l,f,!0),r.html(g.toString()))}if(b.menubar){if(u=this.element,r=null,"number"==typeof i?(i=this.element.children("ul").children("li").eq(i)).length>0&&(r=i.children(_)):i.is(B)&&(r=i.children(_)),!r||1!==r.length)throw new Error("Invalid menu bar menu");if(c=i[0].id,!(l=this._getMenuItemFromId(c))||"subMenu"!==l.type||!l.menu)throw new Error("Can't open menu "+i);h=l,l=l.menu,f=!1}else u=null,h={menu:l=b},r=this.element,c=b.idPrefix||this.element[0].id||"menu",f=!0;if(a.isFunction(b.asyncFetchMenu)){if(!d&&b.menubar)for(o=0;o<b.items.length;o++)b.items[o]._fetched=!1;b.menubar&&!0===h._fetched?M():(p._renderMenu(g,c,{items:[{type:"action",disabled:!0,label:t.getMessage("APEX.MENU.PROCESSING")}]},f,!0),r.html(g.toString()),m=!0,b.asyncFetchMenu(l,(function(e){var n;if(G.isCurrentMenu(r[0])){if(!1===e)return void G.closeAll(!0);n=r.find(".is-focused").first(),M(),R(),n.length?Z(r.find(B).first()):r.focus()}})),b.menubar&&(h._fetched=!0))}else M();return m||0!==l.items.length?G.openMenu(r,u,i,s,b.slide,b.menubar||!1!==s):(n.error("Menu has no items"),p._trigger("afterClose",{},{actionTookFocus:!1,actionTaken:!1,launcher:null})),this},find:function(e){return function e(n,t){var i=null;return a.each(n.items,(function(n,a){return a.id===t?(i=a,!1):("subMenu"!==a.type||null===(i=e(a.menu,t)))&&void 0})),i}(this.options,e)},setCurrentMenuItem:function(e){var a,i,s=0,o=this.options.items;if(this.options.menubar&&this.options.behaveLikeTabs){if("string"==typeof e&&(e=this.find(e)),e){for(s=0;s<o.length;s++)(a=o[s]).current&&(i=a,delete a.current),V(a,!0);for(e.current=!0,s=0;s<o.length;s++)if(V(a=o[s])){a.current=!0,J(i),this.element.find(".a-Menu--current").removeClass("a-Menu--current").find(".a-MenuBar-label").text(i.label),this.element.children("ul").children("li").eq(s).addClass("a-Menu--current").find(".a-MenuBar-label").append(" <span class='u-vh'>"+t.getMessage("APEX.MENU.CURRENT_MENU")+"</span>");break}}}else n.warn("setCurrentMenuItem ignored")},_parseMenuMarkup:function(e,n){var t=this,i={items:[]};return e.children("ul").children("li").each((function(e){var s,o,l,r,u,c,d,h,f=a(this),m=f.children("a").eq(0),p=f.children("span").eq(0);if(s={type:"action"},m.length>0?(s.label=m.text(),s.href=m.attr("href"),(h=m.attr("target"))&&(s.target=h)):p.length>0?s.label=p.text():s.type="separator","separator"===s.href&&(s.type="separator",delete s.href,delete s.target,delete s.label),(r=f.attr("data-id"))&&(s.id=r),"true"===f.attr("data-hide")&&(s.hide=!0),"true"===f.attr("data-disabled")&&(s.disabled=!0),"true"===f.attr("data-current")&&(s.current=!0),(o=f.attr("data-icon"))&&((l=o.indexOf(" "))>=0?(s.iconType=o.substring(0,l),s.icon=o.substring(l+1)):s.icon=o),"separator"!==s.type&&(f.children("ul").length>0||"true"===f.attr("data-custom")))if(s.type="subMenu","true"!==f.attr("data-custom"))s.menu=t._parseMenuMarkup(f,!1);else{if(!n)throw new Error("Attribute data-custom only allowed at menubar level");(u=(c=f.children(".a-Menu-content").eq(0))[0].id)||(u=c[0].id=(t.options.idPrefix||t.element[0].id||"menu")+"_cm_"+e),a(document.body).append(c),c.hide(),s.menu={customContent:u}}"action"===s.type&&r&&apex.actions&&(d=t.actionsContext.lookup(r))&&(s.action=r,delete s.href,delete s.target,delete s.label,delete s.disabled,delete s.icon,delete s.iconType,d.action||d.href?s.type="action":d.get&&d.set&&!d.choices?s.type="toggle":d.choices&&(s.type="radioGroup")),i.items.push(s)})),i},_parseCustomMarkup:function(e,n,t){var i=this;t.items||(t.items=[]),e.attr("data-custom","true"),0===e.find(".a-Menu-content").length&&e.children().first().addClass("a-Menu-content"),e.find(K).each((function(e){var s,o,l,r,u,c;l=(r=a(this)).closest(".a-Menu-item"),r.attr("role","menuitem"),0===l.length&&(l=a(this)).addClass(I),l.hasClass("a-Menu-label")||0!==l.find(".a-Menu-label").length||r.addClass("a-Menu-label"),l[0].id=n+"_"+e,u=r.attr("href"),"A"===this.nodeName&&u?(o={type:"action",label:r.text(),href:u},(c=r.attr("target"))&&(o.target=c),t.items[e]=o):"BUTTON"===this.nodeName?(o={type:"action",label:r.text(),action:function(){}},t.items[e]=o):(r.attr("tabindex","-1"),t.items[e]||(o={type:"display",label:r.text(),disabled:!0},t.items[e]=o)),(s=l.attr("data-id"))&&(o.id=s,"action"===o.type&&s&&apex.actions&&i.actionsContext.lookup(s)&&(o.action=s,delete o.href,delete o.target,delete o.label,delete o.disabled,delete o.icon,delete o.iconType))}))},_processMenuCustomMarkup:function(){var n=this;this.element.find("."+E).each((function(){var t=a(this).children(_),i=this.id,s=n._getMenuItemFromId(i).menu;s&&s.customContent&&("string"==typeof s.customContent&&(t.empty().append(a("#"+e.escapeCSS(s.customContent)).show()),s.customContent=!0),n._parseCustomMarkup(t,i,s))}))},_getMenuItemFromId:function(e){var n,t,a=this.options,i=e.split("_"),s=[],o=null;for(i[n=i.length-1].match(/^c[0-9]+$/)&&(n-=1);n>0&&i[n].match(/^[0-9]+$/);n--)s.unshift(1*i[n]);for(t=a.items,n=0;n<s.length;n++){if(!(o=t[s[n]])||n<s.length-1&&!o.menu)return null;o.menu&&(t=o.menu.items)}return o},_itemIsHidden:function(e){var n=e.hide,t=this.options;return a.isFunction(n)&&(n=e.hide(t)),n},_itemIsDisabled:function(e){var n=e.disabled,t=this.options;return a.isFunction(n)&&(n=e.disabled(t)),n},_renderMenubar:function(e,i,s){var o="",l=this,r=0,u=this.options,c="NEXT"===u.tabBehavior;return u.behaveLikeTabs&&a.each(s.items,(function(e,n){if(V(n)&&(n.current=!0),n.current)return r=e,!1})),this.element.find(".a-Menu--top").filter("[data-custom]").each((function(){var e=a(this).children().eq(0);l._getMenuItemFromId(e.closest(B)[0].id).menu.customContent=e[0].id,a(document.body).append(e)})),e.markup("<ul").attr("role","none").markup(">"),a.each(s.items,(function(a,s){var d,h,f,m,p,b=s.type,g=i+"_"+a,M="subMenu"===b;if("action"===b&&"string"==typeof s.action){if(!apex.actions)throw new Error("Action name requires apex.actions");(m=l.actionsContext.lookup(s.action))?(s.hide=!1,m.label&&!s.label&&(s.label=m.label),void 0!==m.hide&&(s.hide=m.hide),void 0!==m.disabled&&(s.disabled=m.disabled),m.href&&!s.href&&(s.href=m.href,m.target&&(s.target=m.target))):(n.warn("Unknown action name "+s.action+" (item hidden)."),s.hide=!0)}if(!l._itemIsHidden(s)){if(h=E,(f=l._itemIsDisabled(s))&&(h+=" "+O),M&&(s.action||s.href)&&(h+=" a-Menu--split"),u.behaveLikeTabs&&s.current&&(h+=" a-Menu--current",p=" <span class='u-vh'>"+t.getMessage("APEX.MENU.CURRENT_MENU")+"</span>"),s._overflow&&(h+=" a-MenuBar-item--overflow"),"action"!==b&&!M)throw new Error("Menu item type not supported in menubar: "+b);e.markup("<li").attr("id",g).attr("class",h).markup(">"),o+=" "+g+"i",J(s),d=s.label,(s.icon||s.iconType)&&n.warn("Menu bar items cannot have icons."),s.accelerator&&n.warn("Menu bar items cannot have accelerators."),f?e.markup("<span role='menuitem'").attr("class","a-MenuBar-label").attr("tabindex",c||a===r?"0":"-1").attr("id",g+"i").optionalAttr("aria-disabled",f?"true":null).optionalAttr(F,M?"menu":null).optionalAttr(q,M?"false":null).markup(">").content(d).markup("</span>"):s.href&&u.useLinks?(e.markup("<a role='menuitem'").attr("class","a-MenuBar-label").attr("id",g+"i").attr("href",X(s.href)).optionalAttr("target",s.target?s.target:null).optionalAttr("tabindex",c||a===r?null:"-1").optionalAttr(F,M?"menu":null).optionalAttr(q,M?"false":null).markup(">").content(d),u.behaveLikeTabs&&s.current&&e.markup(p),e.markup("</a>")):(e.markup("<button type='button' role='menuitem'").attr("class","a-MenuBar-label").attr("id",g+"i").optionalAttr("tabindex",c||a===r?null:"-1").optionalAttr(F,M?"menu":null).optionalAttr(q,M?"false":null),s._overflow?e.attr("title",d).markup("><span class='a-Icon icon-down-chevron'></span>"):(e.markup(">").content(d),u.behaveLikeTabs&&s.current&&e.markup(p)),e.markup("</button>")),M&&((s.action||s.href||u.menubarShowSubMenuIcon)&&!s._overflow&&(e.markup("<span class='a-Menu-subMenuCol'>"),P(e,"a-Icon",!u.menubarShowSubMenuIcon||s.action||s.href?"icon-menu-split-drop-down":"icon-menu-drop-down"),e.markup("</span>")),e.markup("<div").attr("id",g+"m").markup(" class='a-Menu a-Menu--top' role='menu' style='display:none;'></div>")),e.markup("</li>")}})),e.markup("</ul>"),a.trim(o)},_renderMenu:function(t,i,s,o,l){var r="",u=this.options,c=this,d=this.element.hasClass("u-RTL"),h=!1,f=0,m="icon-menu-sub";function p(){h=!1,f>0&&(t.markup("<li class='").markup("a-Menu-itemSep").markup("' role='separator'><div class='a-Menu-inner'><span class='a-Menu-labelContainer'><span class='").markup("a-Menu-statusCol").markup("'></span><span class='").markup("a-Menu-hSeparator").markup("'></span></span><span class='a-Menu-accelContainer'></span></div></li>"),f+=1)}function b(e,n,a){t.markup("<span class='a-Menu-statusCol'>"),(n||""===n)&&P(t,e,n,a),t.markup("</span>")}function g(e,n,a,i,s,o,l,r,c){var d;n?(t.markup("<span tabindex='-1'").optionalAttr("aria-disabled",n?"true":null),d="</span>"):s&&u.useLinks?(t.markup("<a").attr("href",X(s)),d="</a>"):(t.markup("<button type='button'"),d="</button>"),t.attr("id",e).attr("role",l).attr("class","a-Menu-label").optionalAttr("target:",o||null).optionalAttr(F,c?"menu":null).optionalAttr(q,c?"false":null).optionalAttr("aria-checked",null!==r&&r?"true":null).markup(">"),t.content(a),i&&t.markup(" <span class='u-vh'>").content(i).markup("</span>"),t.markup(d).markup("</span><span class='a-Menu-accelContainer'>"),i&&function(e){t.markup("<span").attr("class","a-Menu-accel").markup("> ").content(e).markup("</span>")}(i)}function M(){t.markup("<span class='a-Menu-subMenuCol'></span>")}return d&&(m="icon-menu-sub-rtl"),u.callout&&l&&t.markup("<div class='u-callout'></div>"),t.markup("<div class='a-Menu-content'><ul role='none'>"),a.each(s.items,(function(s,l){var d,v,C,k,w,y,x,_,T,S,B,A,E=null,L=l.type,D=i+"_"+s;if(J(l),k=l.icon,w=l.iconType,v=l.label,B=l.href,A=l.target,_=l.accelerator,("action"===l.type||"toggle"===l.type||"radioGroup"===l.type)&&"string"==typeof l.action){if(!apex.actions)throw new Error("Action name requires apex.actions");(E=c.actionsContext.lookup(l.action))?(l.hide=!1,E.icon&&!l.icon&&(k=E.icon),E.iconType&&!l.iconType&&(w=E.iconType),E.label&&!l.label&&(v=E.label),E.shortcut&&!l.accelerator&&(_=apex.actions.shortcutDisplay(E.shortcut)),void 0!==E.hide&&(l.hide=E.hide),void 0!==E.disabled&&(l.disabled=E.disabled),void 0!==E.href&&(B=E.href),void 0!==E.target&&(A=E.target),E.choices&&(l.choices=E.choices)):(n.warn("Unknown action name "+l.action+" (item hidden)."),l.hide=!0)}c._itemIsHidden(l)||(C="separator"===L?"a-Menu-itemSep":I,(y=c._itemIsDisabled(l))&&(C+=" "+O),0===s&&o&&u.firstItemIsDefault&&(C+=" a-Menu-item--default"),"radioGroup"===L?(h=!0,E&&(l=E),d=l.get(),a.each(l.choices,(function(e,i){var s=D+"_c"+e,o=d===i.value;_=i.accelerator||null,i.shortcut&&!_&&(_=i.shortcut),C=I,y=i.disabled,a.isFunction(y)&&(y=i.disabled(u)),y&&(C+=" "+O),i.icon&&!E&&n.warn("Radio menu items cannot have icons."),h&&p(),t.markup("<li").attr("id",s).attr("class",C).markup("><div class='a-Menu-inner'><span class='a-Menu-labelContainer'>"),b("a-Icon",o?"icon-menu-radio":""),J(i),r+=" "+(T=s+"i"),g(T,y,i.label,_,null,null,"menuitemradio",o),M(),t.markup("</span></div></li>"),f+=1})),h=!0):"separator"===L?h=!0:(x="toggle"===L?"menuitemcheckbox":"menuitem",h&&p(),T=D+"i",t.markup("<li id='").attr(D).markup("' class='").attr(C).markup("'><div class='a-Menu-inner'><span class='a-Menu-labelContainer'>"),"action"===L||"display"===L?(b(w||u.iconType,k,l.iconStyle),g(T,y,v,_,B||"",A,x,null),M(),t.markup("</span></div>")):"toggle"===L?(E&&(l=E),d=l.get(),l.icon&&!E&&n.warn("Toggle menu items cannot have icons."),l.label&&(l.onLabel||l.offLabel)&&n.warn("Toggle menu items should not have both label and on/offLabel properties."),v=l.label,k=d?"icon-menu-check":"",v||(k=null,v=d?l.onLabel:l.offLabel,x="menuitem",d=null),b("a-Icon",k),g(T,y,v,_,null,null,x,d),M(),t.markup("</span></div>")):"subMenu"===L&&(b(l.iconType||u.iconType,l.icon,l.iconStyle),g(T,y,l.label,null,"",null,x,null,!0),l.accelerator&&n.warn("Sub menu items cannot have accelerators."),t.markup("<span class='a-Menu-subMenuCol'>"),P(t,"a-Icon",m),t.markup("</span></span></div>"),S=e.htmlBuilder(),c._renderMenu(S,D,l.menu,!1,!1),t.markup("<div class='a-Menu' role='menu'").attr("id",T+"m").markup(">"+S.toString()),t.markup("</div>")),r+=" "+T,t.markup("</li>"),f+=1))})),t.markup("</ul></div>"),a.trim(r)},_checkScrollBounds:function(e,n){return e.find(".a-Menu-scrollBtn").removeClass(O),n.scrollTop<=0?(e.find(".a-Menu-scrollBtn."+T).addClass(O),n.scrollTop=0,!0):n.scrollTop>=n.scrollHeight-n.clientHeight&&(e.find(".a-Menu-scrollBtn."+S).addClass(O),n.scrollTop=n.scrollHeight-n.clientHeight,!0)},_startScrolling:function(e,n){var t=this,i=0,s=[100,99,96,91,84,75,64,51,36,19],o=$(e)[0];this.scrollTimerId&&this._stopScrolling(),a(document).on("mouseup.menuScrolling",(function(){t._stopScrolling()})).on("mousemove.menuScrolling",(function(e){0===a(e.target).closest(".a-Menu-scrollBtn").length&&t._stopScrolling()})),function a(){o.scrollTop+=n?-10:10,t._checkScrollBounds(e,o)?t._stopScrolling():(t.scrollTimerId=setTimeout((function(){a()}),s[i]),i<s.length-1&&(i+=1))}()},_stopScrolling:function(){clearTimeout(this.scrollTimerId),this.scrollTimerId=null,this.element.find(".a-Menu-scrollBtn").removeClass("is-active"),a(document).off(".menuScrolling")},_adjustMenubarForSize:function(n,i){var s,o,l,r,u,c,d,h=!1,f=0,m=this.element.width()-2,p=i.items;for((u=p[p.length-1])&&u._overflow||(u=null),s=0;s<p.length;s++)(l=p[s]).hide?l._width=0:l._width=a("#"+e.escapeCSS(n+"_"+s)).outerWidth(!0),f+=l._width;if(f>m)for(u||(u={type:"subMenu",_overflow:!0,label:t.getMessage("APEX.MENU.OVERFLOW_LABEL"),menu:{items:[]}},p.push(u)),o=u.menu.items,s=p.length-2;s>=0&&f>m;)l=p[s],p.splice(s,1),"subMenu"===l.type&&(l.action||l.href)&&l.menu.items.unshift({type:"action",label:l.label,labelKey:l.labelKey,href:l.href,target:l.target,action:l.action,disabled:l.disabled}),"subMenu"===l.type&&l.menu.customContent&&((c=(d=a("#"+e.escapeCSS(n+"_"+s))).children(_).children().eq(0)).hide(),l.menu.customContent=c[0].id,a(document.body).append(c),d.children(_).attr("data-custom",null)),o.unshift(l),f-=void 0!==l._width?l._width:0,h=!0,s-=1;else if(u){for(o=u.menu.items,r=0,s=0;s<o.length&&r<3;s++)o[s]._width>0&&(r+=1);for(1===r&&(f-=this.element.find(".a-MenuBar-item--overflow").outerWidth(!0)),delete u.current;o.length>0&&!((f+=void 0!==(l=o[0])._width?l._width:0)>m);)o.shift(),"subMenu"===l.type&&(l.action||l.href)&&l.menu.items.shift(),p.splice(p.length-1,0,l),h=!0;0===o.length&&p.pop()}return h}}),a.ui.dialog&&a.widget("ui.dialog",a.ui.dialog,{_allowInteraction:function(e){return a(e.target).closest(_).length>0||this._super(e)}}),a((function(){function t(t,i,s){var o,l=t.attr("data-menu");if(l){if(!(o=a("#"+e.escapeCSS(l))).length)return void n.error("Menu cannot be found "+l);t.addClass("is-active").attr(q,"true"),s&&G.isCurrentMenu(o[0])||o.menu("toggle",t,!1).on("menuafterclose.menubutton",(function(e,n){a(this).off(".menubutton"),t.removeClass("is-active").attr(q,"false")})),i&&Z(o.find(B).first())}}a("body").on("click","button.js-menuButton",(function(e){t(a(this),!0,!1)})).on("keydown","button.js-menuButton",(function(e){e.which===N.DOWN?(e.preventDefault(),t(a(this),!0,!0)):e.which===N.TAB&&(r=!0,G.closeAll())})),a("button.js-menuButton").attr(F,"menu").attr(q,"false"),a("body").on("apexafterrefresh",(function(e){a(e.target).find("button.js-menuButton").attr(F,"menu").attr(q,"false")}))}))}(apex.util,apex.debug,apex.lang,apex.jQuery);