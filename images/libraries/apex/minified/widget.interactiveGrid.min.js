!function(e,t,i,n,o,a,l,r,s,d,c,u){"use strict";var h="a-IG",g="aria-hidden",p="text",m="select",f="colorpicker",_="row",C="column",I="delete",E="disabled",v="option",b="chart",w="primary",A="filter",T="highlight",R="flashback",S="aggregate",N="asc",L="last",y="none",O="N",k="_meta",V="label",M="class",D="action",x={type:"separator"},G="IN",H="BETWEEN",P="NUMBER",F="DATE",U="TIMESTAMP",B="bar",X="on",q="off",$="auto",K=[{value:"#FFFF99",label:"APEX.IG.COLOR_YELLOW"},{value:"#99FF99",label:"APEX.IG.COLOR_GREEN"},{value:"#99CCFF",label:"APEX.IG.COLOR_BLUE"},{value:"#FFDD44",label:"APEX.IG.COLOR_ORANGE"},{value:"#FF7755",label:"APEX.IG.COLOR_RED"}],W={EQ:"EQUALS",NEQ:"NOT_EQUALS",LT:"LESS_THAN",LTE:"LESS_THAN_OR_EQUALS",GT:"GREATER_THAN",GTE:"GREATER_THAN_OR_EQUALS",LIKE:"LIKE",NLIKE:"NOT_LIKE",N:"IS_NULL",NN:"IS_NOT_NULL",C:"CONTAINS",NC:"DOES_NOT_CONTAIN",IN:"IN",NIN:"NOT_IN",BETWEEN:"BETWEEN",NBETWEEN:"NOT_BETWEEN",LAST:"IN_THE_LAST",NLAST:"NOT_IN_THE_LAST",NEXT:"IN_THE_NEXT",NNEXT:"NOT_IN_THE_NEXT",REGEXP:"MATCHES_REGULAR_EXPRESSION",S:"STARTS_WITH",NS:"DOES_NOT_START_WITH",OTEXT:"ORACLE_TEXT"},Y={SUM:"SUM",AVG:"AVG",CNT:"COUNT",CNT_DIST:"COUNT_DISTINCT",APPR_CNT_DIST:"APPROX_COUNT_DISTINCT",MIN:"MIN",MAX:"MAX",MEDIAN:"MEDIAN",LISTAGG:"LISTAGG"};function z(e){return o.getMessage(e)}function j(e){return o.getMessage("APEX.IG."+e)}var Z={filter:j("FILTER"),chart:j("CHART"),groupby:j("GROUP_BY"),controlBreak:j("CONTROL_BREAK"),highlight:j("HIGHLIGHT"),aggregate:j("AGGREGATE"),flashback:j("FLASHBACK")},Q={MI:"MINUTE",H:"HOUR",D:"DAY",W:"WEEK",M:"MONTH",Y:"YEAR"},J="LABEL",ee="VALUE",te="X",ie="Y",ne="Z",oe="TARGET",ae="HIGH",le="LOW",re=(z("APEX.IG_FORMAT_SAMPLE_1"),z("APEX.IG_FORMAT_SAMPLE_2"),z("APEX.IG_FORMAT_SAMPLE_3"),z("APEX.IG_FORMAT_SAMPLE_4"),[{value:"$1,002.54",label:{style:"currency",currency:"USD",currencyDisplay:"symbol"}},{value:"1,002.54",label:{style:"decimal",maximumFractionDigits:2}},{value:"1,002.5400",label:{style:"decimal",maximumFractionDigits:4}},{value:"1,002",label:{style:"decimal",maximumFractionDigits:0}},{value:"1,002.54-",label:{style:"decimal",maximumFractionDigits:2}},{value:"-1,002.54",label:{style:"decimal",maximumFractionDigits:2}},{value:"<1,002.54>",label:{style:"decimal",maximumFractionDigits:2}}]),se=[{value:"DD-MON-RR",label:{pattern:"dd-MMM-yy"}},{value:"DD-MON-YYYY",label:{pattern:"dd-MMM-yyyy"}},{value:"DD-MON",label:{pattern:"dd-MMM"}},{value:"RR-MON-DD",label:{pattern:"yy-MMM-dd"}},{value:"YYYY-MM-DD",label:{pattern:"yyyy-MMM-dd"}},{value:"fmDay, fmDD fmMonth, YYYY",label:{formatType:"date",dateFormat:"full"}},{value:"DD-MON-YYYY HH24:MI",label:{pattern:"dd-MMM-yyyy HH:mm"}},{value:"DD-MON-YYYY HH24:MI:SS",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH:MIPM",label:{pattern:"dd-MMM-yyyy hh:mm a"}},{value:"Month",label:{month:"long"}},{value:"DD-MON-YYYY HH24.MI.SSXFF",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH:MI:SSXFF PM",label:{pattern:"dd-MMM-yyyy hh:mm:ss a"}},{value:"DD-MON-YYYY HH24:MI TZR",label:{pattern:"dd-MMM-yyyy HH:mm"}},{value:"DD-MON-YYYY HH24.MI.SSXFF TZR",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH.MI.SSXFF PM TZR",label:{pattern:"dd-MMM-yyyy hh:mm:ss a"}}],de=[{id:"search",groupTogether:!0,customCSS:"a-Toolbar-group--search",controls:[{type:"MENU",id:"column_filter_button",labelKey:"APEX.IG.SELECT_COLUMNS_TO_SEARCH",icon:"icon-search",iconOnly:!0,menu:{items:[{type:"toggle",action:"search-case-sensitive"},x,{type:"radioGroup",action:"filter-column"}]}},{type:"TEXT",id:"search_field",enterAction:"search"},{type:"BUTTON",action:"search"}]},{id:"reports",controls:[{type:"SELECT",action:"change-report"}]},{id:"views",controls:[{type:"RADIO_GROUP",labelKey:"APEX.IG.VIEW",action:"change-view"}]},{id:"actions1",controls:[{type:"MENU",id:"actions_button",labelKey:"APEX.IG.ACTIONS",menu:{items:[{type:D,action:"show-columns-dialog"},x,{type:D,action:"show-filter-dialog"},{type:"subMenu",id:"data_submenu",labelKey:"APEX.IG.DATA",icon:"icon-ig-data",menu:{items:[{type:D,action:"show-sort-dialog"},{type:D,action:"show-aggregate-dialog"},{type:D,action:"refresh"},{type:D,action:"show-flashback-dialog"}]}},{type:"subMenu",id:"format_submenu",labelKey:"APEX.IG.FORMAT",icon:"icon-ig-format",menu:{items:[{type:D,action:"show-control-break-dialog"},{type:D,action:"show-highlight-dialog"},{type:"toggle",action:"stretch-columns"},{type:"subMenu",labelKey:"APEX.IG.ROWS_PER_PAGE",hide:!0,id:"rows",icon:"icon-ig-rows",menu:{items:[{type:"radioGroup",action:"change-rows-per-page"}]}}]}},{type:"subMenu",id:"selection_submenu",labelKey:"APEX.IG.SELECTION",icon:"icon-ig-selection",menu:{items:[{type:"toggle",action:"selection-mode"},x,{type:D,action:"selection-copy",accelerator:"Ctrl+C"},x]}},x,{type:D,action:"chart-view"},x,{type:"subMenu",id:"save_report_submenu",labelKey:"APEX.IG.REPORT",icon:"icon-irr-saved-report",menu:{items:[{type:D,action:"save-report"},{type:D,action:"show-save-report-as-dialog"},{type:D,action:"show-edit-report-dialog"},x,{type:D,action:"delete-report"},x,{type:D,action:"reset-report"}]}},x,{type:D,action:"show-download-dialog"},x,{type:D,action:"show-help-dialog"}]}}]},{id:"actions2",controls:[{type:"TOGGLE",action:"edit"},{type:"BUTTON",hot:!0,action:"save"}]},{id:"actions3",controls:[{type:"BUTTON",action:"selection-add-row"}]},{id:"actions4",align:"end",controls:[{type:"BUTTON",action:"reset-report",labelKey:"APEX.IG.RESET",iconBeforeLabel:!0}]}];function ce(){var t,i=[];for(t=0;t<de.length;t++)i.push(e.extend(!0,{},de[t]));return i.toolbarFind=de.toolbarFind,i.toolbarRemove=de.toolbarRemove,i.toolbarInsertAfter=de.toolbarInsertAfter,i}function ue(e,t,i,n){var o,a,l,r,s,d,c=e;function u(e){var o,a;for(o=0;o<e.length;o++){if((a=e[o]).id===t||a.action===t)return i&&e.splice(o,1),n&&e.splice(o+1,0,n),a;if("subMenu"===a.type&&(a=u(a.menu.items)))return a}return null}for(o=0;o<c.length;o++){if((d=c[o]).id===t)return i&&c.splice(o,1),n&&c.splice(o+1,0,n),d;if(l=d.controls)for(a=0;a<l.length;a++){if((r=l[a]).id===t||r.action===t)return i&&l.splice(a,1),n&&l.splice(a+1,0,n),r;if(r.menu&&(s=u(r.menu.items)))return s}}return null}function he(e){return{label:e||"ENABLED",alignment:"center",defaultValue:!0,columnCssClasses:"js-colCheckbox",cellTemplate:"<span class='ro-checkbox &\"enabledClass\".'></span><span class='u-vh'>&\"enabledText\".</span>",width:80,noStretch:!0,seq:10}}function ge(e,t){e.recordView("fieldElement",t).hide()}function pe(e,t){e.recordView("fieldElement",t).show()}function me(e){return new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(4,2),10)-1,parseInt(e.substr(6,2),10),parseInt(e.substr(8,2),10),parseInt(e.substr(10,2),10),parseInt(e.substr(12,2),10))}function fe(e){return("000"+e.getFullYear()).substr(-4)+("0"+(e.getMonth()+1)).substr(-2)+("0"+e.getDate()).substr(-2)+("0"+e.getHours()).substr(-2)+("0"+e.getMinutes()).substr(-2)+("0"+e.getSeconds()).substr(-2)}function _e(e){var t,i,n=[];for(t=0;t<e.length;t++)""!==(i=e[t].replace(/^\s+|\s+$/gm,""))&&-1===n.indexOf(i)&&n.push(i);return n}function Ce(e){var t=e;switch(e){case"groupby":t="group-by";break;case"savedReport":t="saved-report";break;case"inactiveSettings":t="inactive-settings";break;case"invalidSettings":t="invalid-settings";break;case"controlBreak":t="control-break";break;case"saveAsReport":case"editReport":t="save-report"}return t}function Ie(e,t,i,n,o,a){var l;for(a||t.push({value:o,label:a}),l=0;l<e.length;l++)t.push({value:e[l][i],label:e[l][n]})}function Ee(t,i){var n;if(!e.isEmptyObject(i))for(n in i)i.hasOwnProperty(n)&&t.attr("data-"+n,i[n])}function ve(t,i){var n,o=e.extend({id:"",type:p,value:"",maxChars:"",title:"",ariaDescribedBy:"",name:"",size:"",placeholder:"",readonly:!1,checked:!1,disabled:!1,required:!1,cssClasses:[],data:{},attributes:{}},i),a=o.cssClasses,l=o.attributes;if(t.markup("<input").attr("id",o.id).attr("type",o.type).attr("value",o.value).optionalAttr("maxlength",o.maxChars).optionalAttr("title",o.title).optionalAttr("aria-describedby",o.ariaDescribedBy).optionalAttr("name",o.name).optionalAttr("size",o.size).optionalAttr("placeholder",o.placeholder).optionalBoolAttr("readonly",o.readonly).optionalBoolAttr("checked",o.checked).optionalBoolAttr(E,o.disabled).optionalBoolAttr("required",o.required),a.length>0&&t.attr(M,e.isArray(a)?a.join(" "):a),Ee(t,o.data),!e.isEmptyObject(l))for(n in l)l.hasOwnProperty(n)&&t.attr(n,l[n]);t.markup(" />")}function be(t,i){ve(t,e.extend({cssClasses:"apex-item-text",maxChars:"4000"},i))}function we(i,n){var o=e("#"+i+"_list");function a(e){o.iconList("setSelection",o.find('li[data-value="'+t.escapeHTMLAttr(e)+'"]'),!1)}o.iconList({multiple:!1,selectionChange:function(){e("#"+i).val(e(this).iconList("getSelectionValues")).change()}}),a(n),e("#"+i).change((function(){a(e("#"+i).val())}))}function Ae(t,i){var n,o,a,l,r=e.extend({id:"",buttonClass:"",label:"",icon:"",iconOnly:!1,iconPosition:"right",tabindex:"",attributes:{},data:{}},i);if(n="a-Button"+(i.buttonClass?" "+i.buttonClass:""),o="a-Icon"+(i.icon?" "+i.icon:""),a=i.icon&&!i.iconOnly,t.markup("<button type='button'").optionalAttr("id",r.id).optionalAttr("tabindex",r.tabindex).attr(M,n),i.iconOnly&&r.label&&t.attr("title",r.label).attr("aria-label",r.label),!e.isEmptyObject(r.attributes))for(l in r.attributes)r.attributes.hasOwnProperty(l)&&t.attr(l,r.attributes[l]);Ee(t,r.data),t.markup(">"),a&&"left"===r.iconPosition&&t.markup("<span").attr(g,!0).attr(M,o+" a-Icon--left").markup("></span>"),i.iconOnly?t.markup("<span").attr(g,!0).attr(M,o).markup("></span>"):r.label&&t.markup("<span").attr(M,"a-Button-label").markup(">").content(r.label).markup("</span>"),a&&"right"===r.iconPosition&&t.markup("<span").attr(g,!0).attr(M,o+" a-Icon--right").markup("></span>"),t.markup("</button>")}function Te(t,i){ve(t,e.extend({type:"checkbox"},i))}function Re(t,i){var n=e.extend({cssClasses:"",text:"",data:{}},i);t.markup("<a href='#'").attr(M,n.cssClasses),Ee(t,n.data),t.markup(">").content(n.text).markup("</a>")}function Se(t,i){var n,o=e.extend({cssClasses:"u-Form-label",labelFor:"",label:"",labelHidden:!1,labelTextHidden:!1},i);n=o.cssClasses,o.labelHidden&&(n+=" u-VisuallyHidden"),t.markup("<label").attr(M,n).attr("for",o.labelFor).markup(">"),o.labelTextHidden?t.markup("<span").attr(M,"u-VisuallyHidden").markup(">").content(o.label).markup("</span>"):t.content(o.label),t.markup("</label>")}function Ne(t,i){ve(t,e.extend({type:"radio"},i))}function Le(t){var i;for(e.isArray(t)||(t=[t]),i=0;i<t.length;i++)d(t[i][0]).show()}function ye(t){var i;for(e.isArray(t)||(t=[t]),i=0;i<t.length;i++)d(t[i][0]).hide()}function Oe(e,t){e.closest(".u-Form-fieldContainer").find(".u-Form-label").text(z(t))}function ke(t,i){var n;for(e.isArray(t)||(t=[t]),n=0;n<t.length;n++)t[n].prop("required",i).closest(".u-Form-fieldContainer").toggleClass("is-required",i)}function Ve(e,i){var n,a,l,d="apexDialogPromptInputId",c=t.htmlBuilder(),u=t.getTopApex().jQuery;c.markup("<div class='u-Form u-Form--labelsAbove u-Form--stretchInputs'>").markup("<div class='u-Form-fieldContainer'><div class='u-Form-labelContainer  u-tS'><span class='u-Form-label'>"),Se(c,{labelFor:d,label:z(e.labelKey)}),c.markup("</span></div><div class='u-Form-inputContainer'>"),be(c,{id:d,value:e.value||"",required:!!e.required}),c.markup("</div></div></div>"),n=u(c.toString()),l={title:z(e.titleKey),dialogClass:"",confirm:!0,defaultButton:!0,beforeClose:function(){a=u("#"+d).val()},callback:function(e){var t=!1;e&&(t=a),i(t)},open:function(){u("#"+d).focus()}},e.okLabelKey&&(l.okLabelKey=e.okLabelKey),e.helpKey&&(l.extraButtons=[{text:z("APEX.DIALOG.HELP"),CLASS:"ui-button-help",click:function(){o.loadMessagesIfNeeded([e.helpKey,e.helpTitleKey],(function(){r.popupFieldHelp({title:z(e.helpTitleKey),helpText:z(e.helpKey)})}))}}]),s.showDialog(n,l)}de.toolbarInsertAfter=function(e,t){ue(this,e,!1,t)},de.toolbarRemove=function(e){return ue(this,e,!0)},de.toolbarFind=function(e){return ue(this,e,!1)};var Me={_allowInteraction:function(t){return e(t.target).closest(".a-IRR-sortWidget").length>0||this._super(t)}};e.ui.dialog&&(e.widget("ui.dialog",e.ui.dialog,Me),e.widget("apex.popup",e.apex.popup,Me)),e.widget("apex.interactiveGrid",{version:"19.1",widgetEventPrefix:"interactivegrid",options:{config:{toolbarData:null,modelInstanceId:null,initActions:null,columns:[],ajaxColumns:"",regionId:"",regionStaticId:"",columnGroups:[],ajaxIdentifier:"",itemsToSubmit:"",editable:!1,submitSelectedRows:!1,parentRegionStaticId:null,trackParentSelection:!0,lazyLoading:!1,filter:{row:!0,complex:!0,isRequired:!1,maxRowCount:null,oracleText:!1},appearance:{showNullValue:"",useFixedRowHeight:!0},pagination:{type:"scroll",showTotalRowCount:!1},text:{noDataFound:j("NO_DATA_FOUND"),moreDataFound:"",addRowButton:j("ADD_ROW"),help:""},toolbar:{reset:!0,save:!0,columnSelection:!0,searchField:!0,savedReports:!0,editing:!0,addRow:!0,actionMenu:!0},reportSettingsArea:{disabled:!1},features:{saveReport:{publicReportCs:"",isDeveloper:!1,authorizations:[]},download:!1,filter:!0,flashback:!0},initialSelection:!0,headingFixedTo:"page",maxHeight:null,views:{icon:!1,detail:!1,grid:{disabled:!1,features:{reorderColumns:!0,resizeColumns:!0,sort:!0,stretchColumns:null,highlight:!0,controlBreak:!0,aggregate:!0,changeRowsPerPage:!0,cellRangeActions:!0,singleRowView:!0,gridView:!0,rowSelector:{multiSelect:!0,selectAll:!0,hideControl:!1}}},chart:{disabled:!1,features:{}}},defaultModelOptions:{},defaultGridViewOptions:{},defaultIconViewOptions:{},defaultDetailViewOptions:{},defaultSingleRowOptions:{}},savedReports:[],data:null,selectionChange:null,viewChange:null,reportChange:null,reportSettingsChange:null,viewModelCreate:null,save:null,modeChange:null},_create:function(){var n,o=this,r=this.element,s=this.options,c=e(".a-IG").length;if(!s.config)throw new Error("Missing required config option.");if(!s.savedReports)throw new Error("Missing required saved reports configuration.");if(this.idPrefix=r[0].id||"ig"+(c+1),this.viewsImpl={},this.columnMap={},this.baseModelColumns={},this.primaryKeyColumns=[],this.parentColumnNames=[],this.parentItemValues=[],this.parentModel="",this.parentRecordId=null,this.editMode=!1,this.currentSavedReportIdx="",this.toolbar$=null,this.currentFilterColumnId=null,this.searchCaseSensitive=!1,this.ignoreResizeHandler=!1,this.actions=a.createContext("InteractiveGrid",r[0]),this.reportSettingsSeq=1,this.modelReportSettingsSeq={},this.isRTL="rtl"===r.css("direction"),r.addClass(h),this._defaultIGConfig(),(n=s.config).maxHeight&&r.height(n.maxHeight).css("overflow","hidden"),n.toolbar&&!n.toolbarData&&(n.toolbarData=ce()),this._defaultColumns(),this._createBaseColumnMap(),this._defaultSavedReports(),this._registerIGViews(),this._renderIG(),this._addActions(this.actions),n.initActions&&n.initActions(this.actions),n.toolbar&&(this._initToolbar(),this._updateToolbarElements()),this._forEachView((function(e,t){t.init(o)})),this._updateActions(),this.editableView=null,n.editable&&(this._forEachView((function(e,t){t.supports.edit&&(null===o.editableView?o.editableView=e:i.warn("Extra editable view ignored: "+e))})),null===this.editableView))throw new Error("No editable view for editable Interactive Grid");this.resize(),l.create(n.regionStaticId,{type:"InteractiveGrid",parentRegionId:n.parentRegionStaticId,widgetName:"interactiveGrid",refresh:function(){o.refresh()},focus:function(){o.focus()},widget:function(){return o.element},gotoError:function(e){o.gotoCell(null,e.record,e.column)},getSessionState:function(e){var t,i,n,a={beforeAsync:function(){var e=o._currentViewImpl();e.supports.edit&&e.lockActive&&e.lockActive()},afterAsync:function(){var e=o._currentViewImpl();e.supports.edit&&e.unlockActive&&e.unlockActive()}},l=[],r=[],s=o._currentViewImpl().getActiveRecordId();if(e)for(t=0;t<e.length;t++)(i=o._getColumnByStaticId(e[t]))?s&&r.push({n:i.name,v:d(e[t]).getValue()}):l.push(e[t]);return a.pageItems=l,r.length>0&&(n=o._currentViewImpl().model.getRecordMetadata(s),a.region=o._defaultAjaxRegionData({setSessionState:{values:r,protected:n.protected,salt:n.salt}})),a},alternateLoadingIndicator:function(e){var i,n=o._currentViewImpl();return"grid"===n.internalIdentifier&&!n.singleRowMode&&(i=n.view$.grid("getActiveCellFromColumnItem",e))?t.showSpinner(i,{spinnerClass:"u-Processing--cellRefresh"}):null}}),this._view(this._view(),{initialData:s.data,fetchData:n.lazyLoading}),"page"===n.headingFixedTo&&n.toolbar&&e.apex.stickyWidget&&e(".a-IG-header",r).stickyWidget({stickToEnd:!0,bottom:function(){return r.offset().top+e(".a-IG-body",r).outerHeight()-o._currentViewImpl().footerHeight()},toggleWidth:!0}),e("#"+n.regionStaticId).hasClass("resize")?r.addClass("resize").on("resize",(function(){o.resize()})):u.onElementResize(r[0],(function(){o.ignoreResizeHandler||o.resize()})),u.onVisibilityChange(r[0],(function(e){e&&(u.updateResizeSensors(r[0]),o.actions.update("search"),o.resize())})),n.parentRegionStaticId&&n.trackParentSelection&&(this._forEachView((function(e,t){t.view$&&t.setNoDataMessage(j("SELECT_1_ROW_IN_MASTER"))})),e("#"+n.parentRegionStaticId+"_ig").on("interactivegridselectionchange.ig",t.debounce((function(e,t){var i=null;1===t.selectedRecords.length?(o.actions.enable("selection-add-row"),i=t.selectedRecords[0]):o.actions.disable("selection-add-row"),o.setMasterRecord(t.model,i)}),300)))},_setOption:function(t,i){var n=!1,o=this.options;"config"===t&&(i.modelInstanceId!==o.config.modelInstanceId&&(n=!0),i=e.extend(!0,o.config,i)),this._super(t,i),n&&this._setModelInstance(o.config.modelInstanceId)},_destroy:function(){var e=this,t=this.options.config;u.offElementResize(this.element[0]),this.element.removeClass(h).empty(),a.removeContext("InteractiveGrid",this.element[0]),this._destroyAllModels(),this._forEachView((function(t,i){i.destroy(e)})),l.destroy(t.regionStaticId)},_isCurrentlyEditable:function(){var e=this.options.config,t=this._currentReportSettings().flashback,i=t&&t.isEnabled;return e.editable&&!i},_setModelInstance:function(e,t,i){var n,o=this,a=!0,l=this.options.config,r=l.text.noDataFound;if(this.parentRecordId=null,l.modelInstanceId=e,null===e&&(r=j("SELECT_1_ROW_IN_MASTER"),a=!1),l.parentRegionStaticId&&(this.parentRecordId=l.modelInstanceId,this.parentItemValues=[],t&&i))for(n=0;n<this.parentColumnNames.length;n++)this.parentItemValues.push({n:this.parentColumnNames[n],v:t.getValue(i,this.parentColumnNames[n])});this._forEachView((function(e,t){t.view$&&(t.setNoDataMessage(r),o._setModel({viewImpl:t,updateComponent:!0,fetchData:a}))}))},_setInitialSelection:function(e){var t,i,n,o=this.options.config;t=this._currentViewImpl(),o.initialSelection&&t.supports.selection&&((n=t.getSelectedRecords())&&0!==n.length||(i=t.model.recordAt(e))&&t.setSelectedRecords([i]))},_selectionChange:function(e){var t=this._currentViewImpl(),i=t.getSelectedRecords()||[];this._updateSelectionActions(),this._trigger("selectionChange",e,{selectedRecords:i,model:t.model})},_pageChange:function(e){var t=this;setTimeout((function(){t._setInitialSelection(e.offset)}),1)},_registerIGViews:function(){var e,t,n,o=this.options.config,a=0;for(e=0;e<De.length;e++)t=De[e],(n=o.views[t.internalIdentifier])&&!n.disabled&&(this._registerView(t),a+=1);0===a&&i.error("No views registered.")},_isViewRegistered:function(e){return!!this.viewsImpl[e]},_registerView:function(t){var i=this,n=e.extend(!0,{supports:{edit:!1,selection:!0,cellSelection:!1,highlight:!1,controlBreak:!1,aggregation:!1,singleRowView:!1,configurableColumns:!1,filter:!0,sort:!0,changeRowsPerPage:!0,download:!1,totalRows:!0},isConfigured:function(){return!!i._currentReportSettings().views[this.internalIdentifier]},initDialog:null,openDialog:function(){!this.dialog$&&this.initDialog&&this.initDialog(i),this.dialog$.dialog("open")},clearModelData:function(){this.model.getOption("parentModel")&&!this.model.getOption("parentRecordId")||(i.modelReportSettingsSeq[this.model.modelId()]=i.reportSettingsSeq,this.model.clearData())},setColumnConfig:function(){},init:function(){},updateActions:function(){},initView:function(){},viewChanged:function(){},setReportOptions:function(){},destroyView:function(){},destroy:function(){},getSelectedRecords:function(){return[]},setSelectedRecords:function(){},getActiveRecordId:function(){return null},getContextRecord:function(){return[]},gotoCell:null,selectCells:null,getColumns:null,canCopy2Clipboard:function(){return!1},setModelName:function(){},setEditMode:function(e){},finishEditing:null,setNoDataMessage:function(e){},focus:function(){},refreshColumns:function(){},footerHeight:function(){return 0},refresh:function(){},resize:function(){},show:function(){this.view$.show()},hide:function(){this.view$.hide()}},t);n.model=null,n.modelName=null,n.modelColumns=null,n.view$=null,n.elementId=n.internalIdentifier+"_vc",this.viewsImpl[n.internalIdentifier]=n},_forEachView:function(e){var t;for(t in this.viewsImpl)this.viewsImpl.hasOwnProperty(t)&&e(t,this.viewsImpl[t])},_getPaginationConfig:function(t,i){var n={},o=t.pagination;return i&&t[i].pagination&&(n=e.extend({},t[i].pagination)),n.scroll=o.type===y||"scroll"===o.type,n.hasOwnProperty("showPageLinks")||(n.showPageLinks="set"===o.type&&o.showTotalRowCount),n.hasOwnProperty("firstAndLastButtons")||(n.firstAndLastButtons="set"===o.type&&o.showTotalRowCount),n.hasOwnProperty("showRange")||(n.showRange=!0),n},_renderDialogContent:function(e){var i,n=this,o=t.htmlBuilder();i=function(e,t){n._renderColumnItem(o,e,t)},o.markup("<div").attr(M,"a-GV-columnItemContainer u-vh").attr(g,!0).markup(">"),e(i,o),o.markup("</div>"),this.element.append(o.toString())},_createDialog:function(t,i,n){var o,a,l,r,s,d,c,u,h=e.extend(!0,{width:600,height:380,labelAlignment:"start",formCssClasses:"u-Form--labelsAbove u-Form--stretchInputs",useSplitter:!0,splitterPosition:280,persistSplitter:t,noDataMessage:j("NO_DATA_FOUND"),modelOptions:{shape:"record",editable:!0,onlyMarkForDelete:!1,identityField:"id"}},n);for(o in s=(t+="Dialog")+"$",d=this._getId(t.replace(/[A-Z]/g,(function(e){return"_"+e.toLowerCase()}))),(r=h.dialogHelp)||(h.dialogHelp=r={}),r.helpTextKey="APEX.IG.HELP."+(r.helpTextKey||h.titleKey),r.titleKey=r.titleKey?"APEX.IG.HELP."+r.titleKey:r.helpTextKey+"_TITLE",h.titleKey="APEX.IG."+h.titleKey,h.modelName=h.modelName?this._getId(h.modelName):d,a=h.modelOptions.fields)a.hasOwnProperty(o)&&((l=a[o]).label&&(l.label=j(l.label),l.heading||"table"!==h.modelOptions.shape||(l.heading=l.label)),l.elementId&&(l.elementId=this._getId(l.elementId)));return n.checkboxColumn&&(u=h.init,h.init=function(t,i,n){i.on("click",".js-colCheckbox",(function(){var n=e(this),o=i.grid("getRecords",[n.parent()])[0],a=!t.getValue(o,"isEnabled");t.setValue(o,"enabledClass",a?"is-checked":""),t.setValue(o,"enabledText",j(a?"ENABLED":"DISABLED")),t.setValue(o,"isEnabled",a)})).on("keydown",".js-colCheckbox",(function(t){t.which===e.ui.keyCode.SPACE&&e(this).trigger("click")})),ge(n,"isEnabled"),u.call(this,t,i,n)},a.enabledClass={volatile:!0,canHide:!1,hidden:!0,seq:0,defaultValue:"is-checked"},a.enabledText={volatile:!0,canHide:!1,hidden:!0,seq:0,defaultValue:j("ENABLED")}),this._renderDialogContent(i),c=e.apex.recordView.createModelEditDialog(d,h),n.viewDialog||(this[s]=c),c},_renderColumnItem:function(t,i,n){switch(t.markup("<div").attr(M,"a-GV-columnItem").markup(">"),n.id&&(n.id=this._getId(n.id)),i){case"checkbox":Te(t,n);break;case m:!function(t,i){var n,o,a=e.extend({id:"",cssClasses:"apex-item-select",size:"1",title:"",required:!1,options:[]},i);for(t.markup("<select").optionalAttr("id",a.id).attr(M,a.cssClasses).attr("size",a.size).optionalAttr("title",a.title).optionalBoolAttr("required",a.required).markup(">"),n=0;n<a.options.length;n++)o=a.options[n],t.markup("<option").attr("value",o.value).optionalBoolAttr("selected",o.isSelected).markup(">").content(o.label||o.value).markup("</option>");t.markup("</select>")}(t,n);break;case p:be(t,n);break;case"textarea":!function(t,i){var n=e.extend({id:"",cssClasses:"apex-item-textarea",cols:"30",rows:"4",name:"",placeholder:"",disabled:!1,readonly:!1,required:!1,toolbar:!1,style:"resize: both;",wrap:"virtual"},i);n.toolbar&&(t.markup("<fieldset ").attr("id",i.id+"_fieldset").markup(">"),t.markup("<div").attr("id",n.id+"_toolbar").markup("></div>")),t.markup("<textarea").attr("id",n.id).attr(M,n.cssClasses).attr("cols",n.cols).attr("rows",n.rows).optionalAttr("name",n.name).optionalAttr("placeholder",n.placeholder).optionalAttr("style",n.style).optionalAttr("wrap",n.wrap).optionalBoolAttr(E,n.disabled).optionalBoolAttr("readonly",n.readonly).optionalBoolAttr("required",n.required).markup(">").markup("</textarea>"),n.toolbar&&t.markup("</fieldset>")}(t,n);break;case"radios":!function(t,i){var n,o,a,l=e.extend({id:"",label:"",name:"",radios:[]},i);for(t.markup("<div role='group'").attr("id",l.id).attr("aria-labelledby","id1").markup(">"),n=0;n<l.radios.length;n++)o=l.radios[n],a=l.id+"_"+n,Ne(t,{name:l.name,id:a,value:o.value,checked:o.checked,cssClasses:"a-IGDialog-input-checkbox"}),Se(t,{labelFor:a,cssClasses:"a-IGDialog-label-checkbox",label:o.label});t.markup("</div>")}(t,n);break;case f:n.colorMenu&&(n.colorMenuId=this._getId("color_menu")),function(t,i){t.markup("<fieldset ").attr(M,"color_picker").attr("id",i.id+"_fieldset").markup(">"),t.markup("<span ").attr(M,"a-Combobox-wrapper").attr("style","height: 24px").markup(">"),be(t,e.extend({cssClasses:"color_picker "},i)),Ae(t,{id:i.id+"_PICKER",buttonClass:"a-Button--noLabel a-Button--withIcon js-menuButton",label:o.formatMessage("APEX.IG.OPEN_COLORPICKER",i.itemLabel),icon:"icon-color-picker",iconOnly:!0,attributes:{"aria-haspopup":!0,"aria-expanded":!1}}),i.colorMenuId&&Ae(t,{id:i.id+"_COLORS",buttonClass:"a-Button--noLabel a-Button--withIcon js-menuButton",label:j("COLORS"),attributes:{"data-menu":i.colorMenuId,"aria-haspopup":!0,"aria-expanded":!1}}),t.markup("</span>"),t.markup("</fieldset>")}(t,n);break;case"iconList":!function(t,i){var n,o,a=e.extend({id:"",iconOnly:!1,cssClasses:"",options:[]},i);for(t.markup("<fieldset ").attr(M,"a-IGDialog-iconList").attr("id",a.id+"_fieldset").markup(">"),t.markup("<ul ").attr(M,"a-IGDialog-iconList "+a.cssClasses).attr("id",a.id+"_list").markup(">"),n=0;n<a.options.length;n++)o=a.options[n],t.markup("<li").attr("data-value",o.value).attr(M,"a-IGDialog-iconList-item"+(o.isSelected?" is-selected":"")).markup(">").markup("<span ").attr(M,"a-IGDialog-iconList-link").attr("aria-label",o.label||o.value).attr("title",o.label||o.value).markup(">").markup("<span ").attr(M,"a-IGDialog-iconList-icon a-Icon "+o.iconCssClasses).attr(g,!0).markup("></span>"),!1===a.iconOnly&&t.markup("<span ").attr(M,"a-IGDialog-iconList-label").markup(">").content(o.label||o.value).markup("</span>"),t.markup("</span>").markup("</li>");t.markup("</ul>"),t.markup("<input ").attr("type","hidden").attr(g,!0).attr("id",a.id).markup(">"),t.markup("</fieldset>")}(t,n)}t.markup("</div>")},_renderReportSettingsDialog:function(){var t,i=[],n=[],o=this.options.config,a=o.features.saveReport.isDeveloper,l=this;a&&(i.push({value:w,label:j("PRIMARY")}),i.push({value:"alternative",label:j("ALTERNATIVE")})),i.push({value:"private",label:j("SAVED_REPORT_PRIVATE")}),o.features.saveReport.publicReportCs&&i.push({value:"public",label:j("SAVED_REPORT_PUBLIC")}),Ie(o.features.saveReport.authorizations,n,"r","d","",j("SELECT")),this._createDialog("reportSettings",(function(e){e(m,{id:"SRD_TYPE",options:i}),e(p,{id:"SRD_NAME"}),e(m,{id:"SRD_AUTHORIZATION",options:n})}),{height:350,titleKey:"REPORT",defaultButton:!0,modelOptions:{fields:{id:{canHide:!1,hidden:!0,seq:0},type:{label:"TYPE",elementId:"SRD_TYPE",seq:10,defaultValue:"named"},name:{label:"NAME",elementId:"SRD_NAME",seq:20},authorizationId:{label:"AUTHORIZATION",elementId:"SRD_AUTHORIZATION",seq:30}}},load:function(i){var n,o=e(this),r=o.dialog(v,"saveAs"),s=e.extend({id:"",type:"",name:"",authorizationId:""},l._currentReportSettings());return n=r?"REPORT_SAVE_AS":"REPORT_EDIT",o.dialog(v,"title",j(n)),t=s.type,r&&(s.name="",(a||e.inArray(s.type,[w,"alternative"])>-1)&&(s.type="private")),i.setData(s),l._report()},init:function(i,n,o){var a=l._getElement("SRD_TYPE"),r=l._getElement("SRD_NAME"),s=l._getElement("SRD_AUTHORIZATION"),d=e(this);function c(){var e,i;switch(i=d.dialog(v,"saveAs")&&t===w,a.find("option[value="+w+"]").prop(E,i),e=a.val(),a.prop(E,!1),ke(r,!0),ye(s),e){case w:t===w&&a.prop(E,!0),ke(r,!1);break;case"alternative":Le(s)}}a.change(c),o.on("apexbeginrecordedit",c)},store:function(t){var i=e(this).dialog(v,"saveAs"),n=t.getRecord();i?(n.baseReportId=n.id,l.addReport(n)):l.updateReport(n.id,n),l._updateReportSettingsActions()}})},_renderDownloadDialog:function(){var t=this,i=j("MAILADDRESSES_COMMASEP"),n=this.options.config.features.download,o=[],a=[],l=[];n&&-1!==n.formats.indexOf("CSV")&&o.push({value:"CSV",label:j("FORMAT_CSV"),iconCssClasses:"icon-ig-dl-xls"}),n&&-1!==n.formats.indexOf("HTML")&&o.push({value:"HTML",label:j("FORMAT_HTML"),iconCssClasses:"icon-ig-dl-html"}),n&&-1!==n.formats.indexOf("PDF")&&(o.push({value:"PDF",label:j("FORMAT_PDF"),iconCssClasses:"icon-ig-dl-pdf"}),a=[{value:"LETTER",label:j("PRINT_PAGE_SIZE.LOV.LETTER.D")},{value:"LEGAL",label:j("PRINT_PAGE_SIZE.LOV.LEGAL.D")},{value:"TABLOID",label:j("PRINT_PAGE_SIZE.LOV.TABLOID.D")},{value:"A4",label:j("PRINT_PAGE_SIZE.LOV.A4.D")},{value:"A3",label:j("PRINT_PAGE_SIZE.LOV.A3.D")}],n&&n.print&&"CUSTOM"===n.print.paperSize&&a.unshift({value:"CUSTOM",label:j("PRINT_PAGE_SIZE.LOV.CUSTOM.D")}),l=[{value:"VERTICAL",label:j("PRINT_ORIENTATION.LOV.VERTICAL.D")},{value:"HORIZONTAL",label:j("PRINT_ORIENTATION.LOV.HORIZONTAL.D")}]),n&&-1!==n.formats.indexOf("XLSX")&&o.push({value:"XLSX",label:j("FORMAT_XLSX"),iconCssClasses:"icon-ig-dl-xls"}),this._createDialog("download",(function(e){e("iconList",{id:"DL_DOWNLOAD_FORMAT",options:o}),e(m,{id:"DL_PRINT_PAGE_SIZE",options:a}),e(m,{id:"DL_PRINT_ORIENTATION",options:l}),e("checkbox",{id:"DL_PRINT_ACCESSIBLE",value:"Y"}),e("checkbox",{id:"DL_PLAIN",value:"Y"}),e("checkbox",{id:"DL_SEND_AS_EMAIL",value:O}),e(p,{id:"DL_EMAIL_TO",placeholder:i}),e(p,{id:"DL_EMAIL_CC",placeholder:i}),e(p,{id:"DL_EMAIL_BCC",placeholder:i}),e(p,{id:"DL_EMAIL_SUBJECT"}),e("textarea",{id:"DL_EMAIL_BODY"})}),{height:500,titleKey:"DOWNLOAD",modelOptions:{fields:{id:{canHide:!1,hidden:!0,seq:0},format:{label:"DOWNLOAD_FORMAT",elementId:"DL_DOWNLOAD_FORMAT",seq:10},plain:{label:"DOWNLOAD_PLAIN",elementId:"DL_PLAIN",seq:200},sendOrDownload:{label:"SEND_AS_EMAIL",elementId:"DL_SEND_AS_EMAIL",seq:200},emailTo:{label:"EMAIL_TO",elementId:"DL_EMAIL_TO",seq:210},emailCc:{label:"EMAIL_CC",elementId:"DL_EMAIL_CC",seq:220},emailBcc:{label:"EMAIL_BCC",elementId:"DL_EMAIL_BCC",seq:230},emailSubject:{label:"EMAIL_SUBJECT",elementId:"DL_EMAIL_SUBJECT",seq:240},emailBody:{label:"EMAIL_BODY",elementId:"DL_EMAIL_BODY",seq:250},sendEmail:{canHide:!1,hidden:!0,seq:0},printPageSize:{label:"PRINT_PAGE_SIZE.PROMPT",elementId:"DL_PRINT_PAGE_SIZE",seq:100,fieldColSpan:6},printOrientation:{label:"PRINT_ORIENTATION.PROMPT",elementId:"DL_PRINT_ORIENTATION",seq:110,fieldColSpan:6},printAccessible:{label:"PRINT_ACCESSIBLE.PROMPT",elementId:"DL_PRINT_ACCESSIBLE",seq:120}}},load:function(e){var t,i,o;n&&n.formats.length>0&&(t=n.formats[0]),o=n&&n.print&&n.print.paperSize||"LETTER",i=n&&n.print&&n.print.orientation||"VERTICAL",e.setData({id:0,format:t,plain:O,sendEmail:O,printOrientation:i,printPageSize:o,printAccessible:O})},init:function(i,n,o){var a,l,r=t._getElement("DL_DOWNLOAD_FORMAT"),s=t._getElement("DL_SEND_AS_EMAIL"),d=t._getElement("DL_EMAIL_TO"),c=t._getElement("DL_EMAIL_CC"),u=t._getElement("DL_EMAIL_BCC"),h=t._getElement("DL_EMAIL_SUBJECT"),g=t._getElement("DL_EMAIL_BODY"),p=t._getElement("DL_PRINT_PAGE_SIZE"),m=t._getElement("DL_PRINT_ORIENTATION"),f=t._getElement("DL_PRINT_ACCESSIBLE"),_=e(this),C=_.dialog(v,"buttons");function I(){!0===s.prop("checked")?(Le([d,c,u,h,g]),ke([d,h],!0),C[a].text=j("SEND_AS_EMAIL"),_.dialog(v,"buttons",C),null!==o.recordView("getRecord")&&i.setValue(o.recordView("getRecord"),"sendEmail","Y")):(ye([d,c,u,h,g]),ke([d,h],!1),C[a].text=j("DOWNLOAD"),_.dialog(v,"buttons",C),null!==o.recordView("getRecord")&&i.setValue(o.recordView("getRecord"),"sendEmail",O))}for(l=0;l<C.length;l++)if(C[l].text===z("APEX.DIALOG.SAVE")){a=l;break}o.on("apexbeginrecordedit",(function(){var n=r.val();we(t._getId("DL_DOWNLOAD_FORMAT"),n),I(),!0===t.options.config.features.download.email?s.change(I):ye(s),r.change((function(t,n){i.setValue(o.recordView("getRecord"),"format",e(this).val()),"PDF"===e(this).val()?Le([p,m,f]):ye([p,m,f])}))}))},store:function(e){var i,n=e.getRecord();i={format:n.format,plain:"Y"===n.plain},"Y"===n.sendEmail&&(i.email={to:n.emailTo,subject:n.emailSubject},n.emailCc&&""!==n.emailCc&&(i.email.cc=n.emailCc),n.emailBcc&&""!==n.emailBcc&&(i.email.bcc=n.emailBcc),n.emailBody&&""!==n.emailBody&&(i.email.body=n.emailBody)),"PDF"===n.format&&(i.print={pageSize:n.printPageSize,orientation:n.printOrientation,accessible:"Y"===n.printAccessible}),t._downloadReport(i)}})},_columnFilterModelFields:function(e){var t=e+"_";return{type:{label:t+"TYPE",elementId:t+"TYPE",seq:100,canHide:!0,hidden:!0,defaultValue:C},columnId:{label:"COLUMN",elementId:t+"COLUMN",seq:120,fieldColSpan:6,canHide:!0,hidden:!0},operator:{label:"OPERATOR",elementId:t+"OPERATOR",seq:130,fieldColSpan:6,canHide:!0,hidden:!0,defaultValue:"EQ"},value:{label:"VALUE",elementId:t+"VALUE",seq:140,canHide:!0,hidden:!0},dateRangeValue:{label:"VALUE",elementId:t+"DATE_RANGE_VALUE",seq:141,fieldColSpan:6,canHide:!0,hidden:!0},dateRangeUnit:{label:"UNIT",elementId:t+"DATE_RANGE_UNIT",seq:142,fieldColSpan:6,canHide:!0,hidden:!0},isCaseSensitive:{label:"CASE_SENSITIVE",elementId:t+"CASE_SENSITIVE",seq:150,canHide:!0,hidden:!0,defaultValue:"N"},between:{label:"VALUE",elementId:t+"BETWEEN",seq:160,fieldColSpan:6,canHide:!0,hidden:!0},and:{label:"AND",elementId:t+"AND",seq:170,fieldColSpan:6,canHide:!0,hidden:!0},expression:{label:"EXPRESSION",elementId:t+"EXPRESSION",seq:180,canHide:!0,hidden:!0},hiddenValue:{seq:999,canHide:!0,hidden:!0},hiddenBetween:{seq:999,canHide:!0,hidden:!0},hiddenAnd:{seq:999,canHide:!0,hidden:!0}}},_renderSortControls:function(e,t){e(m,{id:t+"DIRECTION",required:!0,options:[{value:N,label:j("ASCENDING")},{value:"desc",label:j("DESCENDING")}]}),e(m,{id:t+"NULLS",required:!0,options:[{value:"first",label:j("FIRST")},{value:L,label:j("LAST")}]})},_columnFilterDialogControls:function(e,t){var i,n,o=[],a=this.options.config.columns,l=t+"_";for(i=0;i<a.length;i++)n=a[i],("FD"===t&&this._isColumnFilterable(n.id)||"HD"===t&&!this._getColumn(n.id).specialType&&!this._getColumn(n.id).isHidden)&&o.push({value:n.id,label:this._getColumnLabel(n.id)});e(m,{id:l+"TYPE",options:[{value:_,label:j("ROW")},{value:C,label:j("COLUMN")}]}),e(m,{id:l+"COLUMN",options:o}),e(m,{id:l+"OPERATOR",options:[]}),e(p,{maxChars:4e3,id:l+"VALUE"}),e(p,{maxChars:20,id:l+"DATE_RANGE_VALUE"}),e(m,{id:l+"DATE_RANGE_UNIT",options:[{value:"MI",label:j("MINUTES")},{value:"H",label:j("HOURS")},{value:"D",label:j("DAYS")},{value:"W",label:j("WEEKS")},{value:"M",label:j("MONTHS")},{value:"Y",label:j("YEARS")}]}),e("checkbox",{id:l+"CASE_SENSITIVE",value:"Y"}),e(p,{maxChars:100,id:l+"BETWEEN"}),e(p,{maxChars:100,id:l+"AND"}),e(p,{maxChars:40,id:l+"NAME"}),e("textarea",{id:l+"EXPRESSION",toolbar:!0})},_columnFilterInitActions:function(t,i,n,a,l){var r,s,d=this,c=a+"_",u="FD"===a,h=[],g=d._getElement(c+"TYPE"),p=d._getElement(c+"COLUMN"),m=d._getElement(c+"OPERATOR"),f=d._getElement(c+"VALUE"),I=d._getElement(c+"BETWEEN"),b=d._getElement(c+"AND"),w=d._getElement(c+"NAME"),T=d._getElement(c+"EXPRESSION"),R=d._getElement(c+"CASE_SENSITIVE"),S=d._getElement(c+"DATE_RANGE_VALUE"),N=d._getElement(c+"DATE_RANGE_UNIT");function L(){var e;u&&null!==n.recordView("getRecord")&&(e=d._shortenString(d._getSettingLabel(A,n.recordView("getRecord")),37),w.val(e).change())}function y(e){e.hasClass("a-Combobox")&&e.combobox("destroy"),e.hasClass("hasDatepicker")&&(e.parent().hasClass("a-Combobox-wrapper")&&e.unwrap(),e.datepicker("destroy")),e.attr("placeholder","")}function O(e,i){null!==n.recordView("getRecord")&&t.setValue(n.recordView("getRecord"),e,i)}function k(t){var i=g.val(),n=m.val();switch(ye([p,m,f,I,b,T,R,S,N]),u&&ye(w),O("type",i),i){case _:Le(f),d.options.config.filter.oracleText?(R.prop(E,!0),ye(R)):(R.prop(E,!1),Le(R)),Oe(f,"APEX.IG.SEARCH"),y(f),L();break;case C:Le([p,m]),Oe(f,"APEX.IG.VALUE"),e.inArray(n,[H,"NBETWEEN"])>-1?Le([I,b]):e.inArray(n,["LAST","NEXT","NLAST","NNEXT"])>-1?Le([S,N]):Le(f),V(t)}}function V(i){var l,s,u,_,w={},A=p.val();if(g.val()===C&&A){if((r=d._getColumn(A)).filter.textCase)switch(r.filter.textCase.toLowerCase()){case"upper":f.css({"text-transform":"uppercase"}),I.css({"text-transform":"uppercase"}),b.css({"text-transform":"uppercase"});break;case"lower":f.css({"text-transform":"lowercase"}),I.css({"text-transform":"lowercase"}),b.css({"text-transform":"lowercase"});break;default:f.css({"text-transform":"none"}),I.css({"text-transform":"none"}),b.css({"text-transform":"none"})}if("HD"===a)switch(r.dataType){case"VARCHAR2":w.EQ=j(W.EQ),w.NEQ=j(W.NEQ),w.N=j(W.N),w.NN=j(W.NN),w.IN=j(W.IN),w.NIN=j(W.NIN),w.C=j(W.C),w.NC=j(W.NC),w.S=j(W.S),w.NS=j(W.NS),w.REGEXP=j(W.REGEXP);break;case P:w.EQ=j(W.EQ),w.NEQ=j(W.NEQ),w.GT=j(W.GT),w.GTE=j(W.GTE),w.LT=j(W.LT),w.LTE=j(W.LTE),w.N=j(W.N),w.NN=j(W.NN),w.IN=j(W.IN),w.NIN=j(W.NIN),w[H]=j(W[H]),w.NBETWEEN=j(W.NBETWEEN);break;case F:case U:case"TIMESTAMP_TZ":case"TIMESTAMP_LTZ":w.EQ=j(W.EQ),w.NEQ=j(W.NEQ),w.GT=j(W.GT),w.GTE=j(W.GTE),w.LT=j(W.LT),w.LTE=j(W.LTE),w.N=j(W.N),w.NN=j(W.NN),e.inArray(r.filter.dateRanges,["all","past"])>-1&&(w.LAST=j(W.LAST),w.NLAST=j(W.NLAST)),e.inArray(r.filter.dateRanges,["all","future"])>-1&&(w.NEXT=j(W.NEXT),w.NNEXT=j(W.NNEXT)),w[H]=j(W[H]),w.NBETWEEN=j(W.NBETWEEN);break;case"CLOB":w.N=j(W.N),w.NN=j(W.NN)}else for(R.prop(E,!0),s=0;s<r.filter.operators.length;s++)if("$std$"===(u=r.filter.operators[s]).name)switch(r.filter.dataType){case"VARCHAR2":w.EQ=j(W.EQ),w.NEQ=j(W.NEQ),w.N=j(W.N),w.NN=j(W.NN),w.IN=j(W.IN),w.NIN=j(W.NIN);break;case P:w.EQ=j(W.EQ),w.NEQ=j(W.NEQ),w.GT=j(W.GT),w.GTE=j(W.GTE),w.LT=j(W.LT),w.LTE=j(W.LTE),w.N=j(W.N),w.NN=j(W.NN),w.IN=j(W.IN),w.NIN=j(W.NIN),w[H]=j(W[H]),w.NBETWEEN=j(W.NBETWEEN);break;case F:case U:case"TIMESTAMP_TZ":case"TIMESTAMP_LTZ":w.EQ=j(W.EQ),w.NEQ=j(W.NEQ),w.GT=j(W.GT),w.GTE=j(W.GTE),w.LT=j(W.LT),w.LTE=j(W.LTE),w.N=j(W.N),w.NN=j(W.NN),e.inArray(r.filter.dateRanges,["all","past"])>-1&&(w.LAST=j(W.LAST),w.NLAST=j(W.NLAST)),e.inArray(r.filter.dateRanges,["all","future"])>-1&&(w.NEXT=j(W.NEXT),w.NNEXT=j(W.NNEXT)),w[H]=j(W[H]),w.NBETWEEN=j(W.NBETWEEN);break;case"CLOB":w.N=j(W.N),w.NN=j(W.NN)}else"$perform$"===u.name?e.inArray(r.filter.dataType,["VARCHAR2","CLOB"])>-1&&(w.C=j(W.C),w.NC=j(W.NC),w.S=j(W.S),w.NS=j(W.NS),w.REGEXP=j(W.REGEXP),r.filter.textCase&&"MIXED"===r.filter.textCase.toUpperCase()&&R.prop(E,!1)):"CASE_INSENSITIVE"===u.name?r.filter.textCase&&"MIXED"===r.filter.textCase.toUpperCase()&&R.prop(E,!1):w[u.name]=j(W[u.name]);_=t.getValue(n.recordView("getRecord"),"operator"),m.empty(),e.each(w,(function(t,i){m.append(e("<option></option>").attr("value",t).text(i))})),_&&null!==_&&e.inArray(_,w)&&m.val(_),null===m.val()&&m.val("EQ"),O("operator",m.val()),function(){var i,a,l,s;function u(t,i,n){var a,l,s,c,u,h=d._getColumnFormatMask(r.id);(a=-1!==h.toLowerCase().indexOf("hh"))&&(s=(new Date).getHours(),c="",(l=-1!==h.indexOf("HH"))||(c=s>11?"PM":"AM",0===s&&(s=12),s>12&&(s-=12))),e(t).hasClass("a-Combobox-wrapper")||e(t).wrap(e("<span class='a-Combobox-wrapper'></span>")),a?(apex.widget.datepicker(t,{buttonText:"<span class='a-Icon icon-calendar'></span><span class='u-VisuallyHidden'>"+o.formatMessage("APEX.DATEPICKER.ICON_TEXT","")+"</span>",showTime:!0,showOn:"button",defaultDate:me(n),time24h:l,defHour:("00"+s).substr(-2),defMinute:"00",defAmpm:c},h,apex.locale.getLanguage()),u=!1,n&&null!==n.match(/^\d{14}/)&&(u=me(n))&&!isNaN(u.getTime())&&apex.jQuery.timepicker.setCanonicalDate(e(t).get(0),u)):(apex.widget.datepicker(t,{buttonText:"<span class='a-Icon icon-calendar'></span><span class='u-VisuallyHidden'>"+o.formatMessage("APEX.DATEPICKER.ICON_TEXT","")+"</span>",defaultDate:me(n),showTime:!1,showOn:"button"},h,apex.locale.getLanguage()),n&&null!==n.match(/^\d{14}/)&&e(t).datepicker("setDate",me(n))),e(t).next("button").addClass("a-Button a-Button--withIcon a-Button--noLabel js-menuButton a-Button--calendar"),e(t).attr("placeholder",j("EXAMPLE")+": "+r.appearance.formatExample)}s=n.recordView("getRecord"),i=t.getValue(s,"hiddenValue"),a=t.getValue(s,"hiddenBetween"),l=t.getValue(s,"hiddenAnd"),y(f),y(I),y(b),e("#"+d._getId(c+"VALUE")+"_LABEL ").text(j("VALUE")),r.filter.dataType===F||r.filter.dataType===U||"TIMESTAMP_TZ"===r.filter.dataType||"TIMESTAMP_LTZ"===r.filter.dataType?("TIMESTAMP_TZ"===r.filter.dataType&&e("#"+d._getId(c+"VALUE")+"_LABEL ").text(j("VALUE_TIMESTAMP_TZ")),u("#"+d._getId(c+"VALUE"),0,i),u("#"+d._getId(c+"BETWEEN"),0,a),u("#"+d._getId(c+"AND"),0,l)):(f.combobox({label:j("VALUE")}),I.combobox({label:j("VALUE")}),b.combobox({label:j("AND")}),f.val(i),I.val(a),b.val(l))}(),d._hasColumnFilterLov(A)?d._getFilterValues(A,!1,(function(e){if(h=[],e.regions[0].filterValues)for(l=e.regions[0].filterValues,s=0;s<l.length;s++)h.push({label:l[s],value:l[s]});I.hasClass("a-Combobox")&&I.combobox(v,"source",h),b.hasClass("a-Combobox")&&b.combobox(v,"source",h),f.hasClass("a-Combobox")&&f.combobox(v,"source",h)})):(y(f),y(I),y(b)),O("columnId",A),i&&(f.val("").change(),I.val("").change(),b.val("").change()),M()}}function M(){var t=m.val(),i=g.val();O("operator",t),i===C&&(ye([f,I,b,S,N,R]),null!==t&&(-1===e.inArray(r.filter.dataType,[F,U,"TIMESTAMP_TZ","TIMESTAMP_LTZ"])&&f.hasClass("a-Combobox")&&(e.inArray(t,[G,"NIN"])>-1?(f.combobox(v,"multipleValues",!0),f.combobox(v,"multipleValueDelimiter","; "),f.prop("placeholder",o.formatMessage("APEX.IG.PLACEHOLDER_INVALUES",";"))):(f.combobox(v,"multipleValues",!1),f.prop("placeholder",""))),e.inArray(t,["C","NC","REGEXP","S","NS"])>-1&&!1===R.prop(E)&&Le(R),e.inArray(s,[H,"NBETWEEN"])>-1&&-1===e.inArray(t,[H,"NBETWEEN"])&&f.val("").change(),-1===e.inArray(s,[H,"NBETWEEN"])&&e.inArray(t,[H,"NBETWEEN"])>-1&&(I.val("").change(),b.val("").change()),e.inArray(s,["LAST","NEXT","NLAST","NNEXT"])>-1&&-1===e.inArray(t,["LAST","NEXT","NLAST","NNEXT"])&&f.val("").change(),e.inArray(t,[H,"NBETWEEN"])>-1?Le([I,b]):e.inArray(t,["LAST","NEXT","NLAST","NNEXT"])>-1?(Le([S,N]),x()):-1===e.inArray(t,["N","NN"])&&Le(f))),s=t,L()}function D(e){var i,o,a,l,r=d._getElement(c+e);if("VALUE"===e&&(i="hiddenValue"),"BETWEEN"===e&&(i="hiddenBetween"),"AND"===e&&(i="hiddenAnd"),t.setValidity("valid",n.recordView("getRecord").id,e.toLowerCase()),r.hasClass("hasDatepicker"))if(""===r.val())l="",a="";else{o=!1;try{o=r.datepicker(v,"showTime")?apex.jQuery.timepicker.getCanonicalDate(r.get(0)):r.datepicker("getDate")}catch(e){}o&&!isNaN(o.getTime())?(l=r.val(),a=fe(o)):(""!==r.val()&&t.setValidity("error",n.recordView("getRecord").id,e.toLowerCase(),j("DATE_INVALID_VALUE")),l=r.val(),a=r.val())}else"uppercase"===r.css("text-transform")?(a=r.val().toUpperCase(),l=r.val().toUpperCase()):"lowercase"===r.css("text-transform")?(a=r.val().toLowerCase(),l=r.val().toLowerCase()):(a=r.val(),l=r.val());O(i,a),O(e.toLowerCase(),l),L()}function x(){f.val(S.val()+"~"+N.val()),O("value",f.val()),O("dateRangeValue",S.val()),O("dateRangeUnit",N.val()),L()}S.change(x),N.change(x),R.change((function(){var e=R.prop("checked");O("isCaseSensitive",e),R.prop("checked",e)})),g.change((function(){k(!0)})),p.change((function(){V(!0)})),m.change(M),f.change((function(){D("VALUE")})),I.change((function(){D("BETWEEN")})),b.change((function(){D("AND")})),n.on("apexbeginrecordedit",(function(){k(),e.isFunction(l)&&l()}))},_renderFilterDialog:function(){var t=this;this._createDialog(A,(function(e){t._columnFilterDialogControls(e,"FD")}),{titleKey:"FILTERS",dialogHelp:{helpTextKey:"FILTER"},checkboxColumn:!0,modelOptions:{shape:"table",fields:e.extend({id:{canHide:!1,hidden:!0,seq:0},isEnabled:he(),name:{headingAlignment:"start",label:"NAME",elementId:"FD_NAME",width:100,seq:105}},this._columnFilterModelFields("FD"))},load:function(i){var n,o,a,l,r,s=[],d=t.getFilters(),c=e(this).dialog(v,"id");if(d.length>0){for(n=0;n<d.length;n++){switch(o=(a=e.extend({id:"",type:"",columnId:"",operator:"",value:"",hiddenValue:"",dateRangeValue:"",dateRangeUnit:"",isCaseSensitive:!1,between:"",and:"",hiddenBetween:"",hiddenAnd:"",isEnabled:"",enabledClass:"",enabledText:"",name:"",expression:""},d[n])).isEnabled,a.enabledClass=o?"is-checked":"",a.enabledText=j(o?"ENABLED":"DISABLED"),a.name=t._getSettingLabel(A,a),a.type){case _:a.hiddenValue=a.value;break;case C:a.hiddenValue=a.value,e.inArray(a.operator,[H,"NBETWEEN"])>-1?(l=a.value.split("~"),a.hiddenBetween=l[0],a.hiddenAnd=l[1],a.hiddenValue="",a.value=""):e.inArray(a.operator,["LAST","NEXT","NLAST","NNEXT"])>-1&&(r=a.value.split("~"),a.dateRangeValue=r[0],a.dateRangeUnit=r[1],a.hiddenValue="",a.value=""),e.inArray(a.operator,[G,"NIN"])>-1&&(a.value=a.value.split("").join("; "),a.hiddenValue=a.value)}a.isCaseSensitive=a.isCaseSensitive?"Y":O,s.push(a)}i.setData(s)}else c=i.insertNewRecord();return c},init:function(e,i,n){ge(n,"hiddenValue"),ge(n,"hiddenBetween"),ge(n,"hiddenAnd"),t._columnFilterInitActions(e,i,n,"FD")},validate:function(i,n,o){var a=!0;return i.forEach((function(i,l,r){switch(n(r,"between"),n(r,"and"),n(r,"value"),n(r,"expression"),i.type){case C:switch(i.operator){case H:case"NBETWEEN":i.hiddenBetween&&""!==i.hiddenBetween||(a=!1,o(r,"between",j("VALUE_REQUIRED"))),i.hiddenAnd&&""!==i.hiddenAnd||(a=!1,o(r,"and",j("VALUE_REQUIRED"))),a&&e.inArray(t._getColumn(i.columnId).filter.dataType,[F,U,"TIMESTAMP_TZ","TIMESTAMP_LTZ"])>-1&&(i.hiddenBetween!==fe(me(i.hiddenBetween))&&(a=!1,o(r,"between",j("INVALID_VALUE"))),i.hiddenAnd!==fe(me(i.hiddenAnd))&&(a=!1,o(r,"and",j("INVALID_VALUE"))));break;case"LAST":case"NEXT":case"NLAST":case"NNEXT":i.dateRangeValue&&""!==i.dateRangeValue||(a=!1,o(r,"dateRangeValue",j("VALUE_REQUIRED"))),i.dateRangeUnit&&""!==i.dateRangeUnit||(a=!1,o(r,"dateRangeUnit",j("VALUE_REQUIRED")));break;case"EQ":case"NEQ":case"GT":case"GTE":case"LT":case"LTE":case G:case"NIN":i.hiddenValue&&""!==i.hiddenValue?e.inArray(t._getColumn(i.columnId).filter.dataType,[F,U,"TIMESTAMP_TZ","TIMESTAMP_LTZ"])>-1&&i.hiddenValue!==fe(me(i.hiddenValue))&&(a=!1,o(r,"value",j("DATE_INVALID_VALUE"))):(a=!1,o(r,"value",j("VALUE_REQUIRED")))}break;case _:i.hiddenValue&&""!==i.hiddenValue||(a=!1,o(r,"value",j("VALUE_REQUIRED")))}})),a},store:function(i){t._ifNoChangesDo((function(){var n,o,a,l={save:!1,skipNoChangesCheck:!0},r=i.getChanges();for(n=0;n<r.length;n++){switch(delete(a=(o=r[n]).record).enabledClass,delete a.enabledText,a.type){case _:delete a.expression,delete a.columnId,delete a.and,delete a.between,delete a.hiddenAnd,delete a.hiddenBetween,delete a.dateRangeValue,delete a.dateRangeUnit,delete a.operator,a.isCaseSensitive="Y"===a.isCaseSensitive;break;case C:a.value=a.hiddenValue,e.inArray(a.operator,[H,"NBETWEEN"])>-1?a.value=a.hiddenBetween+"~"+a.hiddenAnd:e.inArray(a.operator,["LAST","NEXT","NLAST","NNEXT"])>-1&&(a.value=a.dateRangeValue+"~"+a.dateRangeUnit),e.inArray(a.operator,[G,"NIN"])>-1&&(a.value=_e(a.value.split(";")).join("")),delete a.dateRangeValue,delete a.dateRangeUnit,delete a.between,delete a.and,delete a.hiddenValue,delete a.hiddenBetween,delete a.hiddenAnd,delete a.expression,a.isCaseSensitive="Y"===a.isCaseSensitive}o.inserted?(delete a.id,a.columnType=C,t.addFilter(a,l)):o.updated?(a.columnType=C,t.updateFilter(a.id,a,l)):o.deleted&&t.deleteFilter(a.id,l)}t._setReportSettings({refreshModel:!0})}))}})},_renderColumnsDialog:function(){var t=this,i=[],n=this.options.config.views[this._view()].features;function o(i){var n,o,a,l,r=[],s=t._getCurrentView().columns;function d(e){return!(e.id!==a.columnId||e.specialType&&"actions"!==e.specialType||e.isHidden)}for(n=0;n<s.length;n++)a=s[n],(o=(o=e.grep(t.options.config.columns,d)).length>0&&o[0])&&(l={id:a.columnId,columnId:a.columnId,columnWidth:a.width,seq:n+1,heading:"actions"===o.specialType?j("ROW_ACTIONS"):o.heading.label,groupId:o.layout.groupId,canHide:o.features.canHide,isVisible:a.isVisible,enabledClass:a.isVisible?"is-checked":""},"ALL"===i||"VISIBLE"===i&&a.isVisible?r.push(l):"INVISIBLE"!==i||l.isVisible||r.push(l));return r}Ie(this.options.config.columnGroups,i,"id","label","",""),this._createDialog("columns",(function(e){e(p,{id:"CD_COLUMN_WIDTH"}),e(m,{id:"CD_COLUMN_GROUP",options:i})}),{titleKey:"COLUMNS",modelOptions:{shape:"table",canDelete:!1,canAdd:!1,sequenceField:n.reorderColumns?"seq":null,fields:{id:{canHide:!1,hidden:!0,seq:0},isVisible:he("VISIBLE"),heading:{label:"COLUMN",headingAlignment:"start",elementId:"CD_COLUMN_HEADING",canHide:!0,hidden:!1,width:100,seq:20},groupId:{label:"GROUP",elementId:"CD_COLUMN_GROUP",canHide:!0,escape:!1,volatile:!0,hidden:!0,seq:30},columnWidth:{label:"WIDTH",elementId:"CD_COLUMN_WIDTH",canHide:!0,hidden:!0,seq:40},columnId:{label:"COLUMN",elementId:"CD_COLUMN",seq:0,canHide:!0,hidden:!0},seq:{canHide:!1,hidden:!0,seq:0},canHide:{canHide:!1,hidden:!0,seq:0},enabledClass:{volatile:!0,canHide:!1,hidden:!0,defaultValue:"is-checked",seq:0}}},load:function(e){e.setData(o(this.showColumns))},init:function(t,i,n,l){var r,s=this;this.showColumns||(this.showColumns="ALL"),r=[{type:"BUTTON",iconOnly:!0,icon:"icon-up-chevron",action:"move-up"},{type:"BUTTON",iconOnly:!0,icon:"icon-down-chevron",action:"move-down"},{type:"MENU",labelKey:"APEX.IG.SHOW",icon:"icon-ig-select-cols",iconOnly:!0,menu:{items:[{type:"radioGroup",action:"show-columns"}]}}],a.findContext("ModelEditDialog",this).add([{name:"show-columns",choices:[{label:j("ALL"),value:"ALL"},{label:j("VISIBLE"),value:"VISIBLE"},{label:j("INVISIBLE"),value:"INVISIBLE"}],get:function(){return s.showColumns},set:function(e){s.showColumns=e;var i=o(e);t.setData(i)}}]),l.toolbar({data:[{align:"start",controls:r}]}),i.on("click",".js-colCheckbox",(function(){var n,o,a=e(this);o=i.grid("getRecords",[a.parent()])[0],t.getValue(o,"canHide")&&(n=!t.getValue(o,"isVisible"),t.setValue(o,"enabledClass",n?"is-checked":""),t.setValue(o,"isVisible",n))})).on("keydown",".js-colCheckbox",(function(t){t.which===e.ui.keyCode.SPACE&&e(this).trigger("click")})),n.on("apexbeginrecordedit",(function(){""===t.getValue(n.recordView("getRecord"),"groupId")?ge(n,"groupId"):pe(n,"groupId")})),ge(n,"columnId"),ge(n,"isVisible")},validate:function(e,t,i){var n,o=!0;return e.forEach((function(e,a,l){null!==(n=e.columnWidth)&&""!==n&&isNaN(parseInt(n,10))?(i(l,"columnWidth",j("INVALID_VALUE")),o=!1):t(l,"columnWidth")})),o},store:function(e){var i,n,o,a=!1,l=t._getCurrentView().columns,r=t._currentViewImpl().getColumns();for(l.sort((function(e,t){return e.seq-t.seq})),i=0;i<l.length;i++)!0===l[i].isFrozen&&(a=i+1);for(e.forEach((function(e){(o=e.columnWidth)&&null!==o||(o=""),o=o.toString(),t._currentViewColumn(e.columnId,{isVisible:e.isVisible,width:parseInt(o,10),seq:parseFloat(e.seq)})})),l.sort((function(e,t){return e.seq-t.seq})),i=0;i<l.length;i++)for(n=0;n<r.length;n++)if(l[i].columnId===r[n].id){r[n].seq=l[i].seq,r[n].canHide&&(r[n].hidden=!l[i].isVisible),r[n].width=l[i].width,l[i].seq=i,!1!==a&&i>=a&&(l[i].isFrozen=!1,r[n].frozen=!1),!1!==a&&i<a&&(l[i].isFrozen=!0,r[n].frozen=!0);break}t._setReportSettings({refreshView:!0,refreshColumns:!0})}})},_renderHighlightDialog:function(){var t,i,n=this,o=this.options.config.columns,a=[];for(i=0;i<o.length;i++)t=o[i],this._getColumn(t.id).specialType||this._getColumn(t.id).isHidden||a.push({value:t.id,label:this._getColumnLabel(t.id)});this._createDialog(T,(function(e){n._columnFilterDialogControls(e,"HD"),e(f,{id:"HD_BACKGROUND_COLOR",colorMenu:!0,itemLabel:j("BACKGROUND_COLOR")}),e(f,{id:"HD_TEXT_COLOR",colorMenu:!0,itemLabel:j("TEXT_COLOR")}),e(m,{id:"HD_HIGHLIGHT_TYPE",options:[{value:_,label:j("ROW")},{value:C,label:j("COLUMN")}]}),e(m,{id:"HD_HIGHLIGHT_COLUMN",options:a})}),{width:800,height:580,titleKey:"HIGHLIGHT",checkboxColumn:!0,modelOptions:{shape:"table",sequenceField:"seq",fields:e.extend({id:{canHide:!1,hidden:!0,seq:0},seq:{canHide:!1,hidden:!0,seq:0},isEnabled:he(),name:{label:"NAME",headingAlignment:"start",elementId:"HD_NAME",isRequired:!0,width:100,seq:15},highlightType:{label:"HIGHLIGHT",elementId:"HD_HIGHLIGHT_TYPE",seq:20,canHide:!0,hidden:!0},highlightColumnId:{label:"COLUMN",elementId:"HD_HIGHLIGHT_COLUMN",seq:30,canHide:!0,hidden:!0},backgroundColor:{label:"BACKGROUND_COLOR",elementId:"HD_BACKGROUND_COLOR",seq:40,fieldColSpan:6,canHide:!0,hidden:!0},textColor:{label:"TEXT_COLOR",elementId:"HD_TEXT_COLOR",seq:50,fieldColSpan:6,canHide:!0,hidden:!0}},this._columnFilterModelFields("HD"))},load:function(t){var i,o,a,l,r,s=[],d=n.getHighlights(),c=e(this).dialog(v,"id");if(d.length>0){for(i=0;i<d.length;i++){switch((l={id:(r=d[i]).id,seq:r.seq,name:r.name,highlightType:r.type,highlightColumnType:r.columnType,highlightColumnId:r.columnId,backgroundColor:r.backgroundColor,textColor:r.textColor,type:r.condition.type,columnType:r.condition.columnType,columnId:r.condition.columnId,operator:r.condition.operator,isCaseSensitive:r.condition.isCaseSensitive?"Y":O,value:r.condition.value,expression:r.condition.expression,isEnabled:r.isEnabled,hiddenValue:"",dateRangeValue:"",dateRangeUnit:"",between:"",and:"",hiddenBetween:"",hiddenAnd:"",enabledClass:"",enabledText:""}).enabledClass=l.isEnabled?"is-checked":"",l.enabledText=l.isEnabled?j("ENABLED"):j("DISABLED"),l.hiddenValue=l.value,l.type){case C:e.inArray(l.operator,[H,"NBETWEEN"])>-1?(o=l.value.split("~"),l.hiddenBetween=o[0],l.hiddenAnd=o[1],l.hiddenValue="",l.value=""):e.inArray(l.operator,["LAST","NEXT","NLAST","NNEXT"])>-1&&(a=l.value.split("~"),l.dateRangeValue=a[0],l.dateRangeUnit=a[1],l.hiddenValue="",l.value=""),e.inArray(l.operator,[G,"NIN"])>-1&&(l.value=l.value.split("").join("; "),l.hiddenValue=l.value)}s.push(l)}t.setData(s)}else c=t.insertNewRecord();return c},init:function(t,i,o){var a,l=n._getElement("HD_HIGHLIGHT_TYPE"),r=n._getElement("HD_HIGHLIGHT_COLUMN"),s=n._getElement("HD_TEXT_COLOR"),c=n._getElement("HD_BACKGROUND_COLOR"),u=n._getElement("HD_NAME"),h=[];function g(t,i){e(i).prevAll("input").first().val(this.value).change()}for(apex.widget.colorpicker(s,{preview:{type:"modern"}}),apex.widget.colorpicker(c,{preview:{type:"modern"}}),a=0;a<K.length;a++)h.push({type:D,action:g,label:z(K[a].label),icon:"a-Icon icon-circle",iconStyle:"color: "+K[a].value+";",value:K[a].value});function p(){var e=l.val(),t=d(r.attr("id"));e===_?ye(r):(Le(r),t.setValue(t.getValue()))}e("<div/>",{id:n._getId("color_menu")}).appendTo(this).menu({actionsContext:n.actions,items:h}),ke(u,!0),ge(o,"hiddenValue"),ge(o,"hiddenBetween"),ge(o,"hiddenAnd"),n._columnFilterInitActions(t,i,o,"HD",(function(){p(),s.change(),c.change()})),l.change(p)},validate:function(t,i,o){var a=!0;return t.forEach((function(t,l,r){switch(i(r,"between"),i(r,"and"),i(r,"value"),i(r,"expression"),i(r,"name"),i(r,"textColor"),i(r,"backgroundColor"),""===t.textColor&&""===t.backgroundColor&&(o(r,"textColor",j("VALUE_REQUIRED")),o(r,"backgroundColor",j("VALUE_REQUIRED"))),""===t.name&&o(r,"name",j("VALUE_REQUIRED")),t.type){case C:switch(t.operator){case H:case"NBETWEEN":t.hiddenBetween&&""!==t.hiddenBetween||(a=!1,o(r,"between",j("VALUE_REQUIRED"))),t.hiddenAnd&&""!==t.hiddenAnd||(a=!1,o(r,"and",j("VALUE_REQUIRED"))),a&&e.inArray(n._getColumn(t.columnId).filter.dataType,[F,U,"TIMESTAMP_TZ","TIMESTAMP_LTZ"])>-1&&(t.hiddenBetween!==fe(me(t.hiddenBetween))&&(a=!1,o(r,"between",j("INVALID_VALUE"))),t.hiddenAnd!==fe(me(t.hiddenAnd))&&(a=!1,o(r,"and",j("INVALID_VALUE"))));break;case"LAST":case"NEXT":case"NLAST":case"NNEXT":t.dateRangeValue&&""!==t.dateRangeValue||(a=!1,o(r,"dateRangeValue",j("VALUE_REQUIRED"))),t.dateRangeUnit&&""!==t.dateRangeUnit||(a=!1,o(r,"dateRangeUnit",j("VALUE_REQUIRED")));break;case"EQ":case"NEQ":case"GT":case"GTE":case"LT":case"LTE":case G:case"NIN":t.hiddenValue&&""!==t.hiddenValue?e.inArray(n._getColumn(t.columnId).filter.dataType,[F,U,"TIMESTAMP_TZ","TIMESTAMP_LTZ"])>-1&&t.hiddenValue!==fe(me(t.hiddenValue))&&(a=!1,o(r,"value",j("DATE_INVALID_VALUE"))):(a=!1,o(r,"value",j("VALUE_REQUIRED")))}break;case _:t.hiddenValue&&""!==t.hiddenValue||(a=!1,o(r,"value",j("VALUE_REQUIRED")))}})),a},store:function(t){n._ifNoChangesDo((function(){var i,o,a,l,r,s={save:!1,skipNoChangesCheck:!0},d=t.getChanges();for(i=0;i<d.length;i++){switch((l=(o=d[i]).record).type){case _:r={type:_,value:l.value,isCaseSensitive:"Y"===l.isCaseSensitive};break;case C:r={type:C,value:l.hiddenValue,columnId:l.columnId,operator:l.operator,columnType:C,isCaseSensitive:"Y"===l.isCaseSensitive},e.inArray(l.operator,[G,"NIN"])>-1&&(r.value=_e(l.hiddenValue.split(";")).join("")),e.inArray(l.operator,[H,"NBETWEEN"])>-1?r.value=l.hiddenBetween+"~"+l.hiddenAnd:e.inArray(l.operator,["LAST","NEXT","NLAST","NNEXT"])>-1&&(r.value=l.dateRangeValue+"~"+l.dateRangeUnit)}a={id:l.id,seq:parseFloat(l.seq),name:l.name,type:l.highlightType,textColor:l.textColor,backgroundColor:l.backgroundColor,condition:r,isEnabled:l.isEnabled},l.highlightType===C?(a.type=C,a.columnType=C,a.columnId=l.highlightColumnId):l.highlightType===_&&(a.type=_,delete a.columnType,delete a.columnId),o.inserted?(delete a.id,n.addHighlight(a,s)):o.updated?n.updateHighlight(a.id,a,s):o.deleted&&n.deleteHighlight(a.id,s)}n._setReportSettings({refreshModel:!0,changeIdentifier:"views.grid.highlights"})}))}})},_loadColumnOptions:function(e,t){var i,n,o,a=this.options.config.columns;for(e.push({value:"",label:j("SELECT")}),i=0;i<a.length;i++)(o=a[i]).specialType||!o.features[t]||o.isHidden||(n||(n=o),e.push({value:o.id,label:this._getColumnLabel(o.id)}));return n},_renderSortDialog:function(){var e=[],t=this;this._loadColumnOptions(e,"sort"),this._createDialog("sort",(function(i){i(m,{id:"SD_COLUMN",required:!0,options:e}),t._renderSortControls(i,"SD_")}),{titleKey:"SORT",modelOptions:{shape:"table",identityField:"order",sequenceField:"seq",fields:{order:{canHide:!1,hidden:!0,seq:10},seq:{seq:20,canHide:!1,hidden:!0},columnId:{label:"COLUMN",headingAlignment:"start",elementId:"SD_COLUMN",isRequired:!0,width:100,seq:30,canHide:!0,hidden:!1},direction:{label:"DIRECTION",headingAlignment:"start",elementId:"SD_DIRECTION",width:60,seq:40,defaultValue:N,canHide:!0,hidden:!1},nulls:{label:"NULLS",elementId:"SD_NULLS",seq:50,defaultValue:L,canHide:!0,hidden:!0}}},load:function(e){var i,n,o=t.getSorts();for(i=0;i<o.length;i++)o[i].seq=i+1,o[i].order=i+1;return o.length>0?e.setData(o):n=e.insertNewRecord(),n},init:function(e,i,n){var o=t._getElement("SD_COLUMN"),a=t._getElement("SD_DIRECTION");t._getElement("SD_NULLS");o.change((function(){e.setValue(n.recordView("getRecord"),"columnId",o.val())})),a.change((function(){e.setValue(n.recordView("getRecord"),"direction",a.val())}))},validate:function(e){var t={},i=!0;return e.forEach((function(e,n,o){t[e.columnId]?i=!1:t[e.columnId]=!0})),!1!==i||j("SORT_ONLY_ONE_PER_COLUMN")},store:function(e){var i,n,o,a,l,r=e.getChanges(),s=t.getSorts();for(i=0;i<s.length;i++)s[i].seq=i+1;for(i=0;i<r.length;i++)if(a=(o=r[i]).record,l=o.original,a.seq=parseFloat(a.seq),o.inserted)s.push(a);else if(o.updated)if(l.columnId===a.columnId){for(n=0;n<s.length;n++)if(a.columnId===s[n].columnId){s[n]=a;break}}else{for(n=0;n<s.length;n++)if(l.columnId===s[n].columnId){s.splice(n,1);break}s.push(a)}else if(o.deleted)for(n=0;n<s.length;n++)if(a.columnId===s[n].columnId){s.splice(n,1);break}s.length>0&&(s=s.sort((function(e,t){return e.seq-t.seq}))),r.length>0&&t.setSorts(s)}})},_renderAggregateDialog:function(){var t,i,n=[],o=this;t=this._loadColumnOptions(n,"aggregate"),i=[{value:Y.CNT,label:j(Y.CNT)},{value:Y.CNT_DIST,label:j(Y.CNT_DIST)},{value:Y.MIN,label:j(Y.MIN)},{value:Y.MAX,label:j(Y.MAX)},{value:Y.MEDIAN,label:j(Y.MEDIAN)},{value:Y.SUM,label:j(Y.SUM)},{value:Y.AVG,label:j(Y.AVG)}],this._createDialog(S,(function(e){e(m,{id:"AD_COLUMN",required:!0,options:n}),e(m,{id:"AD_AGGREGATION",required:!0,options:i}),e(p,{maxlength:"30",id:"AD_TOOLTIP"}),e("checkbox",{id:"AD_SHOW_GRAND_TOTAL",value:"Y"})}),{titleKey:"AGGREGATION",dialogHelp:{helpTextKey:"AGGREGATE"},checkboxColumn:!0,modelOptions:{shape:"table",fields:{id:{canHide:!1,hidden:!0,seq:0},isEnabled:he(),columnId:{label:"COLUMN",headingAlignment:"start",elementId:"AD_COLUMN",isRequired:!0,defaultValue:"",seq:30,width:80,canHide:!0,hidden:!1},function:{label:"AGGREGATION",headingAlignment:"start",elementId:"AD_AGGREGATION",isRequired:!0,seq:40,width:80,defaultValue:"",canHide:!0,hidden:!1},tooltip:{label:"TOOLTIP",elementId:"AD_TOOLTIP",seq:50,defaultValue:"",canHide:!0,hidden:!0},showGrandTotal:{label:"SHOW_OVERALL_VALUE",elementId:"AD_SHOW_GRAND_TOTAL",seq:60,defaultValue:"Y",canHide:!0,hidden:!0}}},load:function(i){var n,a,l,r=[],s=e(this),d=s.dialog(v,"id"),c=s.dialog(v,"columnId"),u=o.getAggregates();function h(e){var t=o._getColumn(e);return l=t.filter.dataType===P?Y.SUM:Y.CNT,i.insertNewRecord(null,null,{columnId:e,isEnabled:!0,enabledClass:"is-checked",function:l})}if(u.length>0){for(n=0;n<u.length;n++)(a=e.extend({id:"",columnId:"",function:"",tooltip:"",showGrandTotal:"",isEnabled:"",enabledClass:"",enabledText:""},u[n])).enabledClass=a.isEnabled?"is-checked":"",a.enabledText=a.isEnabled?j("ENABLED"):j("DISABLED"),a.showGrandTotal=a.showGrandTotal?"Y":O,r.push(a);i.setData(r),c&&(d=h(c))}else d=h(c||t.id);return d},init:function(t,i,n){var a=o._getElement("AD_COLUMN"),l=o._getElement("AD_AGGREGATION"),r=o._getElement("AD_SHOW_GRAND_TOTAL");function s(){var i,r,s={},c=a.val();i=o._getColumn(c),c&&""!==c?(pe(n,"function"),pe(n,"tooltip"),pe(n,"showGrandTotal"),s[Y.CNT]=j(Y.CNT),"VARCHAR2"!==i.filter.dataType&&i.filter.dataType!==P&&i.filter.dataType!==F||(s[Y.CNT_DIST]=j(Y.CNT_DIST),s[Y.MIN]=j(Y.MIN),s[Y.MAX]=j(Y.MAX)),i.filter.dataType!==P&&i.filter.dataType!==F||(s[Y.MEDIAN]=j(Y.MEDIAN)),i.filter.dataType===P&&(s[Y.SUM]=j(Y.SUM),s[Y.AVG]=j(Y.AVG)),r=l.val(),l.empty(),l.append(e("<option></option>").attr("value","").text(j("SELECT"))),e.each(s,(function(t,i){l.append(e("<option></option>").attr("value",t).text(i))})),""!==r&&l.val(r),""!==l.val()&&null!==l.val()||(i.filter.dataType===P?l.val(Y.SUM):l.val(Y.CNT)),t.setValue(n.recordView("getRecord"),"columnId",c),d()):(ge(n,"function"),ge(n,"tooltip"),ge(n,"showGrandTotal"),t.setValue(n.recordView("getRecord"),"columnId",""),l.val("").change())}function d(){t.setValue(n.recordView("getRecord"),"function",l.val())}Le(a),a.change(s),l.change(d),r.change((function(){t.setValue(n.recordView("getRecord"),"showGrandTotal",r.prop("checked")?"Y":"N")})),n.on("apexbeginrecordedit",(function(){s()}))},validate:function(e,t,i){var n,o={},a=!0;return e.forEach((function(e,l,r){n=e.columnId.toString()+e.function,o[n]?(a=!1,i(r,"columnId",j("DUPLICATE_AGGREGATION")),i(r,"function",j("DUPLICATE_AGGREGATION"))):(o[n]=!0,t(r,"columnId"),t(r,"function")),""===e.columnId&&(i(r,"columnId",j("DUPLICATE_AGGREGATION")),a=!1)})),a},store:function(e){o._ifNoChangesDo((function(){var t,i,n,a={save:!1,skipNoChangesCheck:!0},l=e.getChanges();for(t=0;t<l.length;t++)(i=l[t]).record.columnId&&""!==i.record.columnId&&(delete(n=i.record).enabledClass,delete n.enabledText,n.showGrandTotal="Y"===n.showGrandTotal,i.inserted?(delete n.id,n.columnType=C,o.addAggregate(n,a)):i.updated?o.updateAggregate(n.id,n,a):i.deleted&&o.deleteAggregate(n.id,a));o._setReportSettings({refreshModel:!0,changeIdentifier:"views.grid.aggregations"})}))}})},_renderControlBreakDialog:function(){var t,i=[],n=this;t=this._loadColumnOptions(i,"sort"),this._createDialog("controlBreak",(function(e){e(m,{id:"CBD_COLUMN",required:!0,options:i}),n._renderSortControls(e,"CBD_")}),{titleKey:"CONTROL_BREAK",checkboxColumn:!0,modelOptions:{shape:"table",sequenceField:"sequenceField",fields:{id:{canHide:!1,hidden:!0,seq:0},sequenceField:{canHide:!1,hidden:!0,seq:0},oldColumnId:{canHide:!1,hidden:!0,seq:0},isEnabled:he(),columnId:{label:"COLUMN",headingAlignment:"start",elementId:"CBD_COLUMN",isRequired:!0,seq:20,width:100,canHide:!0,hidden:!1},direction:{label:"DIRECTION",elementId:"CBD_DIRECTION",defaultValue:N,seq:30,canHide:!0,hidden:!0},nulls:{label:"NULLS",elementId:"CBD_NULLS",defaultValue:L,seq:40,canHide:!0,hidden:!0}}},load:function(i){var o,a,l,r,s=[],d=e(this).dialog(v,"id"),c=n._getCurrentView().columns;for(o=0;o<c.length;o++)(r=(a=c[o]).break)&&(l=e.extend({},{id:a.columnId,columnId:a.columnId,oldColumnId:a.columnId,direction:a.direction,nulls:a.nulls,sequenceField:parseFloat(r.order),isEnabled:r.isEnabled,enabledClass:r.isEnabled?"is-checked":""}),s.push(l));return s.length>0?(s.sort((function(e,t){return e.sequenceField<t.sequenceField?-1:e.sequenceField>t.sequenceField?1:0})),i.setData(s)):d=i.insertNewRecord({isEnabled:!0,id:t.columnId,columnId:t.columnId,oldColumnId:t.columnId,direction:t.sort?t.sort.direction:N,nulls:t.sort?t.sort.nulls:L}),d},init:function(e,t,i){var o=n._getElement("CBD_COLUMN"),a=n._getElement("CBD_DIRECTION"),l=n._getElement("CBD_NULLS");function r(){e.setValue(i.recordView("getRecord"),"columnId",o.val()),""===o.val()?ye([a,l]):Le([a,l])}o.change(r),a.change((function(){e.setValue(i.recordView("getRecord"),"direction",a.val())})),l.change((function(){e.setValue(i.recordView("getRecord"),"nulls",l.val())})),i.on("apexbeginrecordedit",r)},validate:function(e,t,i){var n={},o=!0;return e.forEach((function(e,t,a){n[e.columnId]?(o=!1,i(a,"columnId",j("DUPLICATE_CONTROLBREAK"))):n[e.columnId]=!0,""===e.columnId&&(o=!1)})),o},store:function(e){n._ifNoChangesDo((function(){var t,i,o,a={save:!1,skipNoChangesCheck:!0},l=e.getChanges();function r(){n.addControlBreak(n._currentViewImpl().modelColumns[n._getColumn(o.columnId).name],{isEnabled:o.isEnabled,order:parseFloat(o.sequenceField),direction:o.direction,nulls:o.nulls},a)}for(t=0;t<l.length;t++)i=l[t],o=i.record,i.inserted?r():i.updated?o.columnId!==o.oldColumnId?(n.deleteControlBreak(o.oldColumnId,a),r()):n.updateControlBreak(o.columnId,{isEnabled:o.isEnabled,order:parseFloat(o.sequenceField),direction:o.direction,nulls:o.nulls},a):i.deleted&&n.deleteControlBreak(o.columnId,a);n._setReportSettings({refreshModel:!0,refreshColumns:!0})}))}})},_addActions:function(n){var a=this,l=this.options.config;n.add([{name:"search-case-sensitive",labelKey:"APEX.IG.CASE_SENSITIVE",value:!1,get:function(){return a.searchCaseSensitive},set:function(e){a.searchCaseSensitive=e}},{name:"filter-column",labelKey:"APEX.IG.SELECT_COLUMNS_TO_SEARCH",get:function(){return a.currentFilterColumnId},set:function(e){a._setFilterColumn(e)}},{name:"search",labelKey:"APEX.IG.GO",getSearchValue:function(e){var t="";l.toolbar&&l.toolbar.searchField&&(t=a._tbFindElement("search_field").val()),e(t)},action:function(){this.getSearchValue((function(e){var t;e?(t=a.currentFilterColumnId?{type:C,columnType:C,columnId:a.currentFilterColumnId,operator:"C",value:e,isCaseSensitive:a.searchCaseSensitive}:{type:_,value:e,isCaseSensitive:a.searchCaseSensitive},a.addFilter(t)):a.refresh()}))}},{name:"change-report",labelKey:"APEX.IG.SAVED_REPORTS",hide:!0,choices:[],get:function(){return a._report()},set:function(e){a._ifNoChangesDo((function(t){t&&a.clearChanges(),a._report(e)}))}},{name:"change-view",labelKey:"APEX.IG.CHANGE_VIEW",choices:[],get:function(){return a._view()},set:function(e){a._view(e,{fetchData:!0})}},{name:"show-columns-dialog",labelKey:"APEX.IG.COLUMNS",icon:"icon-ig-select-cols",action:function(){return a._openDialog("columns"),!0}},{name:"show-filter-dialog",labelKey:"APEX.IG.FILTER",icon:"icon-ig-filter",hide:!0,action:function(){return a._openDialog(A),!0}},{name:"chart-view",labelKey:"APEX.IG.CHART",icon:"icon-ig-chart",hide:!a._isViewRegistered(b),action:function(){a._isViewRegistered(b)?(a.viewsImpl[b].isConfigured()&&a._view(b,{fetchData:!0}),a.viewsImpl[b].openDialog()):i.error("Chart view is not defined.")}},{name:"show-sort-dialog",labelKey:"APEX.IG.SORT",icon:"icon-ig-sort",action:function(){return a._openDialog("sort"),!0}},{name:"show-aggregate-dialog",labelKey:"APEX.IG.AGGREGATE",icon:"icon-ig-aggregate",action:function(){return a._openDialog(S),!0}},{name:"show-flashback-dialog",labelKey:"APEX.IG.FLASHBACK",icon:"icon-ig-flashback",hide:!0,action:function(){return a._openDialog(R),!0}},{name:"show-highlight-dialog",labelKey:"APEX.IG.HIGHLIGHT",icon:"icon-ig-highlight",hide:!0,action:function(){return a._openDialog(T),!0}},{name:"show-control-break-dialog",labelKey:"APEX.IG.CONTROL_BREAK",icon:"icon-ig-control-break",action:function(){return a._openDialog("controlBreak"),!0}},{name:"stretch-columns",labelKey:"APEX.IG.STRETCH_COLUMNS",hide:!0,get:function(){var e=a._view(),t=a._currentReportSettings().views[e];return t&&t.stretchColumns},set:function(e){var t=a._currentReportSettings(),i=a._view(),n=t.views[i];n&&(n.stretchColumns=e),a._setOperationUpdate(t),a._setReportSettings({changeIdentifier:"views.grid.columns"})}},{name:"change-rows-per-page",labelKey:"APEX.IG.ROWS_PER_PAGE",choices:[{labelKey:"APEX.IG.AUTO",value:"null"},{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100},{label:"1000",value:1e3}],get:function(){var e=a._currentReportSettings().rowsPerPage;return null===e?"null":e},set:function(e){var t=a._currentReportSettings();e="null"===e?null:parseInt(e,10),t.rowsPerPage=e,a._setOperationUpdate(t),a._setReportSettings({changeIdentifier:"rowsPerPage",refreshView:!0})}},{name:"save-report",labelKey:"APEX.IG.SAVE",icon:"icon-ig-save",action:function(){var e=a._currentReportSettings();a.updateReport(e.id,e)}},{name:"show-save-report-as-dialog",labelKey:"APEX.IG.SAVE_AS",icon:"icon-ig-save-as",action:function(){return a._openDialog("saveAsReport"),!0}},{name:"show-edit-report-dialog",labelKey:"APEX.IG.EDIT",icon:"icon-ig-edit",action:function(){return a._openDialog("editReport"),!0}},{name:"delete-report",labelKey:"APEX.IG.DELETE",icon:"icon-ig-delete",action:function(){s.confirm(j("DELETE_REPORT_CONFIRM"),(function(e){e&&a.deleteReport(a._report())}))}},{name:"show-download-dialog",labelKey:"APEX.IG.DOWNLOAD",icon:"icon-ig-download",hide:!0,action:function(){return a._openDialog("download"),!0}},{name:"show-help-dialog",labelKey:"APEX.IG.HELP",icon:"icon-ig-help",action:function(){var i=a.options.config;o.loadMessagesIfNeeded(["APEX.IG.HELP.ACTIONS.INTRO_HEADING","APEX.IG.HELP.ACTIONS.INTRO","APEX.IG.HELP.ACTIONS.REPORTING_HEADING","APEX.IG.HELP.ACTIONS.REPORTING","APEX.IG.HELP.ACTIONS.EDITING_HEADING","APEX.IG.HELP.ACTIONS.EDITING"],(function(){var n=t.htmlBuilder();function o(t,i){var n=e.extend({headingKey:"",helpText:"",helpTextKey:""},i);n.headingKey&&t.markup("<h2>").content(z(n.headingKey)).markup("</h2>"),n.helpText&&t.markup("<div").attr(M,"apex-help-custom").markup(">").markup(n.helpText).markup("</div>"),n.helpTextKey&&t.markup("<p>").markup(z(n.helpTextKey)).markup("</p>")}i.text.help&&o(n,{helpText:i.text.help}),o(n,{headingKey:"APEX.IG.HELP.ACTIONS.INTRO_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.INTRO"}),o(n,{headingKey:"APEX.IG.HELP.ACTIONS.REPORTING_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.REPORTING"}),i.editable&&o(n,{headingKey:"APEX.IG.HELP.ACTIONS.EDITING_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.EDITING"}),r.popupFieldHelp({title:j("HELP.ACTIONS_TITLE"),helpText:n.toString()})}))}},{name:"selection-mode",onLabelKey:"APEX.IG.SEL_MODE_CELL",offLabelKey:"APEX.IG.SEL_MODE_ROW",shortcut:"F8",hide:!0,get:function(){var e=a._currentViewImpl();return!e.view$||!e.supports.cellSelection||!e.selectCells()},set:function(e){var t=a._currentViewImpl();t.view$&&t.supports.cellSelection&&t.selectCells(!e)}},{name:"selection-duplicate",type:D,labelKey:"APEX.IG.DUPLICATE_ROWS",icon:"icon-ig-duplicate",hide:!0,action:function(){var e,t=a._currentViewImpl();if(t.supports.edit&&(e=t.getSelectedRecords()).length>0)return t.model.copyRecords(e,null,e[e.length-1]),!0}},{name:"selection-delete",labelKey:"APEX.IG.DELETE_ROWS",icon:"icon-ig-delete",hide:!0,action:function(){var e,t,i=a._currentViewImpl();if(i.supports.edit){for(t=i.getSelectedRecords(),e=0;e<t.length;e++)i.model.allowDelete(t[e])||(t.splice(e,1),e-=1);t.length>0&&i.model.deleteRecords(t)}}},{name:"selection-refresh",labelKey:"APEX.IG.REFRESH_ROWS",icon:"icon-ig-refresh",action:function(){var e,t=a._currentViewImpl();t.supports.edit&&(e=t.getSelectedRecords()).length>0&&t.model.fetchRecords(e)}},{name:"selection-revert",labelKey:"APEX.IG.REVERT_CHANGES",icon:"icon-ig-revert",hide:!0,action:function(){var e,t,i=a._currentViewImpl();if(i.supports.edit){for(t=i.getSelectedRecords(),e=0;e<t.length;e++)i.model.canRevertRecord(t[e])||(t.splice(e,1),e-=1);t.length>0&&(i.model.revertRecords(t),a._updateSelectionActions())}}},{name:"selection-copy",labelKey:"APEX.IG.COPY_CB",icon:"icon-ig-copy",action:function(){var e=a._currentViewImpl();e.canCopy2Clipboard()&&(e.focus(),apex.clipboard.copy())}},{name:"refresh",labelKey:"APEX.IG.REFRESH",icon:"icon-ig-refresh",action:function(){a.refresh()}},{name:"reset-report",labelKey:"APEX.IG.RESET",disabled:!0,icon:"icon-ig-reset",action:function(){a._resetReportSettings()}},{name:"edit",labelKey:"APEX.IG.EDIT",hide:!0,get:function(){return a.editMode},set:function(e){a._setEditMode(e)}},{name:"save",labelKey:"APEX.IG.SAVE",hide:!0,shortcut:"Ctrl+Alt+S",action:function(){var e,t=a.options.config,i=a.editableViewImpl.model.name;c.anyErrors(!1,i,!0)?s.alert(z("APEX.CORRECT_ERRORS"),(function(){})):a.editableViewImpl.finishEditing().done((function(){var n=null;void 0===t.saveLoadingIndicatorPosition&&void 0===t.saveLoadingIndicator||(n={loadingIndicatorPosition:t.saveLoadingIndicatorPosition||null,loadingIndicator:t.saveLoadingIndicator||null}),(e=c.save(null,n,i,!0))&&(e.done((function(e){var t,i,n="",o="";if(e.errors)s.clearErrors(),s.showErrors(e.errors),n="error";else if(e.regions){for(t=0;t<e.regions.length;t++)(i=e.regions[t]).fetchedData&&i.fetchedData.successMessage&&(o&&(o+="<br>"),o+=i.fetchedData.successMessage);o||(o=j("CHANGES_SAVED")),s.showPageSuccess(o),n="success"}a._selectionChange(null),a._trigger("save",null,{status:n})})).fail((function(e,t,i){a._trigger("save",null,{status:"fail"})})).always((function(){a.actions.enable("save")})),a.actions.disable("save"))}))}},{name:"selection-add-row",label:l.text.addRowButton,hide:!0,action:function(){var e=a._currentViewImpl(),t=e.getSelectedRecords();if(!e.supports.singleRowView||!e.singleRowMode)return e.focus(),e.model.insertNewRecord(null,t[t.length-1]),!0;a.getActions().invoke("insert-record")}},{name:"single-row-view",label:j("SINGLE_ROW_VIEW"),icon:"icon-ig-single-row-view",hide:!0,action:function(e,t){var i,n=null,o=a.editMode,l=a._currentViewImpl();if(l.supports.singleRowView&&l.singleRowView$&&l.singleRowView$.length&&!l.singleRowMode)return t&&(n=l.getContextRecord(t)[0]),n||(n=l.getSelectedRecords()[0]),o&&l.view$.grid("setEditMode",!1),l.singleRowMode=!0,l.view$.hide(),l.curInst=l.singleRowView$.recordView("instance"),a._updateSummary(),(i=a._tbFind("selection_submenu"))&&(i.disabled=!0),l.singleRowView$.show().recordView("resize"),n&&l.setSelectedRecords([n]),o?l.singleRowView$.recordView("setEditMode",!0):l.singleRowView$.recordView("focus"),!0}},{name:"row-add-row",label:j("ADD_ROW"),icon:"icon-ig-add-row",hide:!0,action:function(e,t){var i=a._currentViewImpl(),n=i.getContextRecord(t);return i.focus(),i.model.insertNewRecord(null,n[0]),!0}},{name:"row-duplicate",label:j("DUPLICATE_ROW"),icon:"icon-ig-duplicate",hide:!0,action:function(e,t){var i=a._currentViewImpl(),n=i.getContextRecord(t);return i.model.copyRecords(n,null,n[0]),!0}},{name:"row-delete",label:j("DELETE_ROW"),icon:"icon-ig-delete",hide:!0,action:function(e,t){var i=a._currentViewImpl(),n=i.getContextRecord(t);i.model.deleteRecords(n)}},{name:"row-refresh",label:j("REFRESH_ROW"),icon:"icon-ig-refresh",action:function(e,t){var i=a._currentViewImpl(),n=i.getContextRecord(t);i.model.fetchRecords(n)}},{name:"row-revert",label:j("REVERT_CHANGES"),icon:"icon-ig-revert",hide:!0,action:function(e,t){var i=a._currentViewImpl(),n=i.getContextRecord(t);i.focus(),i.model.revertRecords(n)}}])},_initToolbar:function(){var e,t=this.options.config.toolbarData,i=this;delete t.toolbarFind,delete t.toolbarRemove,delete t.toolbarInsertAfter,this.toolbar$=this._getElement("toolbar").toolbar({actionsContext:this.actions,data:t}),e=this._tbFindElement("actions_button_menu"),this._tbFindElement("column_filter_button").hide(),this._tbFindElement("search_field").hide(),this._tbFindElement("actions_button").hide(),this._currentReportSettings().defaultFilterColumn?this._setFilterColumn(this._currentReportSettings().defaultFilterColumn.columnId):this._setFilterColumn(null),e.on("menubeforeopen",(function(){var t;(t=e.menu("find","rows"))&&(t.hide="set"!==i.options.config.pagination.type)}))},_getId:function(e){return e?this.idPrefix+"_"+e:""},_getIdSelector:function(e){return"#"+this._getId(e)},_getElement:function(t){return e(this._getIdSelector(t))},_setEditMode:function(e){var t,i,n={},o=this._currentViewImpl(),a=!1,l=this,r=this.options.config.columns;function s(){o.setEditMode(l.editMode),e&&setTimeout((function(){o.focus()}),100)}if(this.editMode=e,e){for(t=0;t<r.length;t++)r[t].validation&&r[t].validation.isRequired&&(n[r[t].id]=r[t]);if(Object.keys(n).length>0){for(i=this._getCurrentView().columns,t=0;t<i.length;t++)n[i[t].columnId]&&!i[t].isVisible&&(i[t].isVisible=!0,this._setOperationUpdate(i[t]),a=!0);a&&this._setReportSettings({changeIdentifier:"views.grid.columns"},s)}}a||s()},_configureView:function(e){this.viewsImpl[e].isConfigured()&&this._view(e,{fetchData:!0}),this.viewsImpl[e].openDialog()},_getColumn:function(e){return this.columnMap[e]},_getColumnByName:function(e){var t,n=this.options.config.columns;for(t=0;t<n.length;t++)if(n[t].name===e)return n[t];i.warn("No column exists with name: ",e)},_getColumnByStaticId:function(e){var t,n=this.options.config.columns;for(t=0;t<n.length;t++)if(n[t].staticId===e)return n[t];i.warn("No column exists with static ID: ",e)},_getTextTransformClass:function(e){var t,i=e.filter.textCase;return i&&(t={lower:"u-textLower",upper:"u-textUpper"}[i.toLowerCase()]),t},_convertNamesToLabels:function(e){var t,i=this.options.config.columns,n={};for(t=0;t<i.length;t++)n[i[t].name]=i[t].heading.label;return e&&""!==e?e.replace(/(")(.*?)(")/g,(function(e,t,i){return'"'+n[i]+'"'})):e},_convertLabelsToNames:function(e){var t,i=this.options.config.columns,n={};for(t=0;t<i.length;t++)n[i[t].heading.label]=i[t].name;return e&&""!==e?e.replace(/(")(.*?)(")/g,(function(e,t,i){return'"'+n[i]+'"'})):e},_getColumnFormatMask:function(e){var t,n,o=this._getColumn(e).appearance.dateFormatMask;if(o&&""!==o){t=apex.jQuery.datepicker.parseDate("yymmdd","20160302");try{n=apex.jQuery.datepicker.parseDate(o,apex.jQuery.datepicker.formatDate(o,t)),apex.jQuery.datepicker.formatDate("yymmdd",t)!==apex.jQuery.datepicker.formatDate("yymmdd",n)&&(i.warn("Date format mask is unusable for a date picker - using default: ",o),o="yy-mm-dd")}catch(e){i.warn("Date format mask is unusable for a date picker - using default: ",o),o="yy-mm-dd"}}else i.warn("No date format mask exists for column - using default: ",e),o="yy-mm-dd";return o},_getColumnLabel:function(e){var t,n=this._getColumn(e);return n.isHidden?i.info("_getColumnLabel called on hidden column, check calling logic",e):t=n.heading.label,t},_isColumnFilterable:function(e){var t=this._getColumn(e);return!t.specialType&&t.filter&&!t.isHidden},_hasColumnFilterLov:function(e){var t=this._getColumn(e);return t.filter&&t.filter.hasLov},_getColumnType:function(e){this._getColumn(e);return C},_getCurrentView:function(){var e=this._view(),t=this.options,i=t.config.views,n=i[e].useModelFrom;return n&&i[n].shareModel&&(e=n),t.savedReports[this.currentSavedReportIdx].views[e]},_currentViewImpl:function(){return this.viewsImpl[this._view()]},_view:function(t,i){var n,o,a,l,r,s,d,c,u=this,h=this.options.config,g=this.actions,p=!1,m=!1,f=this._currentReportSettings(),_=!1,C=[],I=e.extend({initialData:null,fetchData:!1},i);if(!t)return f.currentView;if(r=this._currentViewImpl(),this.viewsImpl[t].isConfigured()){for(a in f.currentView=t,l=this._currentViewImpl(),s=h.views[t].features,d=l.supports,r&&r.view$&&r.hide(),l.view$?(l.show(),this._updateModelRegionData(l),l.pendingRefresh&&(l.pendingRefresh=!1,l.refresh()),this._setReportSettings({changeIdentifier:"view.change"})):(this._getElement(l.elementId).show(),l.view$=this._getElement(l.elementId),l.setColumnConfig({baseModelColumns:this.baseModelColumns,igConfig:h,ig:this,currentReportSettings:f}),I.viewImpl=l,this._setModel(I),I.viewImpl.supports.edit&&(this.editableViewImpl=I.viewImpl),l.initView({ig$:this.element,ig:this,igConfig:h,currentReportSettings:f}),this._setInitialSelection(0),_=!0),o=this._refreshReportSettings(),this._updateSummary(),C.push({labelKey:"APEX.IG.ALL_TEXT_COLUMNS",value:null}),l.modelColumns)if(l.modelColumns.hasOwnProperty(a)&&l.modelColumns[a].id&&this._isColumnFilterable(l.modelColumns[a].id)&&(p=!0,-1!==e.inArray(this._getColumn(l.modelColumns[a].id).filter.dataType,["VARCHAR2","CLOB"])))for(n=0;n<this._getColumn(l.modelColumns[a].id).filter.operators.length;n++)-1!==e.inArray(this._getColumn(l.modelColumns[a].id).filter.operators[n].name,["$perform$","C"])&&(m=!0,C.push({label:l.modelColumns[a].label,value:l.modelColumns[a].id}));h.filter.oracleText&&(m=!0),g.lookup("filter-column").choices=C,g.updateChoices("filter-column"),this._updateChangeViewActions(),this._toggleEnableAction(m,"search"),h.toolbar&&h.toolbar.searchField&&h.toolbar.columnSelection&&this._tbFindElement("column_filter_button").prop(E,!m),_||o||l.resize(),this._toggleEnableAction(h.editable&&d.edit,["edit","save","selection-add-row","selection-add-row","row-add-row","selection-duplicate","row-duplicate","selection-delete","row-delete","selection-revert","row-revert"]),this._toggleEnableAction(h.editable&&d.edit&&d.singleRowView,["insert-record","delete-record","revert-record","duplicate-record"]),this._toggleEnableAction(d.controlBreak&&s.controlBreak,"show-control-break-dialog"),this._toggleEnableAction(d.aggregation&&s.aggregate,"show-aggregate-dialog"),this._toggleEnableAction(d.highlight&&s.highlight,"show-highlight-dialog"),this._toggleEnableAction(d.changeRowsPerPage&&s.changeRowsPerPage,"change-rows-per-page"),this._toggleEnableAction(d.singleRowView&&s.singleRowView,["single-row-view","refresh-record"]),this._toggleShowAction(l.canCopy2Clipboard(),"selection-copy"),this._toggleShowAction(d.cellSelection,"selection-mode"),(c=this._tbFind("selection_submenu"))&&(c.disabled=!d.selection),this._toggleEnableAction(d.configurableColumns,["show-columns-dialog","stretch-columns"]),this._toggleEnableAction(d.filter&&h.features.filter,"show-filter-dialog"),p||this._toggleEnableAction(!1,"show-filter-dialog"),this._toggleEnableAction(d.sort,"show-sort-dialog"),this._toggleEnableAction(d.download&&h.features.download,"show-download-dialog"),this._trigger("viewChange",null,{view:t,created:_}),this._selectionChange(null),this._forEachView((function(e,i){i.viewChanged(e===t,u,h)}))}else this.viewsImpl[t].openDialog()},_destroyAllModels:function(){var e=this;this._forEachView((function(t,i){e._setModel({viewImpl:i,remove:!0}),i.view$&&(i.hide(),i.destroyView(e),i.view$=null)}))},_report:function(e){var t,i,n=this.options;if(!e)return this._currentReportSettings().id;for(this._destroyAllModels(),s.hidePageSuccess(),t=0;t<n.savedReports.length;t++)if(n.savedReports[t].id===e){this.currentSavedReportIdx=t;break}i=this._currentViewImpl(),this._forEachView((function(e,t){t.view$&&t.hide()})),i.view$||(i.view$=this._getElement(i.elementId)),this._updateSummary(),i.view$.show(),i.setColumnConfig({baseModelColumns:this.baseModelColumns,igConfig:n.config,currentReportSettings:this._currentReportSettings(),ig:this}),this.reportSettingsSeq+=1,this._setModel({viewImpl:i}),i.initView({ig$:this.element,ig:this,igConfig:n.config,currentReportSettings:this._currentReportSettings()}),this._updateActions(),this.editMode=!1,this.actions.update("edit"),this._updateChangeViewActions(),this._clearToolbarSearch(),this._trigger("viewChange",null,{view:i.internalIdentifier,created:!0}),this._refreshReportSettings(),this._updateModelRegionData(i),this.refresh(),this._trigger("reportChange",null,{report:this._report()})},_currentReportSettings:function(){return this.options.savedReports[this.currentSavedReportIdx]},_updateModelRegionData:function(e){var t=e.internalIdentifier,i=this.options.config.views,n=i[t].useModelFrom,o=e.model.getOption("regionData");o.reportId=this._report(),n&&i[n].shareModel&&(t=n),o.view=t},_updateSummary:function(){var e=this.getCurrentView(),t=e.title,i=this._currentReportSettings(),n=i.name;n||i.type!==w||(n=j("PRIMARY_REPORT")),e.supports.singleRowView&&e.singleRowMode&&(t+=" ("+z("SINGLE_ROW_VIEW")+")"),this._getElement("summary").text(o.formatMessage("APEX.IG.SUMMARY",n,t))},_shortenString:function(e,t){var i=t||20;return e.length>i?e.substr(0,i)+"...":e},_adjustControlBreakSort:function(){var t,i,n=[],o=this._getCurrentView().columns;for(t=0;t<o.length;t++)!o[t].sort||null===o[t].sort.order||o[t].break&&o[t].break.isEnabled||n.push({columnId:o[t].columnId,order:o[t].sort.order});for(n.sort((function(e,t){return e.order-t.order})),t=0;t<n.length;t++)for(i=0;i<o.length;i++)n[t].columnId===o[i].columnId&&e.extend(this._currentViewImpl().modelColumns[this._getColumn(o[i].columnId).name],{sortIndex:t+1})},_getSettingLabel:function(t,i){var n,a,l="APEX.IG.",r=["EQ","NEQ","GT","GTE","LT","LTE","LIKE","NLIKE","C","NC","REGEXP","S","NS","OTEXT"],s=["N","NN"],d=[H,"NBETWEEN"],c=["LAST","NLAST","NEXT","NNEXT"];function u(e,t){return e&&null!==e.match(/^\d{14}/)?apex.jQuery.timepicker.formatCanonicalDate(me(e),t):""}switch(t){case A:switch(i.type){case C:l+="X.",e.inArray(i.operator,r)>-1&&(l+=W[i.operator]+".Y",n=e.inArray(this._getColumn(i.columnId).filter.dataType,[F,U,"TIMESTAMP_TZ","TIMESTAMP_LTZ"])>-1?o.formatMessage(l,this._getColumnLabel(i.columnId),u(i.hiddenValue?i.hiddenValue:i.value,this._getColumnFormatMask(i.columnId))):o.formatMessage(l,this._getColumnLabel(i.columnId),i.value)),e.inArray(i.operator,[G,"NIN"])>-1&&(l+=W[i.operator]+".Y",n=o.formatMessage(l,this._getColumnLabel(i.columnId),i.value.split("").join("; "))),e.inArray(i.operator,s)>-1&&(l+=W[i.operator],n=o.formatMessage(l,this._getColumnLabel(i.columnId))),e.inArray(i.operator,d)>-1&&(l+=W[i.operator]+".Y.AND.Z",a=i.hiddenBetween||i.hiddenAnd?[i.hiddenBetween,i.hiddenAnd]:i.value.split("~"),n=e.inArray(this._getColumn(i.columnId).filter.dataType,[F,U,"TIMESTAMP_TZ","TIMESTAMP_LTZ"])>-1?o.formatMessage(l,this._getColumnLabel(i.columnId),u(a[0],this._getColumnFormatMask(i.columnId)),u(a[1],this._getColumnFormatMask(i.columnId))):o.formatMessage(l,this._getColumnLabel(i.columnId),a[0],a[1])),e.inArray(i.operator,c)>-1&&(2!==(a=i.value.split("~")).length&&(a=["","MI"]),"1"===a[0]?(l+=W[i.operator]+"_"+Q[a[1]],n=o.formatMessage(l,this._getColumnLabel(i.columnId))):(l+=W[i.operator]+".Y."+Q[a[1]]+"S",n=o.formatMessage(l,this._getColumnLabel(i.columnId),a[0])));break;case"complex":n=i.name;break;case _:l+="SEARCH_FOR.X",n=o.formatMessage(l,i.value)}break;case"controlBreak":n=this._getColumnLabel(i.columnId);break;case S:n=j(i.function)+" ("+this._getColumnLabel(i.columnId)+")";break;case T:n=this._shortenString(i.name?i.name:this._getColumnLabel(i.condition.columnId));break;case R:1===i.minsAgo?n=z(l+="REPORT_DATA_AS_OF_ONE_MINUTE_AGO"):(l+="REPORT_DATA_AS_OF.X.MINUTES_AGO",n=o.formatMessage(l,i.minsAgo))}return n},_getSettingSummaryLabel:function(e,t){var i,n="APEX.IG.";switch(e){case A:switch(t.type){case C:i=this._getColumnLabel(t.columnId);break;case"complex":i=this._shortenString(t.name);break;case _:i="'"+this._shortenString(t.value,18)+"'"}break;case"controlBreak":i=this._getColumnLabel(t.columnId);break;case T:i=this._shortenString(t.name?t.name:this._getColumnLabel(t.condition.columnId));break;case R:1===t.minsAgo?i=z(n+="ONE_MINUTE_AGO"):(n+="X.MINUTES_AGO",i=o.formatMessage(n,t.minsAgo));break;case S:i=this._shortenString(this._getColumnLabel(t.columnId))}return i},_getTotalReportSettings:function(){var e,t=0,i=this._getCurrentView(),n=this._currentReportSettings();switch(n.filters&&(t+=n.filters.length),n.flashback&&(t+=1),this._view()){case"grid":for(e=0;e<i.columns.length;e++)i.columns[e].break&&(t+=1);i.highlights&&(t+=i.highlights.length),i.aggregations&&(t+=i.aggregations.length);break;case b:i&&(t+=1)}return t},_renderReportSettings:function(t){var i,n=[],a=this,l=this._getCurrentView(),r=this._currentReportSettings(),s=this._getTotalReportSettings()>0;t.markup("<div").attr(M,"a-MediaBlock a-IG-controlsContainer").attr("id",this._getId("report_settings")),s||t.attr("style","display:none;"),t.markup(">"),t.markup("<div").attr(M,"a-MediaBlock-graphic").markup(">"),t.markup("<h3").attr(M,"u-VisuallyHidden").markup(">").content(j("REPORT_SETTINGS")).markup("</h3>"),Ae(t,{buttonClass:"a-Button a-IG-button a-IG-button--controls"}),t.markup("</div>"),function(t){function s(t,i){var n={},l=e.extend({type:"",id:"",active:!1,label:"",excludeToggle:!1,isInvalid:!1,linkStyle:""},i),r="a-IG-controls-item a-IG-controls-item--"+l.type;n.setting=l.type,n["setting-id"]=l.id,l.isInvalid&&(r+=" is-error"),t.markup("<li").attr(M,r).attr("role","group").attr("aria-labelledby","control_text"+l.id).markup(">"),t.markup("<span").attr(M,"a-IG-controls-cell").markup(">"),l.excludeToggle||(Te(t,{id:a._getId("control_"+l.id),cssClasses:"a-IG-controlsCheckbox",checked:l.active,data:n,disabled:l.isInvalid}),Se(t,{labelFor:a._getId("control_"+l.id),cssClasses:"a-IG-controlsCheckboxLabel",label:j("TOGGLE"),labelTextHidden:!0})),t.markup("</span>"),t.markup("<span").attr(M,"a-IG-controls-cell").markup(">").markup("<span").attr(M,"a-Icon a-IG-controlsIcon icon-ig-"+Ce(l.type)).markup(">").markup("</span>").markup("</span>"),t.markup("<span").attr(M,"a-IG-controls-cell a-IG-controls-cell--label").markup(">"),l.isInvalid?t.markup("<span").attr("id","control_text"+l.id).attr(M,"a-IG-controlsLabel").markup(">").markup(l.label).markup("</span>"):(t.markup("<a href='#'").attr(M,"a-IG-controlsLabel").attr("data-setting",l.type).attr("data-setting-id",l.id).optionalAttr("style",l.linkStyle).markup(">"),t.markup("<span").attr(M,"u-VisuallyHidden").markup(">").content(j("EDIT")).markup("</span>"),t.markup("<span").attr("id","control_text"+l.id).markup(">").markup(l.label).markup("</span>"),t.markup("</a>")),t.markup("</span>"),t.markup("<span").attr(M,"a-IG-controls-cell a-IG-controls-cell--remove").markup(">"),Ae(t,{buttonClass:"a-Button a-Button--noUI a-IG-button a-IG-button--remove",iconOnly:!0,icon:"icon-remove",label:o.formatMessage("APEX.IG.REMOVE_CONTROL",Z[l.type]),data:n}),t.markup("</span>"),t.markup("</li>")}if(t.markup("<div").attr(M,"a-MediaBlock-content").markup(">"),t.markup("<ul").attr(M,"a-IG-controls").markup(">"),r.views.chart&&a._view()===b&&s(t,{type:b,excludeToggle:!0,label:j("EDIT_CHART")}),r.filters)for(i=0;i<r.filters.length;i++)"d"!==r.filters[i].operation&&s(t,{type:A,id:r.filters[i].id,active:r.filters[i].isEnabled,label:a._getSettingLabel(A,r.filters[i]),isInvalid:r.filters[i].isInvalid});if(a._currentViewImpl().supports.controlBreak&&l){for(i=0;i<l.columns.length;i++)l.columns[i].break&&"d"!==l.columns[i].break.operation&&n.push(l.columns[i]);if(n.length>0)for(n.sort((function(e,t){var i=e.break.order,n=t.break.order;return i<n?-1:i>n?1:0})),i=0;i<n.length;i++)s(t,{type:"controlBreak",id:n[i].columnId,active:n[i].break.isEnabled,label:a._getSettingLabel("controlBreak",n[i])})}if(a._currentViewImpl().supports.highlight&&l.highlights)for(i=0;i<l.highlights.length;i++)"d"!==l.highlights[i].operation&&s(t,{type:T,id:l.highlights[i].id,active:l.highlights[i].isEnabled,label:a._getSettingLabel(T,l.highlights[i]),isInvalid:l.highlights[i].isInvalid,linkStyle:"background:"+l.highlights[i].backgroundColor+";color:"+l.highlights[i].textColor});if(a._currentViewImpl().supports.aggregation&&l.aggregations)for(i=0;i<l.aggregations.length;i++)"d"!==l.aggregations[i].operation&&s(t,{type:S,id:l.aggregations[i].id,active:l.aggregations[i].isEnabled,label:a._getSettingLabel(S,l.aggregations[i])});r.flashback&&"d"!==r.flashback.operation&&s(t,{type:R,active:r.flashback.isEnabled,label:a._getSettingLabel(R,r.flashback)}),t.markup("</ul></div>")}(t),function(t){var i=0,o=0;function d(e,t,n){var l,r,s,d="",u=[],h=!0;for(l=0;l<n.length;l++)"d"!==n[l].operation&&("controlBreak"===t?r=n[l].break.isEnabled:(r=n[l].isEnabled,s=n[l].isInvalid),s?o++:r?(u.push(l),h||(d+=", "),d+=a._getSettingSummaryLabel(t,n[l]),h=!1):i++);u.length>0&&c(e,{type:t,id:n[u[0]],count:u.length,label:d})}function c(t,i){var n=e.extend({type:"",id:"",count:0,label:""},i);t.markup("<li").attr(M,"a-IG-reportSummary-item a-IG-reportSummary-item--"+n.type).markup(">"),t.markup("<a href='#'").attr(M,"a-IG-reportSummary-label").attr("data-setting",n.type).optionalAttr("data-setting-id",n.id).markup(">"),t.markup("<span").attr(M,"a-IG-reportSummary-icon").markup(">"),t.markup("<span").attr(M,"a-Icon icon-ig-"+Ce(n.type)).markup("></span>"),(n.count>1||"inactiveSettings"===n.type||"invalidSettings"===n.type)&&t.markup("<span").attr(M,"a-IG-reportSummary-count").markup(">").content(n.count).markup("</span>"),t.markup("</span>"),t.markup("<span").attr(M,"a-IG-reportSummary-value").markup(">").content(n.label).markup("</span>"),t.markup("</a>")}t.markup("<div").attr(M,"a-IG-reportSummaryContainer"),"expanded"===r.reportSettingsArea&&t.attr("style","display:none;"),t.attr("id",a._getId("report_settings_summary")),s||t.attr("style","display:none;"),t.markup(">"),t.markup("<ul").attr(M,"a-IG-reportSummary").markup(">"),r.views.chart&&a._view()===b&&c(t,{type:b,label:j("EDIT_CHART")}),r.filters&&d(t,A,r.filters),n.length>0&&d(t,"controlBreak",n),l.highlights&&d(t,T,l.highlights),l.aggregations&&d(t,S,l.aggregations),r.flashback&&(r.flashback.isEnabled?c(t,{type:R,label:a._getSettingSummaryLabel(R,r.flashback)}):i++),i>0&&c(t,{type:"inactiveSettings",count:i,label:j(1===i?"INACTIVE_SETTING":"INACTIVE_SETTINGS")}),o>0&&c(t,{type:"invalidSettings",count:o,label:j(1===i?"INVALID_SETTING":"INVALID_SETTINGS")}),t.markup("</ul></div>")}(t),t.markup("</div>")},_initReportSettings:function(){var t=this,i=this.options.config.maxHeight,n=this._getElement("report_settings"),o=t._currentReportSettings();function a(e,i,a){if(o.reportSettingsArea===e){var l=n.data("apex-collapsible").controllingElement$.is(":focus");o.reportSettingsArea=i,t._setOperationUpdate(o),t._setReportSettings({},(function(){l&&t._getElement("report_settings").data("apex-collapsible").controllingElement$.focus()})),t._getElement("report_settings_summary")[a](),t.resize()}}this._getTotalReportSettings()>0&&(this._on(n,{"click a.a-IG-controlsLabel":function(t){var i=e(t.currentTarget);this._openDialog(i.data("setting"),{id:i.data("setting-id")+""}),t.preventDefault()},"click a.a-IG-reportSummary-label":function(t){var i=e(t.currentTarget),o=i.data("setting");"inactiveSettings"===o||"invalidSettings"===o?n.collapsible("expand"):this._openDialog(o,{id:i.data("setting-id")+""}),t.preventDefault()},"click input.a-IG-controlsCheckbox":function(t){var i=e(t.target),n=i.prop("checked"),o=i.data("setting"),a=i.data("setting-id")+"";switch(o){case A:this.updateFilter(a,{isEnabled:n});break;case S:this.updateAggregate(a,{isEnabled:n});break;case T:this.updateHighlight(a,{isEnabled:n});break;case"controlBreak":this.updateControlBreak(a,{isEnabled:n});break;case R:this.updateFlashback({isEnabled:n})}},"click button.a-IG-button--remove":function(t){var i=e(t.currentTarget),n=i.data("setting"),o=i.data("setting-id")+"";switch(t.preventDefault(),n){case A:this.deleteFilter(o);break;case S:this.deleteAggregate(o);break;case T:this.deleteHighlight(o);break;case"controlBreak":this.deleteControlBreak(o);break;case R:this.deleteFlashback();break;case b:this.deleteChart()}}}),n.collapsible({content:"div.a-MediaBlock-content",collapsed:"collapsed"===o.reportSettingsArea,collapse:function(){a("expanded","collapsed","show")},expand:function(){a("collapsed","expanded","hide")}}),i&&n.find(".a-Collapsible-content").css({"max-height":(i-(e(".a-IG-header",this.element).outerHeight()||0))/3+"px",overflow:"auto"}))},_isSettingsCheckboxFocused:function(t,i){var n;return!(!document.activeElement||"checkbox"!==document.activeElement.type)&&((n=e(document.activeElement).data()).setting===i&&""+n.settingId===t)},_focusOnSettingsCheckbox:function(e,t,i){var n;e&&(n=".a-IG-controlsCheckbox[data-setting="+i+"]",t&&(n+="[data-setting-id="+t+"]"),this._getElement("report_settings").find(n).focus())},_currentViewColumn:function(t,i){var n,o,a=this._getCurrentView().columns;for(n=0;n<a.length;n++)if(a[n].columnId===t){o=a[n];break}return e.isPlainObject(i)&&(o=e.extend(!0,o,i),this._setOperationUpdate(o)),o},_refreshReportSettings:function(){var e,i=this._getElement("report_settings"),n=t.htmlBuilder();return!(!i[0]||(e=i[0].clientHeight,this._renderReportSettings(n),i.replaceWith(n.toString()),this._initReportSettings(),e===this._getElement("report_settings")[0].clientHeight))&&(this.resize(),!0)},_defaultAjaxRegionData:function(t){var i=this.options.config,n=e.extend(!0,{id:i.regionId,ajaxIdentifier:i.ajaxIdentifier,ajaxColumns:i.ajaxColumns,reportId:this._report(),view:this._view()},t);return this._isCurrentlyEditable()&&(n.allowedOperations=i.editable.allowedOperations.protected),n},_call:function(e,t){var i=this.options.config,o={regions:[this._defaultAjaxRegionData(e)]};return i.parentRegionStaticId&&this.parentItemValues.length>0&&(o.regions[0].parentItems={values:this.parentItemValues}),i.loadingIndicator&&(t.loadingIndicator=i.loadingIndicator),(i.callServer||n.plugin)(o,t)},_setReportSettings:function(t,i){function n(e){var t;for(t=0;t<e.length;t++)e[t].operation||(e.splice(t,1),t-=1)}var o,a,l={},r=this.options.config,d=this,c=e.extend({refreshView:!1,refreshModel:!1,affectsOtherViewsModels:!1,refreshColumns:!1,changeIdentifier:""},t);return(o=e.extend(!0,{},this._currentReportSettings())).filters&&o.filters.length>0&&n(o.filters),r.views.grid&&n(o.views.grid.columns),r.views.icon&&n(o.views.icon.columns),r.views.detail&&n(o.views.detail.columns),r.features.saveReport&&r.features.saveReport.publicReportCs&&(l.publicReportCs=r.features.saveReport.publicReportCs),a={success:function(e){var t,n=d._defaultSavedReport(e.regions[0].setReportSettings[0]);s.hidePageSuccess(),d._view()!==n.currentView&&d._view(n.currentView,{fetchData:!0}),d.options.savedReports[d.currentSavedReportIdx]=n,d._updateChangeReportAction(),d._updateChangeViewActions(),d._updateReportSettingsActions(),d._refreshReportSettings(),t=d._currentViewImpl(),d._updateModelRegionData(t),n=d._currentReportSettings(),d._forEachView((function(e,t){t.setReportOptions(d,e===n.currentView,n,c.changeIdentifier),t.supports.highlight&&"views.grid.highlights"!==c.changeIdentifier&&t.setReportOptions(d,e===n.currentView,n,"views.grid.highlights")})),c.refreshColumns&&t.refreshColumns(),c.refreshView?t.refresh():c.refreshModel&&(d.reportSettingsSeq+=1,c.affectsOtherViewsModels?d._forEachView((function(e,t){t.model&&t.clearModelData()})):t.clearModelData()),i&&i(),d._trigger("reportSettingsChange",null,{report:n.id})}},"view.change"===c.changeIdentifier&&(a.queue={name:"set.report.settings.replace",action:"replace"}),e.extend(l,{setReportSettings:[o]}),this._call(l,a)},_downloadReport:function(t){var o,a,r=this.options.config,d=this;o={pageItems:r.itemsToSubmit,regions:[{id:r.regionId,ajaxIdentifier:r.ajaxIdentifier,ajaxColumns:r.ajaxColumns,reportId:this._report(),view:this._view(),download:e.extend({downloadCs:r.features.download.downloadCs},t)}],salt:$v("pSalt")},(a=l(r.regionStaticId).getParentItems())&&(o.regions[0].parentItems=a),t.email?n.plugin(o,{dataType:p,loadingIndicator:d.element,loadingIndicatorPosition:"centered",success:function(e){s.showPageSuccess(j("EMAIL_SENT"))}}):n.plugin(o,{loadingIndicator:d.element,loadingIndicatorPosition:"centered",success:function(e){var t;s.showPageSuccess(j("FILE_PREPARED")),t=n.ajaxUrl({regions:[{id:r.regionId,reportId:d._report(),ajaxIdentifier:r.ajaxIdentifier,downloadFileId:e.regions[0].download.id}],salt:$v("pSalt")}),i.info("Calling URL to get file:",t),i.info("URL length:",t.length),window.open(t)}})},_saveReport:function(e,t){var n,o={},a=this,l=this.options.config;if(l.features.saveReport)return o.saveReport=e,l.features.saveReport.publicReportCs&&(o.publicReportCs=l.features.saveReport.publicReportCs),this._call(o,{success:function(e){switch(a.options.savedReports=a._defaultSavedReports({reports:e.regions[0].savedReports}),a._updateChangeReportAction(),a._updateReportSettingsActions(),a._refreshReportSettings(),a._updateModelRegionData(a._currentViewImpl()),t){case"i":case"u":switch(a._currentReportSettings().type){case w:n=j("REPORT.SAVED.DEFAULT");break;case"alternative":n=j("REPORT.SAVED.ALTERNATIVE");break;case"private":n=j("REPORT.SAVED.PRIVATE");break;case"public":n=j("REPORT.SAVED.PUBLIC")}break;case"d":n=j("REPORT.DELETED")}s.showPageSuccess(n),"d"===t&&a.refresh()}});i.warn("Unable to save report settings because the configuration disallows it.")},_getFilterValues:function(t,i,n){var o=this;return this._call({getFilterValues:{columnId:t,columnType:C,respectFilters:i}},{success:function(t){e.isFunction(n)&&n.call(o,t)}})},_updateChangeReportAction:function(){var e,t,i,n,o=[],a=this.options.config,l=this.options.savedReports,r=this.actions;if(l.length>1){for(e=0;e<l.length;e++){switch(n=(t=l[e]).name,t.type){case w:i="APEX.IG.SAVED_REPORT_DEFAULT",t.name||(n=j("PRIMARY_REPORT"));break;case"alternative":i="APEX.IG.SAVED_REPORT_DEFAULT";break;case"private":i="APEX.IG.SAVED_REPORT_PRIVATE";break;case"public":i="APEX.IG.SAVED_REPORT_PUBLIC"}o.push({group:z(i),label:n,value:t.id})}this.actions.lookup("change-report").hide=!(!a.toolbar||a.toolbar&&a.toolbar.savedReports)}else this.actions.lookup("change-report").hide=!0;this.actions.update("change-report"),r.lookup("change-report").choices=o,r.updateChoices("change-report")},_updateAction:function(e,t){this.actions.lookup(t)&&this.actions[e](t)},_toggleEnableAction:function(e,t){this._toggleAction("enable",e,t)},_toggleShowAction:function(e,t){this._toggleAction("show",e,t)},_toggleAction:function(t,i,n){var o,a=this;switch(t){case"show":o=i?"show":"hide";break;case"enable":o=i?"enable":"disable"}e.isArray(n)?e.each(n,(function(){a._updateAction(o,this)})):this._updateAction(o,n)},_updateToolbarElements:function(){var e=this.options.config.toolbar;e&&(e.searchField&&(e.columnSelection&&this._tbFindElement("column_filter_button").show(),this._tbFindElement("search_field").show()),e.actionMenu&&this._tbFindElement("actions_button").show())},_updateActions:function(){var e=this,t=this.options.config,i=t.features,n=!1,o=!1,a=!1,l=this._isCurrentlyEditable(),r=t.editable.allowedOperations,s=l&&r.create,d=l&&r[I],c=l&&(r.update||r[I]),u=t.toolbar,h=l&&(r.update||r.create)&&(!u||u&&u.editing),g=l&&(r.create||r.update||r[I])&&(!u||u&&u.save),p=!u||u&&u.searchField,m=!u||u&&u.reset,f="set"===t.pagination.type;i.saveReport&&this._updateChangeReportAction(),this._toggleShowAction(i.filter,"show-filter-dialog"),this._toggleShowAction(i.download,"show-download-dialog"),this._toggleShowAction(i.flashback,"show-flashback-dialog"),this._updateReportSettingsActions(),this._toggleShowAction(s,["selection-add-row","row-add-row","selection-duplicate","row-duplicate"]),this._toggleShowAction(d,["selection-delete","row-delete"]),this._toggleShowAction(c,["selection-revert","row-revert"]),this._toggleShowAction(h,"edit"),this._toggleShowAction(g,"save"),this._toggleShowAction(p,"search"),this._toggleShowAction(m,"reset-report"),this._forEachView((function(i,r){var c=t.views[i].features;r.supports.singleRowView&&c.singleRowView&&(n=!0),r.supports.highlight&&c.highlight&&(o=!0),r.supports.configurableColumns&&null===c.stretchColumns&&!1!==c.gridView&&(a=!0),r.updateActions({ig:e,editable:l,canDelete:d,canCreate:s,canEdit:h})})),this._toggleShowAction(n,["single-row-view","refresh-record"]),this._toggleShowAction(s&&n,["insert-record","duplicate-record"]),this._toggleShowAction(d&&n,["delete-record"]),this._toggleShowAction(c&&n,["revert-record"]),this._toggleShowAction(o,"show-highlight-dialog"),this._toggleShowAction(f,"change-rows-per-page"),this._toggleShowAction(a,"stretch-columns")},_updateReportSettingsActions:function(){var e=this._currentReportSettings(),t=this.options.config.features.saveReport,i=!e.isReadOnly;this._toggleEnableAction(t&&i&&e.baseReportId,"save-report"),this._toggleEnableAction(t,"show-save-report-as-dialog"),this._toggleEnableAction(t&&i,"show-edit-report-dialog"),this._toggleEnableAction(t&&i&&e.type!==w,"delete-report"),this._toggleEnableAction(e.baseReportId,"reset-report")},_updateChangeViewActions:function(){var e=[],t=this.actions;this._forEachView((function(t,i){i.isConfigured()&&e.push({label:i.title,value:t,icon:i.icon})})),this._toggleShowAction(e.length>1,"change-view"),t.lookup("change-view").choices=e,t.updateChoices("change-view")},_updateSelectionActions:function(){var e,t,i,n,o=this.options.config,a=this._currentViewImpl(),l=o.editable&&a.supports.edit;a.singleRowMode||(a.selectCells&&a.selectCells()?(n=a.view$.grid("getSelectedRange").recordIds.length,this._toggleEnableAction(!1,["selection-refresh"]),this._toggleEnableAction(0!==n,["selection-copy"]),l&&(this._toggleEnableAction(this._isCurrentlyEditable()&&0!==n,["selection-fill","selection-clear","selection-revert"]),this._toggleEnableAction(!1,["selection-duplicate","selection-delete","selection-revert","row-delete"]),this._toggleEnableAction(n>=2,["selection-copy-down"]))):(n=(e=a.getSelectedRecords())?e.length:0,this._toggleEnableAction(0!==n,["selection-refresh","selection-copy"]),l&&(this._toggleEnableAction(this._isCurrentlyEditable()&&0!==n,["selection-duplicate","selection-delete","selection-revert","selection-fill","selection-clear"]),o.editable.allowedOperations[I]&&(t=e.some((function(e){return a.model.allowDelete(e)})),this._toggleEnableAction(t,["row-delete","selection-delete","selection-fill","selection-clear"])),i=e.some((function(e){return a.model.canRevertRecord(e)})),this._toggleEnableAction(i,["row-revert","selection-revert"]),this._toggleEnableAction(n>=2,["selection-copy-down"]))))},_setFilterColumn:function(e){var t;this.currentFilterColumnId=e,t=e?o.formatMessage("APEX.IG.SEARCH.COLUMN",this._getColumn(e).heading.label):this.options.config.filter.oracleText?j("SEARCH.ORACLE_TEXT"):j("SEARCH.ALL_COLUMNS"),this._tbFindElement("search_field").attr({placeholder:t,title:t})},_defaultIGConfig:function(){var t,i,n=this.options.config;if(n.filter.maxRowCount&&(n.text.moreDataFound=o.formatMessage("APEX.IG.MORE_DATA_FOUND",n.filter.maxRowCount)),n.columnGroups.length>0)for(t=0;t<n.columnGroups.length;t++)(i=n.columnGroups[t]).label||(i.label=i.heading);n.editable&&(n.editable=e.extend(!0,{allowedOperations:{create:!0,update:!0,delete:!0,protected:""},autoAddRow:!0},n.editable),n.editable.allowedOperations.create||(n.editable.autoAddRow=!1)),n.features.download&&(n.features.download=e.extend({formats:[],email:!0},n.features.download)),n.views.icon&&(n.views.icon=e.extend(!0,{disabled:!1,labelColumn:"",features:{sort:!0,highlight:!0,rowSelector:{multiSelect:!0,selectAll:!1,hideControl:!1}}},n.views.icon)),n.views.detail&&(n.views.detail=e.extend(!0,{disabled:!1,beforeRows:"",row:"",afterRows:"",features:{sort:!0,controlBreak:!0}},n.views.detail))},_defaultColumns:function(){var t,i,n=this.options.config.columns;for(t=0;t<n.length;t++)(i=e.extend(!0,{id:"",name:"",staticId:"",dataType:"VARCHAR2",specialType:"",isHidden:!1,isReadOnly:!0,heading:{heading:"",label:"",alignment:"center"},layout:{columnAlignment:"start",groupId:"",useGroupFor:"both"},appearance:{columnCssClasses:"",formatExample:""},validation:{isRequired:!1,restrictedCharacters:""},link:{text:"",attributes:""},filter:{operators:[{name:"$std$"},{name:"$perform$"}],dateRanges:"all",isRequired:!1,hasLov:!0,dataType:"VARCHAR2"},accessibility:{usedAsRowHeader:!1},features:{canHide:!0,highlight:!0,compute:!0,sort:!0,controlBreak:!0,aggregate:!0,groupBy:!0},isPrimaryKey:!1,parentColumnName:"",default:{value:"",duplicate:!0},escape:!0,helpid:""},n[t])).heading.label||(i.heading.label=i.heading.heading),"VARCHAR2"!==i.filter.dataType||i.filter.textCase||(i.filter.textCase="MIXED"),n[t]=i},_createBaseColumnMap:function(){var e,t,i,n=this.options.config.columns,o=0;for(e=0;e<n.length;e++)t=n[e],i=this.baseModelColumns[t.id]={index:e-o,hidden:t.isHidden,readonly:t.isReadOnly,escape:t.escape,id:t.id,dataType:t.dataType},t.isHidden?i.canHide=!1:(i.heading=t.heading.heading,i.headingAlignment=t.heading.alignment,i.label=t.heading.label,i.alignment=t.layout.columnAlignment,t.appearance.formatMask&&(i.formatMask=t.appearance.formatMask)),t.parentColumnName&&(i.parentField=t.parentColumnName,this.parentColumnNames.push(t.parentColumnName)),this.columnMap[t.id]=t,t.isPrimaryKey&&this.primaryKeyColumns.push(t.name),"actions"===t.specialType&&(o+=1);this.baseModelColumns[k]={index:e-o,seq:e,hidden:!0,canHide:!1}},_defaultSavedReport:function(t){var n,o,a,l,r,s,d,c=this,u=this.options.config,h=u.views;function g(t,i){var n,o,a,l={};if(i){for(n=0;n<t.length;n++)l[t[n].columnId]=1;for(n=0;n<u.columns.length;n++)l[(o=u.columns[n]).id]||t.push({columnId:o.id,operation:"i",isVisible:!1})}for(n=0;n<t.length;n++)(a=e.extend({seq:null,columnType:C,columnId:"",isVisible:!0,isFrozen:!1,width:null,priority:null,break:!1,sort:!1},t[n])).seq=n+1,a.break&&(a.break=e.extend({order:null,isEnabled:!0,direction:N,nulls:L},a.break)),a.sort&&(a.sort=e.extend({order:null,direction:N,nulls:L},a.sort)),c._getColumn(a.columnId)?t[n]=a:(t.splice(n,1),n-=1)}if(!h[(o=e.extend(!0,{id:"",baseReportId:"",name:"",isCurrent:!1,type:w,isReadOnly:!0,authorizationId:"",rowsPerPage:null,showRowNumbers:!1,reportSettingsArea:"collapsed",defaultFilterColumn:!1,flashback:!1,versionNumber:"",filters:[],currentView:"grid",views:{grid:!1,chart:!1,icon:!1,detail:!1}},t)).currentView]||h[o.currentView].disabled){for(n in o.currentView=null,h)if(h.hasOwnProperty(n)&&h[n]&&!h[n].disabled){o.currentView=n;break}this.options.data=null,u.lazyLoading=!0,i.warn("Current view not available. Using view %s. Forcing lazy load.",o.currentView)}for(o.flashback&&(o.flashback=e.extend({minsAgo:null,isEnabled:!0},o.flashback)),n=0;n<o.filters.length;n++)(a=e.extend(!0,{id:"",type:_,isCaseSensitive:!1,value:"",isEnabled:!0},o.filters[n])).columnId&&!a.columnType&&(a.columnType=C),a.type!==C||this._getColumn(a.columnId)?o.filters[n]=a:(o.filters.splice(n,1),n-=1);if(o.views.grid||h.grid){for(o.views.grid=e.extend(!0,{editMode:!1,singleRowView:{excludeNullValues:!1,onlyDisplayColumns:!0},columns:[],aggregations:[],highlights:[],initialBreakState:"collapsed",stretchColumns:!0},o.views.grid),g(o.views.grid.columns,!0),n=0;n<o.views.grid.aggregations.length;n++)(l=e.extend({id:"",function:"",columnType:C,columnId:"",tooltip:"",showGrandTotal:!0,isEnabled:!0},o.views.grid.aggregations[n])).label||(l.label=l.function),this._getColumn(l.columnId)?o.views.grid.aggregations[n]=l:(o.views.grid.aggregations.splice(n,1),n-=1);for(n=0;n<o.views.grid.highlights.length;n++)(r=e.extend(!0,{id:"",name:"",type:_,columnType:C,columnId:"",backgroundColor:"",textColor:"",condition:{type:C,columnType:C,columnId:"",operator:"",isCaseSensitive:!1,value:"",expression:""},isEnabled:!0},o.views.grid.highlights[n])).type===C&&!this._getColumn(r.columnId)||r.condition.type===C&&!this._getColumn(r.condition.columnId)?(o.views.grid.highlights.splice(n,1),n-=1):o.views.grid.highlights[n]=r}if((o.views.icon||h.icon)&&(o.views.icon=e.extend(!0,{columns:[],initialBreakState:"collapsed"},o.views.icon),g(o.views.icon.columns)),(o.views.detail||h.detail)&&(o.views.detail=e.extend(!0,{columns:[],initialBreakState:"collapsed"},o.views.detail),g(o.views.detail.columns)),o.views.chart)for(s in o.views.chart=e.extend(!0,{type:B,orientation:"vertical",stack:q},o.views.chart),o.views.chart.axis&&(o.views.chart.axis=e.extend({label:"",value:"",valueDecimalPlaces:""},o.views.chart.axis)),o.views.chart.chartColumns)o.views.chart.chartColumns.hasOwnProperty(s)&&(d=o.views.chart.chartColumns[s],(d=e.extend({columnType:C},d)).sort&&(d.sort=e.extend({order:null,direction:N,nulls:L},d.sort)),o.views.chart.chartColumns[s]=d);return o},_defaultSavedReports:function(t){var i,n=!1,o=e.extend({reports:this.options.savedReports},t);for(i=0;i<o.reports.length;i++)o.reports[i]=this._defaultSavedReport(o.reports[i]),o.reports[i].isCurrent&&(n=!0,this.currentSavedReportIdx=i);return n||(this.currentSavedReportIdx=0),o.reports},_renderColumnHeaderMenu:function(t,i,n,o){function a(t,i){var n=e.extend(!0,{buttonClass:"a-IRR-button a-IRR-sortWidget-button",label:"",iconOnly:!0,icon:"",isToggle:!1,toggleState:null,attributes:{},data:{}},i);t.markup("<li").attr(M,"a-IRR-sortWidget-actions-item").markup(">"),n.isToggle&&(n.attributes["aria-pressed"]=n.toggleState,n.toggleState&&(n.buttonClass+=" is-active"),delete n.isToggle,delete n.toggleState),Ae(t,n),t.markup("</li>")}var l,r,s,d=!1,c=this._getId("column_header_search"),u=this._getColumn(o),h=this._currentReportSettings().views.grid.columns,g=0;for(t.markup("<ul").attr(M,"a-IRR-sortWidget-actions").markup(">"),u.features.controlBreak&&a(t,{label:j("CONTROL_BREAK"),icon:"icon-ig-control-break",data:{option:"break"}}),u.features.aggregate&&a(t,{label:j("AGGREGATE"),icon:"icon-ig-aggregate",data:{option:"aggregate"}}),l=0;l<h.length;l++)if(h[l].columnId===o){d=h[l].isFrozen;break}for(l=0;l<h.length;l++)h[l].isVisible&&!this._getColumn(h[l].columnId).isHidden&&h[l].seq>g&&(g=h[l].seq),h[l].columnId===o&&(s=h[l].seq);s<g&&a(t,{label:j(d?"UNFREEZE":"FREEZE"),icon:"icon-ig-frozen-column",isToggle:!0,toggleState:d,data:{option:"freeze"}}),u.features.canHide&&a(t,{label:j("HIDE"),icon:"icon-ig-remove-col",data:{option:"hide"}}),u.helpid&&a(t,{label:j("HELP"),icon:"icon-ig-help",data:{option:"help"}}),t.markup("</ul>"),i&&(t.markup("<div").attr(M,"a-IRR-sortWidget-search").markup(">"),Se(t,{labelFor:c,cssClasses:"a-IRR-sortWidget-searchLabel",label:j("SEARCH"),labelTextHidden:!0}),u.filter.textCase&&(r=this._getTextTransformClass(u)),ve(t,{id:c,cssClasses:"a-IRR-sortWidget-searchField"+(r?" "+r:""),placeholder:j("FILTER_WITH_DOTS")}),n&&(t.markup("<div").attr(M,"a-IRR-sortWidget-rows").attr("id",this._getId("column_header_menu_rows")).markup(">"),t.markup("</div>")),t.markup("</div>"))},_setOperationUpdate:function(e){e.operation&&"i"===e.operation||(e.operation="u")},_renderIG:function(){var e=this,i=this.element,n=t.htmlBuilder(),o=this.options.config,a=this._getId("summary");o.toolbar&&n.markup("<div").attr(M,"a-IG-header").markup("><div").attr("id",this._getId("toolbar")).markup(">").markup("</div></div>"),n.markup("<div").attr(M,"a-IG-body").markup(">"),o.reportSettingsArea&&this._renderReportSettings(n),n.markup("<div class='u-vh'").attr("id",a).markup("></div><div").attr(M,"a-IG-contentContainer").attr("id",this._getId("content_container")).markup(">"),this._forEachView((function(t,i){n.markup("<div").attr("id",e._getId(i.elementId)).attr(M,i.cssClass).attr("aria-labelledby",a).markup(" style='display:none'></div>")})),n.markup("</div></div>"),i.append(n.toString()),o.reportSettingsArea&&this._initReportSettings()},_resetReportSettings:function(){var e=this;this._ifNoChangesDo((function(t){if(e._currentReportSettings().baseReportId)return e._call({resetReportSettings:[e._report()]},{success:function(i){var n=e._defaultSavedReport(i.regions[0].resetReportSettings[0]);e.options.savedReports[e.currentSavedReportIdx]=n,t&&e.clearChanges(),e._report(n.id),e._updateChangeReportAction()}})}))},_openDialog:function(e,t){var i,n=this;function o(e){var t=e+"Dialog$",i="_render"+e.substr(0,1).toUpperCase()+e.substr(1)+"Dialog";return n[t]||n[i](),n[t]}function a(e,t){var i=o(e);t&&i.dialog(v,"id",t),i.dialog("open")}switch(t=t||{},e){case"columns":case A:case"sort":case T:case"controlBreak":a(e,t.id);break;case S:o(e).dialog(v,{id:t.id,columnId:t.columnId}).dialog("open");break;case R:Ve({labelKey:"APEX.IG.MINUTES_AGO",titleKey:"APEX.IG.FLASHBACK",okLabelKey:"APEX.DIALOG.SAVE",helpKey:"APEX.IG.HELP.FLASHBACK",helpTitleKey:"APEX.IG.HELP.FLASHBACK_TITLE",value:i=(i=n._currentReportSettings().flashback)?i.minsAgo:5},(function(e){!1!==e&&n.updateFlashback({isEnabled:!0,minsAgo:parseInt(e,10)})}));break;case b:this.viewsImpl[b].openDialog();break;case"editReport":o("reportSettings").dialog(v,"saveAs",!1).dialog("open");break;case"saveAsReport":o("reportSettings").dialog(v,"saveAs",!0).dialog("open");break;case"download":a(e)}},_setModel:function(t){var i,n,o,a,l,r,s,d,u,h,g,p=!1,m=!1,f=!1,_=this.options.config,C=_.pagination.showTotalRowCount,E=t.viewImpl,v=E.internalIdentifier,b=_.views[v];E.model&&(c.release(E.modelName),E.modelName=null,E.model=null),t.remove||(b.useModelFrom&&_.views[b.useModelFrom].shareModel?d=(h=(u=this.getViews(b.useModelFrom)).internalIdentifier)+"_shared":(u=E,h=v,d=b.shareModel?h+"_shared":h),(g=this._isCurrentlyEditable()&&u.supports.edit)&&(p=_.editable.allowedOperations.create,m=_.editable.allowedOperations.update,f=_.editable.allowedOperations[I]),_.parentRegionStaticId&&null===_.modelInstanceId&&(g=!1),s=_.modelInstanceId?[_.regionStaticId+"_"+d,_.modelInstanceId]:_.regionStaticId+"_"+d,E.modelName=s,E.model=c.get(s),E.model||(u.supports.totalRows||(C=!1),(i=e.extend({},_.defaultModelOptions,{recordIsArray:!0,hasTotalRecords:C,regionId:_.regionId,regionStaticId:_.regionStaticId,ajaxIdentifier:_.ajaxIdentifier,pageItemsToSubmit:_.itemsToSubmit,parentRecordId:this.parentRecordId,fields:E.modelColumns,editable:g,saveSelection:g&&_.submitSelectedRows,paginationType:"progressive",regionData:{reportId:this._report(),view:h,ajaxColumns:_.ajaxColumns}})).types||(i.types={default:{operations:{canAdd:p,canEdit:m,canDelete:f}}}),e.each(["identityField","metaField","typeField","sequenceField"],(function(e,t){E.specialColumns[t]&&(i[t]=E.specialColumns[t])})),_.parentRegionStaticId&&(this.parentModel?i.parentModel=this.parentModel:(n=e("#"+_.parentRegionStaticId+"_ig"),i.parentModel=_.parentRegionStaticId+"_"+n.interactiveGrid("getCurrentViewId"))),g&&(i.regionData.allowedOperations=_.editable.allowedOperations.protected),t.initialData?(o=t.initialData.values,a=C?t.initialData.totalRows:null,l=t.initialData.moreData,r=t.initialData.dataOverflow,E.model=c.create(s,i,o,a,l,r)):t.fetchData?E.model=c.create(s,i):E.model=c.create(s,i,[],0),this.modelReportSettingsSeq[s]=this.reportSettingsSeq),this._trigger("viewModelCreate",null,{viewId:v,model:E.model}),t.updateComponent&&(this.reportSettingsSeq>this.modelReportSettingsSeq[s]&&(this._updateModelRegionData(E),E.clearModelData()),E.setModelName(E.modelName,E.modelColumns)))},_anyChanges:function(){var e=this.editableViewImpl;return!!(e&&this._isCurrentlyEditable()&&e.model&&c.anyChanges(!1,e.model.name,!0))},_ifNoChangesDo:function(e,t){var i=this,n=this._anyChanges();t||(t=e,e=!1),n?e||setTimeout((function(){s.confirm(j("UNSAVED_CHANGES_CONTINUE_CONFIRM"),(function(e){e?(i._setEditMode(!1),t(n)):i._refreshReportSettings()}))}),1):t(n)},_clearToolbarSearch:function(){var e=this.options.config;e.toolbar&&e.toolbar.searchField&&e.toolbarData&&this._tbFindElement("search_field").val("")},_tbFind:function(e){var t=null,i=this.getToolbar();return i&&(t=i.toolbar("find",e)),t},_tbFindElement:function(t){var i=this.getToolbar();return i?i.toolbar("findElement",t):e()},resize:function(){var t,i,n,o,a=this.options.config,l=0,r=0,s=this.element,d=s.width(),c=this._currentViewImpl(),u=e(".a-IG-contentContainer",s).children().addBack();this.ignoreResizeHandler=!0,u.width(d),a.maxHeight&&(t=s.height(),n=e(".a-IG-header",s),o=e(".a-IG-controlsContainer",s),n.filter(":visible").length>0&&(l=n.outerHeight()),o.filter(":visible").length>0&&(r=o.outerHeight()),i=t-(l+r),u.height(i)),e.apex.stickyWidget&&s.find(".a-IG-header.js-stickyWidget-toggle").stickyWidget("refresh"),c&&c.view$&&c.resize(),this.ignoreResizeHandler=!1},refresh:function(){var e=this;this._ifNoChangesDo((function(){e._forEachView((function(e,t){t.model&&t.clearModelData()}))}))},clearChanges:function(){var e;this.editableViewImpl&&(e=this.editableViewImpl.model)&&e.isChanged()&&e.clearChanges()},setMasterRecord:function(e,t){this.options.config.parentRegionStaticId?(this.parentModel=e.modelId(),t?this._setModelInstance(e.getRecordId(t),e,t):this._setModelInstance(null)):i.warn("No master region defined.")},gotoCell:function(e,t,i){var n;this._view()!==this.editableView&&this._view(this.editableView),n=this._currentViewImpl(),e&&this._setModelInstance(e),n.gotoCell&&n.gotoCell(t,i)},getActions:function(){return this.actions},getToolbar:function(){return this.toolbar$},getSelectedRecords:function(){var e=this._currentViewImpl();return e.supports.selection?e.getSelectedRecords():null},setSelectedRecords:function(e,t,i){var n,o,a,l,r=this._currentViewImpl();if(r.supports.selection){if(e.length&&"string"==typeof e[0])for(l=r.model,o=e,e=[],n=0;n<o.length;n++)(a=l.getRecord(o[n]))&&e.push(a);r.setSelectedRecords(e,t,i)}},getReports:function(e){var t,n=this.options.savedReports;if(!e)return n;for(t=0;t<n.length;t++)if(n[t].id===e)return n[t];i.warn("No report exists with ID: ",e)},addReport:function(t,n){var o=e.extend(t,{operation:"i",isEnabled:!0}),a=e.extend({save:!0},n);this.options.config.features.saveReport?(this.getReports().push(o),a.save&&this._saveReport(o,"i")):i.warn("Unable to add report settings because the configuration disallows it.")},updateReport:function(t,n,o){var a,l,r=this.getReports(),s=e.extend({save:!0},o);if(this.options.config.features.saveReport){for(a=0;a<r.length;a++)if((l=r[a]).id===t){this._setOperationUpdate(n),l=e.extend(!0,l,n);break}s.save&&this._saveReport(l,"u")}else i.warn("Unable to update report settings because the configuration disallows it.")},deleteReport:function(t,n){var o={},a=e.extend({save:!0},n);this.options.config.features.saveReport?(o.id=t,o.operation="d",a.save&&this._saveReport(o,"d")):i.warn("Unable to delete report settings because the configuration disallows it.")},getFilters:function(e){var t,n=this._currentReportSettings().filters;if(!e)return n;for(t=0;t<n.length;t++)if(n[t].id===e)return n[t];i.warn("No filter exists with ID: ",e)},addFilter:function(t,i){var n=this,o=e.extend(t,{operation:"i",isEnabled:!0}),a=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i);function l(){o.columnName&&(o.columnId=n._getColumnByName(o.columnName).id,delete o.columnName),n.getFilters().push(o),a.save&&n._setReportSettings({refreshModel:a.refreshData,affectsOtherViewsModels:!0})}a.skipNoChangesCheck?l():this._ifNoChangesDo(l)},updateFilter:function(t,i,n){var o=this,a=this.getFilters(),l=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},n);function r(){var n,r=o._isSettingsCheckboxFocused(t,A);for(n=0;n<a.length;n++)if(a[n].id===t){o._setOperationUpdate(i),a[n]=e.extend(!0,a[n],i);break}l.save&&o._setReportSettings({refreshModel:l.refreshData,affectsOtherViewsModels:!0},(function(){o._focusOnSettingsCheckbox(r,t,A)}))}l.skipNoChangesCheck?r():this._ifNoChangesDo(r)},deleteFilter:function(t,i){var n=this,o=this.getFilters(),a=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i);function l(){var i;for(i=0;i<o.length;i++)if(o[i].id===t){o[i]=e.extend(!0,o[i],{operation:"d"});break}a.save&&n._setReportSettings({refreshModel:a.refreshData,affectsOtherViewsModels:!0})}a.skipNoChangesCheck?l():this._ifNoChangesDo(l)},getHighlights:function(e){var t,n=this._getCurrentView().highlights;if(!e)return n;for(t=0;t<n.length;t++)if(n[t].id===e)return n[t];i.warn("No highlight exists with ID: ",e)},addHighlight:function(t,i){var n=this,o=e.extend(t,{operation:"i",isEnabled:!0}),a=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i);function l(){o.columnName&&(o.columnId=n._getColumnByName(o.columnName).id,delete o.columnName),n.getHighlights().push(o),a.save&&n._setReportSettings({refreshModel:a.refreshData,affectsOtherViewsModels:!0})}a.skipNoChangesCheck?l():this._ifNoChangesDo(l)},updateHighlight:function(t,i,n){var o=this,a=this.getHighlights(),l=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},n);function r(){var n,r=o._isSettingsCheckboxFocused(t,T);for(n=0;n<a.length;n++)if(a[n].id===t){o._setOperationUpdate(i),a[n]=e.extend(!0,a[n],i),i.type===_&&(delete a[n].columnId,delete a[n].columnType);break}l.save&&o._setReportSettings({refreshModel:l.refreshData,affectsOtherViewsModels:!0},(function(){o._focusOnSettingsCheckbox(r,t,T)}))}l.skipNoChangesCheck?r():this._ifNoChangesDo(r)},deleteHighlight:function(t,i){var n=this,o=this.getHighlights(),a=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i);function l(){var i;for(i=0;i<o.length;i++)if(o[i].id===t){o[i]=e.extend(!0,o[i],{operation:"d"});break}a.save&&n._setReportSettings({refreshModel:a.refreshData,affectsOtherViewsModels:!0})}a.skipNoChangesCheck?l():this._ifNoChangesDo(l)},getAggregates:function(){var e=[];return this._currentViewImpl().supports.aggregation&&(e=this._getCurrentView().aggregations),e},addAggregate:function(t,i){var n=this,o=e.extend(t,{operation:"i"}),a=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i);function l(){n.getAggregates().push(o),a.save&&n._setReportSettings({refreshModel:a.refreshData})}a.skipNoChangesCheck?l():this._ifNoChangesDo(l)},updateAggregate:function(t,i,n){var o=this,a=this.getAggregates(),l=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},n);function r(){var n,r=o._isSettingsCheckboxFocused(t,S);for(n=0;n<a.length;n++)if(a[n].id===t){o._setOperationUpdate(i),a[n]=e.extend(!0,a[n],i);break}l.save&&o._setReportSettings({refreshModel:l.refreshData},(function(){o._focusOnSettingsCheckbox(r,t,S)}))}l.skipNoChangesCheck?r():this._ifNoChangesDo(r)},deleteAggregate:function(t,i){var n=this,o=this.getAggregates(),a=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i);function l(){var i;for(i=0;i<o.length;i++)if(o[i].id===t){o[i]=e.extend(!0,o[i],{operation:"d"});break}a.save&&n._setReportSettings({refreshModel:a.refreshData})}a.skipNoChangesCheck?l():this._ifNoChangesDo(l)},getFlashback:function(){return this._currentReportSettings().flashback},addFlashback:function(t,i){var n=this,o=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i);function a(){n._currentReportSettings().flashback=e.extend(t,{isEnabled:!0}),n._setOperationUpdate(n._currentReportSettings()),o.save&&n._setReportSettings({refreshModel:o.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"})}o.skipNoChangesCheck?a():this._ifNoChangesDo(a)},updateFlashback:function(t,i){var n=this,o=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i);function a(){var i=n._isSettingsCheckboxFocused("",R);n._setOperationUpdate(n._currentReportSettings()),n._currentReportSettings().flashback=e.extend(n._currentReportSettings().flashback,t),o.save&&n._setReportSettings({refreshModel:o.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"},(function(){n._focusOnSettingsCheckbox(i,"",R)}))}o.skipNoChangesCheck?a():this._ifNoChangesDo(a)},deleteFlashback:function(t){var i=this,n=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},t);function o(){i._setOperationUpdate(i._currentReportSettings()),i._currentReportSettings().flashback=!1,n.save&&i._setReportSettings({refreshModel:n.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"})}n.skipNoChangesCheck?o():this._ifNoChangesDo(o)},addControlBreak:function(t,i,n){var o=this,a=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},n||{});function l(){var n,l,r=0,s=o._getCurrentView().columns;for(n=0;n<s.length;n++)if(s[n].columnId===t.id){l=s[n];break}if(!i.order){for(n=0;n<s.length;n++)s[n].break&&r++;i.order=r+1}l=e.extend(!0,l,{isVisible:!i.isEnabled,break:{order:i.order,isEnabled:i.isEnabled,direction:i.direction,nulls:i.nulls}}),o._setOperationUpdate(l),i.isEnabled&&o._adjustControlBreakSort(),i.isEnabled?e.extend(t,{controlBreakIndex:i.order,controlBreakDirection:i.direction,hidden:!0}):e.extend(t,{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),a.save&&o._setReportSettings({refreshModel:a.refreshData,refreshColumns:a.refreshData})}a.skipNoChangesCheck?l():this._ifNoChangesDo(l)},updateControlBreak:function(t,i,n){var o=this,a=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},n||{});function l(){var n,l,r=o._getCurrentView().columns,s=o._isSettingsCheckboxFocused(t,"controlBreak");for(n=0;n<r.length;n++)if(r[n].columnId===t){l=r[n];break}l=e.extend(!0,l,{isVisible:!i.isEnabled,break:{order:i.order,isEnabled:i.isEnabled,direction:i.direction,nulls:i.nulls}}),o._setOperationUpdate(l),i.isEnabled?e.extend(o._currentViewImpl().modelColumns[o._getColumn(t).name],{controlBreakIndex:l.break.order,controlBreakDirection:l.break.direction,hidden:!0}):e.extend(o._currentViewImpl().modelColumns[o._getColumn(t).name],{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),o._adjustControlBreakSort(),a.save&&o._setReportSettings({refreshModel:a.refreshData,refreshColumns:a.refreshData},(function(){o._focusOnSettingsCheckbox(s,t,"controlBreak")}))}a.skipNoChangesCheck?l():this._ifNoChangesDo(l)},deleteControlBreak:function(t,i){var n=this,o=e.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},i||{});function a(){var i,a,l=n._getCurrentView().columns;for(i=0;i<l.length;i++)if(l[i].columnId===t){a=l[i];break}a=e.extend(!0,a,{isVisible:!0,break:!1}),n._setOperationUpdate(a),e.extend(n._currentViewImpl().modelColumns[n._getColumn(t).name],{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),n._adjustControlBreakSort(),o.save&&n._setReportSettings({refreshModel:o.refreshData,refreshColumns:o.refreshData})}o.skipNoChangesCheck?a():this._ifNoChangesDo(a)},getSorts:function(){var t,i,n,o=[],a=this._getCurrentView().columns;for(t=0;t<a.length;t++)(i=a[t]).sort&&(n=e.extend({},{columnId:i.columnId,order:i.sort.order,direction:i.sort.direction,nulls:i.sort.nulls}),o.push(n));for(o.length>0&&(o=o.sort((function(e,t){return e.order-t.order}))),t=0;t<o.length;t++)delete o[t].order;return o},setSorts:function(e){var t,i,n,o,a,l,r,s=this,d=this.options.config,c=this._currentViewImpl(),u=c.internalIdentifier,h=d.views[u],g=this._getCurrentView().columns,p=null;this._ifNoChangesDo((function(){for(h.useModelFrom&&d.views[h.useModelFrom].shareModel&&(c=s.getViews(h.useModelFrom)),c.supports.configurableColumns&&(p=c.getColumns()),i=0;i<e.length;i++){for(a=e[i],o=!1,t=0;t<g.length;t++)if(l=g[t],a.columnId===l.columnId){o=!0;break}o||g.push({columnId:a.columnId,operation:"i",columnType:C,isVisible:!1,isFrozen:!1})}for(t=0;t<g.length;t++){if(l=g[t],o=!1,p)for(n=0;n<p.length;n++)if(l.columnId===p[n].id){r=p[n];break}for(i=0;i<e.length;i++)if((a=e[i]).columnId===l.columnId){o=!0,a.order=i+1;break}o?(delete a.columnId,l.sort&&a.order===l.sort.order&&a.direction===l.sort.direction&&a.nulls===l.sort.nulls||(l.sort=a,s._setOperationUpdate(l),r&&(r.sortIndex=l.sort.order,r.sortDirection=l.sort.direction))):l.sort&&(l.sort=!1,s._setOperationUpdate(l),r&&(r.sortIndex=null,r.sortDirection=null))}s._adjustControlBreakSort(),s._setReportSettings({refreshModel:!0,refreshColumns:!0}),c!==s._currentViewImpl()&&(c.refreshColumns(),c.refresh())}))},getChart:function(){return this._currentReportSettings().views.chart},setChart:function(t){var i,n=this,o=this.getChart(),a=this._currentViewImpl(),l={};o?(i=e.extend(o,t),this._setOperationUpdate(i)):i=e.extend({operation:"i"},t),this._currentReportSettings().views.chart=i,this._view()===b?(l.ig=this,l.igConfig=this.options.config,a.initView(l),this._setReportSettings({refreshView:!0,refreshModel:!0})):this._setReportSettings({},(function(){n._view(b,{fetchData:!0})}))},deleteChart:function(){var e=this,t=this._currentViewImpl();this._currentReportSettings().views.chart={operation:"d"},this._setReportSettings({},(function(){t.destroyView(e),t.view$=null}))},getViews:function(e){return e?this.viewsImpl[e]:this.viewsImpl},getCurrentView:function(){return this.getViews(this.getCurrentViewId())},getCurrentViewId:function(){return this._view()},focus:function(){var e=this.options.config;e.toolbar&&e.toolbar.searchField&&this.toolbar$?this._tbFindElement("search_field").focus():this._currentViewImpl().focus()}}),e.apex.interactiveGrid.copyDefaultToolbar=ce;var De=[];function xe(e){De.push(e)}e.apex.interactiveGrid.registerView=xe;var Ge=["selection-fill","selection-clear","selection-copy-down"],He={setColumnConfig:function(i){var n,o,a,l,r,s,c,u,h={},g=i.baseModelColumns,p=i.igConfig,m=p.views[this.internalIdentifier].features,f=i.currentReportSettings,_=i.ig,C=N,I=!1!==p.editable;for(n=0;n<f.views.grid.columns.length;n++)o=f.views.grid.columns[n],a=_._getColumn(o.columnId),(c=e.extend(!0,{},a.defaultGridColumnOptions||{},g[o.columnId])).elementId=a.staticId,c.seq=o.seq,void 0===c.noStretch&&(void 0!==a.layout.noStretch?c.noStretch=a.layout.noStretch:null!==m.stretchColumns?c.noStretch=!m.stretchColumns:c.noStretch=!f.views.grid.stretchColumns),a.isHidden||(c.hidden=!o.isVisible,c.frozen=o.isFrozen,o.width&&(c.width=o.width),o.sort&&(c.sortIndex=o.sort.order,c.sortDirection=o.sort.direction),(s=o.break)&&s.isEnabled&&(C=s.direction,c.controlBreakIndex=s.order,c.controlBreakDirection=C),a.layout.groupId&&("both"===a.layout.useGroupFor?c.useGroupFor="srv,heading":c.useGroupFor=a.layout.useGroupFor,c.groupName=a.layout.groupId),c.helpid=a.helpid,c.canHide=a.features.canHide,c.canSort=a.features.sort,a.link.attributes&&(c.linkAttributes=a.link.attributes),a.link.text&&(c.linkText=a.link.text),a.link.targetColumn&&(c.linkTargetColumn=a.link.targetColumn)),a.accessibility.usedAsRowHeader&&(c.usedAsRowHeader=a.accessibility.usedAsRowHeader),a.appearance.columnCssClasses&&(c.columnCssClasses=a.appearance.columnCssClasses),a.appearance.fieldColSpan&&(c.fieldColSpan=a.appearance.fieldColSpan),a.appearance.fieldCssClasses&&(c.fieldCssClasses=a.appearance.fieldCssClasses),a.validation&&(c.isRequired=a.validation.isRequired),a.appearance.cellTemplate&&(c.cellTemplate=a.appearance.cellTemplate),I&&(c.noCopy=!a.default.duplicate,void 0===c.defaultValue&&(u=a.default.value,e.isPlainObject(u)&&void 0!==u.d&&c.elementId&&(u.d=d(c.elementId).displayValueFor(u.d)),c.defaultValue=u)),"actions"===a.specialType&&(r="a-Button--noLabel a-Button--iconTextButton a-Button--actions js-menuButton",Ae(l=t.htmlBuilder(),{label:j("ROW_ACTIONS"),buttonClass:r,iconOnly:!0,icon:"icon-ig-actions",attributes:{"data-menu":_._getId("row_actions_menu"),"aria-haspopup":!0,"aria-expanded":!1}}),c.cellTemplate=l.toString(),l.clear(),Ae(l,{label:j("SEL_ACTIONS"),buttonClass:r+" js-selectionMenu",iconOnly:!0,icon:"icon-ig-actions",attributes:{"data-menu":_._getId("selection_actions_menu"),"aria-haspopup":!0,"aria-expanded":!1}}),c.heading=l.toString(),c.columnCssClasses?c.columnCssClasses+=" has-button":c.columnCssClasses="has-button",c.headingCssClasses?c.headingCssClasses+=" has-button":c.headingCssClasses="has-button",delete c.index,c.virtual=!0,c.noHeaderActivate=!0,c.elementId=null,0===n&&(c.frozen=!0,o.isFrozen=!0),c.noStretch=!0,c.canSort=!1,c.width||(c.width=42)),h[a.name]=c;h[k]=g[k],this.modelColumns=h,this.specialColumns={identityField:0===_.primaryKeyColumns.length?null:_.primaryKeyColumns,metaField:k}},init:function(e){var t=e.options.config;e.getActions().add([{name:"selection-copy-down",labelKey:"APEX.IG.COPY_DOWN",icon:"icon-ig-copy-down",hide:!0,action:function(){var t=e._currentViewImpl();t.singleRowMode||t.view$.grid("copyDownSelection")}},{name:"selection-clear",labelKey:"APEX.IG.CLEAR",icon:"icon-ig-clear",hide:!0,action:function(){var t=e._currentViewImpl();t.singleRowMode||t.view$.grid("fillSelection","")}},{name:"selection-fill",labelKey:"APEX.IG.FILL",icon:"icon-ig-fill",hide:!0,getFillValue:function(e){Ve({labelKey:"APEX.IG.FILL_LABEL",titleKey:"APEX.IG.FILL_TITLE"},e)},action:function(){var t=e._currentViewImpl();t.singleRowMode||this.getFillValue((function(e){!1!==e&&t.view$.grid("fillSelection",e)}))}}]),this._initMenus(t,e)},initView:function(i){var n,o,a,l,d,c,u,h=null,g=t.htmlBuilder(),p=!0,m=i.igConfig,f=m.defaultGridViewOptions.multiple,_=m.defaultGridViewOptions.selectAll,I=m.views.grid.features,b=!1,w=m.defaultGridViewOptions.rowHeader||y,A=i.ig,T=A.actions,R=A._isCurrentlyEditable(),O=m.columnGroups,k=!!R&&m.editable.autoAddRow,D=this,x=!0,G=null,H=null;function P(e,t){A.editMode=t.editMode,A.actions.update("edit"),A._trigger("modeChange",e,t)}function B(e,t){return void 0!==e?e:t}function X(e){G.hide(),H.removeClass("is-active").attr("aria-expanded","false"),e&&(H.focus(),D.view$.grid("focus")),H=null,A._off(A.document,"mousedown"),A._off(A.window,"blur"),A._off(G)}function q(){var e,t,i,n=A._currentReportSettings().views.grid.columns,o=D.view$.grid("getColumns"),a=0,l=!1,r=!1;for(e=0;e<n.length;e++)n[e]&&n[e].isVisible&&!A._getColumn(n[e].columnId).isHidden&&n[e].seq>a&&(a=n[e].seq,l=e);if(!1!==l){for(t=n[l],e=0;e<o.length;e++)t.columnId!==o[e].id||o[e].hidden||(i=o[e]);t.isFrozen&&(t.isFrozen=!1,i.frozen=!1,r=!0,A._setOperationUpdate(t))}r?A._setReportSettings({refreshView:!0,refreshColumns:!0}):(A._setReportSettings(),D.singleRowView$&&D.singleRowView$.recordView("refreshFields").recordView("refresh"))}if(!I.gridView&&!I.singleRowView)throw new Error("Interactive Grid grid view must have at least one of grid or single row");switch(e("div.a-GV-columnItemContainer",i.ig$).appendTo(i.ig$),I.gridView&&(g.markup("<div").attr(M,"a-IRR-sortWidget").attr("style","display:none;").attr("id",A._getId("column_header_menu")).markup(">").markup("</div>"),G=e(g.toString()),e("body").append(G),(u=i.currentReportSettings.views.grid.aggregations).length>0&&(w!==y&&"plain"!==w||(w=V))),I.rowSelector&&(w===y&&(w="plain"),b=!I.rowSelector.hideControl,void 0===f&&(f=I.rowSelector.multiSelect),f&&void 0===_&&(_=I.rowSelector.selectAll)),m.headingFixedTo){case y:p=!1,l=!1,d=!1;break;case"region":p=!0,l=!1,d=!1;break;case"page":p=!1,l=function(){return r.defaultStickyTop()+(e(".a-IG-header",i.ig$).outerHeight()||0)},d=m.defaultGridViewOptions.stickyFooter||!0}if(O.length)for(h={},n=0;n<O.length;n++)h[(o=e.extend({},O[n])).id]=o,delete o.id;I.gridView?(m.defaultGridViewOptions.contextMenu&&!m.defaultGridViewOptions.contextMenu.hasOwnProperty("actionsContext")&&(m.defaultGridViewOptions.contextMenu.actionsContext=A.actions),m.editable&&!1===m.editable.allowedOperations.create&&!1===m.editable.allowedOperations.update&&(x=!1),c={modelName:D.modelName,editable:R,autoAddRecord:k,rowHeader:w,rowHeaderCheckbox:b,aggregateLabels:this._gridAggregateLabels(),highlights:this._gridHighlightsFromReport(i.currentReportSettings),multiple:f,selectAll:_,noDataMessage:m.text.noDataFound,moreDataMessage:m.text.moreDataFound,showNullAs:m.appearance.showNullValue,columns:[D.modelColumns],columnSort:I.sort,reorderColumns:B(m.defaultGridViewOptions.reorderColumns,I.reorderColumns),resizeColumns:B(m.defaultGridViewOptions.resizeColumns,I.resizeColumns),pagination:A._getPaginationConfig(m,"defaultGridViewOptions"),rowsPerPage:i.currentReportSettings.rowsPerPage,hasSize:p,stickyTop:l,stickyFooter:d,allowEditMode:x,persistSelection:m.defaultGridViewOptions.persistSelection||m.submitSelectedRows,activateColumnHeader:function(i,n){var o,a,l,d,c,u,h,g=[],p=t.htmlBuilder();function m(i){var n,o,a,l=t.htmlBuilder();for(n=0;n<i.length;n++)e.isPlainObject(i[n])?(o=i[n].r,a=i[n].d):o=a=i[n],Re(l,{cssClasses:"a-IRR-sortWidget-row",text:a,data:{"return-value":o}});A._getElement("column_header_menu_rows").html(l.toString())}function f(e){var t=G.find(":focusable");e||(o=t.first()).data("first",!0),(a=t.last()).data("last",!0)}G.is(":visible")?X():((l=A._isColumnFilterable(n.column.id))&&(d=A._hasColumnFilterLov(n.column.id)),H=n.header$,n.header$.addClass("is-active").attr("aria-expanded","true"),A._renderColumnHeaderMenu(p,l,d,n.column.id),c>220?(u=n.column.frozen?2:1,c=n.header$.outerWidth(),G.css("min-width",c-u)):G.css("min-width","0"),h=A.isRTL?"right":"left",G.html(p.toString()).show().css({left:0,top:0}).position({my:h+" top",at:h+" bottom",of:n.header$,collision:"fit"}),d?A._getFilterValues(n.column.id,!0,(function(e){e.regions[0].filterValues&&(A._getElement("column_header_search").focus(),m(g=e.regions[0].filterValues),f())})):(f(),o.focus()),A._on(G,{"click button.a-IRR-sortWidget-button":function(t){var i,o,a,l=N;switch(e(t.currentTarget).data(v)){case"hide":D.view$.grid("hideColumn",n.column),A._currentViewColumn(n.column.id,{isVisible:!1}),q(),X(!0);break;case"break":(i=A._currentViewColumn(n.column.id)).sort&&(l=i.sort.direction),A.addControlBreak(n.column,{isEnabled:!0,direction:l}),X(!0);break;case"aggregate":A._openDialog(S,{columnId:n.column.id}),X();break;case"freeze":if(o=A._currentReportSettings().views.grid.columns,D.view$.grid(n.column.frozen?"unfreezeColumn":"freezeColumn",n.column),n.column.frozen)for(a=0;a<o.length;a++)(i=o[a]).seq<=n.column.seq&&!i.isFrozen&&(i.isFrozen=!0,A._setOperationUpdate(i));else for(a=0;a<o.length;a++)(i=o[a]).seq>=n.column.seq&&i.isFrozen&&(i.isFrozen=!1,A._setOperationUpdate(i));A._setReportSettings(),X(!0);break;case"help":X(!0),r.popupFieldHelp(A._getColumn(n.column.id).helpid,$v("pInstance"))}},keydown:function(t){var i;t.which===e.ui.keyCode.ESCAPE?(X(!0),t.preventDefault()):t.which===e.ui.keyCode.TAB&&(!(i=!!t.shiftKey)&&e(t.target).data("last")&&(t.preventDefault(),o.focus()),i&&e(t.target).data("first")&&(t.preventDefault(),a.focus()))},"keydown input.a-IRR-sortWidget-searchField":function(t){var i,o;if(l&&t.which===e.ui.keyCode.ENTER){if((o=this._getColumn(n.column.id).filter.dataType)===F)try{i=apex.jQuery.timepicker.parseDateString(e(t.target).val(),this._getColumn(n.column.id).appearance.dateFormatMask),A.addFilter({type:C,columnType:C,columnId:n.column.id,operator:"EQ",value:fe(i),isCaseSensitive:!1})}catch(e){s.alert(j("INVALID_DATE_FORMAT"))}else A.addFilter({type:C,columnType:C,columnId:n.column.id,operator:"VARCHAR2"===o?"C":"EQ",value:e(t.target).val(),isCaseSensitive:!1});X(!0),t.preventDefault()}},"keyup input.a-IRR-sortWidget-searchField":function(e){if(d){var t=e.target.value;m(g.filter((function(e){return e.d?e.d.toLowerCase().indexOf(t.toLowerCase())>-1:e.toLowerCase().indexOf(t.toLowerCase())>-1}))),f(!0)}},"click a.a-IRR-sortWidget-row":function(t){var i,o,a,l,r=e(t.currentTarget).data("returnValue");d&&((i=A._getColumn(n.column.id).filter.dataType)===F||i.indexOf(U)>-1?(o=r.indexOf("~"),a=r.substring(0,o),l=r.substring(o+1),o>0&&A.addFilter({type:C,columnType:C,columnId:n.column.id,operator:a,value:l,isCaseSensitive:!1})):A.addFilter({type:C,columnType:C,columnId:n.column.id,operator:"EQ",value:r,isCaseSensitive:!0}),X(!0),t.preventDefault())}}),A._on(A.document,{mousedown:function(t){!e(t.target).closest(G).length>0&&!e(t.target).closest(n.header$).length>0&&G.is(":visible")&&X()}}),A._on(A.window,{blur:function(){G.is(":visible")&&X()}}))},cancelColumnHeader:function(){G.is(":visible")&&X()},sortChange:function(e,t){A._ifNoChangesDo((function(){var e,i,n,o,a,l=t.column.sortIndex,r=D.view$.grid("getColumns");for(n=1,e=0;e<r.length;e++)(i=r[e]).sortIndex&&("change"===t.action?i===t.column&&(n=i.sortIndex):"add"===t.action?i.sortIndex>=n&&(n=i.sortIndex+1):"remove"===t.action?i===t.column?(delete i.sortIndex,delete i.sortDirection,(o=A._currentViewColumn(t.column.id)).sort=!1,A._setOperationUpdate(o)):i.sortIndex>l&&(i.sortIndex-=1,A._currentViewColumn(i.id,{sort:{order:i.sortIndex}})):"clear"!==t.action&&"set"!==t.action||(delete i.sortIndex,delete i.sortDirection,(o=A._currentViewColumn(i.id)).sort=!1,A._setOperationUpdate(o)));"clear"!==t.action&&"remove"!==t.action&&(t.column.sortIndex=n,t.column.sortDirection=t.direction,a=t.direction===N?L:"first",A._currentViewColumn(t.column.id,{sort:{order:n,direction:t.direction,nulls:a}})),A._setReportSettings({refreshModel:!0,refreshColumns:!0})}))},columnReorder:function(e,t){var i,n,o,a,l,r=A._currentReportSettings().views.grid.columns,s=r[t.newPosition].isFrozen;for(o=r,a=t.oldPosition,l=t.newPosition,o.splice(l,0,o.splice(a,1)[0]),r[t.newPosition]&&(r[t.newPosition].isFrozen=s),i=0;i<r.length;i++)r[i]||r.splice(i,1);for(i=0;i<r.length;i++)(n=r[i]).seq!==i+1&&(n.seq=i+1,A._setOperationUpdate(n));q()},columnResize:function(e,t){A._currentViewColumn(t.column.id,{width:t.width}),A._setReportSettings()},modeChange:P,selectionChange:function(t){var i=D.view$.grid("getSelection");e(".js-selectionMenu",D.view$).prop(E,0===i.length),D._selectionChange(A,t)},pageChange:function(e,t){A._pageChange(t)}},u.length>0&&(c.aggregateTooltips=this._gridAggregateTooltipsFromReport(A,i.currentReportSettings)),h&&(c.columnGroups=h),D.view$.grid({},m.defaultGridViewOptions,c),D.curInst=D.view$.grid("instance")):(D.view$.hide(),D.singleRowMode=!0),D.supports.singleRowView&&I.singleRowView&&(D.singleRowView$=e("<div id='"+A._getId("singleRow_vc")+"' class='a-IG-recordView'></div>").attr("aria-labelledby",A._getId("summary")),D.view$.after(this.singleRowView$),D.singleRowView$.width(D.view$.width()),m.maxHeight&&D.singleRowView$.height(D.view$.height()),(a=e.apex.recordView.copyDefaultToolbar())[0].controls.unshift({type:"MENU",labelKey:"APEX.IG.SRV_CHANGE_MENU",iconOnly:!0,icon:"icon-ig-actions",menuId:A._getId("srv_actions_menu")}),I.gridView&&(T.remove(["close-single-row-view"]),T.add([{name:"close-single-row-view",labelKey:"APEX.IG.REPORT_VIEW",action:function(){var e,t=A.editMode;return t&&D.singleRowView$.recordView("setEditMode",!1),D.singleRowMode=!1,D.singleRowView$.hide(),D.curInst=D.view$.grid("instance"),A._updateSummary(),(e=A._tbFind("selection_submenu"))&&(e.disabled=!D.supports.selection),D.view$.show().grid("resize"),t&&D.view$.grid("setEditMode",!0),D.view$.grid("focus"),!0}}]),a[0].controls.unshift({type:"BUTTON",action:"close-single-row-view"})),D.singleRowView$.recordView({},m.defaultSingleRowOptions,{modelName:D.modelName,actionsContext:T,toolbar:a,editable:R,autoAddRecord:k,noDataMessage:m.text.noDataFound,moreDataMessage:m.text.moreDataFound,showNullAs:m.appearance.showNullValue,fields:[D.modelColumns],fieldGroups:h,hasSize:p,modeChange:P,recordChange:function(e){D._selectionChange(A,e)}}),I.gridView?(D.singleRowView$.hide(),D.singleRowMode=!1):D.curInst=D.singleRowView$.recordView("instance"))},viewChanged:function(e,t,i){t._toggleEnableAction(e&&i.editable&&this.supports.edit,Ge),e&&this._selectionChange(t)},updateActions:function(e){var t=e.ig,i=t.options.config;t._toggleShowAction(e.canEdit&&this.supports.edit&&this.supports.cellSelection&&i.views.grid.features.cellRangeActions,Ge)},setReportOptions:function(e,t,i,n){var o,a=this,l=e.options.config;(o={"views.grid.aggregations":function(){a._hasGridView()&&a.view$.grid(v,"aggregateTooltips",a._gridAggregateTooltipsFromReport(e,i))},"views.grid.highlights":function(){a._hasGridView()&&a.view$.grid(v,"highlights",a._gridHighlightsFromReport(i))},"views.grid.columns":function(){var t,n,o,r,s,d,c=l.views.grid.features,u=i.views.grid.columns,h=a.getColumns(),g=!1!==c.gridView,p=!1;for(t=0;t<u.length;t++)for(s=u[t],o=e._getColumn(s.columnId),n=0;n<h.length;n++)if((r=h[n]).id===s.columnId){g&&(d=r.noStretch,void 0!==o.defaultGridColumnOptions&&void 0!==o.defaultGridColumnOptions.noStretch||(void 0!==o.layout.noStretch?r.noStretch=o.layout.noStretch:null!==c.stretchColumns?r.noStretch=!c.stretchColumns:r.noStretch=!i.views.grid.stretchColumns),r.noStretch!==d&&(p=!0)),r.hidden===s.isVisible&&r.canHide&&(r.hidden=!s.isVisible,p=!0);break}p&&(a.refreshColumns(),a.refresh())},editable:function(){var t=e._isCurrentlyEditable();a.model.getOption("identityField")&&a.model.setOption("editable",t),a.singleRowView$&&(a.singleRowView$.recordView(v,"editable",t),a.singleRowView$.recordView(v,"autoAddRecord",t)),a._hasGridView()&&(a.view$.grid(v,"editable",t),a.view$.grid(v,"autoAddRecord",t)),e._updateActions()},rowsPerPage:function(){a._hasGridView()&&(a.view$.grid(v,"rowsPerPage",i.rowsPerPage),t||(a.pendingRefresh=!0))}})[n]&&a.view$&&o[n]()},_selectionChange:function(e,t){t&&e._selectionChange(t)},_initMenus:function(t,i){var n=null,o=null,a=null,l=this,r=t.views.grid.features,s=[],d=[],c=[],u=i._tbFind("selection_submenu");function h(e){c.push(e),u&&u.push(e)}u&&(u=u.menu.items,l._selectionMenuItems=u,l._selectionMenuStart=u.length),c.push({type:D,action:"selection-copy",accelerator:"Ctrl+C"}),c.push(x),n=e("<div/>",{id:i._getId("row_actions_menu")}).appendTo("body"),o=e("<div/>",{id:i._getId("srv_actions_menu")}).appendTo("body"),a=e("<div/>",{id:i._getId("selection_actions_menu")}).appendTo("body"),l.supports.singleRowView&&(s.push({id:"srv",type:D,action:"single-row-view"}),s.push(x)),t.editable&&(t.editable.allowedOperations.create&&(s.push({id:"ins",type:D,action:"row-add-row"}),d.push({id:"ins",type:D,label:t.text.addRowButton,action:"insert-record"}),s.push({id:"dup",type:D,action:"row-duplicate"}),d.push({id:"dup",type:D,action:"duplicate-record"}),h({id:"dup",type:D,action:"selection-duplicate"}),s.push(x),h(x)),(t.editable.allowedOperations[I]||t.editable.allowedOperations.create)&&(s.push({id:"del",type:D,action:"row-delete"}),d.push({id:"del",type:D,action:"delete-record"})),t.editable.allowedOperations[I]&&h({id:"del",type:D,action:"selection-delete"})),s.push(x),s.push({id:"refresh",type:D,action:"row-refresh"}),d.push({id:"refresh",type:D,action:"refresh-record"}),h(x),h({id:"refresh",type:D,action:"selection-refresh"}),t.editable&&((t.editable.allowedOperations.update||t.editable.allowedOperations[I])&&(s.push({id:"revert",type:D,action:"row-revert"}),d.push({id:"revert",type:D,action:"revert-record"}),h({id:"revert",type:D,action:"selection-revert"})),r.cellRangeActions&&(h(x),h({id:"copy_down",type:D,action:"selection-copy-down"}),h({id:"fill",type:D,action:"selection-fill"}),h({id:"clear",type:D,action:"selection-clear"}))),n.menu({actionsContext:i.actions,items:s,beforeOpen:function(){var e,o=l.view$.find(".js-menuButton.is-active").closest("tr");l.singleRowMode?(i._updateAction("hide","single-row-view"),e=l.getSelectedRecords()):e=l.view$.grid("getRecords",[o]),t.editable&&(t.editable.allowedOperations.create&&(n.menu("find","dup").disabled=!l.model.allowAdd(null,"copy"),n.menu("find","ins").disabled=!l.model.allowAdd(null,"new")),(t.editable.allowedOperations.update||t.editable.allowedOperations[I])&&i._toggleEnableAction(l.model.canRevertRecord(e[0]),["row-revert"]),t.editable.allowedOperations[I]||i._toggleShowAction(l.model.allowDelete(e[0]),"row-delete"),t.editable.allowedOperations[I]&&i._toggleEnableAction(l.model.allowDelete(e[0]),["row-delete"]))},afterClose:function(){l.singleRowMode&&i._updateAction("show","single-row-view"),i._updateSelectionActions()}}),o.menu({actionsContext:i.actions,items:d,beforeOpen:function(){var e=l.getSelectedRecords();t.editable&&(t.editable.allowedOperations.create&&(o.menu("find","dup").disabled=!l.model.allowAdd(null,"copy"),o.menu("find","ins").disabled=!l.model.allowAdd(null,"new")),(t.editable.allowedOperations.update||t.editable.allowedOperations[I])&&(o.menu("find","revert").disabled=!e.length||!l.model.canRevertRecord(e[0])),t.editable.allowedOperations[I]||i._toggleShowAction(l.model.allowDelete(e[0]),"delete-record"),t.editable.allowedOperations[I]&&(o.menu("find","del").disabled=!e.length||!l.model.allowDelete(e[0])))}}),a.menu({actionsContext:i.actions,items:c,beforeOpen:function(){i._updateSelectionActions()}}),u&&i._tbFindElement("actions_button_menu").on("menubeforeopen.gridview",(function(){i._updateSelectionActions()})),l.rowActionMenu$=n,l.srvActionMenu$=o,l.selActionMenu$=a},_gridAggregateLabels:function(){var t=null;return this.aggregateLabels||(this.aggregateLabels=t={},e.each(Y,(function(e,i){t[i]={label:j(i),overallLabel:j(i+"_OVERALL")}}))),this.aggregateLabels},_gridAggregateTooltipsFromReport:function(e,t){var i,n,o=null,a=t.views.grid.aggregations;if(a.length>0)for(o={},i=0;i<a.length;i++)(n=a[i]).tooltip&&(o[n.function+"|"+e._getColumn(n.columnId).name]=n.tooltip);return o},_gridHighlightsFromReport:function(e){var t,i,n={},o=e.views.grid.highlights;for(t=0;t<o.length;t++)n[(i=o[t]).id]={seq:i.seq,row:i.type===_,color:i.textColor,background:i.backgroundColor};return n},_hasGridView:function(){return this.view$.is(":apex-grid")},destroyView:function(e){this._hasGridView()&&this.view$.grid("destroy"),this.singleRowView$&&this.singleRowView$.remove(),e._getElement("column_header_menu").remove()},destroy:function(e){this.rowActionMenu$&&this.rowActionMenu$.length>0&&(this.rowActionMenu$.remove(),this.rowActionMenu$=null),this.selActionMenu$&&this.selActionMenu$.length>0&&(this.selActionMenu$.remove(),this.selActionMenu$=null),this._selectionMenuStart&&this._selectionMenuItems&&(this._selectionMenuItems.length=this._selectionMenuStart,this._selectionMenuItems=this._selectionMenuStart=null)},getContextRecord:function(t){var i;return this.singleRowMode?[this.singleRowView$.recordView("getRecord")]:(i=e(t).closest("tr")).length>0?this.view$.grid("getRecords",[i]):[]},getColumns:function(){return this.singleRowMode?this.curInst.getFields():this.curInst.getColumns()},canCopy2Clipboard:function(){return!this.singleRowMode&&this.curInst.option("allowCopy")},selectCells:function(e){if(!this.singleRowMode){if(void 0===e)return this.view$.grid(v,"selectCells");this.view$.grid(v,"selectCells",e)}},getSelectedRecords:function(){var e;return this.singleRowMode?(e=this.curInst.getRecord())?[e]:[]:this.curInst.getSelectedRecords()},setSelectedRecords:function(e,t,i){var n;this.singleRowMode?((n=this.model.indexOf(e[0]))<0&&(n=0),this.singleRowView$.recordView(v,"recordOffset",n)):this.view$.grid("setSelectedRecords",e,t,i)},getActiveRecordId:function(){return this.curInst.getActiveRecordId()},setModelName:function(e){this.curInst.option("modelName",e)},setEditMode:function(e){this.curInst.setEditMode(e)},finishEditing:function(){return this.curInst.finishEditing()},setNoDataMessage:function(e){this.curInst.option("noDataMessage",e)},focus:function(){this.curInst.focus()},refreshColumns:function(){this._hasGridView()&&this.view$.grid("refreshColumns"),this.singleRowView$&&this.singleRowView$.recordView("refreshFields")},footerHeight:function(){if(!this.singleRowMode)return this.view$.find(".a-GV-footer").outerHeight()||0},refresh:function(e){this._hasGridView()&&this.view$.grid("refresh"),this.singleRowView$&&this.singleRowView$.recordView("refresh")},resize:function(){this.curInst.resize()},show:function(){this.curInst.element.show()},hide:function(){this.curInst.element.hide()}},Pe={setColumnConfig:function(t){var i,n,o={},a={},l=t.baseModelColumns,r=t.igConfig,s=t.ig,d=!1!==r.editable,c=0;for(n in l)l.hasOwnProperty(n)&&(c++,o=e.extend(!0,{},l[n]),n!==k?(i=s._getColumn(n),o.elementId=i.staticId,o.seq=c,d&&"actions"===i.specialType&&(delete o.index,o.virtual=!0,o.elementId=null),a[i.name]=o):a[k]=o);this.modelColumns=a,this.specialColumns={identityField:0===s.primaryKeyColumns.length?null:s.primaryKeyColumns,metaField:k}},initView:function(e){var t=!0,i=!1,n=e.igConfig,o=e.ig;switch(n.headingFixedTo){case y:t=!1;break;case"page":t=!1,i=!0}this.view$.tableModelView(this.viewConfig(e,{modelName:this.modelName,noDataMessage:n.text.noDataFound,moreDataMessage:n.text.moreDataFound,showNullAs:n.appearance.showNullValue,hasSize:t,columns:this.modelColumns,pagination:o._getPaginationConfig(n,"icon"===this.internalIdentifier?"defaultIconViewOptions":"defaultDetailViewOptions"),rowsPerPage:e.currentReportSettings.rowsPerPage,stickyFooter:i,selectionChange:function(e){o._selectionChange(e)},pageChange:function(e,t){o._pageChange(t)}}))},destroyView:function(){this.view$.tableModelView("destroy")},setReportOptions:function(e,t,i,n){var o,a=this;(o={rowsPerPage:function(){a.view$.tableModelView(v,"rowsPerPage",i.rowsPerPage),t||(a.pendingRefresh=!0)}})[n]&&a.view$&&o[n]()},getSelectedRecords:function(){return this.view$.tableModelView("getSelectedRecords")},setSelectedRecords:function(e,t,i){this.view$.tableModelView("setSelectedRecords",e,t,i)},setModelName:function(e){this.view$.tableModelView(v,"modelName",e)},setNoDataMessage:function(e){this.view$.tableModelView(v,"noDataMessage",e)},footerHeight:function(){return this.view$.find(".a-GV-footer").outerHeight()||0},refresh:function(e){this.view$.tableModelView("refresh")},resize:function(){this.view$.tableModelView("resize")},isConfigured:function(){return!0}};xe(e.extend({},Pe,{title:j("ICON"),internalIdentifier:"icon",cssClass:"a-IG-iconView",icon:"icon-ig-icons",supports:{sort:!0},viewConfig:function(t,i){var n,o=t.igConfig,a=o.views.icon.features,l=!1,r=o.views.icon;return i=e.extend(!0,{iconListOptions:{}},o.defaultIconViewOptions,i),r.customIcon?(r.customIcon.trim().toLowerCase().match(/\s*<li/)?i.recordTemplate=r.customIcon:i.recordTemplate="<li>"+r.customIcon+"</li>",r.customIcon.toLowerCase().indexOf("href=")>=0&&(l=!0)):(i.labelColumn=r.labelColumn,r.iconClassColumn&&(i.iconClassColumn=r.iconClassColumn),r.imageURLColumn&&(i.imageURLColumn=r.imageURLColumn),r.imageAttributes&&(i.imageAttributes=r.imageAttributes),r.linkAttributes&&(i.linkAttributes=r.linkAttributes),r.linkTarget&&(i.linkTarget=!0,l=!0),i.linkTargetColumn&&(l=!0)),i.useIconList=!0,n=i.iconListOptions,l&&void 0===n.navigation&&(n.navigation=!0),a.rowSelector&&void 0===n.multiple&&void 0===n.itemSelector&&(n.multiple=a.rowSelector.multiSelect,n.navigation?n.itemSelector=!1:n.itemSelector=!a.rowSelector.hideControl),i.iconListOptions.contextMenu&&!i.iconListOptions.contextMenu.hasOwnProperty("actionsContext")&&(i.iconListOptions.contextMenu.actionsContext=t.ig.actions),i},focus:function(){this.view$.tableModelView("focus")},getContextRecord:function(t){var i;return this.view$.tableModelView("option").useIconList&&(i=e(t).closest(".a-IconList-item")).length?this.view$.tableModelView("getRecords",i):[]},canCopy2Clipboard:function(){var e=this.view$.tableModelView("option","iconListOptions");return void 0===e.allowCopy||e.allowCopy}})),xe(e.extend({},He,{title:j("GRID"),internalIdentifier:"grid",cssClass:"a-IG-gridView",icon:"icon-ig-report",supports:{cellSelection:!0,edit:!0,highlight:!0,controlBreak:!0,aggregation:!0,singleRowView:!0,configurableColumns:!0,download:!0},gotoCell:function(e,t){return this.singleRowMode?this.curInst.gotoField(e,t):this.curInst.gotoCell(e,t)},lockActive:function(){this.curInst.lockActive()},unlockActive:function(){this.curInst.unlockActive()}})),xe(e.extend({},Pe,{title:j("DETAIL"),internalIdentifier:"detail",cssClass:"a-IG-detailView",icon:"icon-ig-details",supports:{selection:!1,sort:!0},viewConfig:function(t,i){var n=t.igConfig,o=n.views.detail;return i.beforeTemplate=o.beforeRows,i.recordTemplate=o.row,i.afterTemplate=o.afterRows,i.useIconList=!1,e.extend(!0,{},n.defaultDetailViewOptions,i)},focus:function(){this.view$.find(":focusable").first().focus()}})),xe({title:j("CHART"),internalIdentifier:b,cssClass:"a-IG-chartView",icon:"icon-ig-chart",supports:{totalRows:!1,selection:!1,sort:!1,changeRowsPerPage:!1},initDialog:function(t){var i,n,a,l,r=[],s=[],d=[],c=j("SELECT"),u=t.options.config.columns;for(r.push({value:"",label:c}),s.push({value:"",label:c}),d.push({value:"",label:c}),a=0;a<u.length;a++)(n=u[a]).specialType||n.isHidden||(l||(l=n),r.push({value:n.id,label:t._getColumnLabel(n.id)}),n.dataType===P&&s.push({value:n.id,label:t._getColumnLabel(n.id)}),n.dataType!==P&&n.dataType!==F||d.push({value:n.id,label:t._getColumnLabel(n.id)}));i=[{value:"",label:j("SELECT")},{value:Y.CNT,label:j(Y.CNT)},{value:Y.CNT_DIST,label:j(Y.CNT_DIST)},{value:Y.APPR_CNT_DIST,label:j(Y.APPR_CNT_DIST)},{value:Y.MIN,label:j(Y.MIN)},{value:Y.MAX,label:j(Y.MAX)},{value:Y.SUM,label:j(Y.SUM)},{value:Y.AVG,label:j(Y.AVG)}],this.dialog$=t._createDialog("chart",(function(e){e("iconList",{id:"CH_TYPE",iconOnly:!1,options:[{value:"area",label:j("AREA"),iconCssClasses:"icon-region-chart-area"},{value:B,label:j("BAR"),iconCssClasses:"icon-region-chart-bar"},{value:"bubble",label:j("BUBBLE"),iconCssClasses:"icon-region-chart-bubble"},{value:"donut",label:j("DONUT"),iconCssClasses:"icon-region-chart-donut"},{value:"funnel",label:j("FUNNEL"),iconCssClasses:"icon-region-chart-funnel"},{value:"line",label:j("LINE"),iconCssClasses:"icon-region-chart-line"},{value:"lineWithArea",label:j("LINE_WITH_AREA"),iconCssClasses:"icon-region-chart-line-area"},{value:"pie",label:j("PIE"),iconCssClasses:"icon-region-chart-pie"},{value:"polar",label:j("POLAR"),iconCssClasses:"icon-region-chart-polar"},{value:"radar",label:j("RADAR"),iconCssClasses:"icon-region-chart-radar"},{value:"range",label:j("RANGE"),iconCssClasses:"icon-region-chart-range-bar"},{value:"scatter",label:j("SCATTER"),iconCssClasses:"icon-region-chart-scatter"},{value:"stock",label:j("STOCK"),iconCssClasses:"icon-region-chart-stock"}]}),e(m,{id:"CH_ORIENTATION",options:[{value:"vertical",label:j("VERTICAL")},{value:"horizontal",label:j("HORIZONTAL")}]}),e(m,{id:"CH_LABEL_COLUMN",options:r}),e(m,{id:"CH_VALUE_COLUMN",options:s}),e(m,{id:"CH_VALUE_FUNCTION",options:i}),e(m,{id:"CH_X_COLUMN",options:d}),e(m,{id:"CH_X_FUNCTION",options:i}),e(m,{id:"CH_Y_COLUMN",options:s}),e(m,{id:"CH_Y_FUNCTION",options:i}),e(m,{id:"CH_Z_COLUMN",options:s}),e(m,{id:"CH_Z_FUNCTION",options:i}),e(m,{id:"CH_OPEN_COLUMN",options:s}),e(m,{id:"CH_OPEN_FUNCTION",options:i}),e(m,{id:"CH_CLOSE_COLUMN",options:s}),e(m,{id:"CH_CLOSE_FUNCTION",options:i}),e(m,{id:"CH_HIGH_COLUMN",options:s}),e(m,{id:"CH_HIGH_FUNCTION",options:i}),e(m,{id:"CH_LOW_COLUMN",options:s}),e(m,{id:"CH_LOW_FUNCTION",options:i}),e(m,{id:"CH_VOLUME_COLUMN",options:s}),e(m,{id:"CH_VOLUME_FUNCTION",options:i}),e(m,{id:"CH_TARGET_COLUMN",options:s}),e(m,{id:"CH_TARGET_FUNCTION",options:i}),e(m,{id:"CH_SERIES_COLUMN",options:r}),e(m,{id:"CH_STACK",options:[{value:q,label:j("OFF")},{value:X,label:j("ON")}]}),e(m,{id:"CH_SORT_BY",options:[]}),t._renderSortControls(e,"CH_SORT_"),e(p,{id:"CH_AXIS_LABEL_TITLE",maxChars:255}),e(p,{id:"CH_AXIS_VALUE_TITLE",maxChars:255}),e(p,{id:"CH_AXIS_VALUE_DECIMAL"})}),{viewDialog:!0,width:750,height:450,titleKey:"CHART",modelOptions:{fields:{id:{canHide:!1,hidden:!0,seq:0},type:{label:"TYPE",elementId:"CH_TYPE",seq:10,defaultValue:B},orientationId:{label:"ORIENTATION",elementId:"CH_ORIENTATION",seq:20,fieldColSpan:7,defaultValue:"vertical"},labelColumnId:{label:"LABEL_COLUMN",elementId:"CH_LABEL_COLUMN",seq:30,fieldColSpan:7,defaultValue:""},valueColumnId:{label:"VALUE_COLUMN",elementId:"CH_VALUE_COLUMN",seq:40,fieldColSpan:7,defaultValue:""},valueFunctionId:{label:"AGGREGATION",elementId:"CH_VALUE_FUNCTION",seq:45,fieldColSpan:5,defaultValue:""},xColumnId:{label:"X_COLUMN",elementId:"CH_X_COLUMN",seq:50,fieldColSpan:7,defaultValue:""},xFunctionId:{label:"AGGREGATION",elementId:"CH_X_FUNCTION",seq:55,fieldColSpan:5,defaultValue:""},yColumnId:{label:"Y_COLUMN",elementId:"CH_Y_COLUMN",seq:60,fieldColSpan:7,defaultValue:""},yFunctionId:{label:"AGGREGATION",elementId:"CH_Y_FUNCTION",seq:65,fieldColSpan:5,defaultValue:""},openColumnId:{label:"OPEN_COLUMN",elementId:"CH_OPEN_COLUMN",seq:70,fieldColSpan:7,defaultValue:""},openFunctionId:{label:"AGGREGATION",elementId:"CH_OPEN_FUNCTION",seq:75,fieldColSpan:5,defaultValue:""},closeColumnId:{label:"CLOSE_COLUMN",elementId:"CH_CLOSE_COLUMN",seq:80,fieldColSpan:7,defaultValue:""},closeFunctionId:{label:"AGGREGATION",elementId:"CH_CLOSE_FUNCTION",seq:85,fieldColSpan:5,defaultValue:""},highColumnId:{label:"HIGH_COLUMN",elementId:"CH_HIGH_COLUMN",seq:90,fieldColSpan:7,defaultValue:""},highFunctionId:{label:"AGGREGATION",elementId:"CH_HIGH_FUNCTION",seq:95,fieldColSpan:5,defaultValue:""},lowColumnId:{label:"LOW_COLUMN",elementId:"CH_LOW_COLUMN",seq:100,fieldColSpan:7,defaultValue:""},lowFunctionId:{label:"AGGREGATION",elementId:"CH_LOW_FUNCTION",seq:105,fieldColSpan:5,defaultValue:""},volumeColumnId:{label:"VOLUME_COLUMN",elementId:"CH_VOLUME_COLUMN",seq:110,fieldColSpan:7,defaultValue:""},volumeFunctionId:{label:"AGGREGATION",elementId:"CH_VOLUME_FUNCTION",seq:115,fieldColSpan:5,defaultValue:""},targetColumnId:{label:"TARGET_COLUMN",elementId:"CH_TARGET_COLUMN",seq:120,fieldColSpan:7,defaultValue:""},targetFunctionId:{label:"AGGREGATION",elementId:"CH_TARGET_FUNCTION",seq:125,fieldColSpan:5,defaultValue:""},zColumnId:{label:"Z_COLUMN",elementId:"CH_Z_COLUMN",seq:130,fieldColSpan:7,defaultValue:""},zFunctionId:{label:"AGGREGATION",elementId:"CH_Z_FUNCTION",seq:135,fieldColSpan:5,defaultValue:""},seriesColumnId:{label:"SERIES_COLUMN",elementId:"CH_SERIES_COLUMN",seq:140,fieldColSpan:7,defaultValue:""},stackId:{label:"STACK",elementId:"CH_STACK",seq:143,fieldColSpan:5,defaultValue:q},sortBy:{label:"SORT_BY",elementId:"CH_SORT_BY",seq:145,fieldColSpan:7,defaultValue:j("LABEL_COLUMN")},sortDirection:{label:"DIRECTION",elementId:"CH_SORT_DIRECTION",seq:147,fieldColSpan:3,defaultValue:N},sortNulls:{label:"NULLS",elementId:"CH_SORT_NULLS",seq:149,fieldColSpan:2,defaultValue:L},axisLabelTitle:{label:"AXIS_LABEL_TITLE",elementId:"CH_AXIS_LABEL_TITLE",seq:150,fieldColSpan:7},axisValueTitle:{label:"AXIS_VALUE_TITLE",elementId:"CH_AXIS_VALUE_TITLE",seq:170,fieldColSpan:7},axisValueDecimal:{label:"AXIS_VALUE_DECIMAL",elementId:"CH_AXIS_VALUE_DECIMAL",seq:180,fieldColSpan:3}}},init:function(i,n,o){var a,l,r={},s=t._getElement("CH_TYPE"),d=t._getElement("CH_ORIENTATION"),c=t._getElement("CH_LABEL_COLUMN"),u=t._getElement("CH_VALUE_COLUMN"),h=t._getElement("CH_X_COLUMN"),g=t._getElement("CH_Y_COLUMN"),p=t._getElement("CH_Z_COLUMN"),m=t._getElement("CH_OPEN_COLUMN"),f=t._getElement("CH_CLOSE_COLUMN"),_=t._getElement("CH_HIGH_COLUMN"),C=t._getElement("CH_LOW_COLUMN"),I=t._getElement("CH_VOLUME_COLUMN"),E=t._getElement("CH_TARGET_COLUMN"),v=t._getElement("CH_SERIES_COLUMN"),b=t._getElement("CH_STACK"),w=t._getElement("CH_AXIS_LABEL_TITLE"),A=t._getElement("CH_AXIS_VALUE_TITLE"),T=t._getElement("CH_AXIS_VALUE_DECIMAL"),R=t._getElement("CH_VALUE_FUNCTION"),S=t._getElement("CH_X_FUNCTION"),N=t._getElement("CH_Y_FUNCTION"),L=t._getElement("CH_Z_FUNCTION"),y=t._getElement("CH_OPEN_FUNCTION"),O=t._getElement("CH_CLOSE_FUNCTION"),k=t._getElement("CH_HIGH_FUNCTION"),V=t._getElement("CH_LOW_FUNCTION"),M=t._getElement("CH_VOLUME_FUNCTION"),D=t._getElement("CH_TARGET_FUNCTION"),x=t._getElement("CH_SORT_BY"),G=t._getElement("CH_SORT_DIRECTION"),H=t._getElement("CH_SORT_NULLS"),P=x.val();function F(){var t=s.val();d.val();switch(ye([d,c,u,h,g,p,m,f,_,C,I,E,v,b,w,A,T,R,S,N,L,y,O,k,V,M,D,x,G,H]),function(){var e=o.recordView("getRecord");function t(t,n){i.setValue(e,t,n)}t("sortBy",x.val()),t("sortDirection",G.val()),t("sortNulls",H.val()),t("orientationId",d.val()),t("stackId",b.val())}(),a=[d,c,u,v,b,R,w,A,T,x,G,H],l=[c,u,R,x,G,H],t){case"area":Le(a),ke([c,u],!0),ke([h,g,p,m,f,_,C],!1),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[ee]=j("VALUE_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))}));break;case B:Le([d,c,u,p,v,b,R,L,w,A,T,x,G,H]),ke([c,u],!0),ke([h,g,p,m,f,_,C],!1),P=x.val(),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[ee]=j("VALUE_COLUMN"),r[ne]=j("Z_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))})),null===P&&""===P||x.val(P);break;case"bubble":Le([c,h,g,p,S,N,L,w,A,T,x,G,H]),ke([c,h,g,p],!0),ke([u,m,f,_,C],!1),P=x.val(),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[te]=j("X_COLUMN"),r[ie]=j("Y_COLUMN"),r[ne]=j("Z_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))})),null===P&&""===P||x.val(P);break;case"donut":Le([c,u,R,x,G,H,T]),ke([c,u],!0),ke([h,g,p,m,f,_,C],!1),P=x.val(),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[ee]=j("VALUE_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))})),null===P&&""===P||x.val(P);break;case"funnel":Le([d,c,u,E,R,D,x,G,H]),ke([c,u],!0),ke([h,g,p,m,f,_,C],!1),P=x.val(),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[ee]=j("VALUE_COLUMN"),r[oe]=j("TARGET_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))})),null===P&&""===P||x.val(P);break;case"line":case"lineWithArea":Le(a),ke([c,u],!0),ke([h,g,p,m,f,_,C],!1),P=x.val(),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[ee]=j("VALUE_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))})),null===P&&""===P||x.val(P);break;case"pie":Le([c,u,R,T,x,G,H]),ke([c,u],!0),ke([h,g,p,m,f,_,C],!1);break;case"polar":case"radar":Le(l),ke([c,u],!0),ke([h,g,p,m,f,_,C],!1),P=x.val(),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[ee]=j("VALUE_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))})),null===P&&""===P||x.val(P);break;case"range":Le([d,c,_,C,p,v,k,V,L,w,A,T,x,G,H]),ke([_,C],!0),ke([c,u,h,g,p,m,f],!1),P=x.val(),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[ae]=j("HIGH_COLUMN"),r[le]=j("LOW_COLUMN"),r[ne]=j("Z_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))})),null===P&&""===P||x.val(P);break;case"stock":Le([c,m,f,_,C,I,y,O,k,V,M]),ke([c,m,f,_,C],!0),ke([u,h,g,p],!1);break;case"scatter":Le([c,h,g,v,S,N,w,A,T,x,G,H]),ke([c,h,g],!0),ke([u,p,m,f,_,C],!1),P=x.val(),x.empty(),(r={})[J]=j("LABEL_COLUMN"),r[te]=j("X_COLUMN"),r[ie]=j("Y_COLUMN"),e.each(r,(function(t,i){x.append(e("<option></option>").attr("value",t).text(i))})),null===P&&""===P||x.val(P)}}s.change(F),o.on("apexbeginrecordedit",(function(e,i){var n=s.val();we(t._getId("CH_TYPE"),n),F()}))},load:function(i){var n,o,a=e.extend({},t.getChart());for(n in a.axis&&(a.axis.label&&(a.axisLabelTitle=a.axis.label),a.axis.value&&(a.axisValueTitle=a.axis.value),a.axis.valueDecimalPlaces&&(a.axisValueDecimal=a.axis.valueDecimalPlaces),delete a.axis),a.stackId=a.stack,delete a.stack,a.orientationId=a.orientation,delete a.orientation,a.chartColumns)if(a.chartColumns.hasOwnProperty(n))switch(o=a.chartColumns[n],n){case"LABEL":a.type in{bar:1,bubble:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}&&(a.labelColumnId=o.columnId,o.sort&&(a.sortBy="LABEL",a.sortDirection=o.sort.direction,a.sortNulls=o.sort.nulls));break;case"VALUE":a.valueColumnId=o.columnId,o.function&&(a.valueFunctionId=o.function),o.sort&&(a.sortBy="VALUE",a.sortDirection=o.sort.direction,a.sortNulls=o.sort.nulls);break;case"X":a.xColumnId=o.columnId,o.function&&(a.xFunctionId=o.function),o.sort&&(a.sortBy="X",a.sortDirection=o.sort.direction,a.sortNulls=o.sort.nulls);break;case"Y":a.yColumnId=o.columnId,o.function&&(a.yFunctionId=o.function),o.sort&&(a.sortBy="Y",a.sortDirection=o.sort.direction,a.sortNulls=o.sort.nulls);break;case"Z":a.zColumnId=o.columnId,o.function&&(a.zFunctionId=o.function),o.sort&&(a.sortBy="Z",a.sortDirection=o.sort.direction,a.sortNulls=o.sort.nulls);break;case"OPEN":a.openColumnId=o.columnId,o.function&&(a.openFunctionId=o.function);break;case"CLOSE":a.closeColumnId=o.columnId,o.function&&(a.closeFunctionId=o.function);break;case"HIGH":a.highColumnId=o.columnId,o.function&&(a.highFunctionId=o.function),o.sort&&(a.sortBy="HIGH",a.sortDirection=o.sort.direction,a.sortNulls=o.sort.nulls);break;case"LOW":a.lowColumnId=o.columnId,o.function&&(a.lowFunctionId=o.function),o.sort&&(a.sortBy="LOW",a.sortDirection=o.sort.direction,a.sortNulls=o.sort.nulls);break;case"VOLUME":a.volumeColumnId=o.columnId,o.function&&(a.volumeFunctionId=o.function);break;case"TARGET":a.targetColumnId=o.columnId,o.function&&(a.targetFunctionId=o),o.sort&&(a.sortBy="TARGET",a.sortDirection=o.sort.direction,a.sortNulls=o.sort.nulls);break;case"SERIES_NAME":a.seriesColumnId=o.columnId}delete a.chartColumns,i.setData(a)},validate:function(e,t,i){var n,a=!0,l=e.getRecord();return l.sortBy&&(n=l.sortBy.toLowerCase()+"ColumnId",l.hasOwnProperty(n)?t(l.sortBy,"sortBy"):(i(l.sortBy,"sortBy",o.formatMessage("APEX.IG.INVALID_SORT_BY",l.sortBy)),a=!1)),a},store:function(i){var n,o,a,l,r,s,d,c,u,h,g,p,m=e.extend({},i.getRecord());m.axis={},m.axis={label:m.axisLabelTitle,value:m.axisValueTitle,valueDecimalPlaces:m.axisValueDecimal},delete m.axisLabelTitle,delete m.axisValueTitle,delete m.axisValueDecimal,m.stack=m.stackId,m.orientation=m.orientationId,m.chartColumns={},m.type in{bar:1,bubble:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}?m.labelColumnId&&(n={columnId:m.labelColumnId,columnType:C},m.sortBy===J&&(n.sort={order:1,direction:m.sortDirection,nulls:m.sortNulls}),m.chartColumns.LABEL=n):delete m.chartColumns.LABEL,m.type in{bar:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1}?m.valueColumnId&&(o={columnId:m.valueColumnId,columnType:C},m.sortBy===ee&&(o.sort={order:1,direction:m.sortDirection,nulls:m.sortNulls}),m.valueFunctionId&&(o.function=m.valueFunctionId),m.chartColumns.VALUE=o):delete m.chartColumns.VALUE,m.type in{bubble:1,scatter:1}?(m.xColumnId&&(a={columnId:m.xColumnId,columnType:C},"X"===m.sortBy&&(a.sort={order:1,direction:m.sortDirection,nulls:m.sortNulls}),m.xFunctionId&&(a.function=m.xFunctionId),m.chartColumns.X=a),m.yColumnId&&(l={columnId:m.yColumnId,columnType:C},"Y"===m.sortBy&&(l.sort={order:1,direction:m.sortDirection,nulls:m.sortNulls}),m.yFunctionId&&(l.function=m.yFunctionId),m.chartColumns.Y=l)):(delete m.chartColumns.X,delete m.chartColumns.Y),m.type in{bar:1,bubble:1}?m.zColumnId&&(r={columnId:m.zColumnId,columnType:C},"Z"===m.sortBy&&(r.sort={order:1,direction:m.sortDirection,nulls:m.sortNulls}),m.zFunctionId&&(r.function=m.zFunctionId),m.chartColumns.Z=r):delete m.chartColumns.Z,"stock"===m.type?(m.openColumnId&&(s={columnId:m.openColumnId,columnType:C},m.openFunctionId&&(s.function=m.openFunctionId),m.chartColumns.OPEN=s),m.closeColumnId&&(d={columnId:m.closeColumnId,columnType:C},m.closeFunctionId&&(d.function=m.closeFunctionId),m.chartColumns.CLOSE=d),m.volumeColumnId&&(h={columnId:m.volumeColumnId,columnType:C},m.volumeFunctionId&&(h.function=m.volumeFunctionId),m.chartColumns.VOLUME=h)):(delete m.chartColumns.OPEN,delete m.chartColumns.CLOSE,delete m.chartColumns.VOLUME),m.type in{range:1,stock:1}?(m.highColumnId&&(c={columnId:m.highColumnId,columnType:C},"HIGH"===m.sortBy&&(c.sort={order:1,direction:m.sortDirection,nulls:m.sortNulls}),m.highFunctionId&&(c.function=m.highFunctionId),m.chartColumns.HIGH=c),m.lowColumnId&&(u={columnId:m.lowColumnId,columnType:C},"LOW"===m.sortBy&&(u.sort={order:1,direction:m.sortDirection,nulls:m.sortNulls}),m.lowFunctionId&&(u.function=m.lowFunctionId),m.chartColumns.LOW=u)):(delete m.chartColumns.HIGH,delete m.chartColumns.LOW),"funnel"===m.type?m.targetColumnId&&(g={columnId:m.targetColumnId,columnType:C},"TARGET"===m.sortBy&&(g.sort={order:1,direction:m.sortDirection,nulls:m.sortNulls}),m.targetFunctionId&&(g.function=m.targetFunctionId),m.chartColumns.TARGET=g):delete m.chartColumns.TARGET,m.seriesColumnId&&(p={columnId:m.seriesColumnId,columnType:C},m.chartColumns.SERIES_NAME=p),delete m.sortBy,delete m.sortDirection,delete m.sortNulls,delete m.stackId,delete m.orientationId,delete m.xColumnId,delete m.xFunctionId,delete m.yFunctionId,delete m.yColumnId,delete m.valueColumnId,delete m.valueFunctionId,delete m.labelColumnId,delete m.zColumnId,delete m.zFunctionId,delete m.openColumnId,delete m.openFunctionId,delete m.closeColumnId,delete m.closeFunctionId,delete m.volumeColumnId,delete m.volumeFunctionId,delete m.highColumnId,delete m.highFunctionId,delete m.lowColumnId,delete m.lowFunctionId,delete m.targetColumnId,delete m.targetFunctionId,delete m.seriesColumnId,t.setChart(m)}})},setColumnConfig:function(t){var i,n,o,a,l,r={},s={},d=t.baseModelColumns,c=t.ig,u=t.igConfig,h=t.currentReportSettings.views.chart.chartColumns,g=["CLOSE","HIGH","LABEL","LOW","OPEN","SERIES_NAME","TARGET","VALUE","VOLUME","X","Y","Z"],p=0;for(l=0;l<g.length;l++)o=g[l],h.hasOwnProperty(o)&&((r=e.extend(!0,{},d[h[o].columnId])).seq=p,r.index=p,s[o]=r,p++);if(u.parentRegionStaticId)for(n in d)d.hasOwnProperty(n)&&(a=d[n]).parentField&&(i=c._getColumn(n),(r=e.extend(!0,{},a)).seq=p,r.virtual=!0,delete r.index,s[i.name]=r,p++);this.modelColumns=s,this.specialColumns={}},initView:function(t){var i,n,o,a,l,r,s,d,c,u,h=t.ig,g=this,p=h._currentReportSettings().views.chart,m=t.igConfig,f=[],_="disabled";require(["ojs/ojcore","ojs/ojchart","ojs/ojvalidation"],(function(){function t(t){var i,n=oj.ConverterFactory.CONVERTER_TYPE_NUMBER,o=h._getColumn(t);return o.filter.dataType===F||o.filter.dataType===U||"TIMESTAMP_TZ"===o.filter.dataType||"TIMESTAMP_LTZ"===o.filter.dataType?(n=oj.ConverterFactory.CONVERTER_TYPE_DATETIME,i=function(t){var i=t.appearance.formatMask;i?e.each(se,(function(e,t){t.value===i&&(i=t.label)})):i={formatType:"date",dateFormat:"medium"};return i}(o)):o.filter.dataType===P&&(i=function(t){var i,n=t.appearance.formatExample.trim();p.axis&&p.axis.valueDecimalPlaces&&(i=p.axis.valueDecimalPlaces);n?e.each(re,(function(e,t){t.value===n&&(n=t.label)})):n={style:"decimal",maximumFractionDigits:i||2};return n}(o)),i?oj.Validation.converterFactory(n).createConverter(i):{}}switch(p.chartColumns.LABEL.columnId&&((l=h._getColumn(p.chartColumns.LABEL.columnId)).filter.dataType!==F&&l.filter.dataType!==U&&"TIMESTAMP_TZ"!==l.filter.dataType&&"TIMESTAMP_LTZ"!==l.filter.dataType||(_="enabled")),n={legend:{rendered:$,position:"end"},orientation:p.orientation,stack:p.stack,animationOnDisplay:$,animationOnDataChange:$,hoverBehavior:"dim",groups:[],series:[],valueFormats:[],timeAxisType:_,translations:{labelNoData:m.text.noDataFound}},p.type){case"area":case B:o=e.extend({},n,{type:p.type,legend:p.chartColumns.SERIES_NAME?{rendered:$}:{rendered:q},coordinateSystem:"cartesian",valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"y",converter:t(p.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case"bubble":o=e.extend({},n,{type:p.type,legend:{rendered:q},coordinateSystem:"cartesian",xAxis:{},yAxis:{}});break;case"donut":o=e.extend({},n,{type:"pie",styleDefaults:{pieInnerRadius:.5},legend:{rendered:$},hideAndShowBehavior:"withRescale",valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"value",converter:t(p.chartColumns.VALUE.columnId)}]});break;case"pie":o=e.extend({},n,{type:p.type,styleDefaults:{pieInnerRadius:0},legend:{rendered:$},hideAndShowBehavior:"withRescale",valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"value",converter:t(p.chartColumns.VALUE.columnId)}]});break;case"funnel":o=e.extend({},n,{type:p.type,legend:{rendered:$},valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"value",converter:t(p.chartColumns.VALUE.columnId)}]}),p.chartColumns.TARGET&&o.valueFormats.push({type:"target",converter:t(p.chartColumns.TARGET.columnId)});break;case"line":case"lineWithArea":o=e.extend({},n,{type:p.type,legend:p.chartColumns.SERIES_NAME?{rendered:$}:{rendered:q},coordinateSystem:"cartesian",valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"value",converter:t(p.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case"polar":o=e.extend({},n,{type:B,coordinateSystem:p.type,legend:{rendered:q},valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"value",converter:t(p.chartColumns.VALUE.columnId)}],polarGridShape:"circle",stack:X});break;case"radar":o=e.extend({},n,{type:"area",coordinateSystem:"polar",legend:{rendered:q},valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"value",converter:t(p.chartColumns.VALUE.columnId)}],polarGridShape:"polygon",stack:X});break;case"range":o=e.extend({},n,{type:B,legend:p.chartColumns.SERIES_NAME?{rendered:$}:{rendered:q},valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"high",converter:t(p.chartColumns.HIGH.columnId)},{type:"low",converter:t(p.chartColumns.LOW.columnId)}],xAxis:{},yAxis:{}});break;case"scatter":o=e.extend({},n,{type:p.type,legend:p.chartColumns.SERIES_NAME?{rendered:$}:{rendered:q},coordinateSystem:"cartesian",valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"x",converter:t(p.chartColumns.X.columnId)},{type:"y",converter:t(p.chartColumns.Y.columnId)}],xAxis:{},yAxis:{}});break;case"stock":o=e.extend({},n,{type:p.type,zoomAndScroll:"delayed",initialZooming:"first",legend:{rendered:$},dataCursor:X,dataCursorBehavior:"smooth",valueFormats:[{type:V,converter:t(p.chartColumns.LABEL.columnId)},{type:"high",converter:t(p.chartColumns.HIGH.columnId)},{type:"low",converter:t(p.chartColumns.LOW.columnId)},{type:"open",converter:t(p.chartColumns.OPEN.columnId)},{type:"close",converter:t(p.chartColumns.CLOSE.columnId)}],xAxis:{},yAxis:{}}),p.chartColumns.VOLUME&&o.valueFormats.push({type:"volume",converter:t(p.chartColumns.VOLUME.columnId)}),o.series.type="candlestick"}if(p.type in{area:1,bar:1,bubble:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}){switch(p.type){case"stock":r=p.chartColumns.OPEN.columnId;break;case"range":r=p.chartColumns.HIGH.columnId;break;case"scatter":case"bubble":r=p.chartColumns.X.columnId;break;default:r=p.chartColumns.VALUE.columnId}p.axis&&(p.axis.label&&(s=p.axis.label),p.axis.value&&(d=p.axis.value)),o.xAxis={title:s,baselineScaling:"zero",majorTick:{rendered:X},minorTick:{rendered:q},tickLabel:{rendered:X,converter:t(p.chartColumns.LABEL.columnId),scaling:y},position:$,rotation:q},o.yAxis={title:d,baselineScaling:"zero",position:"stock"===p.type?"end":$,majorTick:{rendered:X},minorTick:{rendered:q},tickLabel:{rendered:X,converter:t(r),scaling:y}}}if(p.type in{bar:1,area:1,polar:1,radar:1,range:1,line:1,lineWithArea:1,bubble:1,scatter:1,stock:1}){switch(i={path:"groups",uniqueIndexField:"LABEL",item:{name:"LABEL"}},p.type){case"bubble":a={name:"LABEL",x:"X",y:"Y",z:"Z",labelPosition:"'none'"};break;case"scatter":a={name:"LABEL",x:"X",y:"Y",labelPosition:"'none'"};break;case"stock":a={name:"LABEL",open:"OPEN",close:"CLOSE",high:"HIGH",low:"LOW",volume:"VOLUME"};break;case"range":a={name:"LABEL",high:"HIGH",low:"LOW",labelPosition:"'none'"};break;default:a={label:"VALUE",value:"VALUE",name:"LABEL",labelPosition:"'none'"}}f=p.chartColumns.SERIES_NAME?[i,{path:"series",uniqueIndexField:"SERIES_NAME",item:{name:"SERIES_NAME",displayInLegend:X}},{path:"series/[SERIES_NAME]/items",item:a}]:[i,{path:"series/0/items",item:a}]}if(p.type in{pie:1,donut:1,funnel:1}&&(c=g.model.getFieldKey("LABEL"),f=[{path:"series",uniqueIndexField:"LABEL",item:function(e,t){return{name:""+t[c],displayInLegend:X}}},{path:"series/[LABEL]/items",item:{value:"VALUE",targetValue:"TARGET"}}]),p.chartColumns.VALUE){if(p.chartColumns.VALUE.sort)switch(p.chartColumns.VALUE.sort.direction){case"asc":u="ascending";break;case"desc":u="descending"}}else p.chartColumns.LABEL.sort?u="label-"+p.chartColumns.LABEL.sort.direction:(p.chartColumns.SERIES_NAME&&(u="label-asc"),u="off");o.sorting=u,g._dataTransformOptions={showNullAs:m.appearance.showNullValue,offset:0,template:f},g._chartOptions=o,g._updateChartData(),g.view$.ojChart(o).css({"max-width":"100%"}),g._subscribeModel(),(m.lazyLoad||g.model.getTotalRecords()<0)&&g.refresh()}))},_updateChartData:function(){var t;if(t=this.model.transform(this._dataTransformOptions,this._chartOptions),-1===e.inArray(t.type,["pie","funnel","scatter","bubble","stock","polar","radar"])&&t.series.length>1&&"mixedFrequency"!==t.timeAxisType&&"skipGaps"!==t.timeAxisType){u.chartSortArray(t.groups,t.sorting);for(var i=0;i<t.series.length;i++)u.chartFillGaps(t.groups,t.series[i].items,t.sorting,!0)}},_subscribeModel:function(){var e=this,t=this.view$;this._observedModel&&this._observedModel.unSubscribe(this._observerId),this._observedModel=this.model,this._observerId=this.model.subscribe({viewId:t[0].id,onChange:function(t){"refresh"===t&&e.refresh()},progressView:t})},refresh:function(){var e=this;if(this.view$.hasClass("oj-chart")){if(null===this.view$[0].offsetParent)return void(this._pendingRefresh=!0);this._pendingRefresh=!1,this.model.fetch(0,(function(t){t&&i.warn("No data fetched for chart"),e._updateChartData(),e.resize()}))}},resize:function(){if(this.view$.hasClass("oj-chart")){if(this._pendingRefresh)return void this.refresh();this.view$.ojChart("refresh")}},destroyView:function(){this.model&&this.model.unSubscribe(this.view$[0].id),this.view$.ojChart("destroy")},setModelName:function(e){this._subscribeModel(),this.view$.hasClass("oj-chart")&&(this.model.getTotalRecords()<0?this.refresh():(this._updateChartData(),this.resize()))},setNoDataMessage:function(e){var t=this.view$;t.hasClass("oj-chart")&&t.ojChart(v,"translations.labelNoData",e)}})}(apex.jQuery,apex.util,apex.debug,apex.server,apex.lang,apex.actions,apex.region,apex.theme,apex.message,apex.item,apex.model,apex.widget.util);