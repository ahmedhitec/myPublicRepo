!function(e,t){"use strict";var n=t.ui.keyCode;e.listManager=function(i,a){var o,p,r,l=t.extend({dependingOnSelector:null,optimizeRefresh:!0,pageItemsToSubmit:null},a),d="",u=!1,s=t(i,apex.gPageContext$),c=t(i+"_ADD",apex.gPageContext$),g=t(i+"_ADD_lov_btn",apex.gPageContext$),f=c.closest("tr").find("[value='Add']"),h={itemId:i.substring(1)+"_ADD",ajaxIdentifier:a.ajaxIdentifier,initialFetch:a.initialFetch||"empty",isPopup:!1,multiple:!1,display:"list",height:450,width:500,minSearchChars:0,columns:{DISPLAY:{seq:10,index:0},RETURN:{seq:20,index:1}},displayColumn:"DISPLAY",valueColumn:"RETURN"};function v(){var t,n=c.val();t=n!==d?n:null,d=n,c.attr("aria-expanded","true"),e.util.openPopupLov(u,t,!1,h,(function(e){e&&(d=e.d||e.v||e),c.attr("aria-expanded","false")})),u=!1}function x(){p.refresh()}h.initialSearch="",u=!0,(l.pageItemsToSubmit||l.dependingOnSelector)&&(r=l.pageItemsToSubmit||"",l.dependingOnSelector&&(r.length>0&&(r+=","),r+=l.dependingOnSelector),h.itemsToSubmit=r.replace(/#/g,"").split(/\s*,\s*/)),t(i,apex.gPageContext$).each((function(){var e=this;apex.item.create(this.id,{enable:function(){var n=$x(e.id+"_fieldset");t(":input",n).prop("disabled",!1).filter("[type!=button]").removeClass("apex_disabled"),g.prop("disabled",!1)},disable:function(){var n=$x(e.id+"_fieldset");t("option:selected",$x(e.id)).prop("selected",!1),t(":input",n).prop("disabled",!0).filter("[type!=button]").addClass("apex_disabled"),g.prop("disabled",!0)},hide:function(){t("#"+e.id+"_fieldset",apex.gPageContext$).hide()},show:function(){t("#"+e.id+"_fieldset",apex.gPageContext$).show()},setValue:function(e){var n,i="";void 0!==e&&(n=apex.util.toArray(e),t.each(n,(function(e,t){t=apex.util.escapeHTML(t),i+='<option value="'+t+'">'+t+"</option>"})),s.find("option").remove().end().append(i))},getValue:function(){var e=[];return t("option",s[0]).each((function(){e.push(this.value)})),e},isChanged:function(){return $v(s[0])!==o},addValue:function(e){var n,i,a=e.split(","),o=!1,p="";for(i=0;i<a.length;i++)""!==(n=t.trim(a[i]))&&0===s.find('option[value="'+n.replace(/"/g,'\\"')+'"]').length&&(p='<option value="'+(n=apex.util.escapeHTML(n))+'">'+n+"</option>",s.append(p),o=!0);o&&s.change()},removeValue:function(e){var n,i;e?(s.children().each((function(){var i=t(this);i.attr("value")==e&&(i.remove(),n=!0)})),n&&s.change()):(i=s.find(":selected")).length>0&&(i.remove(),s.change())},refresh:function(){var e,n;s.trigger("apexbeforerefresh"),c.val(""),t("option",s).remove(),s.change(),(e=c.data("popupLovModelName"))&&(n=apex.model.get(e))&&(n.setData([]),apex.model.release(e)),u=!0,s.trigger("apexafterrefresh")},getPopupSelector:function(){return".ui-dialog-popuplov"}}),p=apex.item(this.id)})),o=$v(s[0]),g.click((function(){v()})).focus((function(){c.focus()})),c.keydown((function(e){var t=e.which;t===n.DOWN||t===n.UP?v():t===n.ENTER&&(f.trigger("click"),e.preventDefault())})),l.dependingOnSelector&&t(l.dependingOnSelector,apex.gPageContext$).change(x),s.on("apexrefresh",x),s.change((function(e){void 0!==e.originalEvent&&e.stopImmediatePropagation()}))}}(apex.widget,apex.jQuery);