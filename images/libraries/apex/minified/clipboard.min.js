apex.clipboard=function(e,t,n){"use strict";var o=[],a=document.execCommand&&document.queryCommandSupported;function c(e){var t,a,c,d,i=e.originalEvent,r=n(document.activeElement);if(c=i.clipboardData||window.clipboardData)for(d={dt:c,setData:function(e,t){(window.clipboardData||/Edge\/\d./i.test(navigator.userAgent))&&("text/plain"===e&&(e="text"),"text"!==e)||this.dt.setData(e,t)}},t=0;t<o.length;t++)if(a=o[t],r.closest(a.element).length>0){a.handler(d)&&e.preventDefault();break}}function d(){var e,t=document.activeElement;"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName&&(window.getSelection().removeAllRanges(),(e=document.createRange()).selectNode(n("#apexCBMDummySelection")[0]),window.getSelection().addRange(e),n(t).focus())}var i={isSupported:function(){return a&&document.queryCommandSupported("copy")},copy:function(o){var a=!1,c="APEX.CLIPBOARD.NOTSUP";return o=o||{},this.isSupported()&&(d(),a=document.execCommand("copy")),a||(o.noWarn||t.loadMessagesIfNeeded([c],(function(){apex.message.alert(t.getMessage(c))})),e.warn("Browser does not support clipboard copy command.")),a&&o.tooltipElement&&n(o.tooltipElement).tooltip({content:t.getMessage("APEX.CLIPBOARD.COPIED"),close:function(){n(this).tooltip("destroy")}}),a},addElement:function(e,t){var o=this,a=n(e);-1===a.prop("tabIndex")&&a.prop("tabIndex",0),apex.clipboard.addHandler(a[0],(function(e){return e.setData("text/plain",(a.text()||a.val()).replace(/\n/g,"\r\n")),!0})),t&&n(t).click((function(){a.focus(),o.copy({tooltipElement:t}),n(this).focus()}))},addText:function(e,t){var o=this,a=n(t);apex.clipboard.addHandler(a[0],(function(t){return t.setData("text/plain",e),!0})),n(t).click((function(){o.copy({tooltipElement:t}),n(this).focus()}))},addHandler:function(e,t){0===o.length&&(n(document).on("copy.cbManager",c),n(document.body).append("<input id='apexCBMDummySelection'style='display:none;' value='x'>")),n(e).on("keydown.cbManager",(function(e){((e.metaKey||e.ctrlKey)&&67===e.which||e.shiftKey&&121===e.which)&&d()})).on("contextmenu.cbManager",(function(){d()})),o.push({element:e,handler:t})},removeHandler:function(e){var t;for(t=0;t<o.length;t++)if(o[t].element===e){o.splice(t,1);break}n(e).off(".cbManager"),0===o.length&&(n(document).off(".cbManager"),n("#apexCBMDummySelection").remove())}};return n((function(){n("[data-clipboard-source]",apex.gPageContext$).each((function(){var e=n(this),t=e.attr("data-clipboard-source");"#"===t.substr(0,1)?i.addElement(n(t)[0],e[0]):i.addText(t,e[0])}))})),i}(apex.debug,apex.lang,apex.jQuery);