window.pageDesigner={},function(e,t,a,n,o,i,r,s,l,c,_){"use strict";var P,O,d=null,p={},u="0:renderTree_container,0:dynActTree_container,0:procTree_container,0:sharedComp_container,1:grid_layout,1:search,1:help,2:peComponentProperties,2:peAttributesTabPanel,2:pePrintingTabPanel",g={},E="aria-label",N="option",A="active",T="pd-undo",C="pd-redo",I="pd-goto-dynamic-actions-tree",f="pd-goto-component-view",R="pd-goto-next-page",m="pd-goto-prev-page",L="componentView",h=["#trees","#editor_tabs","#peTabs"];function b(){e.getCurrentPageId()!==t.trim(t("#go_to_page").val())&&t("#go_to_page").val(e.getCurrentPageId())}function S(e,t,a){return t.p_arg_names=["FB_FLOW_ID"],t.p_arg_values=[$v("P4500_CURRENT_APP")],r.process(e,t,a)}function D(e){e?apex.tooltipManager.enableTooltips():apex.tooltipManager.disableTooltips()}function v(){t.each(h,(function(e,a){var n=t(a),o=n.find(".ui-tabs-nav").first(),i=o.children(),r=n.width(),s=g[a];void 0===s&&function(e,a){var n=0;a.each((function(){var e=t(this),a=e.find(".a-Tabs-label"),o=e.find(".a-Icon"),i=a.length>0?a.width():0,r=o.length>0?o.width():0;n+=i+r})),g[e]=n}(a,i),o.toggleClass("ui-tabs--iconOnly",s>r).toggleClass("ui-tabs--single",1===i.length)}))}function G(){var e,a="";return p={},t.each(h,(function(n,o){t(o).find(".ui-tabs-nav").first().children().each((function(i,r){e=t(r).attr("aria-controls"),p[e]={tabs:o,index:i},a&&(a+=","),a+=n+":"+e}))})),v(),a}function y(){var e,a=t("#sp_main_content"),n=G();e=a.hasClass("a-Splitter")?"TAB_LAYOUT_3":"TAB_LAYOUT_2",i.savePreference(e,n)}function U(e,a){var n,o,i,r,s=[],l=t(),c=t("#sp_main_content"),_={};for(e||(e=u),t.each(h,(function(e,a){var n=t(a),o=n.children().first().children(".ui-tabs-nav");s.push({tabs:o,panels:n,activeName:o.children().eq(n.tabs(N,A)).attr("aria-controls")}),l=l.add(o.children())})),l.each((function(){var e=t(this),a=e.attr("aria-controls"),n=t("#"+a);e.remove().removeClass("ui-tabs-active ui-state-active ui-state-hover ui-state-focus").removeAttr("role"),n.detach().removeClass("ui-tabs-panel").removeAttr("role"),_[a]={t:e,p:n}})),(r=e.indexOf("0:")>=0)&&!c.hasClass("a-Splitter")&&d?(t("#left_col").show(),c.splitter(d)):!r&&c.hasClass("a-Splitter")&&(d=t("#sp_main_content").splitter(N),t("#left_col").hide(),c.splitter("destroy").addClass("resize").trigger("resize")),o=e.split(","),n=0;n<o.length;n++)i=o[n].split(":"),_[i[1]]&&(s[i[0]].tabs.append(_[i[1]].t),s[i[0]].panels.append(_[i[1]].p));t.each(s,(function(e,t){var n=0;t.panels.tabs("refresh"),a||(t.panels.children("#"+t.activeName).length&&(n=t.tabs.children("[aria-controls="+t.activeName+"]").index()),t.panels.tabs(N,A,n))})),G()}function B(e){var a=p[e];a.tabs===h[0]?H("sp_main_content"):a.tabs===h[2]&&H("sp_right_content"),t(a.tabs).tabs(N,A,a.index)}function M(e,a){var n=h[1],o=t(n),r="#"+e,s="[aria-controls='"+e+"']",l=t(r+","+s),c=e===L?"ENABLE_COMPONENT_VIEW":"ENABLE_LAYOUT_VIEW",_=function(){var e=t(s).is(":visible"),n=t(r).length>0;i.saveBoolPref(c,a),i.storeTabsLayout(),e&&n&&o.tabs("option","active",0),v()};a?(!function(e){var a,n,o=e.tabSetId,i=e.tabId,r=t(o).tabs(),s=r.find("ul.ui-tabs-nav").first(),l="#"+i;0===t(l).length&&(i===L?(a="Component View",n="icon-comp-view"):(a="Layout",n="icon-pd-layout"),t("<li aria-controls='"+i+"'><a href='"+l+"'><span title='"+a+"' class='a-Icon "+n+"'></span><span class='a-Tabs-label'>"+a+"</span></a></li>").prependTo(s),r.tabs("refresh"))}({tabSetId:n,tabId:e}),_(),apex.message.confirm(i.msg("ENABLE_VIEW_WARN"),(function(e){e&&location.reload()}))):(!function(e){l.remove(),t(e).tabs("refresh")}(n),_())}i.CSS={IS_ERROR:"is-error",IS_WARNING:"is-warning",IS_CONDITIONAL:"is-conditional",IS_NEVER:"is-never",DIALOG_FLUSH_BODY:"ui-dialog-flushBody",IS_CHANGED:"is-changed"},i.SETTINGS={COMPONENT_TITLE:{LABEL:"l",NAME:"n"}},i.settingsState={componentTitle:i.SETTINGS.COMPONENT_TITLE.NAME},i.msg=function(e){return n.getMessage("PD."+e)},i.format=function(e){var t=i.msg(e),a=[t].concat(Array.prototype.slice.call(arguments,1));return n.format.apply(this,a)},i.formatNoEscape=function(e){var t=i.msg(e),a=[t].concat(Array.prototype.slice.call(arguments,1));return n.formatNoEscape.apply(this,a)},i.tooltipContentForComponent=function(t){var n,o,r=t.typeId,s=a.htmlBuilder();function l(e,a,n){var o=t.getProperty(e),i=n;!o||void 0!==a&&o.getValue()===a||(i||(i=o.getDisplayValue()),""!==i&&s.markup("<li><span class='tt-label'>").content(o.getMetaData().prompt).markup(": </span><span class='tt-value'>").content(i).markup("</span></li>"))}function c(){l(e.PROP.GRID_NEW_GRID,"N"),l(e.PROP.GRID_NEW_ROW,"N"),l(e.PROP.GRID_COLUMN,""),l(e.PROP.GRID_NEW_COLUMN,"N"),l(e.PROP.GRID_COLUMN_SPAN,"")}return r===e.COMP_TYPE.PAGE?l(e.PROP.TITLE):r===e.COMP_TYPE.REGION?(l(e.PROP.REGION_TYPE),c()):r===e.COMP_TYPE.PAGE_ITEM?(l(e.PROP.ITEM_LABEL),l(e.PROP.ITEM_TYPE),c()):r===e.COMP_TYPE.BUTTON?(l(e.PROP.BUTTON_LABEL),(n=t.getProperty(e.PROP.BUTTON_TARGET))?l(e.PROP.BUTTON_TARGET,"",i.splitApexUrl(n.getValue()).display):l(e.PROP.BUTTON_ACTION),c()):r===e.COMP_TYPE.DA_EVENT?(o=t.getProperty(e.PROP.WHEN_TYPE),l(e.PROP.EVENT),l(e.PROP.CUSTOM_EVENT),o&&""!==o.getValue()&&(l(e.PROP.WHEN_REGION),l(e.PROP.WHEN_COLUMNS),l(e.PROP.WHEN_BUTTON),l(e.PROP.WHEN_ITEMS),l(e.PROP.WHEN_DOM_OBJECT),l(e.PROP.WHEN_JQUERY_SELECTOR),l(e.PROP.WHEN_JAVASCRIPT_EXPRESSION)),(o=t.getProperty(e.PROP.JS_CONDITION))&&""!==o.getValue()?(l(e.PROP.JS_CONDITION),l(e.PROP.JS_CONDITION_ITEM),l(e.PROP.JS_COND_VALUE),l(e.PROP.JS_COND_LIST)):(o=t.getProperty(e.PROP.JS_CONDITION_WHEN_IG))&&""!==o.getValue()&&(l(e.PROP.JS_CONDITION_WHEN_IG),l(e.PROP.JS_CONDITION_ITEM_WHEN_IG),l(e.PROP.JS_CONDITION_COLUMN_WHEN_IG),l(e.PROP.JS_COND_VALUE_WHEN_IG),l(e.PROP.JS_COND_LIST_WHEN_IG))):r===e.COMP_TYPE.DA_ACTION?function(){var a=t.getProperty(e.PROP.AFFECTED_TYPE);a&&""!==a.getValue()&&(l(e.PROP.AFFECTED_REGION),l(e.PROP.AFFECTED_BUTTON),l(e.PROP.AFFECTED_ITEMS),l(e.PROP.AFFECTED_COLUMNS),l(e.PROP.AFFECTED_DOM_OBJECT),l(e.PROP.AFFECTED_JQUERY_SELECTOR),l(e.PROP.AFFECTED_JAVASCRIPT_EXPRESSION),"TRIGGERING_ELEMENT"!==a.getValue()&&"EVENT_SOURCE"!==a.getValue()||l(e.PROP.AFFECTED_TYPE)),l(e.PROP.FIRE_ON_PAGE_LOAD)}():r===e.COMP_TYPE.VALIDATION?(""===t.getProperty(e.PROP.VALIDATION_REGION).getValue()?(l(e.PROP.VALIDATION_TYPE),l(e.PROP.VAL_SQL_STATEMENT),l(e.PROP.VAL_ITEM),l(e.PROP.VAL_VALUE),l(e.PROP.VAL_REGULAR_EXPRESSION),l(e.PROP.VAL_PLSQL_FUNC_BODY_ERROR),l(e.PROP.VAL_JS_FUNC_BODY_ERROR),l(e.PROP.VAL_JAVA_FUNC_BODY_ERROR),l(e.PROP.VAL_PYTHON_FUNC_BODY_ERROR),l(e.PROP.VAL_PLSQL),l(e.PROP.VAL_SQL_EXPRESSION_BOOLEAN),l(e.PROP.VAL_PLSQL_EXPRESSION_BOOLEAN),l(e.PROP.VAL_JS_EXPRESSION_BOOLEAN),l(e.PROP.VAL_JAVA_EXPRESSION_BOOLEAN),l(e.PROP.VAL_PYTHON_EXPRESSION_BOOLEAN),l(e.PROP.VAL_FUNC_BODY_LANG),l(e.PROP.VAL_PLSQL_FUNC_BODY_BOOLEAN),l(e.PROP.VAL_JS_FUNC_BODY_BOOLEAN),l(e.PROP.VAL_JAVA_FUNC_BODY_BOOLEAN),l(e.PROP.VAL_PYTHON_FUNC_BODY_BOOLEAN)):(l(e.PROP.VALIDATION_REGION),l(e.PROP.REGION_VALIDATION_TYPE),l(e.PROP.REGION_VAL_SQL_STATEMENT),l(e.PROP.REGION_VAL_COLUMN),l(e.PROP.REGION_VAL_VALUE),l(e.PROP.REGION_VAL_REGULAR_EXPRESSION),l(e.PROP.REGION_VAL_PLSQL_FUNC_BODY_ERROR),l(e.PROP.REGION_VAL_JS_FUNC_BODY_ERROR),l(e.PROP.REGION_VAL_JAVA_FUNC_BODY_ERROR),l(e.PROP.REGION_VAL_PYTHON_FUNC_BODY_ERROR),l(e.PROP.REGION_VAL_PLSQL),l(e.PROP.REGION_VAL_SQL_EXPRESSION_BOOLEAN),l(e.PROP.REGION_VAL_PLSQL_EXPRESSION_BOOLEAN),l(e.PROP.REGION_VAL_JS_EXPRESSION_BOOLEAN),l(e.PROP.REGION_VAL_JAVA_EXPRESSION_BOOLEAN),l(e.PROP.REGION_VAL_PYTHON_EXPRESSION_BOOLEAN),l(e.PROP.REGION_VAL_FUNC_BODY_LANG),l(e.PROP.REGION_VAL_PLSQL_FUNC_BODY_BOOLEAN),l(e.PROP.REGION_VAL_JS_FUNC_BODY_BOOLEAN),l(e.PROP.REGION_VAL_JAVA_FUNC_BODY_BOOLEAN),l(e.PROP.REGION_VAL_PYTHON_FUNC_BODY_BOOLEAN)),l(e.PROP.ALWAYS_EXECUTE)):r===e.COMP_TYPE.PAGE_PROCESS?l(e.PROP.PAGE_PROCESS_TYPE):r===e.COMP_TYPE.PAGE_COMPUTATION?(l(e.PROP.COMPUTATION_STATIC_VALUE),l(e.PROP.COMPUTATION_SQL_STATEMENT),l(e.PROP.COMPUTATION_SQL_COLON),l(e.PROP.COMPUTATION_SQL_EXPRESSION_VARCHAR2),l(e.PROP.COMPUTATION_PLSQL_EXPRESSION_VARCHAR2),l(e.PROP.COMPUTATION_JS_EXPRESSION_VARCHAR2),l(e.PROP.COMPUTATION_JAVA_EXPRESSION_VARCHAR2),l(e.PROP.COMPUTATION_PYTHON_EXPRESSION_VARCHAR2),l(e.PROP.COMPUTATION_FUNC_BODY_LANG),l(e.PROP.COMPUTATION_PLSQL_FUNC_BODY_VARCHAR2),l(e.PROP.COMPUTATION_JS_FUNC_BODY_VARCHAR2),l(e.PROP.COMPUTATION_JAVA_FUNC_BODY_VARCHAR2),l(e.PROP.COMPUTATION_PYTHON_FUNC_BODY_VARCHAR2),l(e.PROP.COMPUTATION_ITEM_VALUE),l(e.PROP.COMPUTATION_PREFERENCE_VALUE)):r===e.COMP_TYPE.BRANCH?(l(e.PROP.BRANCH_TYPE),(n=t.getProperty(e.PROP.TARGET))?l(e.PROP.TARGET,"",i.splitApexUrl(n.getValue()).display):(l(e.PROP.BRANCH_PAGE_NUMBER),l(e.PROP.BRANCH_ACCEPT_REQUEST),l(e.PROP.BRANCH_ITEM))):r===e.COMP_TYPE.IR_COLUMN?(l(e.PROP.COLUMN_HEADING),l(e.PROP.IR_COLUMN_DISPLAY_TYPE)):r===e.COMP_TYPE.CLASSIC_RPT_COLUMN?(l(e.PROP.COLUMN_HEADING),l(e.PROP.CLASSIC_REPORT_COLUMN_TYPE)):r===e.COMP_TYPE.TAB_FORM_COLUMN&&(l(e.PROP.COLUMN_HEADING),l(e.PROP.TAB_FORM_COLUMN_TYPE)),function(){var a=t.getProperty(e.PROP.CONDITION_TYPE);l(e.PROP.WHEN_BUTTON_PRESSED),a&&""!==a.getValue()&&(l(e.PROP.CONDITION_TYPE),l(e.PROP.CONDITION_SQL_STATEMENT),l(e.PROP.CONDITION_VALUE1),l(e.PROP.CONDITION_ITEM1),l(e.PROP.CONDITION_LIST),l(e.PROP.CONDITION_PREFERENCE),l(e.PROP.CONDITION_PAGE),l(e.PROP.CONDITION_PAGES),l(e.PROP.CONDITION_TEXT),l(e.PROP.CONDITION_VALUE2),l(e.PROP.CONDITION_ITEM2),l(e.PROP.CONDITION_TEXT2),l(e.PROP.CONDITION_SQL_EXPRESSION_BOOLEAN),l(e.PROP.CONDITION_PLSQL_EXPRESSION_BOOLEAN),l(e.PROP.CONDITION_JS_EXPRESSION_BOOLEAN),l(e.PROP.CONDITION_JAVA_EXPRESSION_BOOLEAN),l(e.PROP.CONDITION_PYTHON_EXPRESSION_BOOLEAN),l(e.PROP.CONDITION_PLSQL_FUNC_BODY_BOOLEAN),l(e.PROP.CONDITION_JS_FUNC_BODY_BOOLEAN),l(e.PROP.CONDITION_JAVA_FUNC_BODY_BOOLEAN),l(e.PROP.CONDITION_PYTHON_FUNC_BODY_BOOLEAN)),l(e.PROP.AUTHORIZATION_SCHEME),l(e.PROP.BUILD_OPTION)}(),s.toString()?"<ul class='tt-list'>"+s.toString()+"</ul>":null},i.getComponentIconClass=function(e,t){return/^PLUGIN_/.test(t)?"icon-"+e+"-plugin":"icon-"+e+"-"+t.toLowerCase().replace(/_/g,"-")},i.isNever=function(t){var a=t.getProperty(e.PROP.CONDITION_TYPE);return a&&"NEVER"===a.getValue()},i.isConditional=function(t){function a(e){var a=t.getProperty(e);return a&&""!==a.getValue()}return a(e.PROP.CONDITION_TYPE)||a(e.PROP.AUTHORIZATION_SCHEME)||a(e.PROP.BUILD_OPTION)||a(e.PROP.WHEN_BUTTON_PRESSED)},i.observerIsConditional=function(t,a,n){e.observer(t,{components:a,events:[e.EVENT.CHANGE],properties:[e.PROP.CONDITION_TYPE,e.PROP.AUTHORIZATION_SCHEME,e.PROP.BUILD_OPTION,e.PROP.WHEN_BUTTON_PRESSED]},n)},i.isDisplayed=function(a){var n,o=!0;return a.isOnGlobalPage()&&("CURRENT_PAGE_EQUALS_CONDITION"===(n=a.getProperty(e.PROP.CONDITION_TYPE).getValue())?o=a.getProperty(e.PROP.CONDITION_PAGE).getValue()===e.getCurrentPageId():"CURRENT_PAGE_NOT_EQUAL_CONDITION"===n?o=a.getProperty(e.PROP.CONDITION_PAGE).getValue()!==e.getCurrentPageId():"CURRENT_PAGE_IN_CONDITION"===n?o=-1!==t.inArray(e.getCurrentPageId(),a.getProperty(e.PROP.CONDITION_PAGES).getValue().split(",")):"CURRENT_PAGE_NOT_IN_CONDITION"===n&&(o=-1===t.inArray(e.getCurrentPageId(),a.getProperty(e.PROP.CONDITION_PAGES).getValue().split(",")))),o},i.LINK_TYPE={PAGE_IN_THIS_APP:"PAGE_IN_THIS_APP",PAGE_IN_DIFF_APP:"PAGE_IN_DIFF_APP",URL:"URL"},i.splitApexUrl=function(e,a,n){var o,r,s,l,c,_,P,O,d,p="LINK."+(a?"GOTO_":""),u=n||[],g={type:i.LINK_TYPE.PAGE_IN_THIS_APP,display:"",appId:"",pageId:"",session:"&SESSION.",request:"",debug:"&DEBUG.",clearCache:"",clearAction:"NONE",itemNames:"",itemValues:"",printerFriendly:"NO",url:"",successMessage:"Y",anchor:""},E=/#([^#]*)#|#([^#]*)/g;if(e)if(0===e.toLowerCase().indexOf("f?p=")){for((o=e.toLowerCase().indexOf("&success_msg=#success_msg#"))>-1?(r=e.substr(0,o),g.successMessage="Y"):(r=e,g.successMessage="N");!s&&(c=E.exec(r));){for(_=!1,l=0;l<u.length;l++)if(c[1]===u[l]){_=!0;break}_||(s=c.index,g.anchor=r.substr(s+1),r=r.substr(0,s))}if(/f\?p=([^:]*):?([^:]*)?:?([^:]*)?:?([^:]*)?:?([^:]*)?:?([^:]*)?:?([^:]*)?:?([^:]*)?/i.test(r)&&(RegExp.$1&&(g.appId=RegExp.$1),RegExp.$2&&(g.pageId=RegExp.$2),RegExp.$3&&(g.session=RegExp.$3),RegExp.$4&&(g.request=RegExp.$4),RegExp.$5&&(g.debug=RegExp.$5),RegExp.$6&&(g.clearCache=RegExp.$6),RegExp.$7&&(g.itemNames=RegExp.$7),RegExp.$8&&(g.itemValues=RegExp.$8),RegExp.$9&&(g.printerFriendly=RegExp.$9)),g.clearCache){for(O=g.clearCache.split(","),P=0;P<O.length;P++)d=O[P],t.inArray(d,["NONE","CR","RR","RP"])>-1&&(g.clearAction=d,O.splice(P,1));g.clearCache=O.join(",")}g.itemNames&&(g.itemNames=g.itemNames.split(",")),g.itemValues&&(g.itemValues=g.itemValues.split(",")),g.appId&&(0===g.appId.toLowerCase().indexOf("&flow_id.")||0===g.appId.toLowerCase().indexOf("&app_id.")||0===g.appId.toLowerCase().indexOf("#flow_id#")||0===g.appId.toLowerCase().indexOf("#app_id#")?(g.type=i.LINK_TYPE.PAGE_IN_THIS_APP,g.display=i.formatNoEscape(p+"PAGE_N",g.pageId)):g.appId&&(g.type=i.LINK_TYPE.PAGE_IN_DIFF_APP,g.display=i.formatNoEscape(p+"APPLICATION_N",g.appId,g.pageId)))}else g.url=e,g.type=i.LINK_TYPE.URL,g.display=e.replace(/^(https?:\/\/)(www.)?/i,""),a&&(g.display=i.formatNoEscape(p+"URL",g.display));return g},i.setPageSelection=function(a,n,o,r,s){var l,c="OK";if(a&&a===e.getCurrentAppId()){if(n&&n!==e.getCurrentPageId())return l=i.goToPage(n),void t.when(l).done((function(){o&&r&&(i.goToComponent(o,r)||(c="COMPONENT_NOT_SELECTED")),s(c)})).fail((function(e){s("user-abort"===e?"PAGE_CHANGE_ABORTED":"PAGE_NOT_CHANGED")}));o&&r&&(i.goToComponent(o,r)||(c="COMPONENT_NOT_SELECTED"))}else c="APP_NOT_CHANGED";s(c)},i.goToPage=function(n,o){var r,s,c,_,d=t("#a_PageDesigner"),p=t.Deferred();return e.hasChanged()&&!window.confirm(i.msg("BEFORE_AJAX_UNSAVED_CHANGES"))?(b(),p.reject("user-abort"),p.promise()):(t(document).trigger("selectionChanged",["controller",[]]),e.clear(),t(document).trigger("modelCleared",{preventHideNotification:o}),t("#go_to_page").val(n),a.delayLinger.start("main",(function(){c=a.showSpinner(d),d.addClass("is-processing")})),P||(P=t.ajax({dataType:"json",type:"GET",url:apex_img_dir+"apex_ui/js/staticData/pd_static_data_"+gLanguage+".json?v="+gApexVersion})),r=S("getWorkspaceData",{},{type:"GET"}),s=S("getSharedData",{},{type:"GET"}),_=S("getPageData",{x01:n},{type:"GET"}),t.when(P,r,s,_).done((function(a,n,o,r){var s;t.isEmptyObject(r[0])?i.showError(i.msg("PAGE_DOES_NOT_EXIST")):(s=r[0][e.COMP_TYPE.PAGE][0].pageId,t("#go_to_page").val(s),e.initModelConfig(a[0],n[0],o[0]),e.setComponentData(r[0]),e.setCurrentAppId($v("P4500_CURRENT_APP")),e.setCurrentPageId(s),t(document).trigger("modelReady"),S("getAdditionalData",{x01:s},{type:"GET",success:function(e){var a,n;e.prevPageId&&(l.lookup(m).pageId=e.prevPageId,l.enable(m)),e.nextPageId&&(l.lookup(R).pageId=e.nextPageId,l.enable(R)),gTeamDevEnabled&&(a=e.teamDev.features+e.teamDev.bugs+e.teamDev.todos+e.teamDev.feedback+e.teamDev.issues,n=i.format("TEAM_DEV_BADGE_TITLE",a),0===a?(a="",t("#menu-team-dev").hide()):t("#menu-team-dev").show().prop("disabled",!1).attr(E,n).attr("title",n).find(".a-Button-badge").text(a),O=e.teamDev)}}),t(document).trigger("selectionChanged",["controller",e.getComponents(e.COMP_TYPE.PAGE,{id:e.getCurrentPageId()})]),p.resolve())})).fail((function(){p.reject()})).always((function(){a.delayLinger.finish("main",(function(){c.remove(),d.removeClass("is-processing")}))})),p.promise())},i.goToComponent=function(a,n,o){var i=e.getComponents(a,{id:n});return 1===i.length&&(t(document).trigger("selectionChanged",["controller",i,o]),t("#PDrenderingTree, #PDdynamicActionTree, #PDprocessingTree, #PDsharedCompTree").each((function(e){var a,i=t(this);if((a=i.treeView("getSelectedNodes")[0])&&a.data.componentId===n)return B(i.closest(".ui-tabs-panel")[0].id),i.treeView("setSelectedNodes",[a],void 0===o,!0),!1})),!0)},i.showSuccess=function(e){t("#pdNotificationState").addClass("is-success"),t("#pdNotificationIcon").addClass("icon-check"),i.showNotification(e)},i.showError=function(e){t("#pdNotificationState").addClass("is-error"),t("#pdNotificationIcon").addClass("icon-error"),i.showNotification(e)},i.showNotification=function(a){var n=t("#pdNotificationMessage");a&&n.text(a),t("#pdNotification").addClass("is-displayed").fadeIn("slow"),t(document).on("commandHistoryChange.forMsg",(function(t){e.hasChanged()&&i.hideNotification()})).on("modelCleared.forMsg",(function(e,t){t.preventHideNotification||i.hideNotification()}))},i.hideNotification=function(){t("#pdNotification").removeClass("is-displayed").fadeOut("slow",(function(){t("#pdNotificationMessage").text(""),t("#pdNotificationState").removeClass("is-error is-success"),t("#pdNotificationIcon").removeClass("icon-error icon-check")})),t(document).off(".forMsg")},i.setHelpText=function(e,a){t("#help-container").html(e)},i.clearHelpText=function(){var e=t("#help-container"),a=i.msg("HELP.DEFAULT");e.html(a)},i.getPreference=function(e){var t="PD_"+e;return window.gPreferences.hasOwnProperty(t)?window.gPreferences[t]:null},i.savePreference=function(e,t){var a="PD_"+e,n=window.gPreferences[a];window.gPreferences[a]=t,n!==t&&S("setPreference",{x01:a,x02:t},{dataType:""})},i.saveBoolPref=function(e,t){i.savePreference(e,t?"Y":"N")},i.getBoolPref=function(e,t){var a=i.getPreference(e);return a=null===a?t:"Y"===a},i.getTabsLayout=G,i.storeTabsLayout=y,i.loadTabsLayout=U,i.activateTab=B,i.getTab=function(e){var a=p[e];return t(a.tabs).find(".ui-tabs-nav").first().children().eq(a.index)};var V=t("#peMain"),w=t("#peAttributes"),x=t("#pePrinting"),Y=t("#pdMessagesDialog");function H(e){var a=t("#"+e);a.length&&a.splitter(N,"collapsed")&&a.splitter(N,"collapsed",!1)}function F(){Y.dialog({modal:!1,dialogClass:"ui-dialog--pageDesignerMsg",width:480,minWidth:320,minHeight:320,title:i.msg("MESSAGES"),buttons:[{text:i.msg("OK"),click:function(){Y.dialog("close")}}]}),t("#pdMessages").find(".a-AlertMessages-message").first().each((function(){this.focus()}))}function k(){var r,s=t("#createMenu_menu"),P=t("#button-lock"),d=t("#lockDialog"),p=t("#runDialogOpenMsg"),g=t("#runDialogFocusMsg"),A=t("#pdShowMessagesBtn");function I(n){var o=t("#a_PageDesigner"),s=[T,C,"pd-save-page","pd-save-run-page"];a.delayLinger.start("main",(function(){r=a.showSpinner(o),o.addClass("is-processing")})),t.each(s,(function(e,t){l.disable(t)})),t(".a-TreeView").treeView("disable"),t("#glv").gridlayout("disable"),V.propertyEditor("disable"),e.saveChanges((function(e){t.each(s,(function(e,t){l.enable(t)})),t(".a-TreeView").treeView("enable"),t("#glv").gridlayout("enable"),V.propertyEditor("enable"),a.delayLinger.finish("main",(function(){r.remove(),o.removeClass("is-processing")})),n(e)})),V.find("."+i.CSS.IS_CHANGED).removeClass(i.CSS.IS_CHANGED)}function f(){var t,a=e.getPageLockState();a?a.isLockedByCurrentUser?(t=i.msg("PAGE_LOCKED_BY_YOU"),P.attr("title",t).attr(E,t).removeClass("is-locked").addClass("is-locked-by-self").find(".a-Icon")[0].className="a-Icon icon-lock"):(t=i.format("PAGE_LOCKED_BY",a.owner),P.attr("title",t).attr(E,t).removeClass("is-locked-by-self").addClass(" is-active is-locked").find(".a-Icon")[0].className="a-Icon icon-lock-user"):(t=i.msg("PAGE_UNLOCKED"),P.attr("title",t).attr(E,t).removeClass("is-locked is-locked-by-self").find(".a-Icon")[0].className="a-Icon icon-unlock")}_.setErrorHandler((function(e,t,a){i.showError(i.format({execute:"CMD.EXECUTE_FAILED",undo:"CMD.UNDO_FAILED",redo:"CMD.REDO_FAILED"}[e],t.label()))})),l.add([{name:T,label:null,title:null,icon:"icon-undo",action:function(e,t){_.undo()}},{name:C,label:null,title:null,icon:"icon-redo",action:function(e,t){_.redo()}},{name:"pd-two-column",action:function(e,t){var a=i.getPreference("TAB_LAYOUT_2");a||(a=u.replace(/0:/g,"1:")),U(a),i.saveBoolPref("TWO_COLUMN_MODE",!0),l.disable("pd-two-column"),l.enable("pd-three-column")}},{name:"pd-three-column",action:function(e,t){var a=i.getPreference("TAB_LAYOUT_3");a||(a=u),a.indexOf("0:")<0&&(a=a.replace(/^1:/,"0:")),U(a),i.saveBoolPref("TWO_COLUMN_MODE",!1),l.disable("pd-three-column"),l.enable("pd-two-column")}},{name:"pd-reset-tab-layout",action:function(e,t){U(u),i.saveBoolPref("TWO_COLUMN_MODE",!1),i.savePreference("TAB_LAYOUT_2",""),i.savePreference("TAB_LAYOUT_3",""),M(L,!1),M("grid_layout",!0),l.disable("pd-three-column"),l.enable("pd-two-column")}},{name:"pd-enable-tooltips",set:function(e){i.saveBoolPref("ENABLE_TOOLTIPS",e),D(e)},get:function(){return i.getBoolPref("ENABLE_TOOLTIPS",!0)}},{name:"pd-show-component-view",set:function(e){M(L,e)},get:function(){return i.getBoolPref("ENABLE_COMPONENT_VIEW",!1)}},{name:"pd-show-layout-view",set:function(e){M("grid_layout",e)},get:function(){return i.getBoolPref("ENABLE_LAYOUT_VIEW",!0)}},{name:"pd-save-page",label:null,disabled:!0,action:function(e,a){t(e.target).closest(".a-Property").length&&V.propertyEditor("saveProperty"),I((function(e){_.clear(),t(document).trigger("commandHistoryChange"),e.error?"NO_CHANGES"!==e.error&&i.showError(e.error):i.showSuccess(i.msg("CHANGES_SAVED"))}))}},{name:"pd-save-run-page",label:null,title:null,icon:"icon-run-page",disabled:!0,action:function(r,s){var l,c=e.getCurrentAppId(),P=e.getCurrentPageId(),O=null;function d(){return a.makeApplicationUrl({pageId:"RUN_PAGE",request:"BRANCH_TO_PAGE_ACCEPT",debug:"NO",itemNames:["FB_FLOW_ID","FB_FLOW_PAGE_ID","F4000_P1_FLOW"],itemValues:[c,P,c]})}function u(e,a){e.dialog({modal:!0,title:a?i.msg("FOCUS_PAGE"):i.msg("RUN_PAGE"),closeText:n.getMessage("APEX.DIALOG.CLOSE"),dialogClass:"ui-dialog--pageDesignerAlert",width:400,height:240,minWidth:400,minHeight:240,position:{my:"right top",at:"right-20 bottom+20",of:s},create:function(){t(this).closest(".ui-dialog").attr("aria-modal",!0)},buttons:[{text:i.msg("TRY_AGAIN"),class:"a-Button--hot",click:function(){e.dialog("close"),a?o.openInNewWindow("",apex.builder.getAppUnderTestWindowName(c)):E()}}]})}function E(){var a=e.getComponents(e.COMP_TYPE.PAGE)[0],n={},r=$v("P0_WINDOW_MGMT_MODE")||"FOCUS";e.isGlobalPage()?i.showSuccess(i.msg("CHANGES_SAVED_GLOBAL_PAGE")):"NORMAL"===a.getProperty(e.PROP.PAGE_MODE).getValue()?"NONE"===r||/^4\d\d\d$/.test(c)?o.redirect(d()):("BROWSER"===r?n.favorTabbedBrowsing=!0:(l=!1,t(window).on("blur.runcheck",(function(){t(window).off(".runcheck"),l=!0})),O=setTimeout((function(){O=null,l||u(g,!0),t(window).off(".runcheck")}),800)),apex.builder.launchAppUnderTest(d(),c,n)||(clearTimeout(O),t(window).off(".runcheck"),u(p))):i.showSuccess(i.msg("CHANGES_SAVED_DIALOG_PAGE"))}t(r.target).closest(".a-Property").length&&V.propertyEditor("saveProperty"),e.hasChanged()?I((function(e){_.clear(),t(document).trigger("commandHistoryChange"),e.error?"NO_CHANGES"!==e.error&&i.showError(e.error):E()})):E()}}]),t(document).on("commandHistoryChange",(function(e){var t,a;(a=l.lookup(T)).origLabel||(a.origLabel=a.label),a.disabled=!_.canUndo(),_.canUndo()?(t=n.formatMessageNoEscape("PD.UNDO",_.undoLabel()),a.label=a.title=t):a.label=a.title=a.origLabel,l.update(T),(a=l.lookup(C)).origLabel||(a.origLabel=a.label),a.disabled=!_.canRedo(),_.canRedo()?(t=n.formatMessageNoEscape("PD.REDO",_.redoLabel()),a.label=a.title=t):a.label=a.title=a.origLabel,l.update(C)})).trigger("commandHistoryChange"),P.attr("disabled",!0).click((function(){var a,o,r=!1,s=e.getPageLockState();o=[{text:i.msg("CANCEL"),click:function(){d.dialog("close")}}],t("#lockDialogIntroUnlocked, #lockDialogIntroLocked, #lockDialogIntroOwned").hide(),c("P4500_DLG_LOCK_OWNER").hide(),!s||s.isLockedByCurrentUser?(o.push({click:function(){d.dialog("close"),e.lockPage($v("P4500_DLG_LOCK_COMMENT")).fail((function(e){i.showError(e)})).always((function(){f()}))}}),s?(a=i.msg("UNLOCK_PAGE"),o[1].text=i.msg("APPLY_CHANGES"),t("#lockDialogIntroOwned").show(),o.push({text:i.msg("UNLOCK"),class:"a-Button--hot",click:function(){d.dialog("close"),e.unlockPage().fail((function(e){i.showError(e)})).always((function(){f()}))}})):(a=i.msg("LOCK_PAGE"),o[1].text=i.msg("LOCK"),o[1].class="a-Button--hot",t("#lockDialogIntroUnlocked").show())):(a=i.msg("PAGE_LOCKED"),t("#lockDialogIntroLocked").show(),c("P4500_DLG_LOCK_OWNER").show(),$s("P4500_DLG_LOCK_OWNER",s.owner),r=!0,o[0].text=i.msg("OK")),t("#P4500_DLG_LOCK_COMMENT").val(s.comment).attr("readOnly",r),d.dialog({modal:!0,title:a,closeText:n.getMessage("APEX.DIALOG.CLOSE"),dialogClass:"ui-dialog--pageDesignerLock",width:600,height:340,minHeight:340,minWidth:600,create:function(){t(this).closest(".ui-dialog").attr("aria-modal",!0)},buttons:o})})),A.click((function(){F()})),t("#pdMessages").peMessagesView({badge:A.find("span.a-Button-badge"),button:A,noMsgHandler:function(){Y.hasClass("ui-dialog-content")&&Y.dialog("close")}}),s.on("menucreate",(function(){var t=s.menu("find","teamDev");t&&(t.hide=!gTeamDevEnabled),function t(a){var n,r;for(n=0;n<a.length;n++)a[n].hasOwnProperty("menu")?t(a[n].menu.items):("string"==typeof(r=a[n]).action&&(r=l.lookup(r.action)),r.action=function(){e.hasChanged()?window.confirm(i.msg("BEFORE_AJAX_UNSAVED_CHANGES"))&&o.redirect(this.href):o.redirect(this.href)})}(s.menu(N).items)})),gTeamDevEnabled&&t("<div id='teamDevMenu'></div>").appendTo("body").menu({menubar:!1,items:[{type:"action",labelKey:"PD.FEEDBACK_ENTRIES",action:function(){o.redirect(a.makeApplicationUrl({appId:"4650",pageId:"8000",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_PAGE_ID","IRLT_FEEDBACK_STATUS_ID"],itemValues:[e.getCurrentAppId(),e.getCurrentPageId(),"3"]}))}},{type:"action",labelKey:"PD.ISSUES",action:function(){o.redirect(a.makeApplicationUrl({appId:"4600",pageId:"1",itemNames:["P1_APPLICATION_ID","P1_PAGE_ID"],itemValues:[e.getCurrentAppId(),e.getCurrentPageId()]}))}}],beforeOpen:function(e,t){var a,n,o=t.menu.items,r=[["FEEDBACK_ENTRIES_N","feedback"],["ISSUES_N","issues"]];for(a=0;a<r.length;a++)void 0!==O[(n=r[a])[1]]&&(o[a].label=i.format(n[0],O[n[1]]),delete o[a].labelKey)}}),t("#go_to_page").on("keypress",(function(e){13===e.which&&i.goToPage(t("#go_to_page").val())})).on("focus",(function(){this.select()})),t("#a_PageDesigner").on("focusin",(function(e){b()})),t("#go_to_page_button").click((function(){i.goToPage(t("#go_to_page").val())})),t("#go_to_page_lov").on("click",(function(){var n=a.htmlBuilder(),o={columnDefinitions:[{name:"id",title:i.msg("PAGE_NUMBER")},{name:"name",title:i.msg("PAGE_NAME")},{name:"alias",title:i.msg("PAGE_ALIAS")},{name:"group",title:i.msg("GROUP")}],filters:[{name:"show",title:i.msg("PAGE_PICKER.SHOW"),type:"buttonset",defaultValue:"all",lov:[{display:i.msg("ALL_PAGES"),value:"all"},{display:i.msg("PAGE_PICKER.RECENTLY_EDITED"),value:"recent"}]},{name:"search",title:i.msg("SEARCH"),type:"search"}],filterLov:function(t,a){var n={};"current_group"===t.show?n={show:"group_id",id:e.getComponents(e.COMP_TYPE.PAGE,{id:e.getCurrentPageId()})[0].getProperty(e.PROP.PAGE_GROUP).getValue()}:"recent"===t.show&&(n={show:"recent"}),e.getPagesLov(n,(function(e){a(e,t.search)}),"Y")}};void 0!==e.getCurrentPageId()&&e.getComponents(e.COMP_TYPE.PAGE,{id:e.getCurrentPageId()})[0].getProperty(e.PROP.PAGE_GROUP).getValue()&&o.filters[0].lov.unshift({display:i.msg("CURRENT_GROUP"),value:"current_group"}),n.markup("<div").attr("id","goToPageDlg").attr("title",i.msg("PAGE_FINDER")).markup(">").markup("</div>"),t(n.toString()).lovDialog({modal:!0,minWidth:750,height:500,filters:o.filters,columnDefinitions:o.columnDefinitions,filterLov:o.filterLov,dialogClass:i.CSS.DIALOG_FLUSH_BODY,resizable:!1,multiValue:!1,valueSelected:function(e,t){i.goToPage(t.id)}})})),t(document).on("modelConfigLoaded",(function(){e.getComponentType(e.COMP_TYPE.BREADCRUMB).editUrl="f?p=4000:287:%session%:::RP,287:FB_FLOW_ID,FB_FLOW_PAGE_ID,P287_PAGE,F4000_P287_MENU_ID:%application_id%,%page_id%,%page_id%,%pk_value%",e.getComponentType(e.COMP_TYPE.LIST).editUrl="f?p=4000:4050:%session%:::RP,4050:FB_FLOW_ID,FB_FLOW_PAGE_ID,F4000_P4050_LIST_ID:%application_id%,%page_id%,%pk_value%"})),t(document).on("modelReady",(function(){e.isPageReadOnly()&&!e.getPageLockState()||(P.attr("disabled",!1),f()),t.each(["pd-save-page","pd-save-run-page"],(function(e,t){l.enable(t)})),t(document).one("modelCleared",(function(){_.clear(),t(document).trigger("commandHistoryChange"),P.attr("disabled",!0),t.each([R,m,"pd-save-page","pd-save-run-page"],(function(e,t){l.disable(t)})),gTeamDevEnabled&&(t("#menu-team-dev").hide().prop("disabled",!0).find(".a-Button-badge").text(""),O={})}))}))}t((function(){var o,r=s.getScopedSessionStorage({useAppId:!0,usePageId:!0}),c=s.getScopedLocalStorage({prefix:"ORA_WWV_apex.builder.pageDesigner",useAppId:!1}),_=t.ui.keyCode;t("#sp_main").show(),k(),o=t("#search-container").peSearch(),t("#P4500_LOCAL_SEARCH,#P4500_MATCH_CASE,#P4500_IS_REGEXP").on("change",(function(){var e=$v("P4500_LOCAL_SEARCH"),t=("Y"===$v("P4500_MATCH_CASE")?"":"i")+"g",n="Y"===$v("P4500_IS_REGEXP");""!==e?(e=n?new RegExp(e,t):new RegExp(a.escapeRegExp(e),t),o.peSearch("search",e)):o.peSearch("clear")})),t("#CLEAR_PAGE_SEARCH").on("click",(function(){$s("P4500_LOCAL_SEARCH","","",!0),$s("P4500_MATCH_CASE","","",!0),$s("P4500_IS_REGEXP","","",!0),o.peSearch("clear")})),t(document).on("pageSearch",(function(e,t){B("search"),$s("P4500_MATCH_CASE","","",!0),$s("P4500_IS_REGEXP","","",!0),$s("P4500_LOCAL_SEARCH",t)})),e.init({isInternal:gIsInternal,isReadOnly:gIsReadOnly}),setTimeout((function(){var e=i.goToPage(t("#go_to_page").val(),!0);t.when(e).done((function(){var e,t,a,n=(e=window.location.hash,a=null,"#"===e.charAt(0)&&(e=e.substring(1)),/^[0-9:]+$/.test(e)&&2===(t=e.split(":")).length&&(a={typeId:t[0],componentId:t[1]}),a);n&&i.goToComponent(n.typeId,n.componentId)}))}),0),l.add([{name:"pd-expand-restore",onLabel:i.msg("RESTORE"),offLabel:i.msg("EXPAND"),get:function(){return this.isCenterExpanded},set:function(e){this.isCenterExpanded=e,t("#sp_main_content.a-Splitter, #sp_glv_content:visible, #sp_right_content").splitter(N,"collapsed",this.isCenterExpanded)},isCenterExpanded:!1,updateState:function(){var e=this;this.isCenterExpanded=!0,t("#sp_main_content.a-Splitter, #sp_glv_content:visible, #sp_right_content").each((function(){if(!t(this).splitter(N,"collapsed"))return e.isCenterExpanded=!1,!1})),this.icon=this.isCenterExpanded?"icon-restore":"icon-maximize",l.update(this.name)}},{name:"pd-goto-help",label:i.msg("ACTION.GOTO_HELP"),action:function(e,a){return B("help"),t("#help-container")[0].focus(),!0}},{name:"pd-goto-rendering-tree",label:i.msg("ACTION.GOTO_RENDERING"),action:function(e,a){return B("renderTree_container"),t("#PDrenderingTree").treeView("focus"),!0}},{name:I,label:i.msg("ACTION.GOTO_DA"),action:function(e,a){return B("dynActTree_container"),t("#PDdynamicActionTree").treeView("focus"),!0}},{name:"pd-goto-processing-tree",label:i.msg("ACTION.GOTO_PROCESSING"),action:function(e,a){return B("procTree_container"),t("#PDprocessingTree").treeView("focus"),!0}},{name:"pd-goto-shared-components-tree",label:i.msg("ACTION.GOTO_SHARED"),action:function(e,a){return B("sharedComp_container"),t("#PDsharedCompTree").treeView("focus"),!0}},{name:"pd-goto-grid-layout",label:i.msg("ACTION.GOTO_GLV"),action:function(e,a){return B("grid_layout"),t("#glv").gridlayout("focus"),!0}},{name:f,label:i.msg("ACTION.GOTO_CV"),action:function(e,a){var n,o=t("#componentView-container").find(".a-CV-component");return B(L),(n=o.filter(".is-selected")).length||(n=o),n.first().find("a").focus(),!0}},{name:"pd-goto-property-editor-tab-main",label:i.msg("ACTION.GOTO_PE_MAIN"),action:function(e,t){return B("peComponentProperties"),V.propertyEditor("focus"),!0}},{name:"pd-goto-property-editor-tab-attributes",label:i.msg("ACTION.GOTO_PE_ATTRIBUTES"),action:function(e,t){return i.getTab("peAttributesTabPanel").is(":visible")&&(B("peAttributesTabPanel"),w.propertyEditor("focus")),!0}},{name:"pd-goto-property-editor-tab-printing",label:i.msg("ACTION.GOTO_PE_PRINTING"),action:function(e,t){return i.getTab("pePrintingTabPanel").is(":visible")&&(B("pePrintingTabPanel"),x.propertyEditor("focus")),!0}},{name:"pd-goto-gallery-regions",label:i.msg("ACTION.GOTO_REGIONS"),action:function(e,a){return B("grid_layout"),H("sp_glv_content"),t("#gallery-tabs").tabs(N,A,0),t("#cg-regions .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-gallery-items",label:i.msg("ACTION.GOTO_ITEMS"),action:function(e,a){return B("grid_layout"),H("sp_glv_content"),t("#gallery-tabs").tabs(N,A,1),t("#cg-items .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-gallery-buttons",label:i.msg("ACTION.GOTO_BUTTONS"),action:function(e,a){return B("grid_layout"),H("sp_glv_content"),t("#gallery-tabs").tabs(N,A,2),t("#cg-buttons .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-messages",label:i.msg("ACTION.GOTO_MSGS"),action:function(e,t){return F(),!0}},{name:"pd-page-search",label:i.msg("ACTION.PAGE_SEARCH"),action:function(e,a){var n=t(e.target).closest(".a-PropertyEditor");return n.length?n.parent().find(".a-Property-field--filter").focus():(B("search"),t("#P4500_LOCAL_SEARCH").focus()),!0}},{name:R,label:null,title:null,disabled:!0,pageId:null,action:function(){i.goToPage(this.pageId)}},{name:m,label:null,title:null,disabled:!0,pageId:null,action:function(){i.goToPage(this.pageId)}},{name:"pd-show-shortcuts",label:i.msg("KBD_SHORTCUTS"),action:function(e,o){var r,s,c,_,P,O=[],d={},p=a.htmlBuilder(),u=l.listShortcuts(!0);for(r=0;r<u.length;r++)c=u[r],(_=d[c.actionName])||(O.push(c.actionName),_={actionLabel:c.actionLabel,shortcuts:[]},d[c.actionName]=_),_.shortcuts.push(c.shortcutDisplay);for(O.sort((function(e,t){return d[e].actionLabel>d[t].actionLabel?1:d[e].actionLabel<d[t].actionLabel?-1:0})),p.markup("<div").attr("id","shortcutDlg").attr("title",i.msg("KBD_SHORTCUTS")).markup(" tabindex='0'>").markup("<ul class='a-AVPList a-AVPList--shortcuts'>"),r=0;r<O.length;r++){for(_=d[O[r]],p.markup("<li class='a-AVPList-item'><span class='a-AVPList-label'>").content(_.actionLabel).markup("</span><span class='a-AVPList-value'>"),P=_.shortcuts,s=0;s<P.length;s++)p.markup(P[s]);p.markup("</span></li>")}return p.markup("</ul></div>"),t(p.toString()).dialog({modal:!0,closeText:n.getMessage("APEX.DIALOG.CLOSE"),minWidth:300,width:460,height:380,create:function(){t(this).closest(".ui-dialog").attr("aria-modal",!0)},close:function(e,a){t(this).dialog("destroy").remove()},open:function(){this.focus()},buttons:[{text:i.msg("OK"),click:function(){t(this).dialog("close")}}]}),!0}}]),t("#helpMenu_menu").on("menucreate",(function(){var e=t("#helpMenu_menu").menu("find","keyboardShortcuts");e&&(e.hide=!1,e.action="pd-show-shortcuts")})),i.clearHelpText();var P=null;function O(e,a){var n,o,i=t(e.target),r=i.closest(".ui-tabs");a.item.removeClass("ui-tabs-active ui-state-active ui-state-hover ui-state-focus"),a.sender&&(n=t("#"+a.item.attr("aria-controls")),o=a.item.prev(),a.item.remove(),o.length?o.after(a.item):i.prepend(a.item),r.append(n),a.sender.closest(".ui-tabs").tabs("refresh")),r.tabs("refresh"),r.tabs(N,A,a.item.index()),y()}function d(e){var a,n,o,i,r,s,l,c,P=null,O=null,d=e.which;if(e.shiftKey&&(d===_.UP||d===_.LEFT?O=-1:d!==_.DOWN&&d!==_.RIGHT||(O=1),O)){if(a=(n=(i=t(e.target)).closest(".ui-tabs-nav")).children().length,o=n.closest(".ui-tabs"),r=h.indexOf("#"+o[0].id),s=i.index(),(s+=O)>=0&&s<a)O>0?i.next().after(i):i.prev().before(i);else{if(!((r+=O)>=0&&r<h.length))return;c=(P=t(h[r]).find(".ui-tabs-nav").first()).closest(".ui-tabs"),l=t("#"+i.attr("aria-controls")),i.remove(),O<0?P.append(i):P.prepend(i),s=i.index(),c.append(l),o.tabs("refresh"),o=c}return o.tabs("refresh"),o.tabs(N,A,s),i.focus(),y(),!1}}t("body").on("splitterchange splittercreate",(function(e,t){var a=l.lookup("pd-expand-restore");P||(P=setTimeout((function(){P=null,a.updateState()}),100))})),apex.builder.nameBuilderWindow(),t(".a-TabsContainer").tabs({heightStyle:"fill",activate:function(e,t){var a,n,o,i;t.newPanel.is(".resize")&&t.newPanel.resize(),n=(a=t.newTab.parents(".ui-tabs")).attr("id"),o=a.tabs(N,A),i=a.find(".ui-tabs-nav").first().children().eq(o).attr("aria-controls"),r.setItem(n,o),"editor_tabs"===n&&(i===L?c.setItem("useComponentView","true"):"grid_layout"===i&&c.removeItem("useComponentView"))}}).on("resize",(function(e){v()})),t(".ui-tabs").each((function(){var e,a=t(this).data("ui-tabs");e=a._handlePageNav,a._handlePageNav=function(t){return!!t.shiftKey||e.call(a,t)}})),G(),setTimeout((function(){var e;i.getBoolPref("TWO_COLUMN_MODE",!1)||i.getPreference("TAB_LAYOUT_3")?(i.getBoolPref("TWO_COLUMN_MODE",!1)?((e=i.getPreference("TAB_LAYOUT_2"))&&e.indexOf("2:")<0&&(e=u.replace(/0:/g,"1:")),e||(e=u.replace(/0:/g,"1:")),l.disable("pd-two-column")):((e=i.getPreference("TAB_LAYOUT_3"))&&e.indexOf("2:")<0&&(e=u),e||(e=u),l.disable("pd-three-column")),(e.indexOf(":peAttributesTabPanel")<0||e.indexOf(":pePrintingTabPanel")<0)&&(e=u),U(e,!0)):l.disable("pd-three-column"),G(),t(".a-TabsContainer").each((function(){var e=t(this),a=e.attr("id"),n=r.getItem(a);n?e.tabs(N,A,n):"editor_tabs"===a&&("true"===c.getItem("useComponentView")?B(L):B("grid_layout"))}))}),1),t("#editor_tabs").find(".ui-tabs-nav").first().sortable({axis:"x",connectWith:"#trees > .a-Tabs-toolbar > .ui-tabs-nav, #peTabs > .a-Tabs-toolbar > .ui-tabs-nav",update:O}).on("dblclick",(function(){l.toggle("pd-expand-restore")})).on("keydown",d),t("#trees").find(".ui-tabs-nav").sortable({axis:"x",connectWith:"#editor_tabs > .a-Tabs-toolbar > .ui-tabs-nav, #peTabs > .a-Tabs-toolbar > .ui-tabs-nav",update:O}).on("keydown",d),t("#peTabs").find(".ui-tabs-nav").sortable({axis:"x",connectWith:"#editor_tabs > .a-Tabs-toolbar > .ui-tabs-nav, #trees > .a-Tabs-toolbar > .ui-tabs-nav",update:O}).on("keydown",d),t("#editor_tabs [aria-controls=help]").addClass("ui-tabs-helpTab"),apex.theme.pageResizeInit(),t(window).on("beforeunload",(function(t){if(e.hasChanged())return i.msg("BEFORE_PAGE_UNLOAD_UNSAVED_CHANGES")})),t("#pdNotificationClose").on("click",(function(){i.hideNotification()})),t(".a-ControlBar,.a-PageDesigner").tooltip({item:"button[title]",show:apex.tooltipManager.defaultShowOption()}),t(document.body).append("<div id='apexActionKeyDisplay' style='display:none;'></div>"),l.partialShortcutInput=function(e){e=e||"",setTimeout((function(){t("#apexActionKeyDisplay").text(e)[e?"show":"hide"]()}),e?1:800)},apex.gPageContext$.on("apexafterclosedialog",(function(e,t){t.FB_FLOW_ID&&t.FB_FLOW_PAGE_ID&&(t.successMessage?i.showSuccess(t.successMessage.text):i.hideNotification(),i.goToPage(t.FB_FLOW_PAGE_ID,t.successMessage))})),setTimeout((function(){var e,a,n=function(e,t){return{name:e,shortcut:t}},o=[n("spotlight-search","Ctrl+Quote"),n(T,"Ctrl+Z"),n(C,"Ctrl+Y"),n("pd-save-page","Alt+F7"),n("pd-save-run-page","Alt+F8"),n("pd-expand-restore","Alt+F11"),n("pd-goto-help","Alt+F1"),n("pd-goto-rendering-tree","Ctrl+/,R"),n(I,"Ctrl+/,A"),n("pd-goto-processing-tree","Ctrl+/,P"),n("pd-goto-shared-components-tree","Ctrl+/,S"),n("pd-goto-grid-layout","Ctrl+/,L"),n(f,"Ctrl+/,O"),n("pd-goto-property-editor-tab-main","Ctrl+/,E,M"),n("pd-goto-property-editor-tab-attributes","Ctrl+/,E,A"),n("pd-goto-property-editor-tab-printing","Ctrl+/,E,P"),n("pd-goto-gallery-regions","Ctrl+/,G,R"),n("pd-goto-gallery-items","Ctrl+/,G,I"),n("pd-goto-gallery-buttons","Ctrl+/,G,B"),n("pd-goto-messages","Ctrl+/,M"),n("pd-page-search","Ctrl+/,F"),n(R,"Alt+Shift+Page Down"),n(m,"Alt+Shift+Page Up"),n("pd-show-shortcuts","Alt+Shift+F1"),n("glv-disp-from-page","Ctrl+/,D,T"),n("glv-disp-from-region","Ctrl+/,D,H"),n("glv-hide-empty","Ctrl+/,D,E"),n("pd-advisor","Ctrl+/,U,A"),n("pd-create-page","Ctrl+/,C,P"),n("pd-create-copy-page","Ctrl+/,C,C"),n("pd-create-shared-component","Ctrl+/,C,S"),n("pd-create-breadcrumb-region","Ctrl+/,C,B")];for(t.each([T,C],(function(){var e=l.lookup(this);e.contextLabel=e.label})),a=t("#menu-create").attr(E),t.each(["pd-create-page","pd-create-copy-page","pd-create-shared-component","pd-create-breadcrumb-region"],(function(){var e=l.lookup(this);e.contextLabel=a+": "+e.label})),a=t("#menu-utilities").attr(E),t.each(["pd-advisor"],(function(){var e=l.lookup(this);e.contextLabel=a+": "+e.label})),e=0;e<o.length;e++)o[e].type="global";l.setShortcutKeyBindings(o),D(i.getBoolPref("ENABLE_TOOLTIPS",!0)),null===i.getPreference("ENABLE_COMPONENT_VIEW")&&(M(L,!1),B("grid_layout"))}),1),V.pdPropertyEditor({mode:"main"}),w.pdPropertyEditor({mode:"attributes"}),x.pdPropertyEditor({mode:"printing"})}))}(pe,apex.jQuery,apex.util,apex.lang,apex.navigation,window.pageDesigner,apex.server,apex.storage,apex.actions,apex.item,apex.commandHistory);