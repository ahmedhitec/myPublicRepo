!function(e,t){"use strict";var a={};t.templateOptionsHelper={getValuesFromDialog:function(t,a){var r,l=[];function u(t){for(var u=0;u<t.length;u++)r=a.propertyEditor("getPropertyValue",t[u].propertyName),e.isEmptyObject(r)||l.push(r)}return u(t.common),u(t.advanced),l},getProperties:function(r,l,u,i){var o,n,p,s,d,c,m,v,f,y,h=[],g={},E=[],T=[],O={},D={common:[],advanced:[]},V="";for(i&&(V=i.propertyName,f=e.isEmptyObject(i.value),y=!(!i.metaData||!i.metaData.multiSelectData)),o=0;o<r.values.length;o++)(c=r.values[o]).groupId?(n=c.groupId,g.hasOwnProperty(n)?p=g[n]:(s=r.groups[n],h.push({title:s.title,seq:s.seq,nullText:s.nullText,isAdvanced:s.isAdvanced,isRequired:!1,lovValues:[],value:""}),p=h.length-1,g[n]=p),-1!==e.inArray(c.r,r.presetValues)&&(h[p].isRequired=!0,""===h[p].value&&(h[p].value=c.r)),-1!==e.inArray(c.r,l)&&(h[p].value=c.r),h[p].lovValues.push({r:c.r,d:c.d})):(T.push(c),-1!==e.inArray(c.r,l)&&E.push(c.r));for(m=f?a:E.join(":"),h.sort((function(e,t){return e.seq===t.seq?e.title.localeCompare(t.title):e.seq-t.seq})),v={type:"TEMPLATE OPTIONS GENERAL",prompt:t.lang.getMessage("TEMPLATE_OPTIONS.GENERAL"),isReadOnly:!!u,isRequired:!1,lovValues:T,displayGroupId:"common",defaultTemplateOptions:r.defaultValues},y&&(v.multiSelectData=i.metaData.multiSelectData),D.common[0]={propertyName:"general",propertyId:V,value:m,oldValue:m,originalValue:m,metaData:v,errors:[],warnings:[]},o=0;o<h.length;o++)d=(s=h[o]).isAdvanced?"advanced":"common",O=s.value?s.value:"",v={type:e.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:s.title,isReadOnly:!!u,isRequired:s.isRequired,nullText:s.nullText,lovValues:s.lovValues,displayGroupId:d},y&&(v.multiSelectData=i.metaData.multiSelectData),D[d].push({propertyName:"grp"+o,value:O,oldValue:O,originalValue:O,metaData:v,errors:[],warnings:[]});return D},addGeneralPropertyType:function(){e.apex.propertyEditor.addPropertyType("TEMPLATE OPTIONS GENERAL",{init:function(a,r){var l=e();this.super("init",a,r);for(var u=a.find("input[type=checkbox]"),i=u.filter("[value='#DEFAULT#']"),o=0;o<r.metaData.defaultTemplateOptions.length;o++)l=l.add(u.filter("[value='"+t.util.escapeCSS(r.metaData.defaultTemplateOptions[o])+"']"));i.on("click setdefaultcheckboxes",(function(){var t=e(this).prop("checked");t&&l.prop("checked",!0),l.prop("disabled",t)})).trigger("setdefaultcheckboxes")},getValue:function(e){var t=[];return e.find("input[type=checkbox]").filter(":checked:not(:disabled)").each((function(){t.push(this.value)})),t.join(":")},setValue:function(e,t,a){this.super("setValue",e,t,a),e.find("input[type=checkbox]").filter("[value='#DEFAULT#']").trigger("setdefaultcheckboxes")}},"CHECKBOXES")}}}(apex.jQuery,apex);