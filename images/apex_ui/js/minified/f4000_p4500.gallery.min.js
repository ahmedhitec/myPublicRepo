window.componentGallery={},function(e,t,n,a,i){"use strict";var o=null,r="",s=!1,l={region:"regions",item:"items",button:"buttons"},p={regions:[],items:[],buttons:[]},u={region:"a-Gallery-region",item:"a-Gallery-pageItem",button:"a-Gallery-button"};function c(e){var t,n=e.split(":"),a=p[l[n[0]]];if(a&&(t=a[n[1]]),!t)throw"Invalid component data key";return t}function g(e,n,a){var i,o=t.isPageReadOnly();i=u[a.type],o||(i+=" is-draggable"),e.markup("<li").attr("class",i).optionalAttr("aria-grabbed",o?null:"false").attr("data-component",a.type+":"+n).markup("><span class='a-Icon ").attr(a.iconClass).markup("'></span><span class='a-Gallery-componentName'>").content(a.title).markup("</span></li>")}function m(e,t,n){var o=a.htmlBuilder();return/^\s</.test(t=t||"")||(t="<p>"+t+"</p>"),o.markup("<span class='tt-title'>").content(e).markup("</span>").markup(t),n||o.markup("<p>").content(i.formatMessageNoEscape("PD.GAL.NOT_SUPPORTED",r)).markup("</p>"),o.toString()}function d(){var e=t.getComponents(t.COMP_TYPE.PAGE)[0];o=e._uiType,r=e.getProperty(t.PROP.USER_INTERFACE).getDisplayValue(),function(){var e,a,r,s,l,u=t.getComponentType(t.COMP_TYPE.REGION).pluginType.plugins;for(e in u)if(u.hasOwnProperty(e)){if((a=u[e]).isDeprecated||"NATIVE_DATA_UPLOAD_COLUMN_MAPPING"===a.name)continue;s=-1!==n.inArray(o,a.uiTypes),l=t.getTheme().defaultTemplates["NATIVE_IR"===e?"ir":"region"],r={type:"region",iconClass:window.pageDesigner.getComponentIconClass("region",e),title:s?a.title:i.formatMessage("PD.UNSUPPORTED",a.title),isSupported:s,isLegacy:a.isLegacy,tooltip:m(a.title,a.helpText,s),values:[{id:t.PROP.REGION_TYPE,value:e},{id:t.PROP.REGION_TEMPLATE,value:l}]},p.regions.push(r)}}(),function(){var e,a,r,s,l=t.getComponentType(t.COMP_TYPE.PAGE_ITEM).pluginType.plugins;for(e in l)if(l.hasOwnProperty(e)){if((a=l[e]).isDeprecated)continue;s=-1!==n.inArray(o,a.uiTypes)&&(!a.componentTypes||-1!==n.inArray(t.COMP_TYPE.PAGE_ITEM,a.componentTypes)),r={type:"item",iconClass:window.pageDesigner.getComponentIconClass("item",e),title:s?a.title:i.formatMessage("PD.UNSUPPORTED",a.title),isSupported:s,isLegacy:a.isLegacy,tooltip:m(a.title,a.helpText,s),values:[{id:t.PROP.ITEM_TYPE,value:e}]},p.items.push(r)}}(),function(){var e,n,a,o=t.getButtonTemplates();function r(e,n,i){a={type:"button",iconClass:window.pageDesigner.getComponentIconClass("button","Y"===i?"hot":"normal"),title:e,isSupported:!0,isLegacy:!1,tooltip:m(e,"",!0),values:[{id:t.PROP.BUTTON_TEMPLATE,value:n},{id:t.PROP.BUTTON_IS_HOT,value:i}]},p.buttons.push(a)}for(e in o)o.hasOwnProperty(e)&&(r((n=o[e]).name,e,"N"),n.hasHotTemplate&&r(i.formatMessage("PD.GAL.HOT_BTN",n.name),e,"Y"))}(),n.each(["regions","items","buttons"],(function(e,t){p[t].sort((function(e,t){return e.title.localeCompare(t.title)}))})),y()}function y(){var e=n("#glv"),i=t.isPageReadOnly(),o=a.htmlBuilder();n.each(["regions","items","buttons"],(function(t,a){var r,l,u=p[a],m=n("#cg-"+a+" ul").first();for(o.clear(),r=0;r<u.length;r++)!(l=u[r]).isSupported||l.isLegacy&&!s||g(o,r,l);m.html(o.toString()).iconList("refresh"),i||n("#cg-"+a+" li").draggable({addClasses:!1,appendTo:"#glv-viewport",cursor2:"default",cursorAt:{left:2,top:2},delay:10,distance:5,opacity:.9,revert:!1,helper:function(){var t=n(this).attr("data-component"),a=c(t);return e.gridlayout("makeHelper",a.type,a.iconClass,a.title,t)},connectToGridlayout:"#glv",containment:"document",zIndex:1e3,start:function(e,t){apex.tooltipManager.disableTooltips()},stop:function(e,t){apex.tooltipManager.enableTooltips()}})}))}e.getComponentData=c,n((function(){var e,a=!1;s="Y"===window.pageDesigner.getPreference("GAL_SHOW_LEGACY");var i={menubar:!1,items:[{id:"addTo",type:"subMenu",disabled:!0,labelKey:"PD.GAL.MI.ADD2",menu:{items:[]}},{type:"toggle",labelKey:"PD.GAL.MI.SHOW_LEGACY",get:function(){return s},set:function(e){s=e,y(),window.pageDesigner.savePreference("GAL_SHOW_LEGACY",s?"Y":"N")}}],beforeOpen:function(e,a){var i,o,r,s,l=n("#glv"),p=a.menuElement.menu("find","addTo"),u=a.selection;1!==u.length||t.isPageReadOnly()?p.menu.items=[]:(i=u.eq(0),o=c(s=i.attr("data-component")),r=function(){window.pageDesigner.glvMenuAddAction.call(this,s)},p.menu.items=window.pageDesigner.glvMakeTargetMenu(l.gridlayout("getDropTargets",o.type,"add"),r)),p.disabled=0===p.menu.items.length}};n("#cg-regions ul, #cg-items ul, #cg-buttons ul").addClass("a-Gallery").each((function(){n(this).iconList({multiple:!1,contextMenu:i,contextMenuId:"galleryMenu-"+n(this).parent().parent()[0].id})})).tooltip({items:"li",show:apex.tooltipManager.defaultShowOption(),position:{my:"left-20 top-20",at:"right bottom",collision:"flipfit"},content:function(){return c(n(this).attr("data-component")).tooltip}}),n("#gallery-tabs").on("tabsactivate",(function(e,t){n("#galleryMenuBtn").attr("data-menu","galleryMenu-"+t.newPanel[0].id),a||window.pageDesigner.savePreference("GAL_CUR_TAB",t.newTab.parent().children().index(t.newTab[0])),a=!1})),n("#galleryMenuBtn").attr("data-menu","galleryMenu-cg-regions"),e=parseInt(window.pageDesigner.getPreference("GAL_CUR_TAB"),10),!isNaN(e)&&e>0&&setTimeout((function(){a=!0,n("#gallery-tabs").tabs("option","active",e)}),10),n("#gallery-tabs .u-ScrollingViewport.resize").resize((function(){n(this).children(".a-IconList").resize()}))})),n(document).on("modelReady",(function(){d()})),n(document).on("modelCleared",(function(){n.each(["regions","items","buttons"],(function(e,t){var a=n("#cg-"+t+" ul").first();p[t]=[],a.empty().iconList("refresh")}))}))}(window.componentGallery,pe,apex.jQuery,apex.util,apex.lang);