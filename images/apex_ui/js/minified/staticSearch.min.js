var staticSearch=function(){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,r=Number(arguments[1])||0;for((r=r<0?Math.ceil(r):Math.floor(r))<0&&(r+=t);r<t;r++)if(r in this&&this[r]===e)return r;return-1});var e;function t(e){for(key in e)if(key in g&&key in e._bits){var t=e._bits[key];t.sort((function(e,t){return e.replaceIndex<t.replaceIndex?-1:e.replaceIndex>t.replaceIndex?1:0}));for(var r="",n=0,i=0;i<t.length;i++){var a=t[i].replaceIndex;r+=e[key].slice(n,a)+t[i].html,n=a+t[i].length}r+=e[key].slice(n),e[key]=r}}var r=!0,n=function(e,t,r,n){if(!(t in e)||!(t in g)||0==t.indexOf("_"))return 0;if(1==r.length&&""==r[0])return 1;if(0==r.length)return 0;var i=e[t].toLowerCase();-1!=w.indexOf(t)&&(i=e["_"+t+"_HTML"]);for(var a=[],o=0;o<r.length;o++)for(var l=r[o],s=i.indexOf(l);-1!=s;){for(var f=r[o].length,c=e[t].slice(s,s+f),p="",u=0;u<f;u++)p+=" ";i=i.slice(0,s)+p+i.slice(s+f),a.push({replaceIndex:s,length:f,html:"<span class='u-textHighlight'>"+c+"</span>"}),o in n||(n[o]=g[t]),s=i.indexOf(l)}e._bits[t]=a},i="";function a(e,t){for(var r in e)if(""!=e[r])if(t instanceof Array){if(-1==t.indexOf(e[r]))return!1}else if(t.toLowerCase()!=e[r])return!1;return!0}var o=function(e,t,r){for(var n={},i=0;i<e.length;i++)0==e[i].indexOf(r+":")&&(n[i]=e[i].replace(r+":","").replace("+"," ").toLowerCase());for(var a in n)t.splice(a,1),e.splice(a,1);return n};function l(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var s=function(e){var t={};for(key in e)t[key]=e[key];return t._bits={},t};function f(e){C();var r=function(e){for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}(e.split(/\s+/g)),i=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toLowerCase());return t}(r),f=!k&&1==r.length&&""==r[0];if(function(e){for(var t=!1,r=0,n=e.length;r<n;r++)e[r].length>2&&(t=!0);return t}(i)||f){for(var c=y.length,p=o(r,i,"tag"),h=o(r,i,"category"),v=[];c>=1;){c--;var g=y[c],m=s(g),d=0;if(a(p,g._split_Tags)&&(l(p)||d++,a(h,g.Category))){l(h)||d++;var S={};if(f)d=1;else{for(var _ in g)n(m,_,i,S);for(var w in S)d+=S[w]}d>0&&v.push({priority:d,displayItem:m})}}var T=function(e,r){var n="",i=0;r||e.sort((function(e,t){return e.priority<t.priority?1:e.priority>t.priority?-1:0}));for(var a=0,o=e.length;a<o;a++){var l=e[a].displayItem;if(t(l),n+=x(l),++i>E)return n}return n}(v,f);""==T&&(T="<em style='padding-top:10px;'>"+apex.lang.getMessage("STATICSEARCH.NO_RESULTS_FOUND")+"</em>"),A(),u.html(T)}else u.html("<em>"+apex.lang.getMessage("STATICSEARCH.MINIMUM_LENGTH")+"</em>")}var c=!1;var p,u,h,v,g,y,m,d,x,S,_,k,w,C=function(){c||(c=!0,u.css("opacity",.5))},A=function(){c&&(c=!1,u.css("opacity",1))},T=function(){new Date;h||p.val(location.hash.substr(1).replace(/\s+/g," ").split("+").join(" ").trim()),h=!1,r&&(r=!1);var e=p.val().trim();if(""==e){if(m(),v.removeClass("is-enabled"),k)return void(i="")}else v.addClass("is-enabled"),d();e!=i&&(i=e,f(e))},I=function(){for(var e=S.length,t=0;t<e;t++)for(var r=S[t],n="_split_"+r,i=y.length-1;i>=0;){y[i][n]=y[i][r].split(",");for(var a=y[i][n].length,o=0;o<a;o++)y[i][n][o]=y[i][n][o].trim().split(" ").join("_").toLowerCase();i--}},O=function(e,t){for(var r in null==t&&(t=_),e){var n="#%"+r+"#%";-1!=t.indexOf(n)&&(t=t.split(n).join(e[r]))}return t=t.replace(/#%[^\s]+#%/g,"")},b=function(){for(var e=0;e<w.length;e++)for(var t="_"+w[e]+"_HTML",r=y.length-1;r>=0;r--){var n=y[r][w[e]];if(null!=n){var i=n.split(".").join(" ").split(/[<.*>]/),a=!1;"<"==n.charAt(0)&&(a=!0);for(var o="",l=0,s=i.length;l<s;l++)o+=a?i[l]:new Array(i[l].length+3).join(" "),a=!a;o=o.toLowerCase(),y[r][t]=o}}},E=5;return{initialize:function(t,r,n,a){var o=jQuery.extend({},{mapping:{},filterEmpty:!0,limit:5,onEmptySearch:function(){},onActiveSearch:function(){},getSearchResultAsHtml:function(e){return O(e,_)},template:"PASS IN A TEMPLATE HERE"},a);for(key in E=o.limit,k=o.filterEmpty,w=[],S=[],g={},o.mapping)g[key]=o.mapping[key].priority,o.mapping.html&&w.push(key),o.mapping.tag&&S.push(key);d=o.onActiveSearch,m=o.onEmptySearch,x=o.getSearchResultAsHtml,_=o.template,(p=$(t)).on("keydown",(function(t){!function(){p.val().trim()!=i&&C();null!=e&&clearTimeout(e);e=setTimeout((function(){h=!0,function(e){var t=$(window).scrollTop(),r=location.hash;location.hash="#"+e.replace(/\s+/g," ").trim().split(" ").join("+"),r==location.hash&&A();$(window).scrollTop(t)}(p.val())}),400)}(),13===(t.keyCode||t.which)&&t.preventDefault()})),$(window).on("hashchange",(function(){T()})),u=$(r),p.focus(),y=n,b(),I(o.tagMapping),(v=$('<button type="button" class="ls-Search-clear" id="clear_static_search_field" value="Clear Search" title="Clear Search"></button>')).click((function(){location.hash="#",v.removeClass("is-enabled"),T()})),p.after(v),k||""!=location.hash||(i="asfddaffd",location.hash="#"),T()},template:O}}();